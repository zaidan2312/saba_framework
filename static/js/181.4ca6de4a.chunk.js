(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[181,82],{1399:function(t,e,n){"use strict";n.r(e);var a=n(4),r=n(9),c=n(13),i=n(3),o=n.n(i),u=n(0),l=(n(1102),n(20)),s=n(294),d=n(123),p=n(31),b=n(302),f=n(95),v=n(159),j=n(2),h=Object(u.lazy)((function(){return Promise.all([n.e(5),n.e(70)]).then(n.bind(null,404))})),m=Object(u.lazy)((function(){return Promise.all([n.e(5),n.e(71)]).then(n.bind(null,405))})),O=Object(u.lazy)((function(){return Promise.all([n.e(1),n.e(4),n.e(5),n.e(52)]).then(n.bind(null,391))})),x=Object(u.lazy)((function(){return Promise.all([n.e(5),n.e(72)]).then(n.bind(null,406))})),g=Object(u.lazy)((function(){return n.e(179).then(n.bind(null,1014))})),y=function(t){t.loading;var e,n=Object(d.a)().layout,a=Object(b.b)(n),r=function(){var t=Object(p.i)();return t?Object(p.g)(t.role_name):"/login"},i=Object(l.i)([{path:"/",index:!0,element:Object(j.jsx)(l.a,{replace:!0,to:r()})},{path:"/login",element:Object(j.jsx)(s.a,{}),children:[{path:"/login",element:Object(j.jsx)(O,{})}]},{path:"/auth/not-auth",element:Object(j.jsx)(s.a,{}),children:[{path:"/auth/not-auth",element:Object(j.jsx)(x,{})}]},{path:"/error",element:Object(j.jsx)(s.a,{}),children:[{path:"/error",element:Object(j.jsx)(h,{})}]},{path:"/public/:pageId",element:Object(j.jsx)(g,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"/public/:moduleId/:pageId",element:Object(j.jsx)(g,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"*",element:Object(j.jsx)(s.a,{}),children:[{path:"*",element:Object(j.jsx)(f.a,{})}]}].concat(Object(c.a)(a))),o=Object(l.i)([{path:"/",index:!0,element:Object(j.jsx)(l.a,{replace:!0,to:r()})},{path:"/login",element:Object(j.jsx)(s.a,{}),children:[{path:"/login",element:Object(j.jsx)(O,{})}]},{path:"/auth/not-auth",element:Object(j.jsx)(s.a,{}),children:[{path:"/auth/not-auth",element:Object(j.jsx)(x,{})}]},{path:"/error",element:Object(j.jsx)(s.a,{}),children:[{path:"/error",element:Object(j.jsx)(m,{})}]},{path:"/public/:pageId",element:Object(j.jsx)(g,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"/public/:moduleId/:pageId",element:Object(j.jsx)(g,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"*",element:Object(j.jsx)(s.a,{}),children:[{path:"*",element:Object(j.jsx)(h,{})}]}]);return(null===(e=v.a.getState())||void 0===e?void 0:e.my_menu.dataMyMenu.length)>0?i:o},U=n(16),w=n(119),k=n(52),S=n(32),I=n(352),_=n(100),D=n(1103),A=Object.keys(D).filter((function(t){return"fas"!==t&&"prefix"!==t})).map((function(t){return D[t]}));_.b.add.apply(_.b,Object(c.a)(A));e.default=function(){var t=Object(U.b)(),e=Object(u.useRef)(!1),n=Object(l.f)();var c=Object(u.useState)(!0),i=Object(r.a)(c,2);i[0],i[1];function s(){return d.apply(this,arguments)}function d(){return d=Object(a.a)(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.parse(null!==(e=sessionStorage.getItem("serversList"))&&void 0!==e?e:"[]"),t.next=3,Promise.all(null===n||void 0===n?void 0:n.map(function(){var t=Object(a.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e,{method:"HEAD"});case 3:return n=t.sent,t.abrupt("return",n.ok);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}return Object(u.useEffect)((function(){if(null!==Object(p.k)()&&"/error"!==window.location.pathname){var t=null,e=function(){var e=new Date;if(document.hidden)localStorage.setItem("inactive",Date.parse(e)/1e3),clearInterval(t);else{var n=localStorage.getItem("inactive"),a=parseInt(n,10),r=new Date(1e3*a),c=Math.abs(e.getTime()-r.getTime())/1e3;c>=15?(console.log("Fetching data after ".concat(c," seconds of inactivity")),v.a.dispatch(Object(k.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var e,n,a=null!==(e=null===t||void 0===t||null===(n=t.payload[0])||void 0===n?void 0:n.count_unread)&&void 0!==e?e:0;if(a){var r=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(r," ").concat(document.title.replaceAll(r,"")),s()}}}))):t=setInterval((function(){var n=Math.abs(e.getTime()-r.getTime())/1e3;n>=15&&(console.log("Fetching data after ".concat(n," seconds of inactivity")),v.a.dispatch(Object(k.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var e,n,a=null!==(e=null===t||void 0===t||null===(n=t.payload[0])||void 0===n?void 0:n.count_unread)&&void 0!==e?e:0;if(a){var r=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(r," ").concat(document.title.replaceAll(r,""))}s()}})),clearInterval(t))}),1e3)}};return document.addEventListener("visibilitychange",e),function(){clearInterval(t),document.removeEventListener("visibilitychange",e)}}}),[]),Object(u.useEffect)((function(){return e.current||t(Object(w.b)({})).then((function(t){var e,a,r,c,i,o,u,l,s,d=null===(e=t.payload)||void 0===e||null===(a=e.app)||void 0===a?void 0:a.logo;(null!==d&&void 0!==d&&d.favicon||null!==(r=t.payload)&&void 0!==r&&null!==(c=r.unit)&&void 0!==c&&null!==(i=c.unit_app_attributes)&&void 0!==i&&i.favicon)&&(document.getElementById("favicon").href=null!==(o=null===(u=t.payload)||void 0===u||null===(l=u.unit)||void 0===l||null===(s=l.unit_app_attributes)||void 0===s?void 0:s.favicon)&&void 0!==o?o:d.favicon);"/error"!==window.location.pathname&&null!==Object(p.k)()&&v.a.dispatch(Object(S.getAppMenu)({})).then((function(t){var e;"rejected"!==(null===t||void 0===t||null===(e=t.meta)||void 0===e?void 0:e.requestStatus)?(v.a.dispatch(Object(I.getUnits)({})),setTimeout((function(){v.a.dispatch(Object(k.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var e,n,a=null!==(e=null===t||void 0===t||null===(n=t.payload[0])||void 0===n?void 0:n.count_unread)&&void 0!==e?e:0;if(a){var r=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(r," ").concat(document.title)}}}))}),2e3)):(localStorage.setItem("lastUrl",window.location.href),n("/error"))}))})),function(){e.current=!0}}),[]),Object(j.jsx)(u.Suspense,{fallback:Object(j.jsx)(f.a,{}),children:Object(j.jsx)(y,{})})}},352:function(t,e,n){"use strict";n.r(e),n.d(e,"setUnitSelectedDropdown",(function(){return d})),n.d(e,"getUnits",(function(){return p})),n.d(e,"getUnit",(function(){return b})),n.d(e,"addUnit",(function(){return f})),n.d(e,"deleteUnit",(function(){return v})),n.d(e,"MyUnitsSlice",(function(){return j}));var a=n(6),r=n(4),c=n(3),i=n.n(c),o=n(5),u=n(15),l=n(31),s={value:"",label:"Select Unit"},d=Object(o.b)("Units/setUnitSelectedDropdown",(function(t){return t})),p=Object(o.b)("Units/getUnits",function(){var t=Object(r.a)(i.a.mark((function t(e,n){var a,r,c,o,s,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.rejectWithValue,e.flat_mode=!0,null===Object(l.k)()){t.next=38;break}return t.next=5,JSON.parse(localStorage.getItem("userData")).member_of;case 5:if(t.t1=r=t.sent,t.t0=null!==t.t1,!t.t0){t.next=9;break}t.t0=void 0!==r;case 9:if(!t.t0){t.next=13;break}t.t2=r,t.next=14;break;case 13:t.t2=[];case 14:if(!((c=t.t2).length>0)){t.next=28;break}if(o=!1,c.some((function(t){return t.children_count>0}))&&(o=!0),!o){t.next=25;break}return t.next=21,u.a.ssoAxiosInterceptor.get("/api/unit",{params:e});case 21:return s=t.sent,t.abrupt("return",{params:e,data:s.data.data,total:s.data.total});case 25:return t.abrupt("return",{data:c});case 26:t.next=38;break;case 28:return t.prev=28,t.next=31,u.a.ssoAxiosInterceptor.get("/api/unit",{params:e});case 31:return d=t.sent,t.abrupt("return",{params:e,data:d.data.data,total:d.data.total});case 35:return t.prev=35,t.t3=t.catch(28),t.abrupt("return",a(t.t3.response.data));case 38:case"end":return t.stop()}}),t,null,[[28,35]])})));return function(e,n){return t.apply(this,arguments)}}()),b=Object(o.b)("Units/getUnit",function(){var t=Object(r.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/unit/".concat(e));case 2:return n=t.sent,t.abrupt("return",n.data.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),f=Object(o.b)("Units/addUnit",function(){var t=Object(r.a)(i.a.mark((function t(e,n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.dispatch,r=n.getState,t.next=3,axios.post("/api/unit",e);case 3:return t.next=5,a(p(r().units.params));case 5:return t.next=7,a(getAllUnit());case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),v=Object(o.b)("Units/deleteUnit",function(){var t=Object(r.a)(i.a.mark((function t(e,n){var a,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.dispatch,r=n.getState,t.next=3,axios.delete("/apps/unit",{id:e});case 3:return t.next=5,a(p(r().units.params));case 5:return t.next=7,a(getAllUnit());case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),j=Object(o.c)({name:"Units",initialState:{crudTitle:"Unit",statusSummary:0,isLoadingSummary:!1,errorSummary:0,dataSummary:[],status:0,isLoading:!1,error:0,data:[],total:1,dataDropdown:[],selectedUnit:{},selectedUnitMulti:[]},reducers:{setUnitSelected:function(t,e){return console.log("setUnitSelected"),Object(a.a)(Object(a.a)({},t),{},{selectedUnit:e.payload})},resetAll:function(t){t.data=[],t.dataDropdown=[],t.total=1,t.selectedUnit=null,t.selectedUnitMulti=null}},extraReducers:function(t){t.addCase(d.fulfilled,(function(t,e){return console.log("setUnitSelectedDropdown"),Object(a.a)(Object(a.a)({},t),{},{selectedUnit:e.payload})})).addCase(p.pending,(function(t){t.status="loading",t.isLoading=!0})).addCase(p.fulfilled,(function(t,e){var n,a;(t.status="succeeded",t.isLoading=!1,null!==(n=e.payload)&&void 0!==n&&n.data)&&(t.data=e.payload.data,t.dataDropdown=e.payload.data.map((function(t){return{value:t.id,label:t.name}})),t.dataDropdown.unshift(s),null!==(a=e.payload)&&void 0!==a&&a.total&&(t.total=e.payload.total),t.selectedUnit=t.dataDropdown[0])})).addCase(p.rejected,(function(t,e){t.status="failed",t.isLoading=!1,t.error=e.error.message})).addCase(b.fulfilled,(function(t,e){t.selectedUnit=e.payload}))}});e.default=j.reducer}}]);
//# sourceMappingURL=181.4ca6de4a.chunk.js.map