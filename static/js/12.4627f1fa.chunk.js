(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[12,75,169,170],{166:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(9),l=a(0),c=a(21),r=a(82),i=a(10),o=a(121),u=a(573),d=a(216),m=(a(125),a(160),a(83)),j=a(31),b=a(7),f=a.n(b),h=a(60),O=a.n(h),p=a(217),v=a(576),x=a.n(v),g=a(578),N=a(87),y=a(86),_=a(126),w=a(14),S=a(2);x()(O.a);t.default=function(e){var t,a,b,h,O=e.show,v=e.setShow,x=e.detailPage,C=Object(l.useState)([]),D=Object(s.a)(C,2),k=(D[0],D[1],Object(l.useState)([])),P=Object(s.a)(k,2),A=P[0],E=P[1],U=Object(l.useState)(null),L=Object(s.a)(U,2),z=L[0],F=L[1],T=Object(l.useState)([]),V=Object(s.a)(T,2),B=V[0],q=V[1],I=Object(l.useState)(!1),M=Object(s.a)(I,2),W=(M[0],M[1]),Y=Object(o.a)().t,H=Object(c.g)().id,J=Object(w.b)(),R=Object(w.c)((function(e){return e.users})),X=Object(w.c)((function(e){return e.units})),Z=Object(w.c)((function(e){return e.roles})),Q=Object(l.useContext)(m.a).colors,$=Object(l.useState)(R.selectedUser),G=Object(s.a)($,2),K=G[0],ee=G[1],te=Object(g.e)({defaultValues:{username:null===K||void 0===K?void 0:K.username,name:null===K||void 0===K?void 0:K.name,phone:null!==(t=null===K||void 0===K?void 0:K.phone)&&void 0!==t?t:""}}),ae=te.reset,ne=te.control,se=te.setError,le=te.handleSubmit,ce=te.formState.errors,re=function(){return Object(S.jsxs)(l.Fragment,{children:[Object(S.jsx)(d.a,{}),Object(S.jsxs)(i.q,{className:"mb-0 mt-1 text-white",children:[Y("Please Wait"),"..."]})]})};return Object(l.useEffect)((function(){ee(R.selectedUser),0!==X.data.length||X.isLoading||(J(Object(y.getUnits)()),ee(R.selectedUser)),0!==(null===Z||void 0===Z?void 0:Z.data.length)||Z.isLoading||J(Object(_.getData)()),0!==(null===R||void 0===R?void 0:R.data_employee.length)||R.isLoading_employee||(J(Object(N.getDataEmployee)({length:200})),R.data_employee&&null!==K&&void 0!==K&&K.id_employee&&q(R.data_employee.filter((function(e){return e.id===(null===K||void 0===K?void 0:K.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))),F(null===K||void 0===K?void 0:K.id_role)}),[]),Object(S.jsx)(i.E,{isOpen:O,toggle:function(){return v(!O)},className:"modal-dialog-centered modal-lg",children:Object(S.jsxs)(u.a,{blocking:(R.isLoadingAddEdit||R.isLoadingDetail)&&!R.selectedUser,loader:Object(S.jsx)(re,{}),children:[Object(S.jsx)(i.H,{className:"bg-transparent",toggle:function(){return v(!O)}}),Object(S.jsxs)(i.F,{className:"px-sm-5 pt-50 pb-5",children:[Object(S.jsxs)("div",{className:"text-center mb-2",children:[Object(S.jsxs)("h1",{className:"mb-1",children:[Y("Edit")," ",Y("User Information")]}),Object(S.jsx)("p",{children:Y("Updating user details will receive a privacy audit.")})]}),Object(S.jsx)(i.x,{onSubmit:le((function(e){if(function(e){var t,a=null!==K.member_of?null===K||void 0===K?void 0:K.member_of.map((function(e){return{value:e.id,label:e.name}})):[],n=K.name!==e.name||K.username!==e.username||(null!==(t=K.phone)&&void 0!==t?t:"")!==e.phone||JSON.stringify(a)!==JSON.stringify(A)||z!==K.id_role;return W(!0),n}(e))if(Object.values(e).every((function(e){return e.length>0||""===e})))""===e.phone&&delete e.phone,e.id=null!==H&&void 0!==H?H:K.id,e.id_role=z,e.id_employee=null===B||void 0===B?void 0:B.id,e.member_of=A,J(Object(N.updateUser)(e)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!O),r.b.success("".concat(Y("Successfully Updated Data")),{style:{padding:"16px",color:Q.success.main,border:"1px solid ".concat(Q.success.main)},iconTheme:{primary:Q.success.main}}),x&&J(Object(N.getUser)(H))):"rejected"===e.meta.requestStatus&&r.b.error(JSON.stringify(e.payload),{style:{padding:"16px",color:Q.danger.main,border:"1px solid ".concat(Q.danger.main)},iconTheme:{primary:Q.danger.main}})}));else for(var t in e){var a;0===(null===(a=e[t])||void 0===a?void 0:a.length)&&se(t,{type:"manual"})}else Object(r.b)("".concat(Y("You haven't changed anything")),{icon:"\ud83d\udc4f"})})),children:Object(S.jsxs)(i.Q,{className:"gy-1 pt-75",children:[Object(S.jsxs)(i.s,{md:12,xs:12,children:[Object(S.jsx)(i.D,{className:"form-label",for:"name",children:Y("Full Name")}),Object(S.jsx)(g.a,{defaultValue:"",control:ne,id:"name",name:"name",render:function(e){var t=e.field;return Object(S.jsx)(i.A,Object(n.a)(Object(n.a)({},t),{},{id:"name",placeholder:"John",invalid:ce.name&&!0}))}})]}),Object(S.jsxs)(i.s,{md:6,xs:12,children:[Object(S.jsxs)(i.D,{className:"form-label",for:"username",children:[Y("Username"),":"]}),Object(S.jsx)(g.a,{defaultValue:"",control:ne,id:"username",name:"username",render:function(e){var t=e.field;return Object(S.jsx)(i.A,Object(n.a)(Object(n.a)({},t),{},{id:"username",placeholder:"john.doe.007",invalid:ce.username&&!0}))}})]}),Object(S.jsxs)(i.s,{md:6,xs:12,children:[Object(S.jsxs)(i.D,{className:"form-label",for:"email",children:[Y("Email"),":"]}),Object(S.jsx)(i.A,{type:"email",id:"email",disabled:!0,defaultValue:null===K||void 0===K?void 0:K.email,placeholder:"example@domain.com"})]}),Object(S.jsxs)(i.s,{md:6,xs:12,children:[Object(S.jsx)(i.D,{className:"form-label",for:"phone",children:Y("Contact")}),Object(S.jsx)(g.a,{defaultValue:"",control:ne,id:"phone",name:"phone",render:function(e){var t=e.field;return Object(S.jsx)(i.A,Object(n.a)(Object(n.a)({},t),{},{value:(null===K||void 0===K?void 0:K.phone)||"",id:"phone",placeholder:"+62 813 940 10XX X"}))}})]}),Object(S.jsxs)(i.s,{md:6,xs:12,children:[Object(S.jsx)(i.D,{className:"form-label",for:"id_role",children:Y("Role")}),Object(S.jsx)(p.a,{id:"id_role",theme:j.w,defaultValue:Z.data.filter((function(e){return e.id===(null===K||void 0===K?void 0:K.id_role)})).map((function(e){return{value:e.id,label:e.name}})),onChange:function(e){F(e.value)},options:Z.data.map((function(e){return{value:e.id,label:e.name}})),className:f()("react-select",{"is-invalid":null===z}),classNamePrefix:"select"})]}),Object(S.jsxs)(i.s,{md:12,xs:12,children:[Object(S.jsx)(i.D,{className:"form-label",for:"id_employee",children:Y("Employee")}),Object(S.jsx)(p.a,{id:"id_employee",isClearable:!0,isLoading:R.isLoading_employee,theme:j.w,defaultValue:null!==(a=R.data_employee.filter((function(e){return e.id===(null===K||void 0===K?void 0:K.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))&&void 0!==a?a:"",onChange:function(e){var t;t=e,q(Array.isArray(t)?t.map((function(e){return e.value})):[])},options:R.data_employee.map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})),className:"react-select",classNamePrefix:"select"})]}),Object(S.jsxs)(i.s,{md:12,xs:12,children:[Object(S.jsx)(i.D,{className:"form-label",for:"member_of",children:Y("Unit")}),Object(S.jsx)(p.a,{id:"member_of",isClearable:!1,theme:j.w,closeMenuOnSelect:!1,defaultValue:null!==(b=R.selectedUser)&&void 0!==b&&b.member_of?null===(h=R.selectedUser)||void 0===h?void 0:h.member_of.map((function(e){return{value:e.id,label:e.name}})):[],onChange:function(e){var t;t=e,E(Array.isArray(t)?t.map((function(e){return e.value})):[])},isMulti:!0,options:X.data.map((function(e){return{value:e.id,label:e.name}})).filter((function(e){return""!==e.value})),className:"react-select",classNamePrefix:"select"})]}),Object(S.jsxs)(i.s,{xs:12,className:"text-center mt-2 pt-50",children:[Object(S.jsx)(i.i,{type:"submit",className:"me-1",color:"primary",children:Y("Submit")}),Object(S.jsx)(i.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){ae({username:null===K||void 0===K?void 0:K.username,name:null===K||void 0===K?void 0:K.name}),v(!1)},children:Y("Cancel")})]})]})})]})]})})}},402:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(9),l=a(0),c=a(8),r=a(37),i=a(146),o=a(7),u=a.n(o),d=a(51),m=a.n(d),j=a(10),b=a(2),f=["open","size","title","width","children","closeBtn","className","toggleSidebar","bodyClassName","contentClassName","wrapperClassName","headerClassName"],h=function(e){var t,a=e.open,s=e.size,l=e.title,o=e.width,d=e.children,h=e.closeBtn,O=e.className,p=e.toggleSidebar,v=e.bodyClassName,x=e.contentClassName,g=e.wrapperClassName,N=e.headerClassName,y=Object(r.a)(e,f),_=h||Object(b.jsx)(i.a,{className:"cursor-pointer",size:15,onClick:p});return Object(b.jsxs)(j.E,Object(n.a)(Object(n.a)(Object(n.a)({isOpen:a,toggle:p,contentClassName:u()("overflow-hidden",Object(c.a)({},x,x)),modalClassName:u()("modal-slide-in",Object(c.a)({},g,g)),className:u()((t={},Object(c.a)(t,O,O),Object(c.a)(t,"sidebar-lg","lg"===s),Object(c.a)(t,"sidebar-sm","sm"===s),t))},void 0!==o?{style:{width:String(o)+"px"}}:{}),y),{},{children:[Object(b.jsx)(j.H,{className:u()(Object(c.a)({},N,N)),toggle:p,close:_,tag:"div",children:Object(b.jsx)("h5",{className:"modal-title",children:Object(b.jsx)("span",{className:"align-middle",children:l})})}),Object(b.jsx)(m.a,{options:{wheelPropagation:!1},children:Object(b.jsx)(j.F,{className:u()("flex-grow-1",Object(c.a)({},v,v)),children:d})})]}))},O=a(31),p=a(217),v=a(578),x=a(87),g=a(14),N=a(82),y=a(121),_=a(83),w=a(598),S={email:"",password:"",phone:"",member_of:"",id_role:"",name:"",username:""};t.default=function(e){var t=e.open,a=e.toggleSidebar,c=Object(y.a)().t,r=Object(l.useContext)(_.a).colors,i=Object(l.useState)({}),o=Object(s.a)(i,2),d=(o[0],o[1]),m=Object(l.useState)(3),f=Object(s.a)(m,2),C=f[0],D=f[1],k=Object(l.useState)([]),P=Object(s.a)(k,2),A=P[0],E=P[1],U=(Object(g.c)((function(e){return e.users})),Object(g.c)((function(e){return e.roles}))),L=Object(g.c)((function(e){return e.units})),z=Object(g.b)(),F=Object(v.e)({defaultValues:S}),T=F.control,V=F.setValue,B=F.setError,q=F.handleSubmit,I=F.formState.errors;return Object(l.useEffect)((function(){var e=L.data.map((function(e){return{value:e.id,label:e.name}}));E([e[0]])}),[z,L.data.length]),Object(b.jsx)(h,{size:"lg",open:t,title:c("New User"),headerClassName:"mb-1",contentClassName:"pt-0",toggleSidebar:a,onClosed:function(){for(var e in S)V(e,"")},children:Object(b.jsxs)(j.x,{onSubmit:q((function(e){if(e.member_of=null!==A?A.map((function(e){return e.value})):[],e.id_role=null!==C?C:null,d(e),function(e){return Object.values(e).every((function(e){return"object"===typeof e||"member_of"!==e?null!==e&&""!==e:e.length>0}))}(e))z(Object(x.addUser)({id_role:null===e||void 0===e?void 0:e.id_role,avatar:"",status:1,email:e.email,member_of:null===e||void 0===e?void 0:e.member_of,phone:e.phone,name:e.name,username:e.username,password:e.password})).then((function(e){if("fulfilled"===e.meta.requestStatus)a(),N.b.success("".concat(c("Successfully Create Data")),{style:{padding:"16px",color:r.success.main,border:"1px solid ".concat(r.success.main)},iconTheme:{primary:r.success.main}});else if("rejected"===e.meta.requestStatus){var t="";e.payload.errors?t=Object.values(e.payload.errors):e.payload.error_reason&&(t=e.payload.message),N.b.error("".concat(c(t)),{style:{padding:"16px",color:r.danger.main,border:"1px solid ".concat(r.danger.main)},iconTheme:{primary:r.danger.main}})}}));else for(var t in e)null!==e[t]&&0===e[t].length&&B(t,{type:"manual"})})),children:[Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsxs)(j.D,{className:"form-label",for:"name",children:[c("Full Name"),Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(v.a,{defaultValue:"",control:T,rules:{required:!0,pattern:{value:/^[a-zA-Z\s]*$/,message:c("Invalid name, you can only use letters")}},id:"name",name:"name",render:function(e){var t=e.field;return Object(b.jsx)(j.A,Object(n.a)(Object(n.a)({},t),{},{id:"name",placeholder:"John",invalid:I.name&&!0}))}}),I.name&&Object(b.jsx)(j.z,{color:"danger",children:c(I.name.message)})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsxs)(j.D,{className:"form-label",for:"email",children:[c("Email")," ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(v.a,{name:"email",control:T,rules:{required:{value:!0,message:c("You need to specify a valid email address")},pattern:{value:/^\S+@\S+$/i,message:c("Not valid email adreess.")}},render:function(e){var t=e.field;return Object(b.jsx)(j.A,Object(n.a)({type:"email",id:"email",placeholder:"john.doe@example.com",invalid:I.email&&!0},t))}}),Object(b.jsx)(j.z,{color:"muted",children:c("You can use letters, numbers & periods")})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsxs)(j.D,{className:"form-label",for:"username",children:[c("Username"),Object(b.jsx)("span",{className:"text-danger",children:"*"})]}),Object(b.jsx)(v.a,{defaultValue:"",control:T,rules:{required:!0,minLength:{value:4,message:c("minimum number of character is 4")},maxLength:{value:15,message:c("maximum number of character is 15")},pattern:{value:/^[a-zA-Z0-9]+([a-zA-Z0-9](_|-| )[a-zA-Z0-9])*[a-zA-Z0-9]+$/,message:c("You can use letters and numbers without white space")}},id:"username",name:"username",render:function(e){var t=e.field;return Object(b.jsx)(j.A,Object(n.a)(Object(n.a)({},t),{},{id:"username",placeholder:"john.doe.007",invalid:I.username&&!0}))}}),I.username&&Object(b.jsx)(j.z,{color:"danger",children:c(I.username.message)})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)("div",{className:"d-flex justify-content-between",children:Object(b.jsxs)(j.D,{className:"form-label",for:"login-password",children:[c("Password")," ",Object(b.jsx)("span",{className:"text-danger",children:"*"})]})}),Object(b.jsx)(v.a,{defaultValue:"",id:"password",name:"password",control:T,rules:{required:{value:!0,message:c("Password is required")},minLength:{value:8,message:c("Password must have at least 8 characters")}},render:function(e){var t=e.field;return Object(b.jsx)(w.a,Object(n.a)({className:"input-group-merge",invalid:I.password&&!0},t))}}),I.password&&Object(b.jsx)(j.z,{color:"danger",children:c(I.password.message)})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)(j.D,{className:"form-label",for:"phone",children:c("Mobile Phone Number")}),Object(b.jsx)(v.a,{defaultValue:"",control:T,rules:{required:!1,pattern:{value:/^[0-9+-]+$/,message:"This is not a valid mobile phone, try again!"},minLength:{value:6,message:"This number is too short."},maxLength:{value:14,message:"...And now it's too long."}},id:"phone",name:"phone",render:function(e){var t=e.field;return Object(b.jsx)(j.A,Object(n.a)(Object(n.a)({},t),{},{id:"phone",placeholder:"+62 813 940 10XX X"}))}}),I.phone&&Object(b.jsx)(j.z,{color:"danger",children:c(I.phone.message)})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)(j.D,{className:"form-label",for:"id_unit",children:c("Unit")}),Object(b.jsx)(p.a,{id:"id_unit",isClearable:!1,theme:O.w,closeMenuOnSelect:!1,onChange:function(e){E(e)},defaultValue:L.data.map((function(e){return{value:e.id,label:e.name}}))[0],isMulti:!0,options:L.data.map((function(e){return{value:e.id,label:e.name}})),className:"react-select",classNamePrefix:"select"})]}),Object(b.jsxs)("div",{className:"mb-1",children:[Object(b.jsx)(j.D,{for:"role-select",children:c("Role")}),Object(b.jsx)(p.a,{id:"id_role",isClearable:!1,options:U.data.map((function(e){return{value:e.id,label:e.name}})),defaultValue:{label:"editor",vaue:3},classNamePrefix:"select",className:u()("react-select",{"is-invalid":null===C}),theme:O.w,onChange:function(e){D(e.value)}})]}),Object(b.jsx)(j.i,{type:"submit",className:"me-1",color:"primary",children:c("Submit")}),Object(b.jsx)(j.i,{type:"reset",color:"secondary",outline:!0,onClick:a,children:c("Cancel")})]})})}},405:function(e,t,a){"use strict";a.r(t);var n=a(9),s=a(0),l=a(26),c=a(121),r=a(79),i=a(402),o=a(166),u=a(31),d=a(36),m=a(87),j=a(126),b=a(14),f=a(217),h=a(594),O=a.n(h),p=a(597),v=a.n(p),x=a(324),g=a(316),N=a(289),y=a(293),_=a(290),w=a(275),S=a(338),C=a(287),D=a(283),k=a(322),P=a(327),A=a(308),E=a(257),U=a(331),L=a(269),z=a(573),F=a(216),T=a(83),V=a(823),B=a(82),q=a(10),I=(a(218),a(580),a(60)),M=a.n(I),W=a(576),Y=a.n(W),H=a(65),J=a(125),R=a.n(J),X=a(2),Z=Y()(M.a),Q=function(e){var t=e.store,a=e.toggleSidebar,n=e.handlePerPage,l=e.rowsPerPage,i=e.handleFilter,o=e.searchTerm,u=Object(c.a)().t,d=Object(s.useContext)(r.a);function m(e){var a=document.createElement("a"),n=function(e){var a,n=Object.keys(t.data[0]);return a="",a+=n.join(","),a+="\n",e.forEach((function(e){var t=0;n.forEach((function(n){t>0&&(a+=","),a+=e[n],t++})),a+="\n"})),a}(e);if(null!==n){n.match(/^data:text\/csv/i)||(n="data:text/csv;charset=utf-8,".concat(n)),a.setAttribute("href",encodeURI(n)),a.setAttribute("download","export.csv"),a.click()}}return Object(X.jsx)("div",{className:"invoice-list-table-header w-100 me-1 ms-50 mt-2 mb-75",children:Object(X.jsxs)(q.Q,{children:[Object(X.jsx)(q.s,{xl:"6",className:"d-flex align-items-center p-0",children:Object(X.jsxs)("div",{className:"d-flex align-items-center w-100",children:[Object(X.jsx)("label",{htmlFor:"rows-per-page",children:u("Show")}),Object(X.jsxs)(q.A,{className:"mx-50",type:"select",id:"rows-per-page",value:l,onChange:n,style:{width:"5rem"},children:[Object(X.jsx)("option",{value:"10",children:"10"}),Object(X.jsx)("option",{value:"25",children:"25"}),Object(X.jsx)("option",{value:"50",children:"50"})]}),Object(X.jsx)("label",{htmlFor:"rows-per-page",children:u("Entries")})]})}),Object(X.jsxs)(q.s,{xl:"6",className:"d-flex align-items-sm-center justify-content-xl-end justify-content-start flex-xl-nowrap flex-wrap flex-sm-row flex-column pe-xl-1 p-0 mt-xl-0 mt-1",children:[Object(X.jsxs)("div",{className:"d-flex align-items-center mb-sm-0 mb-1 me-1",children:[Object(X.jsxs)("label",{className:"mb-0",htmlFor:"search-invoice",children:[u("Search"),":"]}),Object(X.jsx)(q.A,{id:"search-invoice",className:"ms-50 w-100",type:"text",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(X.jsxs)("div",{className:"d-flex align-items-center table-header-actions",children:[Object(X.jsxs)(q.W,{className:"me-1",children:[Object(X.jsxs)(q.w,{color:"secondary",caret:!0,outline:!0,children:[Object(X.jsx)(x.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:u("Export")})]}),Object(X.jsxs)(q.v,{children:[Object(X.jsxs)(q.u,{className:"w-100",children:[Object(X.jsx)(g.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:"Print"})]}),Object(X.jsxs)(q.u,{className:"w-100",onClick:function(){return m(t.data)},children:[Object(X.jsx)(N.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:"CSV"})]}),Object(X.jsxs)(q.u,{className:"w-100",children:[Object(X.jsx)(y.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:"Excel"})]}),Object(X.jsxs)(q.u,{className:"w-100",children:[Object(X.jsx)(_.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:"PDF"})]}),Object(X.jsxs)(q.u,{className:"w-100",children:[Object(X.jsx)(w.a,{className:"font-small-4 me-50"}),Object(X.jsx)("span",{className:"align-middle",children:"Copy"})]})]})]}),d.can("post",sessionStorage.getItem("current_page_perm"))?Object(X.jsxs)(q.i,{className:"add-new-user",color:"primary",onClick:a,children:[u("Add New")," ",u(t.crudTitle)]}):null]})]})]})})};t.default=function(){var e,t,a,h,p=Object(b.b)(),x=Object(b.c)((function(e){return e.users})),g=Object(b.c)((function(e){return e.units})),y=Object(b.c)((function(e){return e.roles})),_=Object(c.a)().t,w=Object(s.useContext)(r.a),I=Object(s.useContext)(T.a).colors,M=Object(s.useState)("desc"),W=Object(n.a)(M,2),Y=W[0],J=W[1],$=Object(s.useState)(""),G=Object(n.a)($,2),K=G[0],ee=G[1],te=Object(s.useState)(null!==(e=null===(t=x.params)||void 0===t?void 0:t.page)&&void 0!==e?e:1),ae=Object(n.a)(te,2),ne=ae[0],se=ae[1],le=Object(s.useState)("id"),ce=Object(n.a)(le,2),re=ce[0],ie=ce[1],oe=Object(s.useState)(null!==(a=null===(h=x.params)||void 0===h?void 0:h.length)&&void 0!==a?a:10),ue=Object(n.a)(oe,2),de=ue[0],me=ue[1],je=Object(s.useState)(!1),be=Object(n.a)(je,2),fe=be[0],he=be[1],Oe=Object(s.useState)({value:"",label:"".concat(_("Select")," ").concat(_("Role"))}),pe=Object(n.a)(Oe,2),ve=pe[0],xe=pe[1],ge=Object(s.useState)({value:"",label:"".concat(_("Select")," ").concat(_("Unit"))}),Ne=Object(n.a)(ge,2),ye=Ne[0],_e=Ne[1],we=Object(s.useState)({value:"",label:"".concat(_("Select")," Status"),number:0}),Se=Object(n.a)(we,2),Ce=Se[0],De=Se[1],ke=Object(s.useState)([]),Pe=Object(n.a)(ke,2),Ae=Pe[0],Ee=Pe[1],Ue=Object(s.useState)(!1),Le=Object(n.a)(Ue,2),ze=Le[0],Fe=Le[1],Te=Object(s.useState)(!1),Ve=Object(n.a)(Te,2),Be=Ve[0],qe=Ve[1],Ie=function(){he(!fe),Object(u.v)()},Me=function(){he(!fe),Object(u.p)(Ie)};Object(s.useEffect)((function(){if(0!==(null===y||void 0===y?void 0:y.data.length)||y.isLoading){var e=y.data.map((function(e){return{value:e.id,label:e.name}}));e.unshift({value:"",label:"".concat(_("Select")," ").concat(_("Role"))}),Ee(e)}else p(Object(j.getData)()).then((function(e){if(e.data){var t=e.payload.data.map((function(e){return{value:e.id,label:e.name}}));t.unshift({value:"",label:"".concat(_("Select")," ").concat(_("Role"))}),Ee(t)}}));0!==x.data.length||x.isLoading||p(Object(m.getData)({sort_dir:Y,sort:re,search:K,page:ne,length:de,filter_role:ve.value,filter_status:Ce.value,filter_unit:ye.value}))}),[p,x.data.length,g.data.length,y.data.length,Y,re,ne]);var We={pending:"light-warning",active:"light-success",inactive:"light-secondary"},Ye=function(e){return e.avatar?Object(X.jsx)(d.a,{className:"me-1",img:e.avatar,width:"32",height:"32"}):Object(X.jsx)(d.a,{initials:!0,className:"me-1",color:e.avatarColor||"light-primary",content:e.name||"John Doe"})},He=[{name:_("User"),sortable:!0,minWidth:"400px",sortField:"name",selector:function(e){return e.name},cell:function(e){return Object(X.jsxs)("div",{className:"d-flex justify-content-left align-items-center",children:[Ye(e),Object(X.jsxs)("div",{className:"d-flex flex-column",children:[Object(X.jsx)(l.b,{to:"/apps/user/view/".concat(e.id),className:"user_name text-truncate text-body",children:Object(X.jsx)("span",{className:"fw-bolder",children:e.name})}),Object(X.jsx)("small",{className:"text-truncate text-muted mb-0",children:e.email})]})]})}},{name:_("Role"),sortable:!0,minWidth:"200px",sortField:"role_name",selector:function(e){return e.role_name},cell:function(e){return function(e){var t={public:{class:"text-primary",icon:S.a},viewer:{class:"text-success",icon:C.a},editor:{class:"text-info",icon:D.a},admin:{class:"text-warning",icon:k.a},super_user:{class:"text-danger",icon:P.a}},a=t[e.role_name]?t[e.role_name].icon:D.a;return Object(X.jsxs)("span",{className:"text-truncate text-capitalize align-middle",children:[Object(X.jsx)(a,{size:18,className:"".concat(t[e.role_name]?t[e.role_name].class:""," me-50")}),e.role_name]})}(e)}},{name:_("Joined Date"),minWidth:"230px",sortable:!0,sortField:"joined_date",selector:function(e){return e.billing},cell:function(e){return Object(X.jsx)("span",{className:"text-capitalize",children:R()(e.joined_date).format("DD MMM YYYY")})}},{name:_("Status"),minWidth:"120px",sortable:!0,sortField:"status",selector:function(e){return e.is_active},cell:function(e){return Object(X.jsx)(q.f,{className:"text-capitalize",color:We[e.is_active?"active":"inactive"],pill:!0,children:e.is_active?_("active"):_("inactive")})}},{name:_("Actions"),width:"130px",cell:function(e){return Object(X.jsx)("div",{className:"column-action text-center",children:Object(X.jsxs)(q.W,{children:[Object(X.jsx)(q.w,{tag:"span",children:Object(X.jsx)(A.a,{size:14,className:"cursor-pointer"})}),Object(X.jsxs)(q.v,{end:!0,children:[Object(X.jsxs)(q.u,{tag:l.b,className:"w-100",to:"/apps/user/view/".concat(e.id),onClick:function(){return x.dispatch(Object(m.getUser)(e.id))},children:[Object(X.jsx)(N.a,{size:14,className:"me-50"}),Object(X.jsx)("span",{className:"align-middle",children:_("Details")})]}),w.can("update",sessionStorage.getItem("current_page_perm"))&&Object(X.jsxs)(q.u,{tag:"a",href:"/",className:"w-100",onClick:function(t){t.preventDefault(),Qe(e.id)},children:[Object(X.jsx)(E.a,{size:14,className:"me-50"}),Object(X.jsx)("span",{className:"align-middle",children:_("Edit")})]}),w.can("delete",sessionStorage.getItem("current_page_perm"))&&Object(X.jsxs)(q.u,{tag:"a",href:"/",className:"w-100",onClick:function(t){t.preventDefault(),Ze(e.id)},children:[Object(X.jsx)(U.a,{size:14,className:"me-50"}),Object(X.jsx)("span",{className:"align-middle",children:_("Delete")})]})]})]})})}}],Je=Object(s.useMemo)((function(){return x.isLoading?He.map((function(e){return{name:e.name,sortable:!1,minWidth:e.minWidth,width:e.width,cell:function(t){return Object(X.jsx)(H.a,{sx:{bgcolor:I.dark.light},animation:"wave",className:"Actions"===e.name?"ms-2":"",width:"Actions"===e.name?10:"100%",height:40})}}})):He.map((function(e){return{name:e.name,sortable:e.sortable,minWidth:e.minWidth,width:e.width,sortField:e.sortField,selector:e.selector,cell:e.cell}}))}),[x.isLoading,He]),Re=[{value:"",label:"".concat(_("Select")," Status"),number:0},{value:"pending",label:"".concat(_("Pending")),number:1},{value:"active",label:"".concat(_("Active")),number:2},{value:"inactive",label:"".concat(_("Inactive")),number:3}],Xe=function(){return Object(X.jsxs)(s.Fragment,{children:[Object(X.jsx)(F.a,{}),Object(X.jsxs)(q.q,{className:"mb-0 mt-1",children:[_("Please Wait"),"..."]})]})},Ze=function(e){return Z.fire({title:"".concat(_("Are you sure?")),text:"".concat(_("You won't be able to revert")," ").concat(_("user"),"!"),icon:"warning",showCancelButton:!0,confirmButtonText:"".concat(_("Yes, Delete User!")),cancelButtonText:"".concat(_("Cancel")),customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then((function(t){t.value&&(Fe(!0),p(Object(m.deleteUser)(e)).then((function(e){"fulfilled"===e.meta.requestStatus?(Fe(!1),B.b.success("".concat(_("Successfully deleted Data")),{style:{padding:"16px",color:I.success.main,border:"1px solid ".concat(I.success.main)},iconTheme:{primary:I.success.main}})):"rejected"===e.meta.requestStatus&&(Fe(!1),B.b.error(e.payload.message,{style:{padding:"16px",color:I.danger.main,border:"1px solid ".concat(I.danger.main)},iconTheme:{primary:I.danger.main}}))})))}))},Qe=function(e){var t;Fe(!0),!x.selectedUser||(null===(t=x.selectedUser)||void 0===t?void 0:t.id)!==parseInt(e)&&!x.isLoadingDetail?p(Object(m.getUser)(e)).then((function(e){qe(!0),Fe(!1)})):(Fe(!1),qe(!0))};return Object(X.jsxs)(s.Fragment,{children:[Object(X.jsxs)(z.a,{blocking:ze,loader:Object(X.jsx)(Xe,{}),children:[Object(X.jsx)(q.k,{children:Object(X.jsx)(q.l,{children:Object(X.jsxs)(q.Q,{children:[Object(X.jsxs)(q.s,{children:[Object(X.jsx)(q.D,{for:"role-select",children:_("Role")}),Object(X.jsx)(f.a,{isClearable:!1,value:ve,options:Ae,className:"react-select",classNamePrefix:"select",theme:u.w,onChange:function(e){xe(e),p(Object(m.getData)({sort_dir:Y,sort:re,search:K,filter_role:e.value,page:ne,length:de,filter_status:Ce.value,filter_unit:ye.value}))}})]}),Object(X.jsxs)(q.s,{children:[Object(X.jsx)(q.D,{for:"status-select",children:"Status"}),Object(X.jsx)(f.a,{theme:u.w,isClearable:!1,className:"react-select",classNamePrefix:"select",options:Re,value:Ce,onChange:function(e){De(e),p(Object(m.getData)({sort_dir:Y,sort:re,search:K,page:ne,filter_status:e.value,length:de,filter_role:ve.value,filter_unit:ye.value}))}})]}),Object(X.jsx)(V.a,{parentChange:function(e){_e(e),p(Object(m.getData)({sort_dir:Y,sort:re,search:K,page:ne,length:de,filter_role:ve.value,filter_unit:e.value,filter_status:Ce.value}))},colMode:!0})]})})}),Object(X.jsx)(q.k,{className:"overflow-hidden",children:Object(X.jsx)("div",{className:"react-dataTable",children:Object(X.jsx)(v.a,{noHeader:!0,subHeader:!0,sortServer:!0,pagination:!0,responsive:!0,paginationServer:!0,style:{"min-height":"400px"},columns:Je,onSort:function(e,t){J(t),ie(e.sortField),p(Object(m.getData)({sort_dir:Y,sort:re,search:K,page:ne,length:de,filter_role:ve.value,filter_status:Ce.value,filter_unit:ye.value}))},sortIcon:Object(X.jsx)(L.a,{}),className:"react-dataTable",paginationComponent:function(){var e=Number(Math.ceil(x.total/de));return Object(X.jsx)(O.a,{previousLabel:"",nextLabel:"",pageCount:e||1,activeClassName:"active",forcePage:0!==ne?ne-1:0,onPageChange:function(e){return function(e){p(Object(m.getData)({sort_dir:Y,sort:re,search:K,length:de,page:e.selected+1,filter_role:ve.value,filter_status:Ce.value,filter_unit:ye.value})),se(e.selected+1)}(e)},pageClassName:"page-item",nextLinkClassName:"page-link",nextClassName:"page-item next",previousClassName:"page-item prev",previousLinkClassName:"page-link",pageLinkClassName:"page-link",containerClassName:"pagination react-paginate justify-content-end my-2 pe-1"})},data:function(){var e={filter_role:ve.value,filter_unit:ye.value,filter_status:Ce.value,search:K},t=Object.keys(e).some((function(t){return e[t].length>0}));return x.isLoading?Array(10).fill({}):x.data.length>0?x.data:0===x.data.length&&t?[]:void 0}(),subHeaderComponent:Object(X.jsx)(Q,{store:x,searchTerm:K,rowsPerPage:de,handleFilter:function(e){ee(e),p(Object(m.getData)({sort_dir:Y,search:e,sort:re,page:ne,length:de,filter_role:ve.value,filter_status:Ce.value,filter_unit:ye.value}))},handlePerPage:function(e){var t=parseInt(e.currentTarget.value);p(Object(m.getData)({sort_dir:Y,sort:re,search:K,length:t,page:ne,filter_role:ve.value,filter_unit:ye.value,filter_status:Ce.value})),me(t)},toggleSidebar:Me})})})}),Object(X.jsx)(i.default,{open:fe,toggleSidebar:Me})]}),null!==x.selectedUser&&Object(X.jsx)(o.default,{show:Be,setShow:qe,detailPage:!1})]})}},576:function(e,t,a){var n=a(161).default,s=a(162).default,l=a(375).default,c=a(184).default,r=a(371).default,i=a(372).default,o=a(219).default;e.exports=function(e,t){"use strict";function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=a(e),d=a(t),m=[{key:"title",getter:function(e){return e.getTitle()}},{key:"html",getter:function(e){return e.getHtmlContainer()}},{key:"confirmButtonText",getter:function(e){return e.getConfirmButton()}},{key:"denyButtonText",getter:function(e){return e.getDenyButton()}},{key:"cancelButtonText",getter:function(e){return e.getCancelButton()}},{key:"footer",getter:function(e){return e.getFooter()}},{key:"closeButtonHtml",getter:function(e){return e.getCloseButton()}},{key:"iconHtml",getter:function(e){return e.getIcon().querySelector(".swal2-icon-content")}},{key:"loaderHtml",getter:function(e){return e.getLoader()}}],j=function(){};function b(e){function t(e){var t={},a={},n=m.map((function(e){return e.key}));return Object.entries(e).forEach((function(e){var s=o(e,2),l=s[0],c=s[1];n.includes(l)&&u.default.isValidElement(c)?(t[l]=c,a[l]=" "):a[l]=c})),[t,a]}function a(t,a){Object.entries(a).forEach((function(a){var n=o(a,2),s=n[0],l=n[1],c=m.find((function(e){return e.key===s})).getter(e);d.default.render(l,c),t.__mountedDomElements.push(c)}))}function b(e){e.__mountedDomElements.forEach((function(e){d.default.unmountComponentAtNode(e)})),e.__mountedDomElements=[]}return function(d){r(f,d);var m=i(f);function f(){return n(this,f),m.apply(this,arguments)}return s(f,[{key:"_main",value:function(e,n){var s=this;this.__mountedDomElements=[],this.__params=Object.assign({},n,e);var r=t(this.__params),i=o(r,2),u=i[0],d=i[1],m=d.didOpen||j,h=d.didDestroy||j;return l(c(f.prototype),"_main",this).call(this,Object.assign({},d,{didOpen:function(e){a(s,u),m(e)},didDestroy:function(e){h(e),b(s)}}))}},{key:"update",value:function(e){Object.assign(this.__params,e),b(this);var n=t(this.__params),s=o(n,2),r=s[0],i=s[1];l(c(f.prototype),"update",this).call(this,i),a(this,r)}}],[{key:"argsToParams",value:function(t){if(u.default.isValidElement(t[0])||u.default.isValidElement(t[1])){var a={};return["title","html","icon"].forEach((function(e,n){void 0!==t[n]&&(a[e]=t[n])})),a}return e.argsToParams(t)}}]),f}(e)}return b}(a(0),a(40))},580:function(e,t,a){},598:function(e,t,a){"use strict";var n=a(5),s=a(8),l=a(9),c=a(37),r=a(0),i=a(7),o=a.n(i),u=a(287),d=a(286),m=a(10),j=a(2),b=["label","hideIcon","showIcon","visible","className","htmlFor","placeholder","iconSize","inputClassName","invalid"],f=Object(r.forwardRef)((function(e,t){var a,i=e.label,f=e.hideIcon,h=e.showIcon,O=e.visible,p=e.className,v=e.htmlFor,x=e.placeholder,g=e.iconSize,N=e.inputClassName,y=e.invalid,_=Object(c.a)(e,b),w=Object(r.useState)(O),S=Object(l.a)(w,2),C=S[0],D=S[1];return Object(j.jsxs)(r.Fragment,{children:[i?Object(j.jsx)(m.D,{className:"form-label",for:v,children:i}):null,Object(j.jsxs)(m.B,{className:o()((a={},Object(s.a)(a,p,p),Object(s.a)(a,"is-invalid",y),a)),children:[Object(j.jsx)(m.A,Object(n.a)(Object(n.a)({ref:t,invalid:y,type:!1===C?"password":"text",placeholder:x||"\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7\xb7",className:o()(Object(s.a)({},N,N))},i&&v?{id:v}:{}),_)),Object(j.jsx)(m.C,{className:"cursor-pointer",onClick:function(){return D(!C)},children:function(){var e=g||14;return!1===C?f||Object(j.jsx)(u.a,{size:e}):h||Object(j.jsx)(d.a,{size:e})}()})]})]})}));t.a=f,f.defaultProps={visible:!1}},823:function(e,t,a){"use strict";var n=a(9),s=a(0),l=a(10),c=a(217),r=a(121),i=a(31),o=(a(86),a(14)),u=(a(578),a(2));t.a=function(e){var t,a=e.parentChange,d=e.colMode,m=void 0!==d&&d,j=e.colSize,b=void 0===j?6:j,f=e.initialValue,h=void 0===f||f,O=e.colClassName,p=void 0===O?"":O,v=Object(r.a)().t,x=(Object(i.j)(),Object(o.b)()),g=Object(o.c)((function(e){return e.units})),N=Object(s.useState)([]),y=Object(n.a)(N,2),_=y[0],w=y[1],S=Object(s.useState)(h?{value:"",label:"".concat(v("Select")," ").concat(v("Unit"))}:{}),C=Object(n.a)(S,2),D=C[0],k=C[1],P=function(e,t){k(e),"function"===typeof t&&t(e)};return Object(s.useEffect)((function(){var e=h?g.dataDropdown:g.dataDropdown.filter((function(e){return""!==e.value}));w(e),k(h?g.selectedUnit:e[0])}),[x,g.dataDropdown]),(null===(t=g.data)||void 0===t?void 0:t.length)>1?m?Object(u.jsxs)(l.s,{md:"".concat(b),className:p,children:[Object(u.jsx)(l.D,{className:"",for:"plan-select",children:v("Unit")}),Object(u.jsx)(c.a,{theme:i.w,isClearable:!1,className:"react-select",classNamePrefix:"select",options:_,value:D,onChange:function(e){P(e,a)},getOptionLabel:function(e){return e.code?"".concat(e.code," ").concat(e.label):"".concat(e.label)}})]}):Object(u.jsx)(l.k,{children:Object(u.jsx)(l.l,{children:Object(u.jsxs)(l.Q,{children:[Object(u.jsx)(l.D,{className:"",for:"plan-select",children:v("Unit")}),Object(u.jsx)(c.a,{theme:i.w,isClearable:!1,className:"react-select",classNamePrefix:"select",options:_,value:D,onChange:function(e){P(e,a)},getOptionLabel:function(e){return e.code?"".concat(e.code," ").concat(e.label):"".concat(e.label)}})]})})}):null}}}]);
//# sourceMappingURL=12.4627f1fa.chunk.js.map