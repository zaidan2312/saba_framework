(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[149,160,163],{386:function(e,t,c){"use strict";c.r(t);var a=c(5),n=c(4),s=c(13),i=c(9),r=c(3),l=c.n(r),o=c(0),d=c(26),j=c(10),b=c(84),m=c(66),u=c(86),O=c(94),p=c(297),h=c(578),x=c(617),f=c(14),g=c(761),v=c(83),N=c(79),y=c(370),k=c(573),w=c(2);t.default=function(){var e=Object(N.a)().t,t=Object(o.useState)(!1),r=Object(i.a)(t,2),S=r[0],D=r[1],C=Object(o.useState)("".concat(e("Add New"))),_=Object(i.a)(C,2),T=_[0],E=_[1],R=Object(f.b)(),L=Object(f.c)((function(e){return e[m.storeName]})),B=Object(f.c)((function(e){return e.apps_permission})),q=Object(o.useState)([]),U=Object(i.a)(q,2),A=U[0],F=U[1],z=Object(o.useState)([]),I=Object(i.a)(z,2),J=I[0],P=I[1],V=Object(o.useState)(""),G=Object(i.a)(V,2),Y=G[0],W=G[1],H=Object(o.useState)(null),K=Object(i.a)(H,2),M=K[0],Q=K[1],X=Object(o.useState)(!1),Z=Object(i.a)(X,2),$=(Z[0],Z[1]),ee=Object(o.useState)("Please Wait"),te=Object(i.a)(ee,2),ce=(te[0],te[1]),ae=Object(o.useContext)(b.a).colors,ne=Object(h.e)({}),se=ne.reset,ie=ne.control,re=ne.setError,le=ne.setValue,oe=ne.handleSubmit,de=ne.formState.errors,je=function(e,t,c){var a=Object.assign([],A);a[t][c]=e.target.checked,F(a)},be=function(){var t=Object(n.a)(l.a.mark((function t(){var c,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q("add"),E("".concat(e("Add New"))),0!==B.data.length||B.isLoading){t.next=8;break}return $(!0),t.next=6,R(Object(u.getDataList)({})).then((function(e){var t=Object(s.a)(e.payload.data),c=t;F(t),P(c),D(!0),$(!1)}));case 6:t.next=14;break;case 8:c=Object(s.a)(B.dataDropdown),a=Object(s.a)(B.dataDropdown),F(c),P(a),D(!0),$(!1);case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),me=function(t){if(Object.values(t).every((function(e){return null!==e&&""!==e}))){ce("".concat(e("Creating a New ".concat(m.pageTitle))));var c=(s=J,i=function(e,t){return e.id_permission===t.id_permission&&e.post===t.post&&e.put===t.put&&e.delete===t.delete&&e.get===t.get},A.filter((function(e){return!s.some((function(t){return i(e,t)}))})));c.length>0&&(t.role_permission=c),R(Object(m.postData)(t)).then((function(t){"fulfilled"===t.meta.requestStatus?(D(!1),v.b.success("".concat(e("Successfully Created")," ").concat(e(m.pageTitle)),{style:{padding:"16px",color:ae.success.main,border:"1px solid ".concat(ae.success.main)},iconTheme:{primary:ae.success.main}})):"rejected"===t.meta.requestStatus&&v.b.error(t.payload.message,{style:{padding:"16px",color:ae.danger.main,border:"1px solid ".concat(ae.danger.main)},iconTheme:{primary:ae.danger.main}})}))}else for(var a in t){var n;null!==t[a]&&0===(null===(n=t[a])||void 0===n?void 0:n.length)&&re(a,{type:"manual"})}var s,i};var ue=function(t){if(function(e){if("edit"===M){var t=JSON.stringify(J)!==JSON.stringify(A);return L.selectedData.title!==e.description||t}return!0}(t)){ce("".concat(e("Updating")," ").concat(e(m.pageTitle)," ").concat(e("Detail")," Data"));var c=(a=J,n=function(e,t){return e.id===t.id&&e.id_permission===t.id_permission&&e.post===t.post&&e.put===t.put&&e.delete===t.delete&&e.get===t.get},A.filter((function(e){return!a.some((function(t){return n(e,t)}))})));c.length>0&&(t.role_permission=c),R(Object(m.putData)(t)).then((function(t){"fulfilled"===t.meta.requestStatus?(D(!1),v.b.success("".concat(e("Successfully Updated")," ").concat(e(m.pageTitle)),{style:{padding:"16px",color:ae.success.main,border:"1px solid ".concat(ae.success.main)},iconTheme:{primary:ae.success.main}})):"rejected"===t.meta.requestStatus&&v.b.error(t.payload.message,{style:{padding:"16px",color:ae.danger.main,border:"1px solid ".concat(ae.danger.main)},iconTheme:{primary:ae.danger.main}})}))}else Object(v.b)("".concat(e("You haven't changed anything")),{icon:"\ud83d\udc4f"});var a,n};return Object(o.useEffect)((function(){0!==B.dataDropdown.length||B.isLoading||R(Object(u.getDataList)({grid_mode:!0}))}),[R,B.dataDropdown.length]),Object(w.jsx)(o.Fragment,{children:Object(w.jsxs)(k.a,{blocking:L.isLoadingSummary,loader:Object(w.jsx)(y.b,{}),children:[Object(w.jsxs)(j.R,{children:[L.dataSummary.map((function(t,a){var n,i,r;return Object(w.jsx)(j.t,{xl:4,md:6,children:Object(w.jsx)(j.l,{children:Object(w.jsxs)(j.m,{children:[Object(w.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(w.jsx)("span",{children:"Total ".concat(t.totalUsers," users")}),(null===t||void 0===t||null===(n=t.users)||void 0===n?void 0:n.length)>0?Object(w.jsx)(x.a,{data:t.users.map((function(e){return{size:e.size,title:e.title,id:e.id,img:null!==(null===e||void 0===e?void 0:e.img)?e.img:c(50).default}}))}):Object(w.jsx)("div",{style:{height:"30px"},className:""})]}),Object(w.jsxs)("div",{className:"d-flex justify-content-between align-items-end mt-1 pt-25",children:[Object(w.jsxs)("div",{className:"role-heading  text-truncate",children:[Object(w.jsx)("h4",{className:"fw-bolder mb-0",children:null!==(i=t.title)&&void 0!==i?i:"-"}),Object(w.jsx)("div",{children:Object(w.jsx)("small",{className:"fw-bolder",children:null!==(r=t.name)&&void 0!==r?r:"-"})}),Object(w.jsx)(d.b,{to:"/",className:"role-edit-modal",onClick:function(c){var a;c.preventDefault(),W((a=t).title),console.log(a),Q("edit"),E("".concat(e("Edit"))),m.detailFromGrid?($(!0),ce("".concat(e("Loading")," ").concat(e("Detail")," ").concat(e("Data")," ").concat(e(m.pageTitle))),R(Object(m.setDataById)(a)).then((function(e){$(!1),D(!0)}))):(ce("".concat(e("Loading")," ").concat(e("Detail")," ").concat(e("Data")," ").concat(e(m.pageTitle))),$(!0),R(Object(m.setDataById)(a)).then((function(e){$(!1),D(!0)})),R(Object(O.getDataList)({filter_id_role:a.id})).then((function(e){if("rejected"===e.meta.requestStatus)$(!1),v.b.error(e.payload.message,{style:{padding:"16px",color:ae.danger.main,border:"1px solid ".concat(ae.danger.main)},iconTheme:{primary:ae.danger.main}});else{var t=Object(s.a)(e.payload.data),c=B.dataDropdown.map((function(e,c){return Object.assign({},e,t[c])})),a=B.dataDropdown.map((function(e,c){return Object.assign({},e,t[c])}));F(c),P(a)}})))},children:Object(w.jsxs)("small",{className:"fw-bolder",children:[e("Edit")," ",e("Role")]})})]}),Object(w.jsx)(d.b,{to:"",className:"text-body",onClick:function(e){return e.preventDefault()}})]})]})})},a)})),"admin.insaba.co.id"===location.host&&Object(w.jsx)(j.t,{xl:4,md:6,children:Object(w.jsx)(j.l,{children:Object(w.jsxs)(j.R,{className:"mb-2",children:[Object(w.jsx)(j.t,{sm:5,children:Object(w.jsx)("div",{className:"d-flex align-items-end justify-content-center h-100",children:Object(w.jsx)("img",{className:"img-fluid mt-2",src:g.a,alt:"Image",width:85})})}),"(",Object(w.jsx)(j.t,{sm:7,children:Object(w.jsxs)(j.m,{className:"text-sm-end text-center ps-sm-0",children:[Object(w.jsxs)(j.i,{color:"primary",className:"text-nowrap mb-1",onClick:function(){be()},children:[e("Add New Role")," "]}),Object(w.jsx)("p",{className:"mb-0",children:e("Add a new role, if it does not exist")})]})}),")"]})})})]}),S&&Object(w.jsxs)(j.F,{isOpen:S,onClosed:function(){E("".concat(e("Add New"))),le("roleName")},toggle:function(){return D(!S)},className:"modal-dialog-centered modal-xl",children:[Object(w.jsx)(j.I,{className:"bg-transparent",toggle:function(){return D(!S)}}),!L.loading&&Object(w.jsxs)(j.G,{className:"px-5 pb-5",children:[Object(w.jsxs)("div",{className:"text-center mb-4",children:[Object(w.jsxs)("h1",{children:[T," ",e("Role")]}),Object(w.jsx)("p",{children:"edit"===M?"".concat(e("Set role name and permissions")):e("Create new role")})]}),Object(w.jsxs)(j.R,{tag:"form",onSubmit:oe((function(e){e.description.length?"edit"===M?ue(e):me(e):re("description",{type:"manual"})})),children:[Object(w.jsxs)(j.t,{xs:12,children:[Object(w.jsx)(j.E,{className:"form-label",for:"description",children:e("Role Name")}),Object(w.jsx)(h.a,{name:"description",control:ie,defaultValue:Y,render:function(t){var c=t.field;return Object(w.jsx)(j.B,Object(a.a)(Object(a.a)({},c),{},{id:"description",placeholder:e("Enter role name"),invalid:de.description&&!0}))}}),de.description&&Object(w.jsx)(j.z,{children:e("Please enter a valid role name")})]}),Object(w.jsxs)(j.t,{xs:12,children:[Object(w.jsx)("h4",{className:"mt-2 pt-50",children:e("Role Permissions")}),Object(w.jsx)(j.V,{className:"table-flush-spacing",responsive:!0,children:Object(w.jsx)("tbody",{children:A.map((function(t,c){return Object(w.jsxs)("tr",{children:[Object(w.jsxs)("td",{className:"text-nowrap fw-bolder",children:[Object(w.jsxs)("span",{className:"me-50",children:[" ",t.label]}),Object(w.jsx)(p.a,{size:14,id:"info_".concat(t.id)}),Object(w.jsx)(j.Y,{placement:"top",target:"info_".concat(t.id),children:e(t.description)})]}),Object(w.jsx)("td",{children:Object(w.jsxs)("div",{className:"d-flex",children:[Object(w.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(w.jsx)(j.B,{checked:t.get,type:"checkbox",id:"read-".concat(t.id),onChange:function(e){je(e,c,"get")}}),Object(w.jsx)(j.E,{className:"form-check-label",for:"read-".concat(t.id),children:e("Read")})]}),Object(w.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(w.jsx)(j.B,{checked:t.post,type:"checkbox",id:"write-".concat(t.id),onChange:function(e){je(e,c,"post")}}),Object(w.jsx)(j.E,{className:"form-check-label",for:"write-".concat(t.id),children:e("Create")})]}),Object(w.jsxs)("div",{className:"form-check me-3 me-lg-5",children:[Object(w.jsx)(j.B,{checked:t.put,type:"checkbox",id:"create-".concat(t.id),onChange:function(e){je(e,c,"put")}}),Object(w.jsx)(j.E,{className:"form-check-label",for:"create-".concat(t.id),children:e("Update")})]}),Object(w.jsxs)("div",{className:"form-check",children:[Object(w.jsx)(j.B,{checked:t.delete,type:"checkbox",id:"delete-".concat(t.id),onChange:function(e){je(e,c,"delete")}}),Object(w.jsx)(j.E,{className:"form-check-label",for:"delete-".concat(t.id),children:e("Delete")})]})]})})]},c)}))})})]}),Object(w.jsxs)(j.t,{className:"text-center mt-2",xs:12,children:[Object(w.jsx)(j.i,{type:"submit",color:"primary",className:"me-1",children:e("Submit")}),Object(w.jsx)(j.i,{type:"reset",outline:!0,onClick:function(){D(!1),se({roleName:""})},children:e("Cancel")})]})]})]})]})]})})}},573:function(e,t,c){"use strict";var a=c(5),n=c(8),s=c(0),i=c(7),r=c.n(i),l=c(10),o=(c(579),c(2)),d=function(e){var t,c=e.children,i=e.blocking,l=e.loader,d=e.className,j=e.tag,b=e.overlayColor,m=j;return Object(o.jsxs)(m,{className:r()("ui-loader",(t={},Object(n.a)(t,d,d),Object(n.a)(t,"show",i),t)),children:[c,i?Object(o.jsxs)(s.Fragment,{children:[Object(o.jsx)("div",Object(a.a)({className:"overlay"},i&&b?{style:{backgroundColor:b}}:{})),Object(o.jsx)("div",{className:"loader",children:l})]}):null]})};t.a=d,d.defaultProps={tag:"div",blocking:!1,loader:Object(o.jsx)(l.S,{color:"primary"})}},579:function(e,t,c){},617:function(e,t,c){"use strict";var a=c(5),n=c(8),s=c(0),i=c(7),r=c.n(i),l=c(36),o=c(26),d=c(2);t.a=function(e){var t=e.data,c=e.tag,i=e.className,j=c||"div";return Object(d.jsx)(j,{className:r()("avatar-group",Object(n.a)({},i,i)),children:t.map((function(e,t){var c=null!==e&&void 0!==e&&e.id?"avatar_".concat(t,"_").concat(e.id):e.title.split(" ").join("-"),i=null===e||void 0===e?void 0:e.linkUrl;null===e||void 0===e||delete e.linkUrl;var j=e.tag?e.tag:"div",b=Object(d.jsxs)(s.Fragment,{children:[e.meta?null:null!==e&&void 0!==e&&e.img?Object(d.jsx)(l.a,Object(a.a)(Object(a.a)(Object(a.a)({tag:j,className:r()("pull-up",Object(n.a)({},e.className,e.className))},c?{id:c}:{}),e),{},{title:void 0,meta:void 0})):Object(d.jsx)(l.a,Object(a.a)(Object(a.a)({tag:j,initials:!0,className:r()("pull-up",Object(n.a)({},e.className,e.className))},c?{id:c}:{}),{},{color:"light-primary",content:"".concat(e.title)})),e.meta?Object(d.jsx)(j,{className:"d-flex align-items-center ps-1",children:e.meta}):null]},t);return i?Object(d.jsx)(o.b,{to:i,children:b},"avatar_".concat(t)):b}))})}},761:function(e,t,c){"use strict";t.a=c.p+"static/media/faq-illustrations.f8c4ea78.svg"}}]);
//# sourceMappingURL=149.946ca87e.chunk.js.map