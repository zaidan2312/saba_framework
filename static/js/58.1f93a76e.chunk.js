(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[58,75,144,145],{137:function(e,t,n){"use strict";n.r(t);var a=n(6),l=n(9),r=n(0),i=n(20),o=n(68),c=n(10),s=n(103),u=n(507),d=n(182),m=(n(81),n(133),n(69)),f=n(31),b=n(7),j=n.n(b),v=n(62),h=n.n(v),p=n(181),O=n(509),g=n.n(O),x=n(511),y=n(73),_=n(72),N=n(107),k=n(16),E=n(2);g()(h.a);t.default=function(e){var t,n,b,v,h=e.show,O=e.setShow,g=e.detailPage,S=Object(r.useState)([]),D=Object(l.a)(S,2),C=(D[0],D[1],Object(r.useState)([])),U=Object(l.a)(C,2),L=U[0],V=U[1],A=Object(r.useState)(null),w=Object(l.a)(A,2),B=w[0],F=w[1],P=Object(r.useState)([]),T=Object(l.a)(P,2),q=T[0],J=T[1],H=Object(r.useState)(!1),X=Object(l.a)(H,2),I=(X[0],X[1]),M=Object(s.a)().t,R=Object(i.g)().id,Q=Object(k.b)(),W=Object(k.c)((function(e){return e.users})),Y=Object(k.c)((function(e){return e.units})),z=Object(k.c)((function(e){return e.roles})),G=Object(r.useContext)(m.a).colors,K=Object(r.useState)(W.selectedUser),Z=Object(l.a)(K,2),$=Z[0],ee=Z[1],te=Object(x.e)({defaultValues:{username:null===$||void 0===$?void 0:$.username,name:null===$||void 0===$?void 0:$.name,phone:null!==(t=null===$||void 0===$?void 0:$.phone)&&void 0!==t?t:""}}),ne=te.reset,ae=te.control,le=te.setError,re=te.handleSubmit,ie=te.formState.errors,oe=function(){return Object(E.jsxs)(r.Fragment,{children:[Object(E.jsx)(d.a,{}),Object(E.jsxs)(c.q,{className:"mb-0 mt-1 text-white",children:[M("Please Wait"),"..."]})]})};return Object(r.useEffect)((function(){ee(W.selectedUser),0!==Y.data.length||Y.isLoading||(Q(Object(_.getUnits)()),ee(W.selectedUser)),0!==(null===z||void 0===z?void 0:z.data.length)||z.isLoading||Q(Object(N.getData)()),0!==(null===W||void 0===W?void 0:W.data_employee.length)||W.isLoading_employee||(Q(Object(y.getDataEmployee)({length:200})),W.data_employee&&null!==$&&void 0!==$&&$.id_employee&&J(W.data_employee.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))),F(null===$||void 0===$?void 0:$.id_role)}),[]),Object(E.jsx)(c.E,{isOpen:h,toggle:function(){return O(!h)},className:"modal-dialog-centered modal-lg",children:Object(E.jsxs)(u.a,{blocking:(W.isLoadingAddEdit||W.isLoadingDetail)&&!W.selectedUser,loader:Object(E.jsx)(oe,{}),children:[Object(E.jsx)(c.H,{className:"bg-transparent",toggle:function(){return O(!h)}}),Object(E.jsxs)(c.F,{className:"px-sm-5 pt-50 pb-5",children:[Object(E.jsxs)("div",{className:"text-center mb-2",children:[Object(E.jsxs)("h1",{className:"mb-1",children:[M("Edit")," ",M("User Information")]}),Object(E.jsx)("p",{children:M("Updating user details will receive a privacy audit.")})]}),Object(E.jsx)(c.x,{onSubmit:re((function(e){if(function(e){var t,n=null!==$.member_of?null===$||void 0===$?void 0:$.member_of.map((function(e){return{value:e.id,label:e.name}})):[],a=$.name!==e.name||$.username!==e.username||(null!==(t=$.phone)&&void 0!==t?t:"")!==e.phone||JSON.stringify(n)!==JSON.stringify(L)||B!==$.id_role;return I(!0),a}(e))if(Object.values(e).every((function(e){return e.length>0||""===e})))""===e.phone&&delete e.phone,e.id=null!==R&&void 0!==R?R:$.id,e.id_role=B,e.id_employee=null===q||void 0===q?void 0:q.id,e.member_of=L,Q(Object(y.updateUser)(e)).then((function(e){"fulfilled"===e.meta.requestStatus?(O(!h),o.b.success("".concat(M("Successfully Updated Data")),{style:{padding:"16px",color:G.success.main,border:"1px solid ".concat(G.success.main)},iconTheme:{primary:G.success.main}}),g&&Q(Object(y.getUser)(R))):"rejected"===e.meta.requestStatus&&o.b.error(JSON.stringify(e.payload),{style:{padding:"16px",color:G.danger.main,border:"1px solid ".concat(G.danger.main)},iconTheme:{primary:G.danger.main}})}));else for(var t in e){var n;0===(null===(n=e[t])||void 0===n?void 0:n.length)&&le(t,{type:"manual"})}else Object(o.b)("".concat(M("You haven't changed anything")),{icon:"\ud83d\udc4f"})})),children:Object(E.jsxs)(c.Q,{className:"gy-1 pt-75",children:[Object(E.jsxs)(c.s,{md:12,xs:12,children:[Object(E.jsx)(c.D,{className:"form-label",for:"name",children:M("Full Name")}),Object(E.jsx)(x.a,{defaultValue:"",control:ae,id:"name",name:"name",render:function(e){var t=e.field;return Object(E.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{id:"name",placeholder:"John",invalid:ie.name&&!0}))}})]}),Object(E.jsxs)(c.s,{md:6,xs:12,children:[Object(E.jsxs)(c.D,{className:"form-label",for:"username",children:[M("Username"),":"]}),Object(E.jsx)(x.a,{defaultValue:"",control:ae,id:"username",name:"username",render:function(e){var t=e.field;return Object(E.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{id:"username",placeholder:"john.doe.007",invalid:ie.username&&!0}))}})]}),Object(E.jsxs)(c.s,{md:6,xs:12,children:[Object(E.jsxs)(c.D,{className:"form-label",for:"email",children:[M("Email"),":"]}),Object(E.jsx)(c.A,{type:"email",id:"email",disabled:!0,defaultValue:null===$||void 0===$?void 0:$.email,placeholder:"example@domain.com"})]}),Object(E.jsxs)(c.s,{md:6,xs:12,children:[Object(E.jsx)(c.D,{className:"form-label",for:"phone",children:M("Contact")}),Object(E.jsx)(x.a,{defaultValue:"",control:ae,id:"phone",name:"phone",render:function(e){var t=e.field;return Object(E.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{value:(null===$||void 0===$?void 0:$.phone)||"",id:"phone",placeholder:"+62 813 940 10XX X"}))}})]}),Object(E.jsxs)(c.s,{md:6,xs:12,children:[Object(E.jsx)(c.D,{className:"form-label",for:"id_role",children:M("Role")}),Object(E.jsx)(p.a,{id:"id_role",theme:f.q,defaultValue:z.data.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_role)})).map((function(e){return{value:e.id,label:e.name}})),onChange:function(e){F(e.value)},options:z.data.map((function(e){return{value:e.id,label:e.name}})),className:j()("react-select",{"is-invalid":null===B}),classNamePrefix:"select"})]}),Object(E.jsxs)(c.s,{md:12,xs:12,children:[Object(E.jsx)(c.D,{className:"form-label",for:"id_employee",children:M("Employee")}),Object(E.jsx)(p.a,{id:"id_employee",isClearable:!0,isLoading:W.isLoading_employee,theme:f.q,defaultValue:null!==(n=W.data_employee.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))&&void 0!==n?n:"",onChange:function(e){var t;t=e,J(Array.isArray(t)?t.map((function(e){return e.value})):[])},options:W.data_employee.map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})),className:"react-select",classNamePrefix:"select"})]}),Object(E.jsxs)(c.s,{md:12,xs:12,children:[Object(E.jsx)(c.D,{className:"form-label",for:"member_of",children:M("Unit")}),Object(E.jsx)(p.a,{id:"member_of",isClearable:!1,theme:f.q,closeMenuOnSelect:!1,defaultValue:null!==(b=W.selectedUser)&&void 0!==b&&b.member_of?null===(v=W.selectedUser)||void 0===v?void 0:v.member_of.map((function(e){return{value:e.id,label:e.name}})):[],onChange:function(e){var t;t=e,V(Array.isArray(t)?t.map((function(e){return e.value})):[])},isMulti:!0,options:Y.data.map((function(e){return{value:e.id,label:e.name}})).filter((function(e){return""!==e.value})),className:"react-select",classNamePrefix:"select"})]}),Object(E.jsxs)(c.s,{xs:12,className:"text-center mt-2 pt-50",children:[Object(E.jsx)(c.i,{type:"submit",className:"me-1",color:"primary",children:M("Submit")}),Object(E.jsx)(c.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){ne({username:null===$||void 0===$?void 0:$.username,name:null===$||void 0===$?void 0:$.name}),O(!1)},children:M("Cancel")})]})]})})]})]})})}},507:function(e,t,n){"use strict";var a=n(6),l=n(8),r=n(0),i=n(7),o=n.n(i),c=n(10),s=(n(513),n(2)),u=function(e){var t,n=e.children,i=e.blocking,c=e.loader,u=e.className,d=e.tag,m=e.overlayColor,f=d;return Object(s.jsxs)(f,{className:o()("ui-loader",(t={},Object(l.a)(t,u,u),Object(l.a)(t,"show",i),t)),children:[n,i?Object(s.jsxs)(r.Fragment,{children:[Object(s.jsx)("div",Object(a.a)({className:"overlay"},i&&m?{style:{backgroundColor:m}}:{})),Object(s.jsx)("div",{className:"loader",children:c})]}):null]})};t.a=u,u.defaultProps={tag:"div",blocking:!1,loader:Object(s.jsx)(c.R,{color:"primary"})}},509:function(e,t,n){var a=n(131).default,l=n(132).default,r=n(324).default,i=n(155).default,o=n(320).default,c=n(321).default,s=n(184).default;e.exports=function(e,t){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=n(e),d=n(t),m=[{key:"title",getter:function(e){return e.getTitle()}},{key:"html",getter:function(e){return e.getHtmlContainer()}},{key:"confirmButtonText",getter:function(e){return e.getConfirmButton()}},{key:"denyButtonText",getter:function(e){return e.getDenyButton()}},{key:"cancelButtonText",getter:function(e){return e.getCancelButton()}},{key:"footer",getter:function(e){return e.getFooter()}},{key:"closeButtonHtml",getter:function(e){return e.getCloseButton()}},{key:"iconHtml",getter:function(e){return e.getIcon().querySelector(".swal2-icon-content")}},{key:"loaderHtml",getter:function(e){return e.getLoader()}}],f=function(){};function b(e){function t(e){var t={},n={},a=m.map((function(e){return e.key}));return Object.entries(e).forEach((function(e){var l=s(e,2),r=l[0],i=l[1];a.includes(r)&&u.default.isValidElement(i)?(t[r]=i,n[r]=" "):n[r]=i})),[t,n]}function n(t,n){Object.entries(n).forEach((function(n){var a=s(n,2),l=a[0],r=a[1],i=m.find((function(e){return e.key===l})).getter(e);d.default.render(r,i),t.__mountedDomElements.push(i)}))}function b(e){e.__mountedDomElements.forEach((function(e){d.default.unmountComponentAtNode(e)})),e.__mountedDomElements=[]}return function(d){o(j,d);var m=c(j);function j(){return a(this,j),m.apply(this,arguments)}return l(j,[{key:"_main",value:function(e,a){var l=this;this.__mountedDomElements=[],this.__params=Object.assign({},a,e);var o=t(this.__params),c=s(o,2),u=c[0],d=c[1],m=d.didOpen||f,v=d.didDestroy||f;return r(i(j.prototype),"_main",this).call(this,Object.assign({},d,{didOpen:function(e){n(l,u),m(e)},didDestroy:function(e){v(e),b(l)}}))}},{key:"update",value:function(e){Object.assign(this.__params,e),b(this);var a=t(this.__params),l=s(a,2),o=l[0],c=l[1];r(i(j.prototype),"update",this).call(this,c),n(this,o)}}],[{key:"argsToParams",value:function(t){if(u.default.isValidElement(t[0])||u.default.isValidElement(t[1])){var n={};return["title","html","icon"].forEach((function(e,a){void 0!==t[a]&&(n[e]=t[a])})),n}return e.argsToParams(t)}}]),j}(e)}return b}(n(0),n(36))},513:function(e,t,n){}}]);
//# sourceMappingURL=58.1f93a76e.chunk.js.map