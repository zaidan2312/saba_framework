(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[196,81],{1548:function(t,n,e){"use strict";e.r(n);var a=e(4),r=e(13),o=e(3),c=e.n(o),i=e(0),l=(e(1327),e(21)),u=e(342),d=e(142),s=e(28),p=e(350),b=e(245),m=e(130),f=e(238),g=e(2),v=Object(i.lazy)((function(){return Promise.all([e.e(5),e.e(69)]).then(e.bind(null,473))})),h=Object(i.lazy)((function(){return Promise.all([e.e(5),e.e(70)]).then(e.bind(null,474))})),y=Object(i.lazy)((function(){return Promise.all([e.e(0),e.e(1),e.e(5),e.e(45)]).then(e.bind(null,459))})),j=Object(i.lazy)((function(){return Promise.all([e.e(5),e.e(71)]).then(e.bind(null,475))})),O=Object(i.lazy)((function(){return e.e(194).then(e.bind(null,1255))})),x=function(t){t.loading;var n,e=Object(d.a)().layout,a=Object(p.b)(e),o=function(){var t=Object(s.m)();return t?Object(s.i)(t.role_name):"/login"},c=Object(l.i)([{path:"/",index:!0,element:Object(g.jsx)(l.a,{replace:!0,to:o()})},{path:"/login",element:Object(g.jsx)(u.a,{}),children:[{path:"/login",element:Object(g.jsxs)(b.b,{clientId:"1096092734184-n0tcl5abejf0s0r2t4fmoi3qf4fhen76.apps.googleusercontent.com",children:[Object(g.jsx)(y,{})," "]})}]},{path:"/error",element:Object(g.jsx)(u.a,{}),children:[{path:"/error",element:Object(g.jsx)(v,{})}]},{path:"/public/:pageId",element:Object(g.jsx)(O,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"/public/:moduleId/:pageId",element:Object(g.jsx)(O,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"*",element:Object(g.jsx)(u.a,{}),children:[{path:"*",element:Object(g.jsx)(m.a,{})}]}].concat(Object(r.a)(a))),i=Object(l.i)([{path:"/",index:!0,element:Object(g.jsx)(l.a,{replace:!0,to:o()})},{path:"/login",element:Object(g.jsx)(u.a,{}),children:[{path:"/login",element:Object(g.jsxs)(b.b,{clientId:"1096092734184-n0tcl5abejf0s0r2t4fmoi3qf4fhen76.apps.googleusercontent.com",children:[Object(g.jsx)(y,{})," "]})}]},{path:"/auth/not-auth",element:Object(g.jsx)(u.a,{}),children:[{path:"/auth/not-auth",element:Object(g.jsx)(j,{})}]},{path:"/error",element:Object(g.jsx)(u.a,{}),children:[{path:"/error",element:Object(g.jsx)(h,{})}]},{path:"/public/:pageId",element:Object(g.jsx)(O,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"/public/:moduleId/:pageId",element:Object(g.jsx)(O,{}),meta:{publicRoute:!0,layout:"blank"}},{path:"*",element:Object(g.jsx)(u.a,{}),children:[{path:"*",element:Object(g.jsx)(m.a,{})}]}].concat(Object(r.a)(a)));return(null===(n=f.a.getState())||void 0===n?void 0:n.my_menu.dataMyMenu.length)>0?c:i},w=e(14),k=e(199),I=e(62),U=e(35),S=e(403),_=e(119),T=e(1328),A=e(60),C=e.n(A),M=Object.keys(T).filter((function(t){return"fas"!==t&&"prefix"!==t})).map((function(t){return T[t]}));_.b.add.apply(_.b,Object(r.a)(M));n.default=function(){var t=Object(w.b)(),n=Object(i.useRef)(!1),e=Object(l.f)();function r(){return o.apply(this,arguments)}function o(){return o=Object(a.a)(c.a.mark((function t(){var n,e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=JSON.parse(null!==(n=sessionStorage.getItem("serversList"))&&void 0!==n?n:"[]"),t.next=3,Promise.all(null===e||void 0===e?void 0:e.map(function(){var t=Object(a.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(n,{method:"HEAD"});case 3:return e=t.sent,t.abrupt("return",e.ok);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(n){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}function u(t,n,e){if(/^#([0-9a-f]{3}){1,2}$/i.test(t)){var a=function(t){var n=parseInt(t,16);return[n>>16&255,n>>8&255,255&n]}(t=t.substring(1));t="rgb(".concat(a.join(", "),")")}var r=t.match(/\d+/g),o=parseInt(r[0]),c=parseInt(r[1]),i=parseInt(r[2]);return o=Math.floor(o*(100-n)/100),c=Math.floor(c*(100-n)/100),i=Math.floor(i*(100-n)/100),e?"".concat(o,", ").concat(c,", ").concat(i):"rgb(".concat(o,", ").concat(c,", ").concat(i,")")}Object(i.useEffect)((function(){if(null!==Object(s.s)()&&"/error"!==window.location.pathname){var t=null,n=function(){var n=new Date;if(document.hidden)localStorage.setItem("inactive",Date.parse(n)/1e3),clearInterval(t);else{var e=localStorage.getItem("inactive"),a=parseInt(e,10),o=new Date(1e3*a),c=Math.abs(n.getTime()-o.getTime())/1e3;c>=15?(console.log("Fetching data after ".concat(c," seconds of inactivity")),f.a.dispatch(Object(I.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var n,e,a=null!==(n=null===t||void 0===t||null===(e=t.payload[0])||void 0===e?void 0:e.count_unread)&&void 0!==n?n:0;if(a){var o=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(o," ").concat(document.title.replaceAll(o,"")),r()}}}))):t=setInterval((function(){var e=Math.abs(n.getTime()-o.getTime())/1e3;e>=15&&(console.log("Fetching data after ".concat(e," seconds of inactivity")),f.a.dispatch(Object(I.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var n,e,a=null!==(n=null===t||void 0===t||null===(e=t.payload[0])||void 0===e?void 0:e.count_unread)&&void 0!==n?n:0;if(a){var o=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(o," ").concat(document.title.replaceAll(o,""))}r()}})),clearInterval(t))}),1e3)}};return document.addEventListener("visibilitychange",n),function(){clearInterval(t),document.removeEventListener("visibilitychange",n)}}}),[]);var d=5,p=10,b=20,v=function(t){console.log("replace head style begin...");!function(t){t=t.replace("#","");var n=parseInt(t.substring(0,2),16),e=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);"rgb(".concat(n,", ").concat(e,", ").concat(a,")")}(t);var n=function(t){t=t.replace("#","");var n=parseInt(t.substring(0,2),16),e=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16);return"".concat(n,", ").concat(e,", ").concat(a)}(t),e=document.createElement("style");e.textContent="\n    :root { \n      --primary-color: ".concat(t," !important;\n      --bs-primary-rgb: ").concat(t," !important;\n    }\n\n    /* BTN-PRIMARY */\n    .btn-primary {\n      border-color: ").concat(t," !important;\n      background-color: ").concat(t," !important;\n    }\n    .btn-primary:focus,\n    .btn-primary:active,\n    .btn-primary.active {\n      background-color: ").concat(u(n,d)," !important;\n    }\n    .btn-primary:hover:not(.disabled):not(:disabled) {\n      box-shadow: 0 8px 25px -8px rgba(").concat(n,", 1);\n    }   \n\n    /* BTN-GRADIENT */\n    .btn-gradient-primary {\n      background-image: linear-gradient(47deg, ").concat(t,", ").concat(u(n,p),");\n    }\n    .btn-gradient-primary:focus,.btn-gradient-primary:active,.btn-gradient-primary.active {\n      background-image: linear-gradient(47deg, ").concat(u(n,p),", ").concat(t,") !important;\n    }\n    .dark-layout.btn-gradient-primary {\n      background-image: linear-gradient(47deg, ").concat(u(n,p),", ").concat(t,");\n    }\n\n    /* BTN-OUTLINE */\n    .btn-outline-primary {\n      border: 1px solid ").concat(t," !important;\n      color: ").concat(t,";\n    }\n    .btn-outline-primary:hover:not(.disabled):not(:disabled) {\n      background-color: rgba(").concat(n,", 0.04) !important;\n      color: ").concat(t,";\n    }\n    .btn-outline-primary:not(:disabled):not(.disabled):focus {\n      background-color: rgba(").concat(n,", 0.2) !important;\n      color: ").concat(t,";\n    }\n    .btn-outline-primary:not(:disabled):not(.disabled):active, .btn-outline-primary:not(:disabled):not(.disabled).active, .btn-outline-primary:not(:disabled):not(.disabled):focus {\n        background-color: rgba(").concat(n,", 0.2) !important;\n        color: ").concat(t,";\n    }\n\n    /* BTN-FLAT */\n    .btn-flat-primary {\n      color: ").concat(t,";\n    }\n    .btn-flat-primary:hover {\n      color: ").concat(t,";\n    }\n    .btn-flat-primary:hover:not(.disabled):not(:disabled) {\n      background-color: rgba(").concat(n,", 0.12);\n    }\n    .btn-flat-primary:active,\n    .btn-flat-primary.active,\n    .btn-flat-primary:focus {\n      background-color: rgba(").concat(n,", 0.2);\n      color: ").concat(t,";\n    }\n\n    /* BTN-RELIEF */\n    .btn-relief-primary {\n      background-color: ").concat(t,";\n    }\n    \n    .btn-relief-primary:active,\n    .btn-relief-primary.active,\n    .btn-relief-primary:focus {\n      background-color: ").concat(u(n,d)," !important;\n    }\n\n    .btn-relief-primary:hover:not(.disabled):not(:disabled) {\n      background-color: ").concat(t,";\n    }\n\n    /* PAGINATION */\n    .page-item.active .page-link {\n      background-color: ").concat(t,";\n  }\n\n    /* MENU */\n    .vertical-layout .main-menu .navigation a.active {\n        background: linear-gradient(118deg, ").concat(t,", rgba(").concat(n,", 0.7));\n        box-shadow: 0 0 10px 1px rgba(").concat(n,", 0.7);\n    }\n    .main-menu.menu-dark .navigation > li ul .active {\n      background: linear-gradient(118deg, ").concat(t,", rgba(").concat(n,", 0.7));\n      box-shadow: 0 0 10px 1px rgba(").concat(n,", 0.7);\n    }\n\n    /* COMMON */\n    a {\n      color: ").concat(t,";\n    }\n\n    .nav-link {\n      color: ").concat(t,";\n    }\n\n    .text-primary {\n      color: rgba(").concat(n,", 1) !important;\n    }\n\n    .bg-primary {\n      background-color: rgba(").concat(n,", 1) !important;\n    }\n\n    .bg-light-primary {\n      background: rgba(").concat(u(t,b,!0),", 0.12) !important;\n      color: ").concat(t," !important;\n  }\n    \n    .customizer .customizer-toggle {\n      background: ").concat(t,";\n    }\n\n    .dropdown.show.dropdown-item.active:hover {\n      color: ").concat(t,";\n    }\n\n    .dropdown-item.active, .dropdown-item:active {\n      background-color: ").concat(t,";\n  }\n\n    .nav-link:after {\n      background: linear-gradient(30deg, rgba(").concat(t,", 1), rgba(").concat(t,", 0.5)) !important;\n    }\n    .nav-link.active {\n      color: ").concat(t,";\n    }\n    .avatar.bg-light-primary {\n      color: ").concat(t," !important;\n    }\n    .form-check-input:checked {\n      background-color: ").concat(t,";\n      border-color: ").concat(t,";\n    }\n    .alert-primary {\n      background: rgba(").concat(n,", 0.12) !important;\n      color: ").concat(t," !important;\n    }\n  "),document.head.appendChild(e),console.log("replace head style end...")};return Object(i.useEffect)((function(){return n.current||(navigator.onLine?t(Object(k.b)({})).then((function(t){var n;if("rejected"===(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.requestStatus))console.error("Not Registered"),C.a.fire({icon:"error",title:"Connection Failed!",text:"There is a problem connecting to the server or this app is not yet registered with Saba Official.",confirmButtonText:"Refresh",customClass:{confirmButton:"btn btn-primary"}}).then((function(t){t.isConfirmed&&location.reload()}));else{var a,r,o,c,i,l,u,d,p,b,m,g,h,y,j,O,x,w=null===(a=t.payload)||void 0===a||null===(r=a.app)||void 0===r?void 0:r.logo;if(null!==w&&void 0!==w&&w.favicon||null!==(o=t.payload)&&void 0!==o&&null!==(c=o.unit)&&void 0!==c&&null!==(i=c.unit_app_attributes)&&void 0!==i&&i.favicon)document.getElementById("favicon").href=null!==(y=null===(j=t.payload)||void 0===j||null===(O=j.unit)||void 0===O||null===(x=O.unit_app_attributes)||void 0===x?void 0:x.favicon)&&void 0!==y?y:w.favicon;var k,_,T,A,M,D,N,E=null!==(l=null===(u=t.payload)||void 0===u||null===(d=u.unit)||void 0===d||null===(p=d.unit_app_attributes)||void 0===p||null===(b=p.layout)||void 0===b?void 0:b.primaryColor)&&void 0!==l?l:null===(m=t.payload)||void 0===m||null===(g=m.app)||void 0===g||null===(h=g.setting)||void 0===h?void 0:h.primaryColor;if(E){var R=document.documentElement.style;v(E),R.setProperty("--bs-primary-rgb","".concat(E)),R.setProperty("--primary-color","".concat(E)),console.log("replace root style...")}if("/error"!==window.location.pathname)if(null!==Object(s.s)())f.a.dispatch(Object(U.getAppMenu)({})).then((function(t){var n;"rejected"!==(null===t||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.requestStatus)?(f.a.dispatch(Object(S.getUnits)({})),setTimeout((function(){f.a.dispatch(Object(I.e)({unread_count:1})).then((function(t){if(null!==t&&void 0!==t&&t.payload){var n,e,a=null!==(n=null===t||void 0===t||null===(e=t.payload[0])||void 0===e?void 0:e.count_unread)&&void 0!==n?n:0;if(a){var r=a>0&&a<=20?"(".concat(a,")"):"(20+)";document.title="".concat(r," ").concat(document.title.replaceAll(r,""))}}}))}),2e3)):(localStorage.setItem("lastUrl",window.location.href),e("/error"))}));else if("/login"===window.location.pathname&&-1===(null===(k=window.location.pathname)||void 0===k?void 0:k.indexOf("/public"))||"/reset-password"===window.location.pathname||"/forgot-password"===window.location.pathname||"/register"===window.location.pathname)"/reset-password"===window.location.pathname?e(window.location.pathname+window.location.search):"/forgot-password"===window.location.pathname?e("/forgot-password"):"/register"===window.location.pathname&&(null!==(_=t.payload)&&void 0!==_&&null!==(T=_.app)&&void 0!==T&&null!==(A=T.setting)&&void 0!==A&&A.enable_registration||null!==(M=t.payload)&&void 0!==M&&null!==(D=M.unit)&&void 0!==D&&null!==(N=D.unit_app_attributes)&&void 0!==N&&N.enable_registration)?e("/register"):e("/login");else e("/login")}})):(console.error("Offline"),C.a.fire({icon:"error",title:"Youre not connected to internet",text:"Please check your connection to the internet.",confirmButtonText:"Refresh",customClass:{confirmButton:"btn btn-primary"}}).then((function(t){t.isConfirmed&&location.reload()})))),function(){n.current=!0}}),[]),Object(g.jsx)(i.Suspense,{fallback:Object(g.jsx)(m.a,{}),children:Object(g.jsx)(x,{})})}},403:function(t,n,e){"use strict";e.r(n),e.d(n,"setUnitSelectedDropdown",(function(){return s})),e.d(n,"getUnits",(function(){return p})),e.d(n,"getUnit",(function(){return b})),e.d(n,"addUnit",(function(){return m})),e.d(n,"deleteUnit",(function(){return f})),e.d(n,"MyUnitsSlice",(function(){return g}));var a=e(5),r=e(4),o=e(3),c=e.n(o),i=e(6),l=e(15),u=e(28),d={value:"",label:"Select Unit"},s=Object(i.b)("Units/setUnitSelectedDropdown",(function(t){return t})),p=Object(i.b)("Units/getUnits",function(){var t=Object(r.a)(c.a.mark((function t(n,e){var a,r,o,i,d,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.rejectWithValue,n.flat_mode=!0,null===Object(u.s)()){t.next=38;break}return t.next=5,JSON.parse(localStorage.getItem("userData")).member_of;case 5:if(t.t1=r=t.sent,t.t0=null!==t.t1,!t.t0){t.next=9;break}t.t0=void 0!==r;case 9:if(!t.t0){t.next=13;break}t.t2=r,t.next=14;break;case 13:t.t2=[];case 14:if(!((o=t.t2).length>0)){t.next=28;break}if(i=!1,o.some((function(t){return t.children_count>0}))&&(i=!0),!i){t.next=25;break}return t.next=21,l.a.ssoAxiosInterceptor.get("/api/unit",{params:n});case 21:return d=t.sent,t.abrupt("return",{params:n,data:d.data.data,total:d.data.total});case 25:return t.abrupt("return",{data:o});case 26:t.next=38;break;case 28:return t.prev=28,t.next=31,l.a.ssoAxiosInterceptor.get("/api/unit",{params:n});case 31:return s=t.sent,t.abrupt("return",{params:n,data:s.data.data,total:s.data.total});case 35:return t.prev=35,t.t3=t.catch(28),t.abrupt("return",a(t.t3.response.data));case 38:case"end":return t.stop()}}),t,null,[[28,35]])})));return function(n,e){return t.apply(this,arguments)}}()),b=Object(i.b)("Units/getUnit",function(){var t=Object(r.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get("/api/unit/".concat(n));case 2:return e=t.sent,t.abrupt("return",e.data.data);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()),m=Object(i.b)("Units/addUnit",function(){var t=Object(r.a)(c.a.mark((function t(n,e){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,r=e.getState,t.next=3,axios.post("/api/unit",n);case 3:return t.next=5,a(p(r().units.params));case 5:return t.next=7,a(getAllUnit());case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()),f=Object(i.b)("Units/deleteUnit",function(){var t=Object(r.a)(c.a.mark((function t(n,e){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.dispatch,r=e.getState,t.next=3,axios.delete("/apps/unit",{id:n});case 3:return t.next=5,a(p(r().units.params));case 5:return t.next=7,a(getAllUnit());case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(n,e){return t.apply(this,arguments)}}()),g=Object(i.c)({name:"Units",initialState:{crudTitle:"Unit",statusSummary:0,isLoadingSummary:!1,errorSummary:0,dataSummary:[],status:0,isLoading:!1,error:0,data:[],total:1,dataDropdown:[],selectedUnit:{},selectedUnitMulti:[]},reducers:{setUnitSelected:function(t,n){return console.log("setUnitSelected"),Object(a.a)(Object(a.a)({},t),{},{selectedUnit:n.payload})},resetAll:function(t){t.data=[],t.dataDropdown=[],t.total=1,t.selectedUnit=null,t.selectedUnitMulti=null}},extraReducers:function(t){t.addCase(s.fulfilled,(function(t,n){return console.log("setUnitSelectedDropdown"),Object(a.a)(Object(a.a)({},t),{},{selectedUnit:n.payload})})).addCase(p.pending,(function(t){t.status="loading",t.isLoading=!0})).addCase(p.fulfilled,(function(t,n){var e,a;(t.status="succeeded",t.isLoading=!1,null!==(e=n.payload)&&void 0!==e&&e.data)&&(t.data=n.payload.data,t.dataDropdown=n.payload.data.map((function(t){return{value:t.id,label:t.name}})),t.dataDropdown.unshift(d),null!==(a=n.payload)&&void 0!==a&&a.total&&(t.total=n.payload.total),t.selectedUnit=t.dataDropdown[0])})).addCase(p.rejected,(function(t,n){t.status="failed",t.isLoading=!1,t.error=n.error.message})).addCase(b.fulfilled,(function(t,n){t.selectedUnit=n.payload}))}});n.default=g.reducer}}]);
//# sourceMappingURL=196.94cbd9bf.chunk.js.map