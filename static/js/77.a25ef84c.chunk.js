(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[77],{141:function(e,t,a){"use strict";a.r(t);var c=a(8),n=a(6),i=a(9),l=a(0),o=a(20),r=a(68),s=(a(520),a(10)),d=a(103),u=a(507),m=(a(182),a(133),a(69)),b=a(31),j=(a(516),a(510),a(517),a(511)),p=a(77),f=a(319),O=(a(70),a(16)),g=(a(7),a(2));t.default=function(e){var t=e.show,v=e.setShow,h=e.detailPage,y=e.formState,x=e.setFormState,N=Object(d.a)().t,S=Object(o.g)().id,M=Object(l.useContext)(m.a).colors,D=Object(l.useState)("Please Wait"),_=Object(i.a)(D,2),k=(_[0],_[1]),F=Object(O.b)(),w=Object(O.c)((function(e){return e})),T=Object(l.useState)({}),A=Object(i.a)(T,2),C=A[0],E=A[1],L=Object(l.useState)({}),V=Object(i.a)(L,2),q=V[0],G=(V[1],Object(l.useState)({})),J=Object(i.a)(G,2),B=J[0],I=J[1],P=Object(j.e)({}),U=(P.control,P.setError),z=P.handleSubmit,H=(P.formState.errors,function(){F(Object(p.resetSelectedData)())}),Q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a&&!Array.isArray(e))if(q[t]){var i=q[t].indexOf(e);-1!==i?q[t].splice(i,1):q[t].push(e)}else q[t]=[e];else q[t]=e;I(Object(n.a)(Object(n.a)({},B),{},Object(c.a)({},t,!1)))};return Object(l.useEffect)((function(){for(var e={},t=p.dynamicForm.filter((function(e){return"dropdown"===e.type||"table"===e.type})),c=function(c){var n,i,o,r,s,d=t[c].fieldName,u=t[c].fieldName.replaceAll("id_","");q[d]=null,B[d]=!1;var m=Object(l.lazy)((function(){return a(535)("./".concat(u))}));e["".concat(u,"_comp")]=Object(g.jsx)(m,{lookupMode:!0,lookupMode_fieldName:d,lookupMode_dropdown:"dropdown"===t[c].type,lookupMode_isMulti:null!==(n=t[c].isMultiSelection)&&void 0!==n&&n,lookupMode_onChange:Q,lookupMode_defaultValue:null!==(i=t[c])&&void 0!==i&&i.isM2MDefValFromGrid?w[p.storeName].data.map((function(e){return e[d]})):null!==(o=w[p.storeName])&&void 0!==o&&o.selectedData?w[p.storeName].selectedData[d]:"",lookupMode_isM2MDefValFromGrid:null!==(r=null===(s=t[c])||void 0===s?void 0:s.isM2MDefValFromGrid)&&void 0!==r&&r})},n=0;n<t.length;n++)c(n);E(e)}),[]),Object(g.jsx)(s.E,{isOpen:t,toggle:function(){H(),v(!t)},className:"modal-dialog-centered modal-lg",children:Object(g.jsxs)(u.a,{blocking:w[p.storeName].isLoadingAddEdit||w[p.storeName].isLoadingDetail,loader:Object(g.jsx)(f.b,{}),children:[Object(g.jsx)(s.H,{className:"bg-transparent",toggle:function(){H(),v(!t)}}),Object(g.jsxs)(s.F,{className:"px-sm-5 pt-50 pb-5",children:[Object(g.jsx)("div",{className:"text-center mb-2",children:Object(g.jsxs)("h2",{className:"mb-1",children:[N("edit"===y?"Edit":"Add")," ",N(p.pageTitle)]})}),Object(g.jsx)(s.x,{onSubmit:z("edit"===y?function(){if(function(e){if("edit"===y){var t=Object(n.a)({},Object(b.r)(w[p.storeName].selectedData));for(var a in delete t.id,t)a in e||delete t[a];return JSON.stringify(Object(b.r)(t))!==JSON.stringify(Object(b.r)(e))}return!0}(q))if(Object.values(data).every((function(e){return null!==e&&""!==e})))k("".concat(N("Updating")," ").concat(N(p.pageTitle)," ").concat(N("Detail")," Data")),F(Object(p.putData)(data)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),r.b.success("".concat(N("Successfully Updated")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),h&&F(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else for(var e in data){var a;0===(null===(a=data[e])||void 0===a?void 0:a.length)&&U(e,{type:"manual"})}else Object(r.b)("".concat(N("You haven't changed anything")),{icon:"\ud83d\udc4f"})}:function(){if(Object.values(q).every((function(e){return null!==e&&""!==e})))k("".concat(N("Creating a New ".concat(p.pageTitle)))),F(Object(p.postData)(q)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),r.b.success("".concat(N("Successfully Created")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),h&&F(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else{var e=Object.assign({},B);for(var a in q){var c;null!==q[a]&&0!==(null===(c=q[a])||void 0===c?void 0:c.length)||(e[a]=!0)}I(e)}}),children:Object(g.jsxs)(s.Q,{className:"gy-1 pt-75",children:[p.dynamicForm.map((function(e,t){if(["dropdown","table"].includes(e.type)){var a,c,n=e.fieldName.replaceAll("id_","");return Object(g.jsxs)(s.s,{md:12,xs:12,children:["table"!==e.type&&Object(g.jsx)(s.D,{className:"form-label",for:e.fieldName,children:N(null!==(a=e.fieldLabel)&&void 0!==a?a:"")}),Object(g.jsx)(l.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsxs)("div",{className:B[e.fieldName]?"dynamicForm_input dynamicForm_input_invalid":"dynamicForm_input",children:[C["".concat(n,"_comp")],(null===e||void 0===e?void 0:e.isM2MDefValFromGrid)&&q[e.fieldName]&&Object(g.jsxs)("div",{style:{textAlign:"right"},className:"text-primary",children:[null===(c=q[e.fieldName])||void 0===c?void 0:c.length," ",N(e.fieldLabel)," ",N("Selected")]})]})})]},n)}})),Object(g.jsxs)(s.s,{xs:12,className:"text-center mt-2 pt-50",children:[Object(g.jsx)(s.i,{type:"submit",className:"me-1",color:"primary",children:N("Submit")}),Object(g.jsx)(s.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){H(),x("add"),v(!1)},children:N("Cancel")})]})]})})]})]})})}}}]);
//# sourceMappingURL=77.a25ef84c.chunk.js.map