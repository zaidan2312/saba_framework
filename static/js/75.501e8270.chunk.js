(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[75],{164:function(e,t,a){"use strict";a.r(t);var c=a(8),n=a(5),i=a(9),l=a(0),s=a(21),r=a(83),o=(a(587),a(10)),d=a(79),u=a(573),m=a(218),b=(a(161),a(84)),j=a(28),p=(a(585),a(577),a(588),a(578)),f=a(90),O=a(14),v=a(2);t.default=function(e){var t=e.show,g=e.setShow,h=e.detailPage,x=e.formState,y=e.setFormState,N=e.currentData,S=void 0===N?null:N,_=Object(d.a)().t,M=Object(s.g)().id,D=Object(O.b)(),F=Object(O.c)((function(e){return e[f.storeName]})),k=Object(l.useContext)(b.a).colors,w=Object(l.useState)("Please Wait"),C=Object(i.a)(w,2),T=C[0],V=C[1],G=Object(O.c)((function(e){return e})),L=Object(l.useState)({}),A=Object(i.a)(L,2),E=A[0],I=A[1],q=Object(l.useState)({}),J=Object(i.a)(q,2),B=J[0],P=(J[1],Object(l.useState)({})),U=Object(i.a)(P,2),z=U[0],R=U[1],W=Object(p.e)({}),Y=(W.control,W.setError),H=W.handleSubmit,K=(W.formState.errors,function(){return Object(v.jsxs)(l.Fragment,{children:[Object(v.jsx)(m.a,{}),Object(v.jsxs)(o.r,{className:"mb-0 mt-1",children:[_(T),"..."]})]})}),Q=function(){D(Object(f.resetSelectedData)())},X=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a)if(B[t]){var i=B[t].indexOf(e);-1!==i?B[t].splice(i,1):B[t].push(e)}else B[t]=[e];else B[t]=e;R(Object(n.a)(Object(n.a)({},z),{},Object(c.a)({},t,!1)))};return Object(l.useEffect)((function(){for(var e={},t=f.dynamicForm,c=function(c){var n=t[c].fieldName,i=t[c].fieldLabel,s=t[c].fieldName.replaceAll("id_","");if(B[n]=null,z[n]=!1,"dropdown"===t[c].type||"table"===t[c].type){var r,d,u,m,b,j=Object(l.lazy)((function(){return a(606)("./".concat(s))}));e["".concat(s,"_comp")]=Object(v.jsxs)(l.Fragment,{children:[Object(v.jsx)(o.E,{className:"form-label",for:n,children:_(null!==i&&void 0!==i?i:"")}),Object(v.jsx)(j,{lookupMode:!0,lookupMode_fieldName:n,lookupMode_dropdown:"dropdown"===t[c].type,lookupMode_isMulti:null!==(r=t[c].isMultiSelection)&&void 0!==r&&r,lookupMode_onChange:X,lookupMode_defaultValue:null!==(d=t[c])&&void 0!==d&&d.isM2MDefValFromGrid?G[f.storeName].data.map((function(e){return e[n]})):null!==(u=G[f.storeName])&&void 0!==u&&u.selectedData?G[f.storeName].selectedData[n]:"",lookupMode_isM2MDefValFromGrid:null!==(m=null===(b=t[c])||void 0===b?void 0:b.isM2MDefValFromGrid)&&void 0!==m&&m},"dynInput_".concat(n))]})}else{var p,O;e["".concat(s,"_comp")]=Object(v.jsxs)(l.Fragment,{children:[Object(v.jsx)(o.E,{className:"form-label",for:n,children:_(null!==i&&void 0!==i?i:"")}),Object(v.jsx)(o.B,{defaultValue:null!==(p=t[c])&&void 0!==p&&p.isM2MDefValFromGrid?G[f.storeName].data.map((function(e){return e[n]})):null!==(O=G[f.storeName])&&void 0!==O&&O.selectedData?G[f.storeName].selectedData[n]:"",onChange:function(e){var a;return X(e.target.value,n,null!==(a=t[c].isMultiSelection)&&void 0!==a&&a)},id:"dynInput_".concat(n)},"dynInput_".concat(n))]})}},n=0;n<t.length;n++)c(n);I(e)}),[]),Object(v.jsx)(o.F,{isOpen:t,toggle:function(){Q(),g(!t)},className:"modal-dialog-centered modal-lg",children:Object(v.jsxs)(u.a,{blocking:F.isLoadingAddEdit||F.isLoadingDetail,loader:Object(v.jsx)(K,{}),children:[Object(v.jsx)(o.I,{className:"bg-transparent",toggle:function(){Q(),g(!t)}}),Object(v.jsxs)(o.G,{className:"px-sm-5 pt-50 pb-5",children:[Object(v.jsxs)("div",{className:"text-center mb-2",children:[Object(v.jsxs)("h2",{className:"mb-1",children:[_("edit"===x?"Edit":"Add Sub")," ",_(f.pageTitle)]}),Object(v.jsxs)("p",{className:"mb-1",children:[_("Child for ")," ",S?_(S.title):""]})]}),Object(v.jsx)(o.y,{onSubmit:H("edit"===x?function(){if(function(e){if("edit"===x){var t=Object(n.a)({},Object(j.C)(G[f.storeName].selectedData));for(var a in delete t.id,t)a in e||delete t[a];return JSON.stringify(Object(j.C)(t))!==JSON.stringify(Object(j.C)(e))}return!0}(B))if(Object.values(data).every((function(e){return null!==e&&""!==e})))V("".concat(_("Updating")," ").concat(_(f.pageTitle)," ").concat(_("Detail")," Data")),D(Object(f.putData)(data)).then((function(e){"fulfilled"===e.meta.requestStatus?(g(!t),r.b.success("".concat(_("Successfully Updated")," ").concat(_(f.pageTitle)),{style:{padding:"16px",color:k.success.main,border:"1px solid ".concat(k.success.main)},iconTheme:{primary:k.success.main}}),h&&D(Object(f.getDataById)(M))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:k.danger.main,border:"1px solid ".concat(k.danger.main)},iconTheme:{primary:k.danger.main}})}));else for(var e in data){var a;0===(null===(a=data[e])||void 0===a?void 0:a.length)&&Y(e,{type:"manual"})}else Object(r.b)("".concat(_("You haven't changed anything")),{icon:"\ud83d\udc4f"})}:function(){if(Object.values(B).every((function(e){return null!==e&&""!==e})))V("".concat(_("Creating a New ".concat(f.pageTitle)))),D(Object(f.postData)(B)).then((function(e){"fulfilled"===e.meta.requestStatus?(g(!t),r.b.success("".concat(_("Successfully Created")," ").concat(_(f.pageTitle)),{style:{padding:"16px",color:k.success.main,border:"1px solid ".concat(k.success.main)},iconTheme:{primary:k.success.main}}),h&&D(Object(f.getDataById)(M))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:k.danger.main,border:"1px solid ".concat(k.danger.main)},iconTheme:{primary:k.danger.main}})}));else{var e=Object.assign({},z);for(var a in B){var c;null!==B[a]&&0!==(null===(c=B[a])||void 0===c?void 0:c.length)||(e[a]=!0)}R(e)}}),children:Object(v.jsxs)(o.R,{className:"gy-1 pt-75",children:[f.dynamicForm.map((function(e,t){var a,c,n=e.fieldName.replaceAll("id_","");return["dropdown","table"].includes(e.type)?"table"===e.type?Object(v.jsx)(o.t,{md:12,xs:12,children:Object(v.jsx)(l.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsxs)("div",{className:z[e.fieldName]?"dynamicForm_input dynamicForm_input_invalid":"dynamicForm_input",children:[E["".concat(n,"_comp")],(null===e||void 0===e?void 0:e.isM2MDefValFromGrid)&&B[e.fieldName]&&Object(v.jsxs)("div",{style:{textAlign:"right"},className:"text-primary",children:[null===(a=B[e.fieldName])||void 0===a?void 0:a.length," ",_(e.fieldLabel)," ",_("Selected")]})]})})},n):Object(v.jsx)(o.t,{md:12,xs:12,children:Object(v.jsx)(l.Suspense,{fallback:Object(v.jsx)("div",{children:"Loading..."}),children:Object(v.jsxs)("div",{className:z[e.fieldName]?"dynamicForm_input_invalid":"",children:[E["".concat(n,"_comp")],(null===e||void 0===e?void 0:e.isM2MDefValFromGrid)&&B[e.fieldName]&&Object(v.jsxs)("div",{style:{textAlign:"right"},className:"text-primary",children:[null===(c=B[e.fieldName])||void 0===c?void 0:c.length," ",_(e.fieldLabel)," ",_("Selected")]})]})})},n):Object(v.jsx)(o.t,{md:12,xs:12,children:Object(v.jsx)("div",{className:z[e.fieldName]?"dynamicForm_input_invalid":"",children:E["".concat(n,"_comp")]})},n)})),Object(v.jsxs)(o.t,{xs:12,className:"text-center mt-2 pt-50",children:[Object(v.jsx)(o.i,{type:"submit",className:"me-1",color:"primary",children:_("Submit")}),Object(v.jsx)(o.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){Q(),y("add"),g(!1)},children:_("Cancel")})]})]})})]})]})})}}}]);
//# sourceMappingURL=75.501e8270.chunk.js.map