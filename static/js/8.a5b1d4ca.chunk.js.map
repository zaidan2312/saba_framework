{"version":3,"sources":["../../src/index.ts","../../src/mounts.js","../../src/index.js","../node_modules/react-dnd/dist/esm/decorators/utils.js","../node_modules/react-dnd/dist/esm/core/DragPreviewImage.js","../node_modules/react-dnd/dist/esm/core/DndContext.js","../node_modules/react-dnd/dist/esm/core/DndProvider.js","../../../src/AsapQueue.ts","../../../src/TaskFactory.ts","../node_modules/react-dnd/dist/esm/internals/wrapConnectorHooks.js","../node_modules/react-dnd/dist/esm/internals/isRef.js","../node_modules/react-dnd/dist/esm/decorators/DragLayer.js","../node_modules/react-dnd/dist/esm/hooks/useIsomorphicLayoutEffect.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/DragSourceImpl.js","../node_modules/react-dnd/dist/esm/hooks/useDragDropManager.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useRegisteredDragSource.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSource.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragType.js","../node_modules/react-dnd/dist/esm/hooks/useOptionalFactory.js","../node_modules/react-dnd/dist/esm/hooks/useCollector.js","../node_modules/react-dnd/dist/esm/hooks/useMonitorOutput.js","../node_modules/react-dnd/dist/esm/hooks/useCollectedProps.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/connectors.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDrag.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSourceMonitor.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSourceConnector.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/DropTargetImpl.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useRegisteredDropTarget.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTarget.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useAccept.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/connectors.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDrop.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTargetMonitor.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTargetConnector.js","../node_modules/react-dnd/dist/esm/hooks/useDragLayer.js","../node_modules/react-dnd/dist/esm/decorators/createSourceFactory.js","../node_modules/react-dnd/dist/esm/decorators/DragSource.js","../node_modules/react-dnd/dist/esm/decorators/createTargetFactory.js","../node_modules/react-dnd/dist/esm/decorators/DropTarget.js","../node_modules/react-dnd/dist/esm/decorators/disposables.js","../node_modules/react-dnd/dist/esm/decorators/decorateHandler.js","../node_modules/react-dnd-html5-backend/dist/esm/utils/js_utils.js","../node_modules/react-dnd-html5-backend/dist/esm/EnterLeaveCounter.js","../node_modules/react-dnd-html5-backend/dist/esm/BrowserDetector.js","../node_modules/react-dnd-html5-backend/dist/esm/MonotonicInterpolant.js","../node_modules/react-dnd-html5-backend/dist/esm/OffsetUtils.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeTypes.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/nativeTypesConfig.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/getDataFromDataTransfer.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/NativeDragSource.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/index.js","../node_modules/react-dnd-html5-backend/dist/esm/OptionsReader.js","../node_modules/react-dnd-html5-backend/dist/esm/HTML5BackendImpl.js","../node_modules/react-dnd-html5-backend/dist/esm/index.js","../node_modules/react-virtuoso/dist/index.mjs","../node_modules/@nosferatu500/react-sortable-tree/esm/index.js","../node_modules/@nosferatu500/react-dnd-scrollzone/index.js","../node_modules/lodash.throttle/index.js","../../../src/index.ts","../../../src/asap.ts","../../../src/makeRequestCall.ts","../../../src/RawTask.ts","../node_modules/fast-deep-equal/index.js","../node_modules/lodash.isequal/index.js","../node_modules/react-dnd/dist/esm/internals/registration.js","../node_modules/react-dnd/dist/esm/internals/SourceConnector.js","../node_modules/react-dnd/dist/esm/internals/DragSourceMonitorImpl.js","../node_modules/react-dnd/dist/esm/internals/DropTargetMonitorImpl.js","../node_modules/react-dnd/dist/esm/internals/TargetConnector.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/types.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/local/setClientOffset.js","../node_modules/dnd-core/dist/esm/utils/js_utils.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/beginDrag.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/publishDragSource.js","../node_modules/dnd-core/dist/esm/utils/matchesType.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/hover.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/drop.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/endDrag.js","../node_modules/dnd-core/dist/esm/classes/DragDropManagerImpl.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/index.js","../node_modules/dnd-core/node_modules/redux/es/redux.js","../node_modules/dnd-core/dist/esm/utils/equality.js","../node_modules/dnd-core/dist/esm/reducers/dragOffset.js","../node_modules/dnd-core/dist/esm/actions/registry.js","../node_modules/dnd-core/dist/esm/reducers/dragOperation.js","../node_modules/dnd-core/dist/esm/reducers/refCount.js","../node_modules/dnd-core/dist/esm/utils/dirtiness.js","../node_modules/dnd-core/dist/esm/reducers/dirtyHandlerIds.js","../node_modules/dnd-core/dist/esm/reducers/stateId.js","../node_modules/dnd-core/dist/esm/reducers/index.js","../node_modules/dnd-core/dist/esm/utils/coords.js","../node_modules/dnd-core/dist/esm/classes/DragDropMonitorImpl.js","../node_modules/dnd-core/dist/esm/interfaces.js","../node_modules/dnd-core/dist/esm/utils/getNextUniqueId.js","../node_modules/dnd-core/dist/esm/contracts.js","../node_modules/dnd-core/dist/esm/classes/HandlerRegistryImpl.js","../node_modules/dnd-core/dist/esm/createDragDropManager.js"],"names":["invariant","condition","format","args","error","argIndex","mounts","key","getter","swal","noop","withReactContent","extractReactParams","reactParams","otherParams","mountKeys","mount","Object","React","render","domElement","ReactDOM","unrender","_main","this","__mountedDomElements","__params","superDidOpen","superDidDestroy","didOpen","popup","didDestroy","update","argsToParams","params","forEach","ParentSwal","_typeof","obj","Symbol","iterator","constructor","prototype","getDecoratedComponent","instanceRef","currentRef","current","decoratedRef","isRefable","C","Component","_item$$$typeof","$$typeof","toString","isRefForwardingComponent","checkDecoratorArguments","functionName","signature","isFunction","input","isPlainObject","isObjectLike","getPrototypeOf","proto","isValidType","type","allowArray","Array","isArray","every","t","DragPreviewImage","memo","_ref","connect","src","useEffect","Image","connected","img","onload","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","idx","valueA","valueB","DndContext","createContext","dragDropManager","undefined","_excluded","_slicedToArray","arr","i","_arrayWithHoles","_i","_s","_e","_arr","_n","_d","call","next","done","push","value","length","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","slice","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","refCount","INSTANCE_SYM","for","DndProvider","children","_getDndContextValue","props","manager","backend","context","arguments","getGlobalContext","options","debugMode","ctx","createDragDropManager","createSingletonDndContext","isGlobalInstance","getDndContextValue","_getDndContextValue2","_jsx","Provider","assign","global","window","AsapQueue","queue","pendingErrors","flushing","index","capacity","flush","q","currentIndex","scan","newLength","registerPendingError","requestErrorThrow","requestFlush","makeRequestCall","makeRequestCallFromTimer","shift","enqueueTask","task","TaskFactory","onError","freeTasks","create","tasks","pop","RawTask","throwIfCompositeComponentElement","element","displayName","Error","concat","wrapConnectorHooks","hooks","wrappedHooks","hook","endsWith","wrappedHook","elementOrNode","isValidElement","node","ref","cloneWithRef","wrapHookToRecognizeElement","setRef","newRef","previousRef","cloneElement","isRef","hasOwnProperty","_classCallCheck","instance","Constructor","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_createClass","protoProps","staticProps","_inherits","subClass","superClass","_setPrototypeOf","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","e","_isNativeReflectConstruct","result","Super","_getPrototypeOf","NewTarget","apply","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","_defineProperty","DragLayer","collect","DecoratedComponent","Decorated","_options$arePropsEqua","arePropsEqual","DragLayerContainer","_Component","_super","_this","_len","_key","createRef","isCurrentlyMounted","nextState","getCurrentState","state","setState","nextProps","handleChange","unsubscribeFromOffsetChange","unsubscribeFromStateChange","_this2","Consumer","receiveDragDropManager","monitor","getMonitor","subscribeToOffsetChange","subscribeToStateChange","hoistStatics","useIsomorphicLayoutEffect","useLayoutEffect","DragSourceImpl","spec","connector","_result","item","canDrag","globalMonitor","isDragging","getSourceId","end","getItem","reconnect","useDragDropManager","useContext","useRegisteredDragSource","handler","useMemo","useDragSource","itemType","useDragType","_registerSource2","registerSource","handlerId","unregister","receiveHandlerId","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","useOptionalFactory","arg","deps","memoDeps","useCollector","onUpdate","_useState2","useState","collected","setCollected","updateCollected","useCallback","nextValue","equal","useCollectedProps","collector","onCollect","_useCollector2","getHandlerId","handlerIds","useMonitorOutput","useConnectDragSource","dragSource","useConnectDragPreview","dragPreview","useDrag","specArg","begin","DragSourceMonitorImpl","useDragSourceMonitor","dragSourceOptions","dragPreviewOptions","SourceConnector","getBackend","disconnectDragSource","disconnectDragPreview","useDragSourceConnector","previewOptions","DropTargetImpl","canDrop","hover","drop","useRegisteredDropTarget","dropTarget","useDropTarget","accept","useAccept","_registerTarget2","registerTarget","map","a","join","useConnectDropTarget","useDrop","DropTargetMonitorImpl","useDropTargetMonitor","TargetConnector","dropTargetOptions","disconnectDropTarget","useDropTargetConnector","useDragLayer","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","beginDrag","sourceId","endDrag","createSourceFactory","DragSource","getType","createSource","decorateHandler","containerDisplayName","createHandler","registerHandler","createConnector","createMonitor","TargetImpl","createTargetFactory","DropTarget","createTarget","Disposable","action","isDisposed","d","dispose","isDisposable","empty","CompositeDisposable","disposables","shouldDispose","splice","currentDisposables","_i2","SerialDisposable","old","DragDropContainer","disposable","receiveProps","currentType","prevProps","receiveType","handlerMonitor","handlerConnector","_registerHandler2","unsubscribe","setDisposable","_ref2","requestAnimationFrame","_this2$handlerConnect","memoize","fn","EnterLeaveCounter","isNodeInDocument","enteringNode","previousLength","entered","itemsA","itemsB","set","Set","insertItem","add","union","filter","contains","leavingNode","items","isFirefox","navigator","userAgent","isSafari","safari","MonotonicInterpolant","xs","ys","indexes","sort","b","dx","dy","dys","dxs","ms","c1s","m2","mNext","dxNext","common","m","c2s","c3s","_i3","c1","invDx","_common","x","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","_el$getBoundingClient","getBoundingClientRect","top","left","y","getEventClientOffset","clientX","clientY","getDragPreviewOffset","sourceNode","clientOffset","anchorPoint","offsetPoint","isImage","_document$documentEle","nodeName","document","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","_getDragPreviewSize","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","_nativeTypesConfig","FILE","URL","TEXT","HTML","getDataFromDataTransfer","dataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","exposeProperties","files","_dataTransfer","matchesTypes","html","_dataTransfer2","urls","split","_dataTransfer3","text","_dataTransfer4","NativeDragSource","config","initializeExposedProperties","property","get","console","warn","newProperties","defineProperties","handle","matchNativeItemType","dataTransferTypes","types","nativeItemType","some","OptionsReader","globalContext","optionsArgs","_this$globalContext","_this$optionsArgs","rootElement","ownKeys","object","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_objectSpread","getOwnPropertyDescriptors","HTML5BackendImpl","Map","sourceNodes","isDraggingNativeItem","actions","currentNativeHandle","registry","removeSource","currentNativeSource","body","currentDragSourceNode","clearCurrentDragSourceNode","dragStartSourceIds","defaultPrevented","publishSource","getSourceClientOffset","nativeType","setDragImage","sourcePreviewNodes","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","setCurrentDragSourceNode","captureDraggingState","publishDragSource","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","dragEnterTargetIds","enterLeaveCounter","enter","altKeyPressed","altKey","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","dragOverTargetIds","lastClientOffset","hoverRafId","leave","endDragNativeItem","_this$currentNativeSo","dropTargetIds","loadDataTransfer","reset","dragDrop","tagName","isContentEditable","getActions","getRegistry","_this$dragStartSource","_this$dragOverTargetI","size","sourcePreviewNodeOptions","sourceNodeOptions","root","__isReactDndBackendSetUp","addEventListeners","_this$window","removeEventListeners","asyncEndDragFrameId","cancelAnimationFrame","delete","_this3","handleDragStart","handleSelectStart","setAttribute","addEventListener","removeEventListener","_this4","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","getItemType","createNativeDragSource","addSource","_this5","mouseMoveTimeoutTimer","_this5$rootElement","endDragIfSourceWasRemovedFromDOM","_this$window2","clearTimeout","unshift","HTML5Backend","compose","thrush","proc","curry2to1","arg1","arg2","curry1to0","tap","tup","always","joinProc","procs","isDefined","subscribe","emitter","subscription","publish","publisher","getValue","depot","handleNext","unsub","stream","subscriptions","statefulStream","initial","innerSubject","streamFromEmitter","stream2","statefulStreamFromEmitter","combineOperators","operators","subscriber","reduceRight","pipe","project","defaultComparator","previous","distinctUntilChanged","comparator","predicate","mapTo","scanner","skip","times","throttleTime","interval","timeout","currentValue","debounceTime","withLatestFrom","sources","values","called","pendingCall","allCalled","pow","bit","prevCalled","call2","merge","duc","combineLatest","emitters","system","dependencies","singleton","id","useIsomorphicLayoutEffect$2","systemToComponent","systemSpec","map2","Root","requiredPropNames","required","optionalPropNames","optional","methodNames","methods","eventNames","events","Context","applyPropsToSystem","system2","requiredPropName","optionalPropName","buildEventHandlers","handlers","eventName","currentSubscription","cleanup","eventHandler","forwardRef","propsWithChildren","singletons","_init","id2","has","init","system22","useImperativeHandle","acc","methodName","buildMethods","createElement","prop","omit","usePublisher","useEmitterValue","setValue","useEmitter","callback","useIsomorphicLayoutEffect$1","LogLevel","LogLevel2","CONSOLE_METHOD_MAP","getGlobalThis","globalThis","loggerSystem","logLevel","log","label","message","_a","level","currentLevel","useSizeWithElRef","enabled","useRef","callbackRef","_el","ResizeObserver","observer","entries","offsetParent","elRef","observe","unobserve","useSize","useChangedListContentsSizes","itemSize","scrollContainerStateCallback","gap","customScrollParent","memoedCallback","ranges","field","results","child","dataset","parseInt","knownSize","parseFloat","ERROR","lastResult","endIndex","startIndex","getChangedChildSizes","scrollableElement","windowScrolling","lastElementChild","scrollTop","pageYOffset","scrollHeight","viewportHeight","innerHeight","WARN","resolveGapValue$1","getComputedStyle","rowGap","correctItemSize","dimension","round","approximatelyEqual","num1","num2","abs","useScrollTop","smoothScrollTargetReached","scrollerElement","scrollerRefCallback","scrollerRef","scrollTopTarget","timeoutRef","ev","windowScroll","suppressFlushSync","flushSync","scrollToCallback","location","scrollerElement2","isSmooth","behavior","maxScrollTop","ceil","min","scrollTo","scrollByCallback","scrollBy","localRef","passive","domIOSystem","scrollContainerState","deviation","statefulScrollTop","headerHeight","fixedHeaderHeight","fixedFooterHeight","footerHeight","scrollingInProgress","NIL_NODE","lvl","newAANode","k","v","l","r","newTree","remove","last","adjust","clone","deleteLast","find","findMaxKeyValue","Infinity","Number","insert","rebalance","walkWithin","start","walk","isSingle","skew","rl","rlvl","rangesWithin","adjustedStart","arrayToRanges","parser","nextIndex","findIndexOfClosestSmallerOrEqual","match","findClosestSmallerOrEqual","findRange","startValue","endValue","recalcSystem","recalcInProgress","rangeIncludes","refRange","range","affectedGroupCount","offset","groupIndices","recognizedOffsetItems","groupIndex","indexComparator","itemIndex","offsetComparator","itemOffset","offsetPointParser","point","createOffsetTree","prevOffsetTree","syncStart","sizeTree","offsetTree","prevIndex","prevSize","prevOffset","kv","startIndex2","indexOffset","aOffset","lastIndex","lastOffset","lastSize","sizeStateReducer","DEBUG","newSizeTree","groupSize","tree","overlappingRanges","firstPassDone","shouldInsert","rangeStart","rangeEnd","rangeValue","insertRanges","newOffsetTree","groupOffsetTree","offsetOf","itemCount","originalIndexFromLocation","sizes","isGroupLocation","originalIndexFromItemIndex","hasGroups","groupOffset","SIZE_MAP","sizeSystem","sizeRanges","totalCount","statefulTotalCount","unshiftWith","shiftWith","firstItemIndex","fixedItemSize","defaultItemSize","data","prevGroupIndices","prev","curr","groupIndices2","sizes2","gap2","totalCount2","trackItemSizes","listRefresh","oldSizes","newSizes","changed","val","prevGroupIndicesValue","log2","beforeUnshiftWith","unshiftWith2","groupedMode","initialRanges","defaultSize","firstGroupSize","prependedGroupItemsCount","theGroupIndex","groupItemCount","sizeTreeKV","shiftWithOffset","shiftWith2","removedItemsCount","SUPPORTS_SCROLL_TO_OPTIONS","style","normalizeIndexLocation","align","scrollToIndexSystem","scrollToIndex","topListHeight","unsubscribeNextListRefresh","cleartTimeoutRef","unsubscribeListRefresh","viewportHeight2","topListHeight2","headerHeight2","footerHeight2","fixedHeaderHeight2","fixedFooterHeight2","normalLocation","limit","retry","listChanged","UP","DOWN","INITIAL_BOTTOM_STATE","atBottom","notAtBottomBecause","offsetBottom","stateFlagsSystem","isAtBottom","isAtTop","atBottomStateChange","atTopStateChange","atBottomThreshold","atTopThreshold","isScrolling","isScrollingBy","atBottomState","atBottomBecause","scrollTopDelta","scrollTop2","lastJumpDueToItemResize","jump","scrollDirection","direction","prevScrollTop","scrollVelocity","propsReadySystem","propsReady","didMount","ready","skipFrames","frameCount","getInitialTopMostItemIndexNumber","initialTopMostItemIndexSystem","scrolledToInitialItem","initialTopMostItemIndex","scrollScheduled","didMount2","scrolledToInitialItem2","defaultItemSize2","scrollScheduled2","initialTopMostItemIndex2","normalizeFollowOutput","follow","followOutputSystem","followOutput","autoscrollToBottom","pendingScrollHandle","scrollToBottom","followOutputBehavior","trapNextSizeIncrease","followOutput2","cancel","isAtBottom2","scrollingInProgress2","shouldFollow","behaviorFromFollowOutput","refreshed","groupCountsToIndicesAndCount","counts","groupCount","groupedListSystem","groupCounts","topItemsIndexes","groupIndicesAndCount","tupleComparator","rangeComparator","TOP","BOTTOM","NONE","getOverscan","overscan","main","reverse","getViewportIncrease","sizeRangeSystem","listBoundary","increaseViewportBy","visibleRange","listTop","listBottom","overscan2","deviation2","increaseViewportBy2","stickyHeaderHeight","headerVisible","topViewportAddition","bottomViewportAddition","EMPTY_LIST_STATE","topItems","offsetTop","bottom","transposeItems","originalIndex","transposedItems","groupRanges","currentRange","currentGroupIndex","transposedItem","buildListState","lastItem","listStateSystem","groupedListSystem2","rangeTopListHeight","stateFlags","itemsRendered","listState","recalcInProgress2","data2","dataChangeInProgress","startOffset","endOffset","topItemsIndexes2","firstItemIndex2","sizesValue","probeItemSet","rangeStartIndex","rangeEndIndex","minStartIndex","offsetPointRanges","rangesWithinOffsets","maxIndex","endReached","startReached","rangeChanged","initialItemCountSystem","initialItemCount","count","includedGroupsCount","adjustedCount","_","scrollSeekSystem","isSeeking","scrollSeekConfiguration","speed","isSeeking2","exit","velocity","change","scrollSeekRangeChanged","topItemCountSystem","topItemCount","totalListHeightSystem","totalListHeightChanged","totalListHeight","listState2","simpleMemoize","func","isMobileSafari","upwardScrollFixSystem","deviationOffset","prevItems","prevTotalCount","prevTotalHeight","lastJumpDueToItemResize2","totalHeight","newDev","scrollDirection2","amount","scrollByWith","deviationAmount","is","recalc","getItemOffset","defaultGroupSize","initialScrollTopSystem","initialScrollTop","alignToBottomSystem","alignToBottom","paddingTopAddition","totalListHeight2","windowScrollerSystem","windowScrollContainerState","windowViewportRect","windowScrollTo","useWindowScroll","windowScrollTop","scrollTo2","defaultCalculateViewLocation","itemTop2","itemTop","itemBottom","viewportTop","viewportBottom","locationParams","rest","scrollIntoViewSystem","scrollIntoView","viewLocation","calculateViewLocation","actualIndex","stateLoadSystem","getState","restoreStateFrom","sizeArray","nextSize","locationFromSnapshot","snapshot","featureGroup1System","sizeRange","scrollSeek","initialScrollTopSystem2","windowScroller","logger","listSystem","domIO","stateLoad","flags","featureGroup1","visibleHeight","fixedItemHeight","defaultItemHeight","WEBKIT_STICKY","STICKY","positionStickyCssValue","position","useWindowViewportRectRef","viewportInfo","calculateInfo","rect","visibleWidth","customScrollParentRect","deltaTop","scrollAndResizeEventHandler","VirtuosoMockContext","VirtuosoGridMockContext","identity","listComponentPropsSystem","itemContent","groupContent","components","computeItemKey","headerFooterTag","distinctProp","propName","components2","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","combinedSystem$2","listSystem2","propsSystem","DefaultScrollSeekPlaceholder$1","GROUP_STYLE","zIndex","overflowAnchor","ITEM_STYLE$1","Items$1","showTopList","useEmitterValue$2","usePublisher$2","windowScrollContainerStateCallback","_scrollContainerStateCallback","setDeviation","useEmitter$2","hasGroups2","containerStyle","boxSizing","paddingTop","paddingBottom","marginTop","visibility","contextPropIfNotDomElement","scrollerStyle","outline","overflowY","WebkitOverflowScrolling","viewportStyle","topItemListStyle","Header$1","Header2","Footer$1","Footer2","buildScroller","usePublisher2","useEmitter2","useEmitterValue2","tabIndex","buildWindowScroller","Viewport$2","viewportRef","itemHeight","WindowViewport$2","TopItemListContainer","TopItemList","TheScroller","WindowScroller$2","Scroller$2","TheViewport","List","Virtuoso","INITIAL_GRID_STATE","itemWidth","PROBE_GRID_STATE","buildItems","dataItem","gapComparator","column","row","dimensionComparator","gridSystem","gridState","viewportDimensions","itemDimensions","stateChanged","stateRestoreInProgress","itemDimensions2","viewportDimensions2","viewport","_value","initialItemCount2","columnGap","viewportWidth","buildProbeGridState","perRow","itemsPerRow","gridLayout","rowCount","hasScrolled","stateRestoreInProgress2","gridState2","gridComponentPropsSystem","itemClassName","listClassName","combinedSystem$1","gridSystem2","gridComponentPropsSystem2","GridItems","useEmitterValue$1","scrollHeightCallback","usePublisher$1","gridGap","listRef","firstItem","firstChild","resolveGapValue","className","Header","Footer","Viewport$1","WindowViewport$1","WindowScroller$1","Scroller$1","useEmitter$1","tableComponentPropsSystem","fixedHeaderContent","fixedFooterContent","TableComponent","TableHeadComponent","TableFooterComponent","TableBodyComponent","TableRowComponent","FillerRow","combinedSystem","DefaultScrollSeekPlaceholder","DefaultFillerRow","padding","border","ITEM_STYLE","Items","paddingTopEl","paddingBottomEl","Viewport","WindowViewport","theadRef","tfootRef","WindowScroller","Scroller","TheTable","TheTHead","TheTFoot","theHead","theFoot","borderSpacing","getReactElementText","parent","stringSearch","searchQuery","path","treeIndex","String","includes","defaultSearchMethod","getNodeDataAtTreeIndexOrNextIndex","targetIndex","getNodeKey","lowerSiblingCounts","ignoreCollapsed","isPseudoRoot","selfPath","expanded","childIndex","childCount","getDescendantCount","walkDescendants","parentNode","mapDescendants","nextNode","selfInfo","mapResult","treeData","toggleExpandedForAll","changeNodeAtPath","newNode","RESULT_MISS","traverse","currentTreeIndex","pathIndex","nextTreeIndex","result2","addNodeAtDepthAndIndex","insertedTreeIndex","pathFragment","targetDepth","minimumTreeIndex","expandParent","isLastChild","currentDepth","extraNodeProps","nextNode2","parentPath","insertedTreeIndex2","insertIndex","childIndex2","newChildren","insertNode","depth","insertResult","isDescendant","older","younger","getDepth","deepest","classnames","classes","defaultProps$3","isSearchMatch","isSearchFocus","toggleChildrenVisibility","buttons","draggedNode","title","subtitle","rowDirection","NodeRendererDefault","scaffoldBlockPxWidth","connectDragPreview","connectDragSource","didDrop","treeId","isOver","otherProps","nodeTitle","nodeSubtitle","rowDirectionClass","jsx","isDraggedDescendant","isLandingPadActive","buttonStyle","right","jsxs","onClick","opacity","btn","defaultProps$2","PlaceholderRendererDefault","defaultProps$1","swapFrom","swapDepth","swapLength","TreeNodeComponent","listIndex","connectDropTarget","rowHeight","_node","getPrevRow","_path","scaffoldBlockCount","scaffold","lowerSiblingCount","lineClass","highlightLineClass","style2","calculatedRowHeight","Children","defaultProps","TreePlaceholder","rafId","nodeDragSourcePropInjection","propInjection","dragged","getTargetDepth","dropTargetProps","component","canNodeHaveChildren","maxDepth","blocksOffset","dropTargetDepth","rowAbove","dragSourceInitialDepth","getDifferenceFromInitialOffset","relativePosition","leftShift","draggedChildDepth","wrapTarget","treeRefcanDrop","dragHover","dndType","draggingTreeData","treeReftreeData","nodeDropTarget","abovePath","aboveNode","prevPath","prevParent","prevTreeIndex","nextPath","nextParent","f","savedResult","savedArgsArray","savedKeysArray","keysArray","argsArray","memoizedInsertNode","memoizedGetFlatDataFromTree","flattened","nodeInfo","memoizedGetDescendantCount","treeIdCounter","mergeTheme","merged","theme","innerStyle","overridableDefaults","nodeContentRenderer","placeholderRenderer","slideRegionSize","treeNodeRenderer","propKey","ReactSortableTree","startDrag","prevState","removedNode","removedTreeIndex","removeNode","instanceProps","draggedMinimumTreeIndex","draggedDepth","dragging","newDraggingTreeData","addedResult","expandedParentPath","getRows","searchFocusTreeIndex","dropResult","shouldCopy","shouldCopyOnOutsideDrop","copyNode","onChange","onMoveNode","moveNode","virtuosoRef","listProps","virtuosoProps","nodeDragSource","getDropResult","dropTargetNode","wrapSource","treePlaceholderRenderer","placeholderDropTarget","wrapPlaceholder","scrollZoneVirtualList","createScrollingComponent","withScrolling","props2","scrollContainer","vStrength","createVerticalStrength","hStrength","createHorizontalStrength","searchMatches","ignoreOneTreeUpdate","searchFocusOffset","bind","handleDndMonitorChange","loadLazyChildren","stateUpdate","search","clearMonitorSubscription","onDragStateChanged","targetNode","onVisibilityToggle","nextParentNode","matchKeys","generateNodeProps","TreeNodeRenderer","NodeContentRenderer","nodeKey","callbackParams","nodeProps","rowCanDrag","sharedProps","rows","swapTo","fromIndex","toIndex","rowsWithoutMoved","slideRows","list","Placeholder","PlaceholderContent","ScrollZoneVirtualList","verticalStrength","horizontalStrength","renderRow","seekIndex","expand","singleSearch","searchFinishCallback","searchMethod","onlyExpandSearchedNodes","newState","expandAllMatchPaths","expandFocusMatchPaths","matchCount","trav","matches","isSelfMatch","hasFocusMatch","extraInfo","hasChildren","expandedTreeData","loadCollapsedLazyChildren","childrenArray","oldNode","newInstanceProps","isTreeDataEqual","isEqual","SortableTreeWithoutDndContext","SortableTree","exports","jsxRuntime","require","react","hoist","throttle","reactDnd","_interopDefaultLegacy","hoist__default","throttle__default","intBetween","_buffer","w","h","buffer","defaultHorizontalStrength","defaultVerticalStrength","onScrollChange","strengthMultiplier","WrappedComponent","container","frame","wrappedInstance","scaleX","scaleY","attached","updateScrolling","evt","box","coords","changedTouches","getCoords","startScrolling","trailing","handleEvent","handleMonitorChange","stopScrolling","attach","tick","scrollLeft","scrollWidth","clientWidth","clientHeight","newLeft","newTop","other","ScrollingComponent","FUNC_ERROR_TEXT","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","freeSelf","Function","objectToString","nativeMax","nativeMin","now","Date","debounce","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","invokeFunc","time","thisArg","leadingEdge","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","remainingWait","debounced","isInvoking","toNumber","isObject","isSymbol","replace","isBinary","module","asap","asapQueue","taskFactory","makeRequestCallFromMutationObserver","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","timeoutHandle","handleTimer","intervalHandle","setInterval","clearInterval","toggle","createTextNode","characterData","release","RegExp","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeExports","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","mapToArray","setToArray","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","uid","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Uint8Array","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Promise","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","clear","entry","ListCache","MapCache","SetCache","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","iteratee","baseTimes","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","baseIsArguments","baseIsEqual","bitmask","customizer","stack","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isMasked","baseKeys","Ctor","isPrototype","arrLength","seen","arrValue","othIndex","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getSymbols","getMapData","isKeyable","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","isLength","baseUnary","addTarget","removeTarget","clearDragSource","dragSourceRef","dragSourceNode","reconnectDragSource","clearDragPreview","dragPreviewRef","dragPreviewNode","reconnectDragPreview","newHandlerId","dragSourceOptionsInternal","dragPreviewOptionsInternal","didChange","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","dragSourceUnsubscribe","didConnectedDragPreviewChange","didDragPreviewOptionsChange","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","isCallingCanDrag","isCallingIsDragging","internalMonitor","canDragSource","isDraggingSource","listener","isOverTarget","getTargetIds","isSourcePublic","getInitialClientOffset","getInitialSourceClientOffset","getClientOffset","isCallingCanDrop","clearDropTarget","dropTargetRef","didDropTargetChange","didOptionsChange","lastConnectedDropTarget","lastConnectedDropTargetOptions","unsubscribeDropTarget","dropTargetOptionsInternal","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","sourceClientOffset","payload","c","without","xor","ResetCoordinatesAction","createBeginDrag","sourceIds","_options$publishSourc","dispatch","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","verifyItemIsObject","pinSource","getSourceType","createPublishDragSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","targetIds","checkInvariants","removeNonMatchingTargetIds","hoverAllTargets","lastIndexOf","getTarget","getTargetType","createDrop","getDroppableTargets","determineDropResult","verifyDropResultType","createEndDrag","verifyIsDragging","unpinSource","DragDropManagerImpl","store","shouldSetUp","isSetUp","setup","teardown","handleRefCountChange","createDragDropActions","boundActions","actionCreator","formatProdErrorMessage","code","$$observable","observable","randomString","random","substring","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","listeners","replaceReducer","nextReducer","outerSubscribe","observeState","strictEquality","areCoordsEqual","offsetA","offsetB","areArraysEqual","initialState","initialSourceClientOffset","initialClientOffset","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","ALL","areDirty","dirtyIds","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","prevInnermostTargetId","innermostTargetId","dirtyHandlerIds","dragOffset","dragOperation","stateId","subtract","__IS_NONE__","__IS_ALL__","HandlerRole","DragDropMonitorImpl","prevStateId","currentStateId","previousState","shallow","_getSourceClientOffset","_getDifferenceFromInitialOffset","nextUniqueId","validateType","getNextHandlerId","role","SOURCE","TARGET","parseRoleFromHandlerId","mapContainsValue","searchValue","isDone","_entries$next","HandlerRegistryImpl","validateSourceContract","addHandler","_addSource","validateTargetContract","_addTarget","dragSources","dropTargets","includePinned","isSourceId","isPinned","pinnedSourceId","pinnedSource","isTargetId","_removeSource","_removeTarget","backendFactory","backendOptions","makeStoreInstance","receiveBackend","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId"],"mappings":"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","file":"static/js/8.a5b1d4ca.chunk.js","sourcesContent":["export function shallowEqual<T>(\n  objA: T,\n  objB: T,\n  compare?: (a: T, b: T, key?: string) => boolean | void,\n  compareContext?: any\n) {\n  var compareResult = compare\n    ? compare.call(compareContext, objA, objB)\n    : void 0;\n  if (compareResult !== void 0) {\n    return !!compareResult;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = (objA as any)[key];\n    var valueB = (objB as any)[key];\n\n    compareResult = compare\n      ? compare.call(compareContext, valueA, valueB, key)\n      : void 0;\n\n    if (\n      compareResult === false ||\n      (compareResult === void 0 && valueA !== valueB)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n","export const mounts = [\n  {\n    key: 'title',\n    getter: swal => swal.getTitle(),\n  },\n  {\n    key: 'html',\n    getter: swal => swal.getHtmlContainer(),\n  },\n  {\n    key: 'confirmButtonText',\n    getter: swal => swal.getConfirmButton(),\n  },\n  {\n    key: 'denyButtonText',\n    getter: swal => swal.getDenyButton(),\n  },\n  {\n    key: 'cancelButtonText',\n    getter: swal => swal.getCancelButton(),\n  },\n  {\n    key: 'footer',\n    getter: swal => swal.getFooter(),\n  },\n  {\n    key: 'closeButtonHtml',\n    getter: swal => swal.getCloseButton(),\n  },\n  {\n    key: 'iconHtml',\n    getter: swal => swal.getIcon().querySelector('.swal2-icon-content'),\n  },\n  {\n    key: 'loaderHtml',\n    getter: swal => swal.getLoader(),\n  },\n]\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { mounts } from './mounts'\n\nconst noop = () => {} // eslint-disable-line @typescript-eslint/no-empty-function\n\nexport default function withReactContent (ParentSwal) {\n  /* Returns `params` separated into a tuple of `reactParams` (the React params that need to be rendered)\n  and`otherParams` (all the other parameters, with any React params replaced with a space ' ') */\n  function extractReactParams (params) {\n    const reactParams = {}\n    const otherParams = {}\n    const mountKeys = mounts.map(mount => mount.key)\n    Object.entries(params).forEach(([key, value]) => {\n      if (mountKeys.includes(key) && React.isValidElement(value)) {\n        reactParams[key] = value\n        otherParams[key] = ' '\n      } else {\n        otherParams[key] = value\n      }\n    })\n    return [reactParams, otherParams]\n  }\n  function render (swal, reactParams) {\n    Object.entries(reactParams).forEach(([key, value]) => {\n      const mount = mounts.find(mount => mount.key === key)\n      const domElement = mount.getter(ParentSwal)\n      ReactDOM.render(value, domElement)\n      swal.__mountedDomElements.push(domElement)\n    })\n  }\n\n  function unrender (swal) {\n    swal.__mountedDomElements.forEach(domElement => {\n      ReactDOM.unmountComponentAtNode(domElement)\n    })\n    swal.__mountedDomElements = []\n  }\n\n  return class extends ParentSwal {\n    static argsToParams (args) {\n      if (React.isValidElement(args[0]) || React.isValidElement(args[1])) {\n        const params = {}\n        ;['title', 'html', 'icon'].forEach((name, index) => {\n          if (args[index] !== undefined) {\n            params[name] = args[index]\n          }\n        })\n        return params\n      } else {\n        return ParentSwal.argsToParams(args)\n      }\n    }\n\n    _main (params, mixinParams) {\n      this.__mountedDomElements = []\n      this.__params = Object.assign({}, mixinParams, params)\n      const [reactParams, otherParams] = extractReactParams(this.__params)\n      const superDidOpen = otherParams.didOpen || noop\n      const superDidDestroy = otherParams.didDestroy || noop\n      return super._main(\n        Object.assign({}, otherParams, {\n          didOpen: popup => {\n            render(this, reactParams)\n            superDidOpen(popup)\n          },\n          didDestroy: popup => {\n            superDidDestroy(popup)\n            unrender(this)\n          },\n        }),\n      )\n    }\n\n    update (params) {\n      Object.assign(this.__params, params)\n      unrender(this)\n      const [reactParams, otherParams] = extractReactParams(this.__params)\n      super.update(otherParams)\n      render(this, reactParams)\n    }\n  }\n}\n","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function getDecoratedComponent(instanceRef) {\n  var currentRef = instanceRef.current;\n\n  if (currentRef == null) {\n    return null;\n  } else if (currentRef.decoratedRef) {\n    // go through the private field in decorateHandler to avoid the invariant hit\n    return currentRef.decoratedRef.current;\n  } else {\n    return currentRef;\n  }\n}\nexport function isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nexport function isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nexport function isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nexport function checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\nexport function isFunction(input) {\n  return typeof input === 'function';\n}\nexport function noop() {// noop\n}\n\nfunction isObjectLike(input) {\n  return _typeof(input) === 'object' && input !== null;\n}\n\nexport function isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\nexport function isValidType(type, allowArray) {\n  return typeof type === 'string' || _typeof(type) === 'symbol' || !!allowArray && Array.isArray(type) && type.every(function (t) {\n    return isValidType(t, false);\n  });\n}","import { useEffect, memo } from 'react';\n/**\n * A utility for rendering a drag preview image\n */\n\nexport var DragPreviewImage = memo(function DragPreviewImage(_ref) {\n  var connect = _ref.connect,\n      src = _ref.src;\n  useEffect(function () {\n    if (typeof Image === 'undefined') return;\n    var connected = false;\n    var img = new Image();\n    img.src = src;\n\n    img.onload = function () {\n      connect(img);\n      connected = true;\n    };\n\n    return function () {\n      if (connected) {\n        connect(null);\n      }\n    };\n  });\n  return null;\n});","import { createContext } from 'react';\n/**\n * Create the React Context\n */\n\nexport var DndContext = createContext({\n  dragDropManager: undefined\n});","var _excluded = [\"children\"];\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, memo } from 'react';\nimport { createDragDropManager } from 'dnd-core';\nimport { DndContext } from './DndContext';\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nexport var DndProvider = memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return _jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */\nimport type { Task } from './types.js'\nimport { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js'\n\nexport class AsapQueue {\n\tprivate queue: Task[] = []\n\t// We queue errors to ensure they are thrown in right order (FIFO).\n\t// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\tprivate pendingErrors: any[] = []\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\t// @ts-ignore\n\tprivate flushing = false\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tprivate requestFlush: () => void\n\n\tprivate requestErrorThrow: () => void\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tprivate index = 0\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tprivate capacity = 1024\n\n\tpublic constructor() {\n\t\t// `requestFlush` requests that the high priority event queue be flushed as\n\t\t// soon as possible.\n\t\t// This is useful to prevent an error thrown in a task from stalling the event\n\t\t// queue if the exception handled by Node.js’s\n\t\t// `process.on(\"uncaughtException\")` or by a domain.\n\n\t\t// `requestFlush` is implemented using a strategy based on data collected from\n\t\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\tthis.requestFlush = makeRequestCall(this.flush)\n\t\tthis.requestErrorThrow = makeRequestCallFromTimer(() => {\n\t\t\t// Throw first error\n\t\t\tif (this.pendingErrors.length) {\n\t\t\t\tthrow this.pendingErrors.shift()\n\t\t\t}\n\t\t})\n\t}\n\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tpublic enqueueTask(task: Task): void {\n\t\tconst { queue: q, requestFlush } = this\n\t\tif (!q.length) {\n\t\t\trequestFlush()\n\t\t\tthis.flushing = true\n\t\t}\n\t\t// Equivalent to push, but avoids a function call.\n\t\tq[q.length] = task\n\t}\n\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tprivate flush = () => {\n\t\tconst { queue: q } = this\n\t\twhile (this.index < q.length) {\n\t\t\tconst currentIndex = this.index\n\t\t\t// Advance the index before calling the task. This ensures that we will\n\t\t\t// begin flushing on the next task the task throws an error.\n\t\t\tthis.index++\n\t\t\tq[currentIndex]!.call()\n\t\t\t// Prevent leaking memory for long chains of recursive calls to `asap`.\n\t\t\t// If we call `asap` within tasks scheduled by `asap`, the queue will\n\t\t\t// grow, but to avoid an O(n) walk for every task we execute, we don't\n\t\t\t// shift tasks off the queue after they have been executed.\n\t\t\t// Instead, we periodically shift 1024 tasks off the queue.\n\t\t\tif (this.index > this.capacity) {\n\t\t\t\t// Manually shift all values starting at the index back to the\n\t\t\t\t// beginning of the queue.\n\t\t\t\tfor (\n\t\t\t\t\tlet scan = 0, newLength = q.length - this.index;\n\t\t\t\t\tscan < newLength;\n\t\t\t\t\tscan++\n\t\t\t\t) {\n\t\t\t\t\tq[scan] = q[scan + this.index]!\n\t\t\t\t}\n\t\t\t\tq.length -= this.index\n\t\t\t\tthis.index = 0\n\t\t\t}\n\t\t}\n\t\tq.length = 0\n\t\tthis.index = 0\n\t\tthis.flushing = false\n\t}\n\n\t// In a web browser, exceptions are not fatal. However, to avoid\n\t// slowing down the queue of pending tasks, we rethrow the error in a\n\t// lower priority turn.\n\tpublic registerPendingError = (err: any) => {\n\t\tthis.pendingErrors.push(err)\n\t\tthis.requestErrorThrow()\n\t}\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// // its existence.\n// rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","import type { Task } from './types.js'\nimport { RawTask } from './RawTask.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n","import { invariant } from '@react-dnd/invariant';\nimport { cloneElement, isValidElement } from 'react';\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    // When passed a node, call the hook straight away.\n    if (!isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nexport function wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createRef, Component } from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport hoistStatics from 'hoist-non-react-statics';\nimport { DndContext } from '../core';\nimport { isRefable, checkDecoratorArguments, isPlainObject } from './utils';\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\nexport function DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"ref\", createRef());\n\n        _defineProperty(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return _jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return _jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}","import { useLayoutEffect, useEffect } from 'react'; // suppress the useLayoutEffect warning on server side.\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck(this, DragSourceImpl);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();","import { useContext } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../core';\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nexport function useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { registerSource } from '../../internals';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nimport { useDragSource } from './useDragSource';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useDragType } from './useDragType';\nexport function useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}","import { useEffect, useMemo } from 'react';\nimport { DragSourceImpl } from './DragSourceImpl';\nexport function useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\nexport function useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { useMemo } from 'react';\nexport function useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport equal from 'fast-deep-equal';\nimport { useState, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nexport function useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!equal(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nimport { useCollector } from './useCollector';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}","import { useMonitorOutput } from './useMonitorOutput';\nexport function useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}","import { useMemo } from 'react';\nexport function useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\nexport function useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}","import { useRegisteredDragSource } from './useRegisteredDragSource';\nimport { useOptionalFactory } from '../useOptionalFactory';\nimport { useDragSourceMonitor } from './useDragSourceMonitor';\nimport { useDragSourceConnector } from './useDragSourceConnector';\nimport { useCollectedProps } from '../useCollectedProps';\nimport { useConnectDragPreview, useConnectDragSource } from './connectors';\nimport { invariant } from '@react-dnd/invariant';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nexport function useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}","import { useMemo } from 'react';\nimport { DragSourceMonitorImpl } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nexport function useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}","import { useMemo } from 'react';\nimport { SourceConnector } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nexport function useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck(this, DropTargetImpl);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { registerTarget } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nimport { useAccept } from './useAccept';\nimport { useDropTarget } from './useDropTarget';\nexport function useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}","import { useEffect, useMemo } from 'react';\nimport { DropTargetImpl } from './DropTargetImpl';\nexport function useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\nexport function useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}","import { useMemo } from 'react';\nexport function useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}","import { useRegisteredDropTarget } from './useRegisteredDropTarget';\nimport { useOptionalFactory } from '../useOptionalFactory';\nimport { useDropTargetMonitor } from './useDropTargetMonitor';\nimport { useDropTargetConnector } from './useDropTargetConnector';\nimport { useCollectedProps } from '../useCollectedProps';\nimport { useConnectDropTarget } from './connectors';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nexport function useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}","import { useMemo } from 'react';\nimport { DropTargetMonitorImpl } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nexport function useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}","import { useMemo } from 'react';\nimport { TargetConnector } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nexport function useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useEffect } from 'react';\nimport { useDragDropManager } from './useDragDropManager';\nimport { useCollector } from './useCollector';\n/**\n * useDragLayer Hook\n * @param collector The property collector\n */\n\nexport function useDragLayer(collect) {\n  var dragDropManager = useDragDropManager();\n  var monitor = dragDropManager.getMonitor();\n\n  var _useCollector = useCollector(monitor, collect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useEffect(function () {\n    return monitor.subscribeToOffsetChange(updateCollected);\n  });\n  useEffect(function () {\n    return monitor.subscribeToStateChange(updateCollected);\n  });\n  return collected;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject, getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\nvar REQUIRED_SPEC_METHODS = ['beginDrag'];\n\nvar SourceImpl = /*#__PURE__*/function () {\n  function SourceImpl(spec, monitor, ref) {\n    var _this = this;\n\n    _classCallCheck(this, SourceImpl);\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"ref\", void 0);\n\n    _defineProperty(this, \"beginDrag\", function () {\n      if (!_this.props) {\n        return;\n      }\n\n      var item = _this.spec.beginDrag(_this.props, _this.monitor, _this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(isPlainObject(item), 'beginDrag() must return a plain object that represents the dragged item. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n      }\n\n      return item;\n    });\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(SourceImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.canDrag) {\n        return true;\n      }\n\n      return this.spec.canDrag(this.props, this.monitor);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, sourceId) {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.isDragging) {\n        return sourceId === globalMonitor.getSourceId();\n      }\n\n      return this.spec.isDragging(this.props, this.monitor);\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      if (!this.props) {\n        return;\n      }\n\n      if (!this.spec.endDrag) {\n        return;\n      }\n\n      this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }]);\n\n  return SourceImpl;\n}();\n\nexport function createSourceFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  REQUIRED_SPEC_METHODS.forEach(function (key) {\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  return function createSource(monitor, ref) {\n    return new SourceImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { registerSource, DragSourceMonitorImpl, SourceConnector } from '../internals';\nimport { checkDecoratorArguments, isPlainObject, isValidType } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { createSourceFactory } from './createSourceFactory';\n/**\n * Decorates a component as a dragsource\n * @param type The dragsource type\n * @param spec The drag source specification\n * @param collect The props collector function\n * @param options DnD options\n */\n\nexport function DragSource(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DragSource', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type), 'Expected \"type\" provided as the first argument to DragSource to be ' + 'a string, or a function that returns a string given the current props. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DragSource to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', spec);\n  var createSource = createSourceFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DragSource to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DragSource to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  return function decorateSource(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DragSource',\n      createHandler: createSource,\n      registerHandler: registerSource,\n      createConnector: function createConnector(backend) {\n        return new SourceConnector(backend);\n      },\n      createMonitor: function createMonitor(manager) {\n        return new DragSourceMonitorImpl(manager);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject, getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrop', 'hover', 'drop'];\n\nvar TargetImpl = /*#__PURE__*/function () {\n  function TargetImpl(spec, monitor, ref) {\n    _classCallCheck(this, TargetImpl);\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"ref\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(TargetImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"receiveMonitor\",\n    value: function receiveMonitor(monitor) {\n      this.monitor = monitor;\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      if (!this.spec.canDrop) {\n        return true;\n      }\n\n      return this.spec.canDrop(this.props, this.monitor);\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      if (!this.spec.hover || !this.props) {\n        return;\n      }\n\n      this.spec.hover(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      if (!this.spec.drop) {\n        return undefined;\n      }\n\n      var dropResult = this.spec.drop(this.props, this.monitor, this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(typeof dropResult === 'undefined' || isPlainObject(dropResult), 'drop() must either return undefined, or an object that represents the drop result. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', dropResult);\n      }\n\n      return dropResult;\n    }\n  }]);\n\n  return TargetImpl;\n}();\n\nexport function createTargetFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drop target specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drop target specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', key, key, spec[key]);\n  });\n  return function createTarget(monitor, ref) {\n    return new TargetImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { TargetConnector, DropTargetMonitorImpl, registerTarget } from '../internals';\nimport { isPlainObject, isValidType } from './utils';\nimport { checkDecoratorArguments } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { createTargetFactory } from './createTargetFactory';\n/**\n * @param type The accepted target type\n * @param spec The DropTarget specification\n * @param collect The props collector function\n * @param options Options\n */\n\nexport function DropTarget(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DropTarget', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type, true), 'Expected \"type\" provided as the first argument to DropTarget to be ' + 'a string, an array of strings, or a function that returns either given ' + 'the current props. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DropTarget to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', spec);\n  var createTarget = createTargetFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DropTarget to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DropTarget to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  return function decorateTarget(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DropTarget',\n      createHandler: createTarget,\n      registerHandler: registerTarget,\n      createMonitor: function createMonitor(manager) {\n        return new DropTargetMonitorImpl(manager);\n      },\n      createConnector: function createConnector(backend) {\n        return new TargetConnector(backend);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isFunction, noop } from './utils';\n/**\n * Provides a set of static methods for creating Disposables.\n * @param {Function} action Action to run during the first call to dispose.\n * The action is guaranteed to be run at most once.\n */\n\nexport var Disposable = /*#__PURE__*/function () {\n  function Disposable(action) {\n    _classCallCheck(this, Disposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"action\", void 0);\n\n    this.action = isFunction(action) ? action : noop;\n  }\n  /** Performs the task of cleaning up resources. */\n\n\n  _createClass(Disposable, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.action();\n        this.isDisposed = true;\n      }\n    }\n  }], [{\n    key: \"isDisposable\",\n    value:\n    /**\n     * Gets the disposable that does nothing when disposed.\n     */\n\n    /**\n     * Validates whether the given object is a disposable\n     * @param {Object} Object to test whether it has a dispose method\n     * @returns {Boolean} true if a disposable object, else false.\n     */\n    function isDisposable(d) {\n      return Boolean(d && isFunction(d.dispose));\n    }\n  }, {\n    key: \"_fixup\",\n    value: function _fixup(result) {\n      return Disposable.isDisposable(result) ? result : Disposable.empty;\n    }\n    /**\n     * Creates a disposable object that invokes the specified action when disposed.\n     * @param {Function} dispose Action to run during the first call to dispose.\n     * The action is guaranteed to be run at most once.\n     * @return {Disposable} The disposable object that runs the given action upon disposal.\n     */\n\n  }, {\n    key: \"create\",\n    value: function create(action) {\n      return new Disposable(action);\n    }\n  }]);\n\n  return Disposable;\n}();\n/**\n * Represents a group of disposable resources that are disposed together.\n * @constructor\n */\n\n_defineProperty(Disposable, \"empty\", {\n  dispose: noop\n});\n\nexport var CompositeDisposable = /*#__PURE__*/function () {\n  function CompositeDisposable() {\n    _classCallCheck(this, CompositeDisposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"disposables\", void 0);\n\n    for (var _len = arguments.length, disposables = new Array(_len), _key = 0; _key < _len; _key++) {\n      disposables[_key] = arguments[_key];\n    }\n\n    this.disposables = disposables;\n  }\n  /**\n   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.\n   * @param {Any} item Disposable to add.\n   */\n\n\n  _createClass(CompositeDisposable, [{\n    key: \"add\",\n    value: function add(item) {\n      if (this.isDisposed) {\n        item.dispose();\n      } else {\n        this.disposables.push(item);\n      }\n    }\n    /**\n     * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.\n     * @param {Any} item Disposable to remove.\n     * @returns {Boolean} true if found; false otherwise.\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var shouldDispose = false;\n\n      if (!this.isDisposed) {\n        var idx = this.disposables.indexOf(item);\n\n        if (idx !== -1) {\n          shouldDispose = true;\n          this.disposables.splice(idx, 1);\n          item.dispose();\n        }\n      }\n\n      return shouldDispose;\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group but\n     *  does not dispose the CompositeDisposable.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.isDisposed) {\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i = 0; _i < len; _i++) {\n          currentDisposables[_i].dispose();\n        }\n      }\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i2 = 0; _i2 < len; _i2++) {\n          currentDisposables[_i2].dispose();\n        }\n      }\n    }\n  }]);\n\n  return CompositeDisposable;\n}();\n/**\n * Represents a disposable resource whose underlying disposable resource can\n * be replaced by another disposable resource, causing automatic disposal of\n * the previous underlying disposable resource.\n */\n\nexport var SerialDisposable = /*#__PURE__*/function () {\n  function SerialDisposable() {\n    _classCallCheck(this, SerialDisposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"current\", void 0);\n  }\n\n  _createClass(SerialDisposable, [{\n    key: \"getDisposable\",\n    value:\n    /**\n     * Gets the underlying disposable.\n     * @returns {Any} the underlying disposable.\n     */\n    function getDisposable() {\n      return this.current;\n    }\n  }, {\n    key: \"setDisposable\",\n    value: function setDisposable(value) {\n      var shouldDispose = this.isDisposed;\n\n      if (!shouldDispose) {\n        var old = this.current;\n        this.current = value;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n\n      if (shouldDispose && value) {\n        value.dispose();\n      }\n    }\n    /** Performs the task of cleaning up resources. */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var old = this.current;\n        this.current = undefined;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n    }\n  }]);\n\n  return SerialDisposable;\n}();","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createRef, Component } from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../core';\nimport { isPlainObject } from './utils';\nimport { Disposable, CompositeDisposable, SerialDisposable } from './disposables';\nimport { isRefable } from './utils';\nimport hoistStatics from 'hoist-non-react-statics';\nexport function decorateHandler(_ref) {\n  var DecoratedComponent = _ref.DecoratedComponent,\n      createHandler = _ref.createHandler,\n      createMonitor = _ref.createMonitor,\n      createConnector = _ref.createConnector,\n      registerHandler = _ref.registerHandler,\n      containerDisplayName = _ref.containerDisplayName,\n      getType = _ref.getType,\n      collect = _ref.collect,\n      options = _ref.options;\n  var _options$arePropsEqua = options.arePropsEqual,\n      arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n  var Decorated = DecoratedComponent;\n  var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n  var DragDropContainer = /*#__PURE__*/function (_Component) {\n    _inherits(DragDropContainer, _Component);\n\n    var _super = _createSuper(DragDropContainer);\n\n    function DragDropContainer(props) {\n      var _this;\n\n      _classCallCheck(this, DragDropContainer);\n\n      _this = _super.call(this, props);\n\n      _defineProperty(_assertThisInitialized(_this), \"decoratedRef\", createRef());\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerId\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"manager\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerMonitor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerConnector\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handler\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"disposable\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"currentType\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handleChange\", function () {\n        var nextState = _this.getCurrentState();\n\n        if (!shallowEqual(nextState, _this.state)) {\n          _this.setState(nextState);\n        }\n      });\n\n      _this.disposable = new SerialDisposable();\n\n      _this.receiveProps(props);\n\n      _this.dispose();\n\n      return _this;\n    }\n\n    _createClass(DragDropContainer, [{\n      key: \"getHandlerId\",\n      value: function getHandlerId() {\n        return this.handlerId;\n      }\n    }, {\n      key: \"getDecoratedComponentInstance\",\n      value: function getDecoratedComponentInstance() {\n        invariant(this.decoratedRef.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n        return this.decoratedRef.current;\n      }\n    }, {\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(nextProps, nextState) {\n        return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.disposable = new SerialDisposable();\n        this.currentType = undefined;\n        this.receiveProps(this.props);\n        this.handleChange();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (!arePropsEqual(this.props, prevProps)) {\n          this.receiveProps(this.props);\n          this.handleChange();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.dispose();\n      }\n    }, {\n      key: \"receiveProps\",\n      value: function receiveProps(props) {\n        if (!this.handler) {\n          return;\n        }\n\n        this.handler.receiveProps(props);\n        this.receiveType(getType(props));\n      }\n    }, {\n      key: \"receiveType\",\n      value: function receiveType(type) {\n        if (!this.handlerMonitor || !this.manager || !this.handlerConnector) {\n          return;\n        }\n\n        if (type === this.currentType) {\n          return;\n        }\n\n        this.currentType = type;\n\n        var _registerHandler = registerHandler(type, this.handler, this.manager),\n            _registerHandler2 = _slicedToArray(_registerHandler, 2),\n            handlerId = _registerHandler2[0],\n            unregister = _registerHandler2[1];\n\n        this.handlerId = handlerId;\n        this.handlerMonitor.receiveHandlerId(handlerId);\n        this.handlerConnector.receiveHandlerId(handlerId);\n        var globalMonitor = this.manager.getMonitor();\n        var unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n          handlerIds: [handlerId]\n        });\n        this.disposable.setDisposable(new CompositeDisposable(new Disposable(unsubscribe), new Disposable(unregister)));\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.disposable.dispose();\n\n        if (this.handlerConnector) {\n          this.handlerConnector.receiveHandlerId(null);\n        }\n      }\n    }, {\n      key: \"getCurrentState\",\n      value: function getCurrentState() {\n        if (!this.handlerConnector) {\n          return {};\n        }\n\n        var nextState = collect(this.handlerConnector.hooks, this.handlerMonitor, this.props);\n\n        if (process.env.NODE_ENV !== 'production') {\n          invariant(isPlainObject(nextState), 'Expected `collect` specified as the second argument to ' + '%s for %s to return a plain object of props to inject. ' + 'Instead, received %s.', containerDisplayName, displayName, nextState);\n        }\n\n        return nextState;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        return _jsx(DndContext.Consumer, {\n          children: function children(_ref2) {\n            var dragDropManager = _ref2.dragDropManager;\n\n            _this2.receiveDragDropManager(dragDropManager);\n\n            if (typeof requestAnimationFrame !== 'undefined') {\n              requestAnimationFrame(function () {\n                var _this2$handlerConnect;\n\n                return (_this2$handlerConnect = _this2.handlerConnector) === null || _this2$handlerConnect === void 0 ? void 0 : _this2$handlerConnect.reconnect();\n              });\n            }\n\n            return _jsx(Decorated, Object.assign({}, _this2.props, _this2.getCurrentState(), {\n              // NOTE: if Decorated is a Function Component, decoratedRef will not be populated unless it's a refforwarding component.\n              ref: isRefable(Decorated) ? _this2.decoratedRef : null\n            }), void 0);\n          }\n        }, void 0);\n      }\n    }, {\n      key: \"receiveDragDropManager\",\n      value: function receiveDragDropManager(dragDropManager) {\n        if (this.manager !== undefined) {\n          return;\n        }\n\n        invariant(dragDropManager !== undefined, 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n\n        if (dragDropManager === undefined) {\n          return;\n        }\n\n        this.manager = dragDropManager;\n        this.handlerMonitor = createMonitor(dragDropManager);\n        this.handlerConnector = createConnector(dragDropManager.getBackend());\n        this.handler = createHandler(this.handlerMonitor, this.decoratedRef);\n      }\n    }]);\n\n    return DragDropContainer;\n  }(Component);\n\n  _defineProperty(DragDropContainer, \"DecoratedComponent\", DecoratedComponent);\n\n  _defineProperty(DragDropContainer, \"displayName\", \"\".concat(containerDisplayName, \"(\").concat(displayName, \")\"));\n\n  return hoistStatics(DragDropContainer, DecoratedComponent);\n}","// cheap lodash replacements\nexport function memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nexport function union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { union, without } from './utils/js_utils';\nexport var EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck(this, EnterLeaveCounter);\n\n    _defineProperty(this, \"entered\", []);\n\n    _defineProperty(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();","import { memoize } from './utils/js_utils';\nexport var isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nexport var isSafari = memoize(function () {\n  return Boolean(window.safari);\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck(this, MonotonicInterpolant);\n\n    _defineProperty(this, \"xs\", void 0);\n\n    _defineProperty(this, \"ys\", void 0);\n\n    _defineProperty(this, \"c1s\", void 0);\n\n    _defineProperty(this, \"c2s\", void 0);\n\n    _defineProperty(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dys = [];\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      dys.push(dy);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();","import { isSafari, isFirefox } from './BrowserDetector';\nimport { MonotonicInterpolant } from './MonotonicInterpolant';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientOffset(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}","export var FILE = '__NATIVE_FILE__';\nexport var URL = '__NATIVE_URL__';\nexport var TEXT = '__NATIVE_TEXT__';\nexport var HTML = '__NATIVE_HTML__';","var _nativeTypesConfig;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as NativeTypes from '../NativeTypes';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer';\nexport var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, NativeTypes.FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck(this, NativeDragSource);\n\n    _defineProperty(this, \"item\", void 0);\n\n    _defineProperty(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();","import { nativeTypesConfig } from './nativeTypesConfig';\nimport { NativeDragSource } from './NativeDragSource';\nexport function createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck(this, OptionsReader);\n\n    _defineProperty(this, \"ownerDocument\", null);\n\n    _defineProperty(this, \"globalContext\", void 0);\n\n    _defineProperty(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter';\nimport { getNodeClientOffset, getEventClientOffset, getDragPreviewOffset } from './OffsetUtils';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources';\nimport * as NativeTypes from './NativeTypes';\nimport { OptionsReader } from './OptionsReader';\nexport var HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck(this, HTML5BackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"registry\", void 0);\n\n    _defineProperty(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty(this, \"sourceNodes\", new Map());\n\n    _defineProperty(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty(this, \"dragStartSourceIds\", null);\n\n    _defineProperty(this, \"dropTargetIds\", []);\n\n    _defineProperty(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty(this, \"currentNativeSource\", null);\n\n    _defineProperty(this, \"currentNativeHandle\", null);\n\n    _defineProperty(this, \"currentDragSourceNode\", null);\n\n    _defineProperty(this, \"altKeyPressed\", false);\n\n    _defineProperty(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty(this, \"dragOverTargetIds\", null);\n\n    _defineProperty(this, \"lastClientOffset\", null);\n\n    _defineProperty(this, \"hoverRafId\", null);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset(source) || null;\n    });\n\n    _defineProperty(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();","import { HTML5BackendImpl } from './HTML5BackendImpl';\nimport * as NativeTypes from './NativeTypes';\nexport { getEmptyImage } from './getEmptyImage';\nexport { NativeTypes };\nexport var HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nconst PUBLISH = 0;\nconst SUBSCRIBE = 1;\nconst RESET = 2;\nconst VALUE = 4;\nfunction compose(a, b) {\n  return (arg) => a(b(arg));\n}\nfunction thrush(arg, proc) {\n  return proc(arg);\n}\nfunction curry2to1(proc, arg1) {\n  return (arg2) => proc(arg1, arg2);\n}\nfunction curry1to0(proc, arg) {\n  return () => proc(arg);\n}\nfunction tap(arg, proc) {\n  proc(arg);\n  return arg;\n}\nfunction tup(...args) {\n  return args;\n}\nfunction call(proc) {\n  proc();\n}\nfunction always(value) {\n  return () => value;\n}\nfunction joinProc(...procs) {\n  return () => {\n    procs.map(call);\n  };\n}\nfunction isDefined(arg) {\n  return arg !== void 0;\n}\nfunction noop() {\n}\nfunction subscribe(emitter, subscription) {\n  return emitter(SUBSCRIBE, subscription);\n}\nfunction publish(publisher, value) {\n  publisher(PUBLISH, value);\n}\nfunction reset(emitter) {\n  emitter(RESET);\n}\nfunction getValue(depot) {\n  return depot(VALUE);\n}\nfunction connect(emitter, publisher) {\n  return subscribe(emitter, curry2to1(publisher, PUBLISH));\n}\nfunction handleNext(emitter, subscription) {\n  const unsub = emitter(SUBSCRIBE, (value) => {\n    unsub();\n    subscription(value);\n  });\n  return unsub;\n}\nfunction stream() {\n  const subscriptions = [];\n  return (action, arg) => {\n    switch (action) {\n      case RESET:\n        subscriptions.splice(0, subscriptions.length);\n        return;\n      case SUBSCRIBE:\n        subscriptions.push(arg);\n        return () => {\n          const indexOf = subscriptions.indexOf(arg);\n          if (indexOf > -1) {\n            subscriptions.splice(indexOf, 1);\n          }\n        };\n      case PUBLISH:\n        subscriptions.slice().forEach((subscription) => {\n          subscription(arg);\n        });\n        return;\n      default:\n        throw new Error(`unrecognized action ${action}`);\n    }\n  };\n}\nfunction statefulStream(initial) {\n  let value = initial;\n  const innerSubject = stream();\n  return (action, arg) => {\n    switch (action) {\n      case SUBSCRIBE:\n        const subscription = arg;\n        subscription(value);\n        break;\n      case PUBLISH:\n        value = arg;\n        break;\n      case VALUE:\n        return value;\n    }\n    return innerSubject(action, arg);\n  };\n}\nfunction eventHandler(emitter) {\n  let unsub;\n  let currentSubscription;\n  const cleanup = () => unsub && unsub();\n  return function(action, subscription) {\n    switch (action) {\n      case SUBSCRIBE:\n        if (subscription) {\n          if (currentSubscription === subscription) {\n            return;\n          }\n          cleanup();\n          currentSubscription = subscription;\n          unsub = subscribe(emitter, subscription);\n          return unsub;\n        } else {\n          cleanup();\n          return noop;\n        }\n      case RESET:\n        cleanup();\n        currentSubscription = null;\n        return;\n      default:\n        throw new Error(`unrecognized action ${action}`);\n    }\n  };\n}\nfunction streamFromEmitter(emitter) {\n  return tap(stream(), (stream2) => connect(emitter, stream2));\n}\nfunction statefulStreamFromEmitter(emitter, initial) {\n  return tap(statefulStream(initial), (stream2) => connect(emitter, stream2));\n}\nfunction combineOperators(...operators) {\n  return (subscriber) => {\n    return operators.reduceRight(thrush, subscriber);\n  };\n}\nfunction pipe(source, ...operators) {\n  const project = combineOperators(...operators);\n  return (action, subscription) => {\n    switch (action) {\n      case SUBSCRIBE:\n        return subscribe(source, project(subscription));\n      case RESET:\n        reset(source);\n        return;\n    }\n  };\n}\nfunction defaultComparator(previous, next) {\n  return previous === next;\n}\nfunction distinctUntilChanged(comparator = defaultComparator) {\n  let current;\n  return (done) => (next) => {\n    if (!comparator(current, next)) {\n      current = next;\n      done(next);\n    }\n  };\n}\nfunction filter(predicate) {\n  return (done) => (value) => {\n    predicate(value) && done(value);\n  };\n}\nfunction map(project) {\n  return (done) => compose(done, project);\n}\nfunction mapTo(value) {\n  return (done) => () => done(value);\n}\nfunction scan(scanner, initial) {\n  return (done) => (value) => done(initial = scanner(initial, value));\n}\nfunction skip(times) {\n  return (done) => (value) => {\n    times > 0 ? times-- : done(value);\n  };\n}\nfunction throttleTime(interval) {\n  let currentValue = null;\n  let timeout;\n  return (done) => (value) => {\n    currentValue = value;\n    if (timeout) {\n      return;\n    }\n    timeout = setTimeout(() => {\n      timeout = void 0;\n      done(currentValue);\n    }, interval);\n  };\n}\nfunction debounceTime(interval) {\n  let currentValue;\n  let timeout;\n  return (done) => (value) => {\n    currentValue = value;\n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(() => {\n      done(currentValue);\n    }, interval);\n  };\n}\nfunction withLatestFrom(...sources) {\n  const values = new Array(sources.length);\n  let called = 0;\n  let pendingCall = null;\n  const allCalled = Math.pow(2, sources.length) - 1;\n  sources.forEach((source, index) => {\n    const bit = Math.pow(2, index);\n    subscribe(source, (value) => {\n      const prevCalled = called;\n      called = called | bit;\n      values[index] = value;\n      if (prevCalled !== allCalled && called === allCalled && pendingCall) {\n        pendingCall();\n        pendingCall = null;\n      }\n    });\n  });\n  return (done) => (value) => {\n    const call2 = () => done([value].concat(values));\n    if (called === allCalled) {\n      call2();\n    } else {\n      pendingCall = call2;\n    }\n  };\n}\nfunction merge(...sources) {\n  return function(action, subscription) {\n    switch (action) {\n      case SUBSCRIBE:\n        return joinProc(...sources.map((source) => subscribe(source, subscription)));\n      case RESET:\n        return;\n      default:\n        throw new Error(`unrecognized action ${action}`);\n    }\n  };\n}\nfunction duc(source, comparator = defaultComparator) {\n  return pipe(source, distinctUntilChanged(comparator));\n}\nfunction combineLatest(...emitters) {\n  const innerSubject = stream();\n  const values = new Array(emitters.length);\n  let called = 0;\n  const allCalled = Math.pow(2, emitters.length) - 1;\n  emitters.forEach((source, index) => {\n    const bit = Math.pow(2, index);\n    subscribe(source, (value) => {\n      values[index] = value;\n      called = called | bit;\n      if (called === allCalled) {\n        publish(innerSubject, values);\n      }\n    });\n  });\n  return function(action, subscription) {\n    switch (action) {\n      case SUBSCRIBE:\n        if (called === allCalled) {\n          subscription(values);\n        }\n        return subscribe(innerSubject, subscription);\n      case RESET:\n        return reset(innerSubject);\n      default:\n        throw new Error(`unrecognized action ${action}`);\n    }\n  };\n}\nfunction system(constructor, dependencies = [], { singleton } = { singleton: true }) {\n  return {\n    id: id(),\n    constructor,\n    dependencies,\n    singleton\n  };\n}\nconst id = () => Symbol();\nfunction init(systemSpec) {\n  const singletons = /* @__PURE__ */ new Map();\n  const _init = ({ id: id2, constructor, dependencies, singleton }) => {\n    if (singleton && singletons.has(id2)) {\n      return singletons.get(id2);\n    }\n    const system2 = constructor(dependencies.map((e) => _init(e)));\n    if (singleton) {\n      singletons.set(id2, system2);\n    }\n    return system2;\n  };\n  return _init(systemSpec);\n}\nfunction omit(keys, obj) {\n  const result = {};\n  const index = {};\n  let idx = 0;\n  const len = keys.length;\n  while (idx < len) {\n    index[keys[idx]] = 1;\n    idx += 1;\n  }\n  for (const prop in obj) {\n    if (!index.hasOwnProperty(prop)) {\n      result[prop] = obj[prop];\n    }\n  }\n  return result;\n}\nconst useIsomorphicLayoutEffect$2 = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction systemToComponent(systemSpec, map2, Root) {\n  const requiredPropNames = Object.keys(map2.required || {});\n  const optionalPropNames = Object.keys(map2.optional || {});\n  const methodNames = Object.keys(map2.methods || {});\n  const eventNames = Object.keys(map2.events || {});\n  const Context = React.createContext({});\n  function applyPropsToSystem(system2, props) {\n    if (system2[\"propsReady\"]) {\n      publish(system2[\"propsReady\"], false);\n    }\n    for (const requiredPropName of requiredPropNames) {\n      const stream2 = system2[map2.required[requiredPropName]];\n      publish(stream2, props[requiredPropName]);\n    }\n    for (const optionalPropName of optionalPropNames) {\n      if (optionalPropName in props) {\n        const stream2 = system2[map2.optional[optionalPropName]];\n        publish(stream2, props[optionalPropName]);\n      }\n    }\n    if (system2[\"propsReady\"]) {\n      publish(system2[\"propsReady\"], true);\n    }\n  }\n  function buildMethods(system2) {\n    return methodNames.reduce((acc, methodName) => {\n      acc[methodName] = (value) => {\n        const stream2 = system2[map2.methods[methodName]];\n        publish(stream2, value);\n      };\n      return acc;\n    }, {});\n  }\n  function buildEventHandlers(system2) {\n    return eventNames.reduce((handlers, eventName) => {\n      handlers[eventName] = eventHandler(system2[map2.events[eventName]]);\n      return handlers;\n    }, {});\n  }\n  const Component = React.forwardRef((propsWithChildren, ref) => {\n    const { children, ...props } = propsWithChildren;\n    const [system2] = React.useState(() => {\n      return tap(init(systemSpec), (system22) => applyPropsToSystem(system22, props));\n    });\n    const [handlers] = React.useState(curry1to0(buildEventHandlers, system2));\n    useIsomorphicLayoutEffect$2(() => {\n      for (const eventName of eventNames) {\n        if (eventName in props) {\n          subscribe(handlers[eventName], props[eventName]);\n        }\n      }\n      return () => {\n        Object.values(handlers).map(reset);\n      };\n    }, [props, handlers, system2]);\n    useIsomorphicLayoutEffect$2(() => {\n      applyPropsToSystem(system2, props);\n    });\n    React.useImperativeHandle(ref, always(buildMethods(system2)));\n    return React.createElement(\n      Context.Provider,\n      { value: system2 },\n      Root ? React.createElement(\n        Root,\n        omit([...requiredPropNames, ...optionalPropNames, ...eventNames], props),\n        children\n      ) : children\n    );\n  });\n  const usePublisher2 = (key) => {\n    return React.useCallback(curry2to1(publish, React.useContext(Context)[key]), [key]);\n  };\n  const useEmitterValue2 = (key) => {\n    const system2 = React.useContext(Context);\n    const source = system2[key];\n    const [value, setValue] = React.useState(curry1to0(getValue, source));\n    useIsomorphicLayoutEffect$2(\n      () => subscribe(source, (next) => {\n        if (next !== value) {\n          setValue(always(next));\n        }\n      }),\n      [source, value]\n    );\n    return value;\n  };\n  const useEmitter2 = (key, callback) => {\n    const context = React.useContext(Context);\n    const source = context[key];\n    useIsomorphicLayoutEffect$2(() => subscribe(source, callback), [callback, source]);\n  };\n  return {\n    Component,\n    usePublisher: usePublisher2,\n    useEmitterValue: useEmitterValue2,\n    useEmitter: useEmitter2\n  };\n}\nconst useIsomorphicLayoutEffect = typeof document !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nconst useIsomorphicLayoutEffect$1 = useIsomorphicLayoutEffect;\nvar LogLevel = /* @__PURE__ */ ((LogLevel2) => {\n  LogLevel2[LogLevel2[\"DEBUG\"] = 0] = \"DEBUG\";\n  LogLevel2[LogLevel2[\"INFO\"] = 1] = \"INFO\";\n  LogLevel2[LogLevel2[\"WARN\"] = 2] = \"WARN\";\n  LogLevel2[LogLevel2[\"ERROR\"] = 3] = \"ERROR\";\n  return LogLevel2;\n})(LogLevel || {});\nconst CONSOLE_METHOD_MAP = {\n  [\n    0\n    /* DEBUG */\n  ]: \"debug\",\n  [\n    1\n    /* INFO */\n  ]: \"log\",\n  [\n    2\n    /* WARN */\n  ]: \"warn\",\n  [\n    3\n    /* ERROR */\n  ]: \"error\"\n};\nconst getGlobalThis = () => typeof globalThis === \"undefined\" ? window : globalThis;\nconst loggerSystem = system(\n  () => {\n    const logLevel = statefulStream(\n      3\n      /* ERROR */\n    );\n    const log = statefulStream((label, message, level = 1) => {\n      var _a;\n      const currentLevel = (_a = getGlobalThis()[\"VIRTUOSO_LOG_LEVEL\"]) != null ? _a : getValue(logLevel);\n      if (level >= currentLevel) {\n        console[CONSOLE_METHOD_MAP[level]](\n          \"%creact-virtuoso: %c%s %o\",\n          \"color: #0253b3; font-weight: bold\",\n          \"color: initial\",\n          label,\n          message\n        );\n      }\n    });\n    return {\n      log,\n      logLevel\n    };\n  },\n  [],\n  { singleton: true }\n);\nfunction useSizeWithElRef(callback, enabled = true) {\n  const ref = React.useRef(null);\n  let callbackRef = (_el) => {\n  };\n  if (typeof ResizeObserver !== \"undefined\") {\n    const observer = React.useMemo(() => {\n      return new ResizeObserver((entries) => {\n        const element = entries[0].target;\n        if (element.offsetParent !== null) {\n          callback(element);\n        }\n      });\n    }, [callback]);\n    callbackRef = (elRef) => {\n      if (elRef && enabled) {\n        observer.observe(elRef);\n        ref.current = elRef;\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current);\n        }\n        ref.current = null;\n      }\n    };\n  }\n  return { ref, callbackRef };\n}\nfunction useSize(callback, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef;\n}\nfunction useChangedListContentsSizes(callback, itemSize, enabled, scrollContainerStateCallback, log, gap, customScrollParent) {\n  const memoedCallback = React.useCallback(\n    (el) => {\n      const ranges = getChangedChildSizes(el.children, itemSize, \"offsetHeight\", log);\n      let scrollableElement = el.parentElement;\n      while (!scrollableElement.dataset[\"virtuosoScroller\"]) {\n        scrollableElement = scrollableElement.parentElement;\n      }\n      const windowScrolling = scrollableElement.lastElementChild.dataset[\"viewportType\"] === \"window\";\n      const scrollTop = customScrollParent ? customScrollParent.scrollTop : windowScrolling ? window.pageYOffset || document.documentElement.scrollTop : scrollableElement.scrollTop;\n      const scrollHeight = customScrollParent ? customScrollParent.scrollHeight : windowScrolling ? document.documentElement.scrollHeight : scrollableElement.scrollHeight;\n      const viewportHeight = customScrollParent ? customScrollParent.offsetHeight : windowScrolling ? window.innerHeight : scrollableElement.offsetHeight;\n      scrollContainerStateCallback({\n        scrollTop: Math.max(scrollTop, 0),\n        scrollHeight,\n        viewportHeight\n      });\n      gap == null ? void 0 : gap(resolveGapValue$1(\"row-gap\", getComputedStyle(el).rowGap, log));\n      if (ranges !== null) {\n        callback(ranges);\n      }\n    },\n    [callback, itemSize, log, gap, customScrollParent, scrollContainerStateCallback]\n  );\n  return useSizeWithElRef(memoedCallback, enabled);\n}\nfunction getChangedChildSizes(children, itemSize, field, log) {\n  const length = children.length;\n  if (length === 0) {\n    return null;\n  }\n  const results = [];\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i);\n    if (!child || child.dataset.index === void 0) {\n      continue;\n    }\n    const index = parseInt(child.dataset.index);\n    const knownSize = parseFloat(child.dataset.knownSize);\n    const size = itemSize(child, field);\n    if (size === 0) {\n      log(\"Zero-sized element, this should not happen\", { child }, LogLevel.ERROR);\n    }\n    if (size === knownSize) {\n      continue;\n    }\n    const lastResult = results[results.length - 1];\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size });\n    } else {\n      results[results.length - 1].endIndex++;\n    }\n  }\n  return results;\n}\nfunction resolveGapValue$1(property, value, log) {\n  if (value !== \"normal\" && !(value == null ? void 0 : value.endsWith(\"px\"))) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN);\n  }\n  if (value === \"normal\") {\n    return 0;\n  }\n  return parseInt(value != null ? value : \"0\", 10);\n}\nfunction correctItemSize(el, dimension) {\n  return Math.round(el.getBoundingClientRect()[dimension]);\n}\nfunction approximatelyEqual(num1, num2) {\n  return Math.abs(num1 - num2) < 1.01;\n}\nfunction useScrollTop(scrollContainerStateCallback, smoothScrollTargetReached, scrollerElement, scrollerRefCallback = noop, customScrollParent) {\n  const scrollerRef = React.useRef(null);\n  const scrollTopTarget = React.useRef(null);\n  const timeoutRef = React.useRef(null);\n  const handler = React.useCallback(\n    (ev) => {\n      const el = ev.target;\n      const windowScroll = el === window || el === document;\n      const scrollTop = windowScroll ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop;\n      const scrollHeight = windowScroll ? document.documentElement.scrollHeight : el.scrollHeight;\n      const viewportHeight = windowScroll ? window.innerHeight : el.offsetHeight;\n      const call2 = () => {\n        scrollContainerStateCallback({\n          scrollTop: Math.max(scrollTop, 0),\n          scrollHeight,\n          viewportHeight\n        });\n      };\n      if (ev.suppressFlushSync) {\n        call2();\n      } else {\n        ReactDOM.flushSync(call2);\n      }\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === scrollHeight - viewportHeight) {\n          scrollTopTarget.current = null;\n          smoothScrollTargetReached(true);\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current);\n            timeoutRef.current = null;\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  );\n  React.useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current;\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current);\n    handler({ target: localRef, suppressFlushSync: true });\n    localRef.addEventListener(\"scroll\", handler, { passive: true });\n    return () => {\n      scrollerRefCallback(null);\n      localRef.removeEventListener(\"scroll\", handler);\n    };\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent]);\n  function scrollToCallback(location) {\n    const scrollerElement2 = scrollerRef.current;\n    if (!scrollerElement2 || \"offsetHeight\" in scrollerElement2 && scrollerElement2.offsetHeight === 0) {\n      return;\n    }\n    const isSmooth = location.behavior === \"smooth\";\n    let offsetHeight;\n    let scrollHeight;\n    let scrollTop;\n    if (scrollerElement2 === window) {\n      scrollHeight = Math.max(correctItemSize(document.documentElement, \"height\"), document.documentElement.scrollHeight);\n      offsetHeight = window.innerHeight;\n      scrollTop = document.documentElement.scrollTop;\n    } else {\n      scrollHeight = scrollerElement2.scrollHeight;\n      offsetHeight = correctItemSize(scrollerElement2, \"height\");\n      scrollTop = scrollerElement2.scrollTop;\n    }\n    const maxScrollTop = scrollHeight - offsetHeight;\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top), 0));\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback({ scrollTop, scrollHeight, viewportHeight: offsetHeight });\n      if (isSmooth) {\n        smoothScrollTargetReached(true);\n      }\n      return;\n    }\n    if (isSmooth) {\n      scrollTopTarget.current = location.top;\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current);\n      }\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null;\n        scrollTopTarget.current = null;\n        smoothScrollTargetReached(true);\n      }, 1e3);\n    } else {\n      scrollTopTarget.current = null;\n    }\n    scrollerElement2.scrollTo(location);\n  }\n  function scrollByCallback(location) {\n    scrollerRef.current.scrollBy(location);\n  }\n  return { scrollerRef, scrollByCallback, scrollToCallback };\n}\nconst domIOSystem = system(\n  () => {\n    const scrollContainerState = stream();\n    const scrollTop = stream();\n    const deviation = statefulStream(0);\n    const smoothScrollTargetReached = stream();\n    const statefulScrollTop = statefulStream(0);\n    const viewportHeight = stream();\n    const scrollHeight = stream();\n    const headerHeight = statefulStream(0);\n    const fixedHeaderHeight = statefulStream(0);\n    const fixedFooterHeight = statefulStream(0);\n    const footerHeight = statefulStream(0);\n    const scrollTo = stream();\n    const scrollBy = stream();\n    const scrollingInProgress = statefulStream(false);\n    connect(\n      pipe(\n        scrollContainerState,\n        map(({ scrollTop: scrollTop2 }) => scrollTop2)\n      ),\n      scrollTop\n    );\n    connect(\n      pipe(\n        scrollContainerState,\n        map(({ scrollHeight: scrollHeight2 }) => scrollHeight2)\n      ),\n      scrollHeight\n    );\n    connect(scrollTop, statefulScrollTop);\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      fixedHeaderHeight,\n      fixedFooterHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n      // signals\n      scrollTo,\n      scrollBy,\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress\n    };\n  },\n  [],\n  { singleton: true }\n);\nconst NIL_NODE = { lvl: 0 };\nfunction newAANode(k, v, lvl, l = NIL_NODE, r = NIL_NODE) {\n  return { k, v, lvl, l, r };\n}\nfunction empty(node) {\n  return node === NIL_NODE;\n}\nfunction newTree() {\n  return NIL_NODE;\n}\nfunction remove(node, key) {\n  if (empty(node))\n    return NIL_NODE;\n  const { k, l, r } = node;\n  if (key === k) {\n    if (empty(l)) {\n      return r;\n    } else if (empty(r)) {\n      return l;\n    } else {\n      const [lastKey, lastValue] = last(l);\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }));\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }));\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }));\n  }\n}\nfunction find(node, key) {\n  if (empty(node)) {\n    return;\n  }\n  if (key === node.k) {\n    return node.v;\n  } else if (key < node.k) {\n    return find(node.l, key);\n  } else {\n    return find(node.r, key);\n  }\n}\nfunction findMaxKeyValue(node, value, field = \"k\") {\n  if (empty(node)) {\n    return [-Infinity, void 0];\n  }\n  if (Number(node[field]) === value) {\n    return [node.k, node.v];\n  }\n  if (Number(node[field]) < value) {\n    const r = findMaxKeyValue(node.r, value, field);\n    if (r[0] === -Infinity) {\n      return [node.k, node.v];\n    } else {\n      return r;\n    }\n  }\n  return findMaxKeyValue(node.l, value, field);\n}\nfunction insert(node, k, v) {\n  if (empty(node)) {\n    return newAANode(k, v, 1);\n  }\n  if (k === node.k) {\n    return clone(node, { k, v });\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }));\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }));\n  }\n}\nfunction walkWithin(node, start, end) {\n  if (empty(node)) {\n    return [];\n  }\n  const { k, v, l, r } = node;\n  let result = [];\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end));\n  }\n  if (k >= start && k <= end) {\n    result.push({ k, v });\n  }\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end));\n  }\n  return result;\n}\nfunction walk(node) {\n  if (empty(node)) {\n    return [];\n  }\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)];\n}\nfunction last(node) {\n  return empty(node.r) ? [node.k, node.v] : last(node.r);\n}\nfunction deleteLast(node) {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }));\n}\nfunction clone(node, args) {\n  return newAANode(\n    args.k !== void 0 ? args.k : node.k,\n    args.v !== void 0 ? args.v : node.v,\n    args.lvl !== void 0 ? args.lvl : node.lvl,\n    args.l !== void 0 ? args.l : node.l,\n    args.r !== void 0 ? args.r : node.r\n  );\n}\nfunction isSingle(node) {\n  return empty(node) || node.lvl > node.r.lvl;\n}\nfunction rebalance(node) {\n  return split(skew(node));\n}\nfunction adjust(node) {\n  const { l, r, lvl } = node;\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node;\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }));\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1\n          }),\n          lvl\n        });\n      } else {\n        throw new Error(\"Unexpected empty nodes\");\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }));\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l;\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl;\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1\n        });\n      } else {\n        throw new Error(\"Unexpected empty nodes\");\n      }\n    }\n  }\n}\nfunction rangesWithin(node, startIndex, endIndex) {\n  if (empty(node)) {\n    return [];\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0];\n  return toRanges(walkWithin(node, adjustedStart, endIndex));\n}\nfunction arrayToRanges(items, parser) {\n  const length = items.length;\n  if (length === 0) {\n    return [];\n  }\n  let { index: start, value } = parser(items[0]);\n  const result = [];\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i]);\n    result.push({ start, end: nextIndex - 1, value });\n    start = nextIndex;\n    value = nextValue;\n  }\n  result.push({ start, end: Infinity, value });\n  return result;\n}\nfunction toRanges(nodes) {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }));\n}\nfunction split(node) {\n  const { r, lvl } = node;\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node;\n}\nfunction skew(node) {\n  const { l } = node;\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node;\n}\nfunction findIndexOfClosestSmallerOrEqual(items, value, comparator, start = 0) {\n  let end = items.length - 1;\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2);\n    const item = items[index];\n    const match = comparator(item, value);\n    if (match === 0) {\n      return index;\n    }\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1;\n      }\n      end = index - 1;\n    } else {\n      if (end === start) {\n        return index;\n      }\n      start = index + 1;\n    }\n  }\n  throw new Error(`Failed binary finding record in array - ${items.join(\",\")}, searched for ${value}`);\n}\nfunction findClosestSmallerOrEqual(items, value, comparator) {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)];\n}\nfunction findRange(items, startValue, endValue, comparator) {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator);\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex);\n  return items.slice(startIndex, endIndex + 1);\n}\nconst recalcSystem = system(\n  () => {\n    const recalcInProgress = statefulStream(false);\n    return { recalcInProgress };\n  },\n  [],\n  { singleton: true }\n);\nfunction rangeIncludes(refRange) {\n  const { size, startIndex, endIndex } = refRange;\n  return (range) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size;\n  };\n}\nfunction affectedGroupCount(offset, groupIndices) {\n  let recognizedOffsetItems = 0;\n  let groupIndex = 0;\n  while (recognizedOffsetItems < offset) {\n    recognizedOffsetItems += groupIndices[groupIndex + 1] - groupIndices[groupIndex] - 1;\n    groupIndex++;\n  }\n  const offsetIsExact = recognizedOffsetItems === offset;\n  return groupIndex - (offsetIsExact ? 0 : 1);\n}\nfunction insertRanges(sizeTree, ranges) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity;\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range;\n    syncStart = Math.min(syncStart, startIndex);\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size);\n      continue;\n    }\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1);\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue;\n    }\n    let firstPassDone = false;\n    let shouldInsert = false;\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size;\n        firstPassDone = true;\n      } else {\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart);\n        }\n      }\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue);\n        }\n      }\n    }\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size);\n    }\n  }\n  return [sizeTree, syncStart];\n}\nfunction initialSizeState() {\n  return {\n    offsetTree: [],\n    sizeTree: newTree(),\n    groupOffsetTree: newTree(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: []\n  };\n}\nfunction indexComparator({ index: itemIndex }, index) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1;\n}\nfunction offsetComparator({ offset: itemOffset }, offset) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1;\n}\nfunction offsetPointParser(point) {\n  return { index: point.index, value: point };\n}\nfunction rangesWithinOffsets(tree, startOffset, endOffset, minStartIndex = 0) {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset);\n  }\n  return arrayToRanges(findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser);\n}\nfunction createOffsetTree(prevOffsetTree, syncStart, sizeTree, gap) {\n  let offsetTree = prevOffsetTree;\n  let prevIndex = 0;\n  let prevSize = 0;\n  let prevOffset = 0;\n  let startIndex = 0;\n  if (syncStart !== 0) {\n    startIndex = findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator);\n    const offsetInfo = offsetTree[startIndex];\n    prevOffset = offsetInfo.offset;\n    const kv = findMaxKeyValue(sizeTree, syncStart - 1);\n    prevIndex = kv[0];\n    prevSize = kv[1];\n    if (offsetTree.length && offsetTree[startIndex].size === findMaxKeyValue(sizeTree, syncStart)[1]) {\n      startIndex -= 1;\n    }\n    offsetTree = offsetTree.slice(0, startIndex + 1);\n  } else {\n    offsetTree = [];\n  }\n  for (const { start: startIndex2, value } of rangesWithin(sizeTree, syncStart, Infinity)) {\n    const indexOffset = startIndex2 - prevIndex;\n    const aOffset = indexOffset * prevSize + prevOffset + indexOffset * gap;\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex2\n    });\n    prevIndex = startIndex2;\n    prevOffset = aOffset;\n    prevSize = value;\n  }\n  return {\n    offsetTree,\n    lastIndex: prevIndex,\n    lastOffset: prevOffset,\n    lastSize: prevSize\n  };\n}\nfunction sizeStateReducer(state, [ranges, groupIndices, log, gap]) {\n  if (ranges.length > 0) {\n    log(\"received item sizes\", ranges, LogLevel.DEBUG);\n  }\n  const sizeTree = state.sizeTree;\n  let newSizeTree = sizeTree;\n  let syncStart = 0;\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size;\n    const itemSize = ranges[1].size;\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize);\n    }, newSizeTree);\n  } else {\n    [newSizeTree, syncStart] = insertRanges(newSizeTree, ranges);\n  }\n  if (newSizeTree === sizeTree) {\n    return state;\n  }\n  const { offsetTree: newOffsetTree, lastIndex, lastSize, lastOffset } = createOffsetTree(state.offsetTree, syncStart, newSizeTree, gap);\n  return {\n    sizeTree: newSizeTree,\n    offsetTree: newOffsetTree,\n    lastIndex,\n    lastOffset,\n    lastSize,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, newOffsetTree, gap));\n    }, newTree()),\n    groupIndices\n  };\n}\nfunction offsetOf(index, tree, gap) {\n  if (tree.length === 0) {\n    return 0;\n  }\n  const { offset, index: startIndex, size } = findClosestSmallerOrEqual(tree, index, indexComparator);\n  const itemCount = index - startIndex;\n  const top = size * itemCount + (itemCount - 1) * gap + offset;\n  return top > 0 ? top + gap : top;\n}\nfunction isGroupLocation(location) {\n  return typeof location.groupIndex !== \"undefined\";\n}\nfunction originalIndexFromLocation(location, sizes, lastIndex) {\n  if (isGroupLocation(location)) {\n    return sizes.groupIndices[location.groupIndex] + 1;\n  } else {\n    const numericIndex = location.index === \"LAST\" ? lastIndex : location.index;\n    let result = originalIndexFromItemIndex(numericIndex, sizes);\n    result = Math.max(0, result, Math.min(lastIndex, result));\n    return result;\n  }\n}\nfunction originalIndexFromItemIndex(itemIndex, sizes) {\n  if (!hasGroups(sizes)) {\n    return itemIndex;\n  }\n  let groupOffset = 0;\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++;\n  }\n  return itemIndex + groupOffset;\n}\nfunction hasGroups(sizes) {\n  return !empty(sizes.groupOffsetTree);\n}\nfunction sizeTreeToRanges(sizeTree) {\n  return walk(sizeTree).map(({ k: startIndex, v: size }, index, sizeArray) => {\n    const nextSize = sizeArray[index + 1];\n    const endIndex = nextSize ? nextSize.k - 1 : Infinity;\n    return { startIndex, endIndex, size };\n  });\n}\nconst SIZE_MAP = {\n  offsetHeight: \"height\",\n  offsetWidth: \"width\"\n};\nconst sizeSystem = system(\n  ([{ log }, { recalcInProgress }]) => {\n    const sizeRanges = stream();\n    const totalCount = stream();\n    const statefulTotalCount = statefulStreamFromEmitter(totalCount, 0);\n    const unshiftWith = stream();\n    const shiftWith = stream();\n    const firstItemIndex = statefulStream(0);\n    const groupIndices = statefulStream([]);\n    const fixedItemSize = statefulStream(void 0);\n    const defaultItemSize = statefulStream(void 0);\n    const itemSize = statefulStream((el, field) => correctItemSize(el, SIZE_MAP[field]));\n    const data = statefulStream(void 0);\n    const gap = statefulStream(0);\n    const initial = initialSizeState();\n    const sizes = statefulStreamFromEmitter(\n      pipe(sizeRanges, withLatestFrom(groupIndices, log, gap), scan(sizeStateReducer, initial), distinctUntilChanged()),\n      initial\n    );\n    const prevGroupIndices = statefulStreamFromEmitter(\n      pipe(\n        groupIndices,\n        distinctUntilChanged(),\n        scan((prev, curr) => ({ prev: prev.current, current: curr }), {\n          prev: [],\n          current: []\n        }),\n        map(({ prev }) => prev)\n      ),\n      []\n    );\n    connect(\n      pipe(\n        groupIndices,\n        filter((indexes) => indexes.length > 0),\n        withLatestFrom(sizes, gap),\n        map(([groupIndices2, sizes2, gap2]) => {\n          const groupOffsetTree = groupIndices2.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes2.offsetTree, gap2) || idx);\n          }, newTree());\n          return {\n            ...sizes2,\n            groupIndices: groupIndices2,\n            groupOffsetTree\n          };\n        })\n      ),\n      sizes\n    );\n    connect(\n      pipe(\n        totalCount,\n        withLatestFrom(sizes),\n        filter(([totalCount2, { lastIndex }]) => {\n          return totalCount2 < lastIndex;\n        }),\n        map(([totalCount2, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount2,\n              endIndex: lastIndex,\n              size: lastSize\n            }\n          ];\n        })\n      ),\n      sizeRanges\n    );\n    connect(fixedItemSize, defaultItemSize);\n    const trackItemSizes = statefulStreamFromEmitter(\n      pipe(\n        fixedItemSize,\n        map((size) => size === void 0)\n      ),\n      true\n    );\n    connect(\n      pipe(\n        defaultItemSize,\n        filter((value) => {\n          return value !== void 0 && empty(getValue(sizes).sizeTree);\n        }),\n        map((size) => [{ startIndex: 0, endIndex: 0, size }])\n      ),\n      sizeRanges\n    );\n    const listRefresh = streamFromEmitter(\n      pipe(\n        sizeRanges,\n        withLatestFrom(sizes),\n        scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes\n            };\n          },\n          { changed: false, sizes: initial }\n        ),\n        map((value) => value.changed)\n      )\n    );\n    subscribe(\n      pipe(\n        firstItemIndex,\n        scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next };\n          },\n          { diff: 0, prev: 0 }\n        ),\n        map((val) => val.diff)\n      ),\n      (offset) => {\n        const { groupIndices: groupIndices2 } = getValue(sizes);\n        if (offset > 0) {\n          publish(recalcInProgress, true);\n          publish(unshiftWith, offset + affectedGroupCount(offset, groupIndices2));\n        } else if (offset < 0) {\n          const prevGroupIndicesValue = getValue(prevGroupIndices);\n          if (prevGroupIndicesValue.length > 0) {\n            offset -= affectedGroupCount(-offset, prevGroupIndicesValue);\n          }\n          publish(shiftWith, offset);\n        }\n      }\n    );\n    subscribe(pipe(firstItemIndex, withLatestFrom(log)), ([index, log2]) => {\n      if (index < 0) {\n        log2(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        );\n      }\n    });\n    const beforeUnshiftWith = streamFromEmitter(unshiftWith);\n    connect(\n      pipe(\n        unshiftWith,\n        withLatestFrom(sizes),\n        map(([unshiftWith2, sizes2]) => {\n          const groupedMode = sizes2.groupIndices.length > 0;\n          const initialRanges = [];\n          const defaultSize = sizes2.lastSize;\n          if (groupedMode) {\n            const firstGroupSize = find(sizes2.sizeTree, 0);\n            let prependedGroupItemsCount = 0;\n            let groupIndex = 0;\n            while (prependedGroupItemsCount < unshiftWith2) {\n              const theGroupIndex = sizes2.groupIndices[groupIndex];\n              const groupItemCount = sizes2.groupIndices.length === groupIndex + 1 ? Infinity : sizes2.groupIndices[groupIndex + 1] - theGroupIndex - 1;\n              initialRanges.push({\n                startIndex: theGroupIndex,\n                endIndex: theGroupIndex,\n                size: firstGroupSize\n              });\n              initialRanges.push({\n                startIndex: theGroupIndex + 1,\n                endIndex: theGroupIndex + 1 + groupItemCount - 1,\n                size: defaultSize\n              });\n              groupIndex++;\n              prependedGroupItemsCount += groupItemCount + 1;\n            }\n            const sizeTreeKV = walk(sizes2.sizeTree);\n            const firstGroupIsExpanded = prependedGroupItemsCount !== unshiftWith2;\n            if (firstGroupIsExpanded) {\n              sizeTreeKV.shift();\n            }\n            return sizeTreeKV.reduce(\n              (acc, { k: index, v: size }) => {\n                let ranges = acc.ranges;\n                if (acc.prevSize !== 0) {\n                  ranges = [\n                    ...acc.ranges,\n                    {\n                      startIndex: acc.prevIndex,\n                      endIndex: index + unshiftWith2 - 1,\n                      size: acc.prevSize\n                    }\n                  ];\n                }\n                return {\n                  ranges,\n                  prevIndex: index + unshiftWith2,\n                  prevSize: size\n                };\n              },\n              {\n                ranges: initialRanges,\n                prevIndex: unshiftWith2,\n                prevSize: 0\n              }\n            ).ranges;\n          }\n          return walk(sizes2.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith2 - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith2,\n                prevSize: size\n              };\n            },\n            {\n              ranges: [],\n              prevIndex: 0,\n              prevSize: defaultSize\n            }\n          ).ranges;\n        })\n      ),\n      sizeRanges\n    );\n    const shiftWithOffset = streamFromEmitter(\n      pipe(\n        shiftWith,\n        withLatestFrom(sizes, gap),\n        map(([shiftWith2, { offsetTree }, gap2]) => {\n          const newFirstItemIndex = -shiftWith2;\n          return offsetOf(newFirstItemIndex, offsetTree, gap2);\n        })\n      )\n    );\n    connect(\n      pipe(\n        shiftWith,\n        withLatestFrom(sizes, gap),\n        map(([shiftWith2, sizes2, gap2]) => {\n          const groupedMode = sizes2.groupIndices.length > 0;\n          if (groupedMode) {\n            if (empty(sizes2.sizeTree)) {\n              return sizes2;\n            }\n            let newSizeTree = newTree();\n            const prevGroupIndicesValue = getValue(prevGroupIndices);\n            let removedItemsCount = 0;\n            let groupIndex = 0;\n            let groupOffset = 0;\n            while (removedItemsCount < -shiftWith2) {\n              groupOffset = prevGroupIndicesValue[groupIndex];\n              const groupItemCount = prevGroupIndicesValue[groupIndex + 1] - groupOffset - 1;\n              groupIndex++;\n              removedItemsCount += groupItemCount + 1;\n            }\n            newSizeTree = walk(sizes2.sizeTree).reduce((acc, { k, v }) => {\n              return insert(acc, Math.max(0, k + shiftWith2), v);\n            }, newSizeTree);\n            const aGroupIsShrunk = removedItemsCount !== -shiftWith2;\n            if (aGroupIsShrunk) {\n              const firstGroupSize = find(sizes2.sizeTree, groupOffset);\n              newSizeTree = insert(newSizeTree, 0, firstGroupSize);\n              const nextItemSize = findMaxKeyValue(sizes2.sizeTree, -shiftWith2 + 1)[1];\n              newSizeTree = insert(newSizeTree, 1, nextItemSize);\n            }\n            return {\n              ...sizes2,\n              sizeTree: newSizeTree,\n              ...createOffsetTree(sizes2.offsetTree, 0, newSizeTree, gap2)\n            };\n          } else {\n            const newSizeTree = walk(sizes2.sizeTree).reduce((acc, { k, v }) => {\n              return insert(acc, Math.max(0, k + shiftWith2), v);\n            }, newTree());\n            return {\n              ...sizes2,\n              sizeTree: newSizeTree,\n              ...createOffsetTree(sizes2.offsetTree, 0, newSizeTree, gap2)\n            };\n          }\n        })\n      ),\n      sizes\n    );\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      shiftWith,\n      shiftWithOffset,\n      beforeUnshiftWith,\n      firstItemIndex,\n      gap,\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize\n    };\n  },\n  tup(loggerSystem, recalcSystem),\n  { singleton: true }\n);\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== \"undefined\" && \"scrollBehavior\" in document.documentElement.style;\nfunction normalizeIndexLocation(location) {\n  const result = typeof location === \"number\" ? { index: location } : location;\n  if (!result.align) {\n    result.align = \"start\";\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = \"auto\";\n  }\n  if (!result.offset) {\n    result.offset = 0;\n  }\n  return result;\n}\nconst scrollToIndexSystem = system(\n  ([\n    { sizes, totalCount, listRefresh, gap },\n    {\n      scrollingInProgress,\n      viewportHeight,\n      scrollTo,\n      smoothScrollTargetReached,\n      headerHeight,\n      footerHeight,\n      fixedHeaderHeight,\n      fixedFooterHeight\n    },\n    { log }\n  ]) => {\n    const scrollToIndex = stream();\n    const topListHeight = statefulStream(0);\n    let unsubscribeNextListRefresh = null;\n    let cleartTimeoutRef = null;\n    let unsubscribeListRefresh = null;\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh();\n        unsubscribeNextListRefresh = null;\n      }\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh();\n        unsubscribeListRefresh = null;\n      }\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef);\n        cleartTimeoutRef = null;\n      }\n      publish(scrollingInProgress, false);\n    }\n    connect(\n      pipe(\n        scrollToIndex,\n        withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        withLatestFrom(gap, fixedHeaderHeight, fixedFooterHeight),\n        map(\n          ([\n            [location, sizes2, viewportHeight2, totalCount2, topListHeight2, headerHeight2, footerHeight2, log2],\n            gap2,\n            fixedHeaderHeight2,\n            fixedFooterHeight2\n          ]) => {\n            const normalLocation = normalizeIndexLocation(location);\n            const { align, behavior, offset } = normalLocation;\n            const lastIndex = totalCount2 - 1;\n            const index = originalIndexFromLocation(normalLocation, sizes2, lastIndex);\n            let top = offsetOf(index, sizes2.offsetTree, gap2) + headerHeight2;\n            if (align === \"end\") {\n              top += fixedHeaderHeight2 + findMaxKeyValue(sizes2.sizeTree, index)[1] - viewportHeight2 + fixedFooterHeight2;\n              if (index === lastIndex) {\n                top += footerHeight2;\n              }\n            } else if (align === \"center\") {\n              top += (fixedHeaderHeight2 + findMaxKeyValue(sizes2.sizeTree, index)[1] - viewportHeight2 + fixedFooterHeight2) / 2;\n            } else {\n              top -= topListHeight2;\n            }\n            if (offset) {\n              top += offset;\n            }\n            const retry = (listChanged) => {\n              cleanup();\n              if (listChanged) {\n                log2(\"retrying to scroll to\", { location }, LogLevel.DEBUG);\n                publish(scrollToIndex, location);\n              } else {\n                log2(\"list did not change, scroll successful\", {}, LogLevel.DEBUG);\n              }\n            };\n            cleanup();\n            if (behavior === \"smooth\") {\n              let listChanged = false;\n              unsubscribeListRefresh = subscribe(listRefresh, (changed) => {\n                listChanged = listChanged || changed;\n              });\n              unsubscribeNextListRefresh = handleNext(smoothScrollTargetReached, () => {\n                retry(listChanged);\n              });\n            } else {\n              unsubscribeNextListRefresh = handleNext(pipe(listRefresh, watchChangesFor(150)), retry);\n            }\n            cleartTimeoutRef = setTimeout(() => {\n              cleanup();\n            }, 1200);\n            publish(scrollingInProgress, true);\n            log2(\"scrolling from index to\", { index, top, behavior }, LogLevel.DEBUG);\n            return { top, behavior };\n          }\n        )\n      ),\n      scrollTo\n    );\n    return {\n      scrollToIndex,\n      topListHeight\n    };\n  },\n  tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n);\nfunction watchChangesFor(limit) {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false);\n    }, limit);\n    return (value) => {\n      if (value) {\n        done(true);\n        clearTimeout(timeoutRef);\n      }\n    };\n  };\n}\nconst UP = \"up\";\nconst DOWN = \"down\";\nconst NONE$1 = \"none\";\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: \"NOT_SHOWING_LAST_ITEM\",\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0\n  }\n};\nconst DEFAULT_AT_TOP_THRESHOLD = 0;\nconst stateFlagsSystem = system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = statefulStream(false);\n  const isAtTop = statefulStream(true);\n  const atBottomStateChange = stream();\n  const atTopStateChange = stream();\n  const atBottomThreshold = statefulStream(4);\n  const atTopThreshold = statefulStream(DEFAULT_AT_TOP_THRESHOLD);\n  const isScrolling = statefulStreamFromEmitter(\n    pipe(\n      merge(pipe(duc(scrollTop), skip(1), mapTo(true)), pipe(duc(scrollTop), skip(1), mapTo(false), debounceTime(100))),\n      distinctUntilChanged()\n    ),\n    false\n  );\n  const isScrollingBy = statefulStreamFromEmitter(\n    pipe(merge(pipe(scrollBy, mapTo(true)), pipe(scrollBy, mapTo(false), debounceTime(200))), distinctUntilChanged()),\n    false\n  );\n  connect(\n    pipe(\n      combineLatest(duc(scrollTop), duc(atTopThreshold)),\n      map(([top, atTopThreshold2]) => top <= atTopThreshold2),\n      distinctUntilChanged()\n    ),\n    isAtTop\n  );\n  connect(pipe(isAtTop, throttleTime(50)), atTopStateChange);\n  const atBottomState = streamFromEmitter(\n    pipe(\n      combineLatest(scrollContainerState, duc(viewportHeight), duc(headerHeight), duc(footerHeight), duc(atBottomThreshold)),\n      scan((current, [{ scrollTop: scrollTop2, scrollHeight }, viewportHeight2, _headerHeight, _footerHeight, atBottomThreshold2]) => {\n        const isAtBottom2 = scrollTop2 + viewportHeight2 - scrollHeight > -atBottomThreshold2;\n        const state = {\n          viewportHeight: viewportHeight2,\n          scrollTop: scrollTop2,\n          scrollHeight\n        };\n        if (isAtBottom2) {\n          let atBottomBecause;\n          let scrollTopDelta;\n          if (scrollTop2 > current.state.scrollTop) {\n            atBottomBecause = \"SCROLLED_DOWN\";\n            scrollTopDelta = current.state.scrollTop - scrollTop2;\n          } else {\n            atBottomBecause = \"SIZE_DECREASED\";\n            scrollTopDelta = current.state.scrollTop - scrollTop2 || current.scrollTopDelta;\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta\n          };\n        }\n        let notAtBottomBecause;\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = \"SIZE_INCREASED\";\n        } else if (viewportHeight2 < current.state.viewportHeight) {\n          notAtBottomBecause = \"VIEWPORT_HEIGHT_DECREASING\";\n        } else if (scrollTop2 < current.state.scrollTop) {\n          notAtBottomBecause = \"SCROLLING_UPWARDS\";\n        } else {\n          notAtBottomBecause = \"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM\";\n        }\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state\n        };\n      }, INITIAL_BOTTOM_STATE),\n      distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom;\n      })\n    )\n  );\n  const lastJumpDueToItemResize = statefulStreamFromEmitter(\n    pipe(\n      scrollContainerState,\n      scan(\n        (current, { scrollTop: scrollTop2, scrollHeight, viewportHeight: viewportHeight2 }) => {\n          if (!approximatelyEqual(current.scrollHeight, scrollHeight)) {\n            const atBottom = scrollHeight - (scrollTop2 + viewportHeight2) < 1;\n            if (current.scrollTop !== scrollTop2 && atBottom) {\n              return {\n                scrollHeight,\n                scrollTop: scrollTop2,\n                jump: current.scrollTop - scrollTop2,\n                changed: true\n              };\n            } else {\n              return {\n                scrollHeight,\n                scrollTop: scrollTop2,\n                jump: 0,\n                changed: true\n              };\n            }\n          } else {\n            return {\n              scrollTop: scrollTop2,\n              scrollHeight,\n              jump: 0,\n              changed: false\n            };\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      filter((value) => value.changed),\n      map((value) => value.jump)\n    ),\n    0\n  );\n  connect(\n    pipe(\n      atBottomState,\n      map((state) => state.atBottom)\n    ),\n    isAtBottom\n  );\n  connect(pipe(isAtBottom, throttleTime(50)), atBottomStateChange);\n  const scrollDirection = statefulStream(DOWN);\n  connect(\n    pipe(\n      scrollContainerState,\n      map(({ scrollTop: scrollTop2 }) => scrollTop2),\n      distinctUntilChanged(),\n      scan(\n        (acc, scrollTop2) => {\n          if (getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop2 };\n          }\n          return { direction: scrollTop2 < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop2 };\n        },\n        { direction: DOWN, prevScrollTop: 0 }\n      ),\n      map((value) => value.direction)\n    ),\n    scrollDirection\n  );\n  connect(pipe(scrollContainerState, throttleTime(50), mapTo(NONE$1)), scrollDirection);\n  const scrollVelocity = statefulStream(0);\n  connect(\n    pipe(\n      isScrolling,\n      filter((value) => !value),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      mapTo(0)\n    ),\n    scrollVelocity\n  );\n  connect(\n    pipe(\n      scrollTop,\n      throttleTime(100),\n      withLatestFrom(isScrolling),\n      filter(([_, isScrolling2]) => !!isScrolling2),\n      scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  );\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    atTopThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize\n  };\n}, tup(domIOSystem));\nconst propsReadySystem = system(\n  ([{ log }]) => {\n    const propsReady = statefulStream(false);\n    const didMount = streamFromEmitter(\n      pipe(\n        propsReady,\n        filter((ready) => ready),\n        distinctUntilChanged()\n      )\n    );\n    subscribe(propsReady, (value) => {\n      value && getValue(log)(\"props updated\", {}, LogLevel.DEBUG);\n    });\n    return { propsReady, didMount };\n  },\n  tup(loggerSystem),\n  { singleton: true }\n);\nfunction skipFrames(frameCount, callback) {\n  if (frameCount == 0) {\n    callback();\n  } else {\n    requestAnimationFrame(() => skipFrames(frameCount - 1, callback));\n  }\n}\nfunction getInitialTopMostItemIndexNumber(location, totalCount) {\n  const lastIndex = totalCount - 1;\n  const index = typeof location === \"number\" ? location : location.index === \"LAST\" ? lastIndex : location.index;\n  return index;\n}\nconst initialTopMostItemIndexSystem = system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = statefulStream(true);\n    const initialTopMostItemIndex = statefulStream(0);\n    const scrollScheduled = statefulStream(false);\n    connect(\n      pipe(\n        didMount,\n        withLatestFrom(initialTopMostItemIndex),\n        filter(([_, location]) => !!location),\n        mapTo(false)\n      ),\n      scrolledToInitialItem\n    );\n    subscribe(\n      pipe(\n        combineLatest(listRefresh, didMount),\n        withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize, scrollScheduled),\n        filter(([[, didMount2], scrolledToInitialItem2, { sizeTree }, defaultItemSize2, scrollScheduled2]) => {\n          return didMount2 && (!empty(sizeTree) || isDefined(defaultItemSize2)) && !scrolledToInitialItem2 && !scrollScheduled2;\n        }),\n        withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex2]) => {\n        publish(scrollScheduled, true);\n        skipFrames(3, () => {\n          handleNext(scrollTop, () => publish(scrolledToInitialItem, true));\n          publish(scrollToIndex, initialTopMostItemIndex2);\n        });\n      }\n    );\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex\n    };\n  },\n  tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n);\nfunction normalizeFollowOutput(follow) {\n  if (!follow) {\n    return false;\n  }\n  return follow === \"smooth\" ? \"smooth\" : \"auto\";\n}\nconst behaviorFromFollowOutput = (follow, isAtBottom) => {\n  if (typeof follow === \"function\") {\n    return normalizeFollowOutput(follow(isAtBottom));\n  }\n  return isAtBottom && normalizeFollowOutput(follow);\n};\nconst followOutputSystem = system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress }\n  ]) => {\n    const followOutput = statefulStream(false);\n    const autoscrollToBottom = stream();\n    let pendingScrollHandle = null;\n    function scrollToBottom(followOutputBehavior) {\n      publish(scrollToIndex, {\n        index: \"LAST\",\n        align: \"end\",\n        behavior: followOutputBehavior\n      });\n    }\n    subscribe(\n      pipe(\n        combineLatest(pipe(duc(totalCount), skip(1)), didMount),\n        withLatestFrom(duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        map(([[totalCount2, didMount2], followOutput2, isAtBottom2, scrolledToInitialItem2, scrollingInProgress2]) => {\n          let shouldFollow = didMount2 && scrolledToInitialItem2;\n          let followOutputBehavior = \"auto\";\n          if (shouldFollow) {\n            followOutputBehavior = behaviorFromFollowOutput(followOutput2, isAtBottom2 || scrollingInProgress2);\n            shouldFollow = shouldFollow && !!followOutputBehavior;\n          }\n          return { totalCount: totalCount2, shouldFollow, followOutputBehavior };\n        }),\n        filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount: totalCount2, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle();\n          pendingScrollHandle = null;\n        }\n        pendingScrollHandle = handleNext(listRefresh, () => {\n          getValue(log)(\"following output to \", { totalCount: totalCount2 }, LogLevel.DEBUG);\n          scrollToBottom(followOutputBehavior);\n          pendingScrollHandle = null;\n        });\n      }\n    );\n    function trapNextSizeIncrease(followOutput2) {\n      const cancel = handleNext(atBottomState, (state) => {\n        if (followOutput2 && !state.atBottom && state.notAtBottomBecause === \"SIZE_INCREASED\" && !pendingScrollHandle) {\n          getValue(log)(\"scrolling to bottom due to increased size\", {}, LogLevel.DEBUG);\n          scrollToBottom(\"auto\");\n        }\n      });\n      setTimeout(cancel, 100);\n    }\n    subscribe(\n      pipe(\n        combineLatest(duc(followOutput), totalCount, propsReady),\n        filter(([follow, , ready]) => follow && ready),\n        scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next };\n          },\n          { refreshed: false, value: 0 }\n        ),\n        filter(({ refreshed }) => refreshed),\n        withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput2]) => {\n        trapNextSizeIncrease(followOutput2 !== false);\n      }\n    );\n    subscribe(autoscrollToBottom, () => {\n      trapNextSizeIncrease(getValue(followOutput) !== false);\n    });\n    subscribe(combineLatest(duc(followOutput), atBottomState), ([followOutput2, state]) => {\n      if (followOutput2 && !state.atBottom && state.notAtBottomBecause === \"VIEWPORT_HEIGHT_DECREASING\") {\n        scrollToBottom(\"auto\");\n      }\n    });\n    return { followOutput, autoscrollToBottom };\n  },\n  tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n);\nfunction groupCountsToIndicesAndCount(counts) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount);\n      acc.totalCount += groupCount + 1;\n      return acc;\n    },\n    {\n      totalCount: 0,\n      groupIndices: []\n    }\n  );\n}\nconst groupedListSystem = system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = stream();\n  const topItemsIndexes = stream();\n  const groupIndicesAndCount = streamFromEmitter(pipe(groupCounts, map(groupCountsToIndicesAndCount)));\n  connect(\n    pipe(\n      groupIndicesAndCount,\n      map((value) => value.totalCount)\n    ),\n    totalCount\n  );\n  connect(\n    pipe(\n      groupIndicesAndCount,\n      map((value) => value.groupIndices)\n    ),\n    groupIndices\n  );\n  connect(\n    pipe(\n      combineLatest(scrollTop, sizes, headerHeight),\n      filter(([_, sizes2]) => hasGroups(sizes2)),\n      map(([scrollTop2, state, headerHeight2]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop2 - headerHeight2, 0), \"v\")[0]),\n      distinctUntilChanged(),\n      map((index) => [index])\n    ),\n    topItemsIndexes\n  );\n  return { groupCounts, topItemsIndexes };\n}, tup(sizeSystem, domIOSystem));\nfunction tupleComparator(prev, current) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1]);\n}\nfunction rangeComparator(prev, next) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex);\n}\nconst TOP = \"top\";\nconst BOTTOM = \"bottom\";\nconst NONE = \"none\";\nfunction getOverscan(overscan, end, direction) {\n  if (typeof overscan === \"number\") {\n    return direction === UP && end === TOP || direction === DOWN && end === BOTTOM ? overscan : 0;\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse;\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse;\n    }\n  }\n}\nfunction getViewportIncrease(value, end) {\n  return typeof value === \"number\" ? value : value[end] || 0;\n}\nconst sizeRangeSystem = system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight, fixedHeaderHeight }]) => {\n    const listBoundary = stream();\n    const topListHeight = statefulStream(0);\n    const increaseViewportBy = statefulStream(0);\n    const overscan = statefulStream(0);\n    const visibleRange = statefulStreamFromEmitter(\n      pipe(\n        combineLatest(\n          duc(scrollTop),\n          duc(viewportHeight),\n          duc(headerHeight),\n          duc(listBoundary, tupleComparator),\n          duc(overscan),\n          duc(topListHeight),\n          duc(fixedHeaderHeight),\n          duc(deviation),\n          duc(increaseViewportBy)\n        ),\n        map(\n          ([\n            scrollTop2,\n            viewportHeight2,\n            headerHeight2,\n            [listTop, listBottom],\n            overscan2,\n            topListHeight2,\n            fixedHeaderHeight2,\n            deviation2,\n            increaseViewportBy2\n          ]) => {\n            const top = scrollTop2 - deviation2;\n            const stickyHeaderHeight = topListHeight2 + fixedHeaderHeight2;\n            const headerVisible = Math.max(headerHeight2 - top, 0);\n            let direction = NONE;\n            const topViewportAddition = getViewportIncrease(increaseViewportBy2, TOP);\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy2, BOTTOM);\n            listTop -= deviation2;\n            listTop += headerHeight2 + fixedHeaderHeight2;\n            listBottom += headerHeight2 + fixedHeaderHeight2;\n            listBottom -= deviation2;\n            if (listTop > scrollTop2 + stickyHeaderHeight - topViewportAddition) {\n              direction = UP;\n            }\n            if (listBottom < scrollTop2 - headerVisible + viewportHeight2 + bottomViewportAddition) {\n              direction = DOWN;\n            }\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight2 - getOverscan(overscan2, TOP, direction) - topViewportAddition, 0),\n                top - headerVisible - fixedHeaderHeight2 + viewportHeight2 + getOverscan(overscan2, BOTTOM, direction) + bottomViewportAddition\n              ];\n            }\n            return null;\n          }\n        ),\n        filter((value) => value != null),\n        distinctUntilChanged(tupleComparator)\n      ),\n      [0, 0]\n    );\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      increaseViewportBy,\n      // output\n      visibleRange\n    };\n  },\n  tup(domIOSystem),\n  { singleton: true }\n);\nfunction probeItemSet(index, sizes, data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes);\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0];\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] }\n    ];\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }];\n}\nconst EMPTY_LIST_STATE = {\n  items: [],\n  topItems: [],\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0\n};\nfunction transposeItems(items, sizes, firstItemIndex) {\n  if (items.length === 0) {\n    return [];\n  }\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }));\n  }\n  const startIndex = items[0].index;\n  const endIndex = items[items.length - 1].index;\n  const transposedItems = [];\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex);\n  let currentRange = void 0;\n  let currentGroupIndex = 0;\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift();\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start);\n    }\n    let transposedItem;\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: \"group\",\n        index: currentGroupIndex\n      };\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex\n      };\n    }\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data\n    });\n  }\n  return transposedItems;\n}\nfunction buildListState(items, topItems, totalCount, gap, sizes, firstItemIndex) {\n  const { lastSize, lastOffset, lastIndex } = sizes;\n  let offsetTop = 0;\n  let bottom = 0;\n  if (items.length > 0) {\n    offsetTop = items[0].offset;\n    const lastItem = items[items.length - 1];\n    bottom = lastItem.offset + lastItem.size;\n  }\n  const itemCount = totalCount - lastIndex;\n  const total = lastOffset + itemCount * lastSize + (itemCount - 1) * gap;\n  const top = offsetTop;\n  const offsetBottom = total - bottom;\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n    firstItemIndex\n  };\n}\nconst listStateSystem = system(\n  ([\n    { sizes, totalCount, data, firstItemIndex, gap },\n    groupedListSystem2,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n    { recalcInProgress }\n  ]) => {\n    const topItemsIndexes = statefulStream([]);\n    const itemsRendered = stream();\n    connect(groupedListSystem2.topItemsIndexes, topItemsIndexes);\n    const listState = statefulStreamFromEmitter(\n      pipe(\n        combineLatest(\n          didMount,\n          recalcInProgress,\n          duc(visibleRange, tupleComparator),\n          duc(totalCount),\n          duc(sizes),\n          duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          duc(topItemsIndexes),\n          duc(firstItemIndex),\n          duc(gap),\n          data\n        ),\n        filter(([mount, recalcInProgress2, , totalCount2, , , , , , , data2]) => {\n          const dataChangeInProgress = data2 && data2.length !== totalCount2;\n          return mount && !recalcInProgress2 && !dataChangeInProgress;\n        }),\n        map(\n          ([\n            ,\n            ,\n            [startOffset, endOffset],\n            totalCount2,\n            sizes2,\n            initialTopMostItemIndex2,\n            scrolledToInitialItem2,\n            topItemsIndexes2,\n            firstItemIndex2,\n            gap2,\n            data2\n          ]) => {\n            const sizesValue = sizes2;\n            const { sizeTree, offsetTree } = sizesValue;\n            if (totalCount2 === 0 || startOffset === 0 && endOffset === 0) {\n              return { ...EMPTY_LIST_STATE, totalCount: totalCount2 };\n            }\n            if (empty(sizeTree)) {\n              return buildListState(\n                probeItemSet(getInitialTopMostItemIndexNumber(initialTopMostItemIndex2, totalCount2), sizesValue, data2),\n                [],\n                totalCount2,\n                gap2,\n                sizesValue,\n                firstItemIndex2\n              );\n            }\n            const topItems = [];\n            if (topItemsIndexes2.length > 0) {\n              const startIndex = topItemsIndexes2[0];\n              const endIndex = topItemsIndexes2[topItemsIndexes2.length - 1];\n              let offset = 0;\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value;\n                const rangeStartIndex = Math.max(range.start, startIndex);\n                const rangeEndIndex = Math.min(range.end, endIndex);\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset, data: data2 && data2[i] });\n                  offset += size;\n                }\n              }\n            }\n            if (!scrolledToInitialItem2) {\n              return buildListState([], topItems, totalCount2, gap2, sizesValue, firstItemIndex2);\n            }\n            const minStartIndex = topItemsIndexes2.length > 0 ? topItemsIndexes2[topItemsIndexes2.length - 1] + 1 : 0;\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex);\n            if (offsetPointRanges.length === 0) {\n              return null;\n            }\n            const maxIndex = totalCount2 - 1;\n            const items = tap([], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value;\n                let offset = point.offset;\n                let rangeStartIndex = range.start;\n                const size = point.size;\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset + gap2) / (size + gap2));\n                  const itemCount = rangeStartIndex - range.start;\n                  offset += itemCount * size + itemCount * gap2;\n                }\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size;\n                  rangeStartIndex = minStartIndex;\n                }\n                const endIndex = Math.min(range.end, maxIndex);\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break;\n                  }\n                  result.push({ index: i, size, offset, data: data2 && data2[i] });\n                  offset += size + gap2;\n                }\n              }\n            });\n            return buildListState(items, topItems, totalCount2, gap2, sizesValue, firstItemIndex2);\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        filter((value) => value !== null),\n        distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    );\n    connect(\n      pipe(\n        data,\n        filter(isDefined),\n        map((data2) => data2 == null ? void 0 : data2.length)\n      ),\n      totalCount\n    );\n    connect(\n      pipe(\n        listState,\n        map((value) => value.topListHeight)\n      ),\n      topListHeight\n    );\n    connect(topListHeight, rangeTopListHeight);\n    connect(\n      pipe(\n        listState,\n        map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    );\n    connect(\n      pipe(\n        listState,\n        map((state) => state.items)\n      ),\n      itemsRendered\n    );\n    const endReached = streamFromEmitter(\n      pipe(\n        listState,\n        filter(({ items }) => items.length > 0),\n        withLatestFrom(totalCount, data),\n        filter(([{ items }, totalCount2]) => items[items.length - 1].originalIndex === totalCount2 - 1),\n        map(([, totalCount2, data2]) => [totalCount2 - 1, data2]),\n        distinctUntilChanged(tupleComparator),\n        map(([count]) => count)\n      )\n    );\n    const startReached = streamFromEmitter(\n      pipe(\n        listState,\n        throttleTime(200),\n        filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length;\n        }),\n        map(({ items }) => items[0].index),\n        distinctUntilChanged()\n      )\n    );\n    const rangeChanged = streamFromEmitter(\n      pipe(\n        listState,\n        filter(({ items }) => items.length > 0),\n        map(({ items }) => {\n          let startIndex = 0;\n          let endIndex = items.length - 1;\n          while (items[startIndex].type === \"group\" && startIndex < endIndex) {\n            startIndex++;\n          }\n          while (items[endIndex].type === \"group\" && endIndex > startIndex) {\n            endIndex--;\n          }\n          return {\n            startIndex: items[startIndex].index,\n            endIndex: items[endIndex].index\n          };\n        }),\n        distinctUntilChanged(rangeComparator)\n      )\n    );\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags };\n  },\n  tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem,\n    recalcSystem\n  ),\n  { singleton: true }\n);\nconst initialItemCountSystem = system(\n  ([{ sizes, firstItemIndex, data, gap }, { listState }, { didMount }]) => {\n    const initialItemCount = statefulStream(0);\n    connect(\n      pipe(\n        didMount,\n        withLatestFrom(initialItemCount),\n        filter(([, count]) => count !== 0),\n        withLatestFrom(sizes, firstItemIndex, gap, data),\n        map(([[, count], sizes2, firstItemIndex2, gap2, data2 = []]) => {\n          let includedGroupsCount = 0;\n          if (sizes2.groupIndices.length > 0) {\n            for (const index of sizes2.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break;\n              }\n              includedGroupsCount++;\n            }\n          }\n          const adjustedCount = count + includedGroupsCount;\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data2[index] }));\n          return buildListState(items, [], adjustedCount, gap2, sizes2, firstItemIndex2);\n        })\n      ),\n      listState\n    );\n    return { initialItemCount };\n  },\n  tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n);\nconst scrollSeekSystem = system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = statefulStream(false);\n    const rangeChanged = stream();\n    const scrollSeekConfiguration = statefulStream(false);\n    connect(\n      pipe(\n        scrollVelocity,\n        withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        filter(([_, config]) => !!config),\n        map(([speed, config, isSeeking2, range]) => {\n          const { exit, enter } = config;\n          if (isSeeking2) {\n            if (exit(speed, range)) {\n              return false;\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true;\n            }\n          }\n          return isSeeking2;\n        }),\n        distinctUntilChanged()\n      ),\n      isSeeking\n    );\n    subscribe(\n      pipe(combineLatest(isSeeking, scrollVelocity, rangeChanged), withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking2, velocity, range], config]) => isSeeking2 && config && config.change && config.change(velocity, range)\n    );\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged };\n  },\n  tup(stateFlagsSystem),\n  { singleton: true }\n);\nconst topItemCountSystem = system(([{ topItemsIndexes }]) => {\n  const topItemCount = statefulStream(0);\n  connect(\n    pipe(\n      topItemCount,\n      filter((length) => length > 0),\n      map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  );\n  return { topItemCount };\n}, tup(listStateSystem));\nconst totalListHeightSystem = system(\n  ([{ footerHeight, headerHeight, fixedHeaderHeight, fixedFooterHeight }, { listState }]) => {\n    const totalListHeightChanged = stream();\n    const totalListHeight = statefulStreamFromEmitter(\n      pipe(\n        combineLatest(footerHeight, fixedFooterHeight, headerHeight, fixedHeaderHeight, listState),\n        map(([footerHeight2, fixedFooterHeight2, headerHeight2, fixedHeaderHeight2, listState2]) => {\n          return footerHeight2 + fixedFooterHeight2 + headerHeight2 + fixedHeaderHeight2 + listState2.offsetBottom + listState2.bottom;\n        })\n      ),\n      0\n    );\n    connect(duc(totalListHeight), totalListHeightChanged);\n    return { totalListHeight, totalListHeightChanged };\n  },\n  tup(domIOSystem, listStateSystem),\n  { singleton: true }\n);\nfunction simpleMemoize(func) {\n  let called = false;\n  let result;\n  return () => {\n    if (!called) {\n      called = true;\n      result = func();\n    }\n    return result;\n  };\n}\nconst isMobileSafari = simpleMemoize(() => {\n  return /iP(ad|od|hone)/i.test(navigator.userAgent) && /WebKit/i.test(navigator.userAgent);\n});\nconst upwardScrollFixSystem = system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, shiftWithOffset, sizes, gap },\n    { log },\n    { recalcInProgress }\n  ]) => {\n    const deviationOffset = streamFromEmitter(\n      pipe(\n        listState,\n        withLatestFrom(lastJumpDueToItemResize),\n        scan(\n          ([, prevItems, prevTotalCount, prevTotalHeight], [{ items, totalCount, bottom, offsetBottom }, lastJumpDueToItemResize2]) => {\n            const totalHeight = bottom + offsetBottom;\n            let newDev = 0;\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const atStart = items[0].originalIndex === 0 && prevItems[0].originalIndex === 0;\n                if (!atStart) {\n                  newDev = totalHeight - prevTotalHeight;\n                  if (newDev !== 0) {\n                    newDev += lastJumpDueToItemResize2;\n                  }\n                }\n              }\n            }\n            return [newDev, items, totalCount, totalHeight];\n          },\n          [0, [], 0, 0]\n        ),\n        filter(([amount]) => amount !== 0),\n        withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, isAtBottom, log, recalcInProgress),\n        filter(([, scrollTop2, scrollDirection2, scrollingInProgress2, , , recalcInProgress2]) => {\n          return !recalcInProgress2 && !scrollingInProgress2 && scrollTop2 !== 0 && scrollDirection2 === UP;\n        }),\n        map(([[amount], , , , , log2]) => {\n          log2(\"Upward scrolling compensation\", { amount }, LogLevel.DEBUG);\n          return amount;\n        })\n      )\n    );\n    function scrollByWith(offset) {\n      if (offset > 0) {\n        publish(scrollBy, { top: -offset, behavior: \"auto\" });\n        publish(deviation, 0);\n      } else {\n        publish(deviation, 0);\n        publish(scrollBy, { top: -offset, behavior: \"auto\" });\n      }\n    }\n    subscribe(pipe(deviationOffset, withLatestFrom(deviation, isScrolling)), ([offset, deviationAmount, isScrolling2]) => {\n      if (isScrolling2 && isMobileSafari()) {\n        publish(deviation, deviationAmount - offset);\n      } else {\n        scrollByWith(-offset);\n      }\n    });\n    subscribe(\n      pipe(\n        combineLatest(statefulStreamFromEmitter(isScrolling, false), deviation, recalcInProgress),\n        filter(([is, deviation2, recalc]) => !is && !recalc && deviation2 !== 0),\n        map(([_, deviation2]) => deviation2),\n        throttleTime(1)\n      ),\n      scrollByWith\n    );\n    connect(\n      pipe(\n        shiftWithOffset,\n        map((offset) => {\n          return { top: -offset };\n        })\n      ),\n      scrollBy\n    );\n    subscribe(\n      pipe(\n        beforeUnshiftWith,\n        withLatestFrom(sizes, gap),\n        map(([offset, { lastSize: defaultItemSize, groupIndices, sizeTree }, gap2]) => {\n          function getItemOffset(itemCount) {\n            return itemCount * (defaultItemSize + gap2);\n          }\n          if (groupIndices.length === 0) {\n            return getItemOffset(offset);\n          } else {\n            let amount = 0;\n            const defaultGroupSize = find(sizeTree, 0);\n            let recognizedOffsetItems = 0;\n            let groupIndex = 0;\n            while (recognizedOffsetItems < offset) {\n              recognizedOffsetItems++;\n              amount += defaultGroupSize;\n              let groupItemCount = groupIndices.length === groupIndex + 1 ? Infinity : groupIndices[groupIndex + 1] - groupIndices[groupIndex] - 1;\n              if (recognizedOffsetItems + groupItemCount > offset) {\n                amount -= defaultGroupSize;\n                groupItemCount = offset - recognizedOffsetItems + 1;\n              }\n              recognizedOffsetItems += groupItemCount;\n              amount += getItemOffset(groupItemCount);\n              groupIndex++;\n            }\n            return amount;\n          }\n        })\n      ),\n      (offset) => {\n        publish(deviation, offset);\n        requestAnimationFrame(() => {\n          publish(scrollBy, { top: offset });\n          requestAnimationFrame(() => {\n            publish(deviation, 0);\n            publish(recalcInProgress, false);\n          });\n        });\n      }\n    );\n    return { deviation };\n  },\n  tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem, recalcSystem)\n);\nconst initialScrollTopSystem = system(\n  ([{ didMount }, { scrollTo }, { listState }]) => {\n    const initialScrollTop = statefulStream(0);\n    subscribe(\n      pipe(\n        didMount,\n        withLatestFrom(initialScrollTop),\n        filter(([, offset]) => offset !== 0),\n        map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        handleNext(\n          pipe(\n            listState,\n            skip(1),\n            filter((state) => state.items.length > 1)\n          ),\n          () => {\n            requestAnimationFrame(() => {\n              publish(scrollTo, location);\n            });\n          }\n        );\n      }\n    );\n    return {\n      initialScrollTop\n    };\n  },\n  tup(propsReadySystem, domIOSystem, listStateSystem),\n  { singleton: true }\n);\nconst alignToBottomSystem = system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = statefulStream(false);\n    const paddingTopAddition = statefulStreamFromEmitter(\n      pipe(\n        combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        filter(([enabled]) => enabled),\n        map(([, viewportHeight2, totalListHeight2]) => {\n          return Math.max(0, viewportHeight2 - totalListHeight2);\n        }),\n        throttleTime(0),\n        distinctUntilChanged()\n      ),\n      0\n    );\n    return { alignToBottom, paddingTopAddition };\n  },\n  tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n);\nconst windowScrollerSystem = system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = stream();\n  const windowViewportRect = stream();\n  const windowScrollTo = stream();\n  const useWindowScroll = statefulStream(false);\n  const customScrollParent = statefulStream(void 0);\n  connect(\n    pipe(\n      combineLatest(windowScrollContainerState, windowViewportRect),\n      map(([{ viewportHeight, scrollTop: windowScrollTop, scrollHeight }, { offsetTop }]) => {\n        return {\n          scrollTop: Math.max(0, windowScrollTop - offsetTop),\n          scrollHeight,\n          viewportHeight\n        };\n      })\n    ),\n    scrollContainerState\n  );\n  connect(\n    pipe(\n      scrollTo,\n      withLatestFrom(windowViewportRect),\n      map(([scrollTo2, { offsetTop }]) => {\n        return {\n          ...scrollTo2,\n          top: scrollTo2.top + offsetTop\n        };\n      })\n    ),\n    windowScrollTo\n  );\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n    // signals\n    windowScrollTo\n  };\n}, tup(domIOSystem));\nconst defaultCalculateViewLocation = ({\n  itemTop: itemTop2,\n  itemBottom,\n  viewportTop,\n  viewportBottom,\n  locationParams: { behavior, align, ...rest }\n}) => {\n  if (itemTop2 < viewportTop) {\n    return { ...rest, behavior, align: align != null ? align : \"start\" };\n  }\n  if (itemBottom > viewportBottom) {\n    return { ...rest, behavior, align: align != null ? align : \"end\" };\n  }\n  return null;\n};\nconst scrollIntoViewSystem = system(\n  ([\n    { sizes, totalCount, gap },\n    { scrollTop, viewportHeight, headerHeight, fixedHeaderHeight, fixedFooterHeight, scrollingInProgress },\n    { scrollToIndex }\n  ]) => {\n    const scrollIntoView = stream();\n    connect(\n      pipe(\n        scrollIntoView,\n        withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, fixedHeaderHeight, fixedFooterHeight, scrollTop),\n        withLatestFrom(gap),\n        map(([[viewLocation, sizes2, viewportHeight2, totalCount2, headerHeight2, fixedHeaderHeight2, fixedFooterHeight2, scrollTop2], gap2]) => {\n          const { done, behavior, align, calculateViewLocation = defaultCalculateViewLocation, ...rest } = viewLocation;\n          const actualIndex = originalIndexFromLocation(viewLocation, sizes2, totalCount2 - 1);\n          const itemTop2 = offsetOf(actualIndex, sizes2.offsetTree, gap2) + headerHeight2 + fixedHeaderHeight2;\n          const itemBottom = itemTop2 + findMaxKeyValue(sizes2.sizeTree, actualIndex)[1];\n          const viewportTop = scrollTop2 + fixedHeaderHeight2;\n          const viewportBottom = scrollTop2 + viewportHeight2 - fixedFooterHeight2;\n          const location = calculateViewLocation({\n            itemTop: itemTop2,\n            itemBottom,\n            viewportTop,\n            viewportBottom,\n            locationParams: { behavior, align, ...rest }\n          });\n          if (location) {\n            done && handleNext(\n              pipe(\n                scrollingInProgress,\n                filter((value) => value === false),\n                // skips the initial publish of false, and the cleanup call.\n                // but if scrollingInProgress is true, we skip the initial publish.\n                skip(getValue(scrollingInProgress) ? 1 : 2)\n              ),\n              done\n            );\n          } else {\n            done && done();\n          }\n          return location;\n        }),\n        filter((value) => value !== null)\n      ),\n      scrollToIndex\n    );\n    return {\n      scrollIntoView\n    };\n  },\n  tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n);\nconst stateLoadSystem = system(([{ sizes, sizeRanges }, { scrollTop }, { initialTopMostItemIndex }, { didMount }]) => {\n  const getState = stream();\n  const restoreStateFrom = statefulStream(void 0);\n  subscribe(pipe(getState, withLatestFrom(sizes, scrollTop)), ([callback, sizes2, scrollTop2]) => {\n    const ranges = sizeTreeToRanges(sizes2.sizeTree);\n    callback({ ranges, scrollTop: scrollTop2 });\n  });\n  connect(pipe(restoreStateFrom, filter(isDefined), map(locationFromSnapshot)), initialTopMostItemIndex);\n  connect(\n    pipe(\n      didMount,\n      withLatestFrom(restoreStateFrom),\n      filter(([, state]) => state !== void 0),\n      distinctUntilChanged(),\n      map(([, snapshot]) => {\n        return snapshot.ranges;\n      })\n    ),\n    sizeRanges\n  );\n  return {\n    getState,\n    restoreStateFrom\n  };\n}, tup(sizeSystem, domIOSystem, initialTopMostItemIndexSystem, propsReadySystem));\nfunction locationFromSnapshot(snapshot) {\n  return { offset: snapshot.scrollTop, index: 0, align: \"start\" };\n}\nconst featureGroup1System = system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem2,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n    logger\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem2,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n      ...logger\n    };\n  },\n  tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem,\n    loggerSystem\n  )\n);\nconst listSystem = system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n      gap,\n      sizes\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    stateLoad,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1\n  ]) => {\n    connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged);\n    connect(\n      pipe(\n        featureGroup1.windowViewportRect,\n        map((value) => value.visibleHeight)\n      ),\n      domIO.viewportHeight\n    );\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      gap,\n      ...followOutput,\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      sizes,\n      ...stateLoad\n    };\n  },\n  tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    stateLoadSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System\n  )\n);\nconst WEBKIT_STICKY = \"-webkit-sticky\";\nconst STICKY = \"sticky\";\nconst positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === \"undefined\") {\n    return STICKY;\n  }\n  const node = document.createElement(\"div\");\n  node.style.position = WEBKIT_STICKY;\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY;\n});\nfunction useWindowViewportRectRef(callback, customScrollParent) {\n  const viewportInfo = React.useRef(null);\n  const calculateInfo = React.useCallback(\n    (element) => {\n      if (element === null || !element.offsetParent) {\n        return;\n      }\n      const rect = element.getBoundingClientRect();\n      const visibleWidth = rect.width;\n      let visibleHeight, offsetTop;\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect();\n        const deltaTop = rect.top - customScrollParentRect.top;\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop);\n        offsetTop = deltaTop + customScrollParent.scrollTop;\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top);\n        offsetTop = rect.top + window.pageYOffset;\n      }\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth\n      };\n      callback(viewportInfo.current);\n    },\n    [callback, customScrollParent]\n  );\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo);\n  const scrollAndResizeEventHandler = React.useCallback(() => {\n    calculateInfo(ref.current);\n  }, [calculateInfo, ref]);\n  React.useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener(\"scroll\", scrollAndResizeEventHandler);\n      const observer = new ResizeObserver(scrollAndResizeEventHandler);\n      observer.observe(customScrollParent);\n      return () => {\n        customScrollParent.removeEventListener(\"scroll\", scrollAndResizeEventHandler);\n        observer.unobserve(customScrollParent);\n      };\n    } else {\n      window.addEventListener(\"scroll\", scrollAndResizeEventHandler);\n      window.addEventListener(\"resize\", scrollAndResizeEventHandler);\n      return () => {\n        window.removeEventListener(\"scroll\", scrollAndResizeEventHandler);\n        window.removeEventListener(\"resize\", scrollAndResizeEventHandler);\n      };\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent]);\n  return callbackRef;\n}\nconst VirtuosoMockContext = React.createContext(void 0);\nconst VirtuosoGridMockContext = React.createContext(void 0);\nfunction identity(value) {\n  return value;\n}\nconst listComponentPropsSystem = /* @__PURE__ */ system(() => {\n  const itemContent = statefulStream((index) => `Item ${index}`);\n  const context = statefulStream(null);\n  const groupContent = statefulStream((index) => `Group ${index}`);\n  const components = statefulStream({});\n  const computeItemKey = statefulStream(identity);\n  const headerFooterTag = statefulStream(\"div\");\n  const scrollerRef = statefulStream(noop);\n  const distinctProp = (propName, defaultValue = null) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components2) => components2[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    );\n  };\n  return {\n    context,\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp(\"Footer\"),\n    HeaderComponent: distinctProp(\"Header\"),\n    TopItemListComponent: distinctProp(\"TopItemList\"),\n    ListComponent: distinctProp(\"List\", \"div\"),\n    ItemComponent: distinctProp(\"Item\", \"div\"),\n    GroupComponent: distinctProp(\"Group\", \"div\"),\n    ScrollerComponent: distinctProp(\"Scroller\", \"div\"),\n    EmptyPlaceholder: distinctProp(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: distinctProp(\"ScrollSeekPlaceholder\")\n  };\n});\nconst combinedSystem$2 = /* @__PURE__ */ system(([listSystem2, propsSystem]) => {\n  return { ...listSystem2, ...propsSystem };\n}, tup(listSystem, listComponentPropsSystem));\nconst DefaultScrollSeekPlaceholder$1 = ({ height }) => /* @__PURE__ */ React.createElement(\"div\", { style: { height } });\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: \"none\" };\nconst ITEM_STYLE$1 = { overflowAnchor: \"none\" };\nconst Items$1 = /* @__PURE__ */ React.memo(function VirtuosoItems({ showTopList = false }) {\n  const listState = useEmitterValue$2(\"listState\");\n  const sizeRanges = usePublisher$2(\"sizeRanges\");\n  const useWindowScroll = useEmitterValue$2(\"useWindowScroll\");\n  const customScrollParent = useEmitterValue$2(\"customScrollParent\");\n  const windowScrollContainerStateCallback = usePublisher$2(\"windowScrollContainerState\");\n  const _scrollContainerStateCallback = usePublisher$2(\"scrollContainerState\");\n  const scrollContainerStateCallback = customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback;\n  const itemContent = useEmitterValue$2(\"itemContent\");\n  const context = useEmitterValue$2(\"context\");\n  const groupContent = useEmitterValue$2(\"groupContent\");\n  const trackItemSizes = useEmitterValue$2(\"trackItemSizes\");\n  const itemSize = useEmitterValue$2(\"itemSize\");\n  const log = useEmitterValue$2(\"log\");\n  const listGap = usePublisher$2(\"gap\");\n  const { callbackRef } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? noop : scrollContainerStateCallback,\n    log,\n    listGap,\n    customScrollParent\n  );\n  const [deviation, setDeviation] = React.useState(0);\n  useEmitter$2(\"deviation\", (value) => {\n    if (deviation !== value) {\n      setDeviation(value);\n    }\n  });\n  const EmptyPlaceholder = useEmitterValue$2(\"EmptyPlaceholder\");\n  const ScrollSeekPlaceholder = useEmitterValue$2(\"ScrollSeekPlaceholder\") || DefaultScrollSeekPlaceholder$1;\n  const ListComponent = useEmitterValue$2(\"ListComponent\");\n  const ItemComponent = useEmitterValue$2(\"ItemComponent\");\n  const GroupComponent = useEmitterValue$2(\"GroupComponent\");\n  const computeItemKey = useEmitterValue$2(\"computeItemKey\");\n  const isSeeking = useEmitterValue$2(\"isSeeking\");\n  const hasGroups2 = useEmitterValue$2(\"groupIndices\").length > 0;\n  const paddingTopAddition = useEmitterValue$2(\"paddingTopAddition\");\n  const scrolledToInitialItem = useEmitterValue$2(\"scrolledToInitialItem\");\n  const containerStyle = showTopList ? {} : {\n    boxSizing: \"border-box\",\n    paddingTop: listState.offsetTop + paddingTopAddition,\n    paddingBottom: listState.offsetBottom,\n    marginTop: deviation,\n    ...scrolledToInitialItem ? {} : { visibility: \"hidden\" }\n  };\n  if (!showTopList && listState.totalCount === 0 && EmptyPlaceholder) {\n    return React.createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context));\n  }\n  return React.createElement(\n    ListComponent,\n    {\n      ...contextPropIfNotDomElement(ListComponent, context),\n      ref: callbackRef,\n      style: containerStyle,\n      \"data-test-id\": showTopList ? \"virtuoso-top-item-list\" : \"virtuoso-item-list\"\n    },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex;\n      const key = computeItemKey(index + listState.firstItemIndex, item.data, context);\n      if (isSeeking) {\n        return React.createElement(ScrollSeekPlaceholder, {\n          ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || \"item\",\n          ...item.type === \"group\" ? {} : { groupIndex: item.groupIndex }\n        });\n      }\n      if (item.type === \"group\") {\n        return React.createElement(\n          GroupComponent,\n          {\n            ...contextPropIfNotDomElement(GroupComponent, context),\n            key,\n            \"data-index\": index,\n            \"data-known-size\": item.size,\n            \"data-item-index\": item.index,\n            style: GROUP_STYLE\n          },\n          groupContent(item.index, context)\n        );\n      } else {\n        return React.createElement(\n          ItemComponent,\n          {\n            ...contextPropIfNotDomElement(ItemComponent, context),\n            key,\n            \"data-index\": index,\n            \"data-known-size\": item.size,\n            \"data-item-index\": item.index,\n            \"data-item-group-index\": item.groupIndex,\n            item: item.data,\n            style: ITEM_STYLE$1\n          },\n          hasGroups2 ? itemContent(item.index, item.groupIndex, item.data, context) : itemContent(item.index, item.data, context)\n        );\n      }\n    })\n  );\n});\nconst scrollerStyle = {\n  height: \"100%\",\n  outline: \"none\",\n  overflowY: \"auto\",\n  position: \"relative\",\n  WebkitOverflowScrolling: \"touch\"\n};\nconst viewportStyle = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n};\nconst topItemListStyle = {\n  width: \"100%\",\n  position: positionStickyCssValue(),\n  top: 0,\n  zIndex: 1\n};\nfunction contextPropIfNotDomElement(element, context) {\n  if (typeof element === \"string\") {\n    return void 0;\n  }\n  return { context };\n}\nconst Header$1 = /* @__PURE__ */ React.memo(function VirtuosoHeader() {\n  const Header2 = useEmitterValue$2(\"HeaderComponent\");\n  const headerHeight = usePublisher$2(\"headerHeight\");\n  const headerFooterTag = useEmitterValue$2(\"headerFooterTag\");\n  const ref = useSize((el) => headerHeight(correctItemSize(el, \"height\")));\n  const context = useEmitterValue$2(\"context\");\n  return Header2 ? React.createElement(headerFooterTag, { ref }, React.createElement(Header2, contextPropIfNotDomElement(Header2, context))) : null;\n});\nconst Footer$1 = /* @__PURE__ */ React.memo(function VirtuosoFooter() {\n  const Footer2 = useEmitterValue$2(\"FooterComponent\");\n  const footerHeight = usePublisher$2(\"footerHeight\");\n  const headerFooterTag = useEmitterValue$2(\"headerFooterTag\");\n  const ref = useSize((el) => footerHeight(correctItemSize(el, \"height\")));\n  const context = useEmitterValue$2(\"context\");\n  return Footer2 ? React.createElement(headerFooterTag, { ref }, React.createElement(Footer2, contextPropIfNotDomElement(Footer2, context))) : null;\n});\nfunction buildScroller({ usePublisher: usePublisher2, useEmitter: useEmitter2, useEmitterValue: useEmitterValue2 }) {\n  const Scroller2 = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher2(\"scrollContainerState\");\n    const ScrollerComponent = useEmitterValue2(\"ScrollerComponent\");\n    const smoothScrollTargetReached = usePublisher2(\"smoothScrollTargetReached\");\n    const scrollerRefCallback = useEmitterValue2(\"scrollerRef\");\n    const context = useEmitterValue2(\"context\");\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    );\n    useEmitter2(\"scrollTo\", scrollToCallback);\n    useEmitter2(\"scrollBy\", scrollByCallback);\n    return React.createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef,\n        style: { ...scrollerStyle, ...style },\n        \"data-test-id\": \"virtuoso-scroller\",\n        \"data-virtuoso-scroller\": true,\n        tabIndex: 0,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context)\n      },\n      children\n    );\n  });\n  return Scroller2;\n}\nfunction buildWindowScroller({ usePublisher: usePublisher2, useEmitter: useEmitter2, useEmitterValue: useEmitterValue2 }) {\n  const Scroller2 = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher2(\"windowScrollContainerState\");\n    const ScrollerComponent = useEmitterValue2(\"ScrollerComponent\");\n    const smoothScrollTargetReached = usePublisher2(\"smoothScrollTargetReached\");\n    const totalListHeight = useEmitterValue2(\"totalListHeight\");\n    const deviation = useEmitterValue2(\"deviation\");\n    const customScrollParent = useEmitterValue2(\"customScrollParent\");\n    const context = useEmitterValue2(\"context\");\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      noop,\n      customScrollParent\n    );\n    useIsomorphicLayoutEffect$1(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window;\n      return () => {\n        scrollerRef.current = null;\n      };\n    }, [scrollerRef, customScrollParent]);\n    useEmitter2(\"windowScrollTo\", scrollToCallback);\n    useEmitter2(\"scrollBy\", scrollByCallback);\n    return React.createElement(\n      ScrollerComponent,\n      {\n        style: { position: \"relative\", ...style, ...totalListHeight !== 0 ? { height: totalListHeight + deviation } : {} },\n        \"data-virtuoso-scroller\": true,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context)\n      },\n      children\n    );\n  });\n  return Scroller2;\n}\nconst Viewport$2 = ({ children }) => {\n  const ctx = React.useContext(VirtuosoMockContext);\n  const viewportHeight = usePublisher$2(\"viewportHeight\");\n  const fixedItemHeight = usePublisher$2(\"fixedItemHeight\");\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, \"height\")));\n  React.useEffect(() => {\n    if (ctx) {\n      viewportHeight(ctx.viewportHeight);\n      fixedItemHeight(ctx.itemHeight);\n    }\n  }, [ctx, viewportHeight, fixedItemHeight]);\n  return /* @__PURE__ */ React.createElement(\"div\", { style: viewportStyle, ref: viewportRef, \"data-viewport-type\": \"element\" }, children);\n};\nconst WindowViewport$2 = ({ children }) => {\n  const ctx = React.useContext(VirtuosoMockContext);\n  const windowViewportRect = usePublisher$2(\"windowViewportRect\");\n  const fixedItemHeight = usePublisher$2(\"fixedItemHeight\");\n  const customScrollParent = useEmitterValue$2(\"customScrollParent\");\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent);\n  React.useEffect(() => {\n    if (ctx) {\n      fixedItemHeight(ctx.itemHeight);\n      windowViewportRect({ offsetTop: 0, visibleHeight: ctx.viewportHeight, visibleWidth: 100 });\n    }\n  }, [ctx, windowViewportRect, fixedItemHeight]);\n  return /* @__PURE__ */ React.createElement(\"div\", { ref: viewportRef, style: viewportStyle, \"data-viewport-type\": \"window\" }, children);\n};\nconst TopItemListContainer = ({ children }) => {\n  const TopItemList = useEmitterValue$2(\"TopItemListComponent\");\n  const headerHeight = useEmitterValue$2(\"headerHeight\");\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` };\n  const context = useEmitterValue$2(\"context\");\n  return React.createElement(TopItemList || \"div\", { style, context }, children);\n};\nconst ListRoot = /* @__PURE__ */ React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue$2(\"useWindowScroll\");\n  const showTopList = useEmitterValue$2(\"topItemsIndexes\").length > 0;\n  const customScrollParent = useEmitterValue$2(\"customScrollParent\");\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller$2 : Scroller$2;\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport$2 : Viewport$2;\n  return /* @__PURE__ */ React.createElement(TheScroller, { ...props }, showTopList && /* @__PURE__ */ React.createElement(TopItemListContainer, null, /* @__PURE__ */ React.createElement(Items$1, { showTopList: true })), /* @__PURE__ */ React.createElement(TheViewport, null, /* @__PURE__ */ React.createElement(Header$1, null), /* @__PURE__ */ React.createElement(Items$1, null), /* @__PURE__ */ React.createElement(Footer$1, null)));\n});\nconst {\n  Component: List,\n  usePublisher: usePublisher$2,\n  useEmitterValue: useEmitterValue$2,\n  useEmitter: useEmitter$2\n} = /* @__PURE__ */ systemToComponent(\n  combinedSystem$2,\n  {\n    required: {},\n    optional: {\n      restoreStateFrom: \"restoreStateFrom\",\n      context: \"context\",\n      followOutput: \"followOutput\",\n      itemContent: \"itemContent\",\n      groupContent: \"groupContent\",\n      overscan: \"overscan\",\n      increaseViewportBy: \"increaseViewportBy\",\n      totalCount: \"totalCount\",\n      groupCounts: \"groupCounts\",\n      topItemCount: \"topItemCount\",\n      firstItemIndex: \"firstItemIndex\",\n      initialTopMostItemIndex: \"initialTopMostItemIndex\",\n      components: \"components\",\n      atBottomThreshold: \"atBottomThreshold\",\n      atTopThreshold: \"atTopThreshold\",\n      computeItemKey: \"computeItemKey\",\n      defaultItemHeight: \"defaultItemHeight\",\n      fixedItemHeight: \"fixedItemHeight\",\n      itemSize: \"itemSize\",\n      scrollSeekConfiguration: \"scrollSeekConfiguration\",\n      headerFooterTag: \"headerFooterTag\",\n      data: \"data\",\n      initialItemCount: \"initialItemCount\",\n      initialScrollTop: \"initialScrollTop\",\n      alignToBottom: \"alignToBottom\",\n      useWindowScroll: \"useWindowScroll\",\n      customScrollParent: \"customScrollParent\",\n      scrollerRef: \"scrollerRef\",\n      logLevel: \"logLevel\"\n    },\n    methods: {\n      scrollToIndex: \"scrollToIndex\",\n      scrollIntoView: \"scrollIntoView\",\n      scrollTo: \"scrollTo\",\n      scrollBy: \"scrollBy\",\n      autoscrollToBottom: \"autoscrollToBottom\",\n      getState: \"getState\"\n    },\n    events: {\n      isScrolling: \"isScrolling\",\n      endReached: \"endReached\",\n      startReached: \"startReached\",\n      rangeChanged: \"rangeChanged\",\n      atBottomStateChange: \"atBottomStateChange\",\n      atTopStateChange: \"atTopStateChange\",\n      totalListHeightChanged: \"totalListHeightChanged\",\n      itemsRendered: \"itemsRendered\",\n      groupIndices: \"groupIndices\"\n    }\n  },\n  ListRoot\n);\nconst Scroller$2 = /* @__PURE__ */ buildScroller({ usePublisher: usePublisher$2, useEmitterValue: useEmitterValue$2, useEmitter: useEmitter$2 });\nconst WindowScroller$2 = /* @__PURE__ */ buildWindowScroller({ usePublisher: usePublisher$2, useEmitterValue: useEmitterValue$2, useEmitter: useEmitter$2 });\nconst Virtuoso = List;\nconst GroupedVirtuoso = List;\nconst INITIAL_GRID_STATE = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n};\nconst PROBE_GRID_STATE = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n};\nconst { round, ceil, floor, min, max } = Math;\nfunction buildProbeGridState(items) {\n  return {\n    ...PROBE_GRID_STATE,\n    items\n  };\n}\nfunction buildItems(startIndex, endIndex, data) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => {\n    const dataItem = data === null ? null : data[i + startIndex];\n    return { index: i + startIndex, data: dataItem };\n  });\n}\nfunction gapComparator(prev, next) {\n  return prev && prev.column === next.column && prev.row === next.row;\n}\nfunction dimensionComparator(prev, next) {\n  return prev && prev.width === next.width && prev.height === next.height;\n}\nconst gridSystem = /* @__PURE__ */ system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState, footerHeight, headerHeight },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, useWindowScroll, customScrollParent, windowScrollContainerState, windowScrollTo },\n    log\n  ]) => {\n    const totalCount = statefulStream(0);\n    const initialItemCount = statefulStream(0);\n    const gridState = statefulStream(INITIAL_GRID_STATE);\n    const viewportDimensions = statefulStream({ height: 0, width: 0 });\n    const itemDimensions = statefulStream({ height: 0, width: 0 });\n    const scrollToIndex = stream();\n    const scrollHeight = stream();\n    const deviation = statefulStream(0);\n    const data = statefulStream(null);\n    const gap = statefulStream({ row: 0, column: 0 });\n    const stateChanged = stream();\n    const restoreStateFrom = stream();\n    const stateRestoreInProgress = statefulStream(false);\n    const initialTopMostItemIndex = statefulStream(0);\n    const scrolledToInitialItem = statefulStream(true);\n    const scrollScheduled = statefulStream(false);\n    subscribe(\n      pipe(\n        didMount,\n        withLatestFrom(initialTopMostItemIndex),\n        filter(([_, location]) => !!location)\n      ),\n      () => {\n        publish(scrolledToInitialItem, false);\n        publish(initialItemCount, 0);\n      }\n    );\n    subscribe(\n      pipe(\n        combineLatest(didMount, scrolledToInitialItem, itemDimensions, viewportDimensions, initialTopMostItemIndex, scrollScheduled),\n        filter(([didMount2, scrolledToInitialItem2, itemDimensions2, viewportDimensions2, , scrollScheduled2]) => {\n          return didMount2 && !scrolledToInitialItem2 && itemDimensions2.height !== 0 && viewportDimensions2.height !== 0 && !scrollScheduled2;\n        })\n      ),\n      ([, , , , initialTopMostItemIndex2]) => {\n        publish(scrollScheduled, true);\n        skipFrames(1, () => {\n          publish(scrollToIndex, initialTopMostItemIndex2);\n        });\n        handleNext(pipe(scrollTop), () => {\n          publish(listBoundary, [0, 0]);\n          publish(scrolledToInitialItem, true);\n        });\n      }\n    );\n    connect(\n      pipe(\n        restoreStateFrom,\n        filter((value) => value !== void 0 && value !== null && value.scrollTop > 0),\n        mapTo(0)\n      ),\n      initialItemCount\n    );\n    subscribe(\n      pipe(\n        didMount,\n        withLatestFrom(restoreStateFrom),\n        filter(([, snapshot]) => snapshot !== void 0 && snapshot !== null)\n      ),\n      ([, snapshot]) => {\n        if (!snapshot) {\n          return;\n        }\n        publish(viewportDimensions, snapshot.viewport), publish(itemDimensions, snapshot == null ? void 0 : snapshot.item);\n        publish(gap, snapshot.gap);\n        if (snapshot.scrollTop > 0) {\n          publish(stateRestoreInProgress, true);\n          handleNext(pipe(scrollTop, skip(1)), (_value) => {\n            publish(stateRestoreInProgress, false);\n          });\n          publish(scrollTo, { top: snapshot.scrollTop });\n        }\n      }\n    );\n    connect(\n      pipe(\n        viewportDimensions,\n        map(({ height }) => height)\n      ),\n      viewportHeight\n    );\n    connect(\n      pipe(\n        combineLatest(\n          duc(viewportDimensions, dimensionComparator),\n          duc(itemDimensions, dimensionComparator),\n          duc(gap, (prev, next) => prev && prev.column === next.column && prev.row === next.row),\n          duc(scrollTop)\n        ),\n        map(([viewport, item, gap2, scrollTop2]) => ({\n          viewport,\n          item,\n          gap: gap2,\n          scrollTop: scrollTop2\n        }))\n      ),\n      stateChanged\n    );\n    connect(\n      pipe(\n        combineLatest(\n          duc(totalCount),\n          visibleRange,\n          duc(gap, gapComparator),\n          duc(itemDimensions, dimensionComparator),\n          duc(viewportDimensions, dimensionComparator),\n          duc(data),\n          duc(initialItemCount),\n          duc(stateRestoreInProgress),\n          duc(scrolledToInitialItem),\n          duc(initialTopMostItemIndex)\n        ),\n        filter(([, , , , , , , stateRestoreInProgress2]) => {\n          return !stateRestoreInProgress2;\n        }),\n        map(\n          ([\n            totalCount2,\n            [startOffset, endOffset],\n            gap2,\n            item,\n            viewport,\n            data2,\n            initialItemCount2,\n            ,\n            scrolledToInitialItem2,\n            initialTopMostItemIndex2\n          ]) => {\n            const { row: rowGap, column: columnGap } = gap2;\n            const { height: itemHeight, width: itemWidth } = item;\n            const { width: viewportWidth } = viewport;\n            if (initialItemCount2 === 0 && (totalCount2 === 0 || viewportWidth === 0)) {\n              return INITIAL_GRID_STATE;\n            }\n            if (itemWidth === 0) {\n              const startIndex2 = getInitialTopMostItemIndexNumber(initialTopMostItemIndex2, totalCount2);\n              const endIndex2 = startIndex2 === 0 ? Math.max(initialItemCount2 - 1, 0) : startIndex2;\n              return buildProbeGridState(buildItems(startIndex2, endIndex2, data2));\n            }\n            const perRow = itemsPerRow(viewportWidth, itemWidth, columnGap);\n            let startIndex;\n            let endIndex;\n            if (!scrolledToInitialItem2) {\n              startIndex = 0;\n              endIndex = -1;\n            } else if (startOffset === 0 && endOffset === 0 && initialItemCount2 > 0) {\n              startIndex = 0;\n              endIndex = initialItemCount2 - 1;\n            } else {\n              startIndex = perRow * floor((startOffset + rowGap) / (itemHeight + rowGap));\n              endIndex = perRow * ceil((endOffset + rowGap) / (itemHeight + rowGap)) - 1;\n              endIndex = min(totalCount2 - 1, max(endIndex, perRow - 1));\n              startIndex = min(endIndex, max(0, startIndex));\n            }\n            const items = buildItems(startIndex, endIndex, data2);\n            const { top, bottom } = gridLayout(viewport, gap2, item, items);\n            const rowCount = ceil(totalCount2 / perRow);\n            const totalHeight = rowCount * itemHeight + (rowCount - 1) * rowGap;\n            const offsetBottom = totalHeight - bottom;\n            return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth };\n          }\n        )\n      ),\n      gridState\n    );\n    connect(\n      pipe(\n        data,\n        filter((data2) => data2 !== null),\n        map((data2) => data2.length)\n      ),\n      totalCount\n    );\n    connect(\n      pipe(\n        combineLatest(viewportDimensions, itemDimensions, gridState, gap),\n        filter(([viewportDimensions2, itemDimensions2, { items }]) => {\n          return items.length > 0 && itemDimensions2.height !== 0 && viewportDimensions2.height !== 0;\n        }),\n        map(([viewportDimensions2, itemDimensions2, { items }, gap2]) => {\n          const { top, bottom } = gridLayout(viewportDimensions2, gap2, itemDimensions2, items);\n          return [top, bottom];\n        }),\n        distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    );\n    const hasScrolled = statefulStream(false);\n    connect(\n      pipe(\n        scrollTop,\n        withLatestFrom(hasScrolled),\n        map(([scrollTop2, hasScrolled2]) => {\n          return hasScrolled2 || scrollTop2 !== 0;\n        })\n      ),\n      hasScrolled\n    );\n    const endReached = streamFromEmitter(\n      pipe(\n        duc(gridState),\n        filter(({ items }) => items.length > 0),\n        withLatestFrom(totalCount, hasScrolled),\n        filter(([{ items }, totalCount2, hasScrolled2]) => hasScrolled2 && items[items.length - 1].index === totalCount2 - 1),\n        map(([, totalCount2]) => totalCount2 - 1),\n        distinctUntilChanged()\n      )\n    );\n    const startReached = streamFromEmitter(\n      pipe(\n        duc(gridState),\n        filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0;\n        }),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        mapTo(0),\n        distinctUntilChanged()\n      )\n    );\n    const rangeChanged = streamFromEmitter(\n      pipe(\n        duc(gridState),\n        withLatestFrom(stateRestoreInProgress),\n        filter(([{ items }, stateRestoreInProgress2]) => items.length > 0 && !stateRestoreInProgress2),\n        map(([{ items }]) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index\n          };\n        }),\n        distinctUntilChanged(rangeComparator),\n        throttleTime(0)\n      )\n    );\n    connect(rangeChanged, scrollSeek.scrollSeekRangeChanged);\n    connect(\n      pipe(\n        scrollToIndex,\n        withLatestFrom(viewportDimensions, itemDimensions, totalCount, gap),\n        map(([location, viewportDimensions2, itemDimensions2, totalCount2, gap2]) => {\n          const normalLocation = normalizeIndexLocation(location);\n          const { align, behavior, offset } = normalLocation;\n          let index = normalLocation.index;\n          if (index === \"LAST\") {\n            index = totalCount2 - 1;\n          }\n          index = max(0, index, min(totalCount2 - 1, index));\n          let top = itemTop(viewportDimensions2, gap2, itemDimensions2, index);\n          if (align === \"end\") {\n            top = round(top - viewportDimensions2.height + itemDimensions2.height);\n          } else if (align === \"center\") {\n            top = round(top - viewportDimensions2.height / 2 + itemDimensions2.height / 2);\n          }\n          if (offset) {\n            top += offset;\n          }\n          return { top, behavior };\n        })\n      ),\n      scrollTo\n    );\n    const totalListHeight = statefulStreamFromEmitter(\n      pipe(\n        gridState,\n        map((gridState2) => {\n          return gridState2.offsetBottom + gridState2.bottom;\n        })\n      ),\n      0\n    );\n    connect(\n      pipe(\n        windowViewportRect,\n        map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    );\n    return {\n      // input\n      data,\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      footerHeight,\n      headerHeight,\n      initialItemCount,\n      gap,\n      restoreStateFrom,\n      ...scrollSeek,\n      initialTopMostItemIndex,\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      stateChanged,\n      propsReady,\n      stateRestoreInProgress,\n      ...log\n    };\n  },\n  tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem, loggerSystem)\n);\nfunction gridLayout(viewport, gap, item, items) {\n  const { height: itemHeight } = item;\n  if (itemHeight === void 0 || items.length === 0) {\n    return { top: 0, bottom: 0 };\n  }\n  const top = itemTop(viewport, gap, item, items[0].index);\n  const bottom = itemTop(viewport, gap, item, items[items.length - 1].index) + itemHeight;\n  return { top, bottom };\n}\nfunction itemTop(viewport, gap, item, index) {\n  const perRow = itemsPerRow(viewport.width, item.width, gap.column);\n  const rowCount = floor(index / perRow);\n  const top = rowCount * item.height + max(0, rowCount - 1) * gap.row;\n  return top > 0 ? top + gap.row : top;\n}\nfunction itemsPerRow(viewportWidth, itemWidth, gap) {\n  return max(1, floor((viewportWidth + gap) / (floor(itemWidth) + gap)));\n}\nconst gridComponentPropsSystem = /* @__PURE__ */ system(() => {\n  const itemContent = statefulStream((index) => `Item ${index}`);\n  const components = statefulStream({});\n  const context = statefulStream(null);\n  const itemClassName = statefulStream(\"virtuoso-grid-item\");\n  const listClassName = statefulStream(\"virtuoso-grid-list\");\n  const computeItemKey = statefulStream(identity);\n  const headerFooterTag = statefulStream(\"div\");\n  const scrollerRef = statefulStream(noop);\n  const distinctProp = (propName, defaultValue = null) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components2) => components2[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    );\n  };\n  return {\n    context,\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp(\"Footer\"),\n    HeaderComponent: distinctProp(\"Header\"),\n    ListComponent: distinctProp(\"List\", \"div\"),\n    ItemComponent: distinctProp(\"Item\", \"div\"),\n    ScrollerComponent: distinctProp(\"Scroller\", \"div\"),\n    ScrollSeekPlaceholder: distinctProp(\"ScrollSeekPlaceholder\", \"div\")\n  };\n});\nconst combinedSystem$1 = /* @__PURE__ */ system(([gridSystem2, gridComponentPropsSystem2]) => {\n  return { ...gridSystem2, ...gridComponentPropsSystem2 };\n}, tup(gridSystem, gridComponentPropsSystem));\nconst GridItems = /* @__PURE__ */ React.memo(function GridItems2() {\n  const gridState = useEmitterValue$1(\"gridState\");\n  const listClassName = useEmitterValue$1(\"listClassName\");\n  const itemClassName = useEmitterValue$1(\"itemClassName\");\n  const itemContent = useEmitterValue$1(\"itemContent\");\n  const computeItemKey = useEmitterValue$1(\"computeItemKey\");\n  const isSeeking = useEmitterValue$1(\"isSeeking\");\n  const scrollHeightCallback = usePublisher$1(\"scrollHeight\");\n  const ItemComponent = useEmitterValue$1(\"ItemComponent\");\n  const ListComponent = useEmitterValue$1(\"ListComponent\");\n  const ScrollSeekPlaceholder = useEmitterValue$1(\"ScrollSeekPlaceholder\");\n  const context = useEmitterValue$1(\"context\");\n  const itemDimensions = usePublisher$1(\"itemDimensions\");\n  const gridGap = usePublisher$1(\"gap\");\n  const log = useEmitterValue$1(\"log\");\n  const stateRestoreInProgress = useEmitterValue$1(\"stateRestoreInProgress\");\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement.parentElement.scrollHeight;\n    scrollHeightCallback(scrollHeight);\n    const firstItem = el.firstChild;\n    if (firstItem) {\n      const { width, height } = firstItem.getBoundingClientRect();\n      itemDimensions({ width, height });\n    }\n    gridGap({\n      row: resolveGapValue(\"row-gap\", getComputedStyle(el).rowGap, log),\n      column: resolveGapValue(\"column-gap\", getComputedStyle(el).columnGap, log)\n    });\n  });\n  if (stateRestoreInProgress) {\n    return null;\n  }\n  return React.createElement(\n    ListComponent,\n    {\n      ref: listRef,\n      className: listClassName,\n      ...contextPropIfNotDomElement(ListComponent, context),\n      style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom },\n      \"data-test-id\": \"virtuoso-item-list\"\n    },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index, item.data, context);\n      return isSeeking ? React.createElement(ScrollSeekPlaceholder, {\n        key,\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        index: item.index,\n        height: gridState.itemHeight,\n        width: gridState.itemWidth\n      }) : React.createElement(\n        ItemComponent,\n        { ...contextPropIfNotDomElement(ItemComponent, context), className: itemClassName, \"data-index\": item.index, key },\n        itemContent(item.index, item.data, context)\n      );\n    })\n  );\n});\nconst Header = React.memo(function VirtuosoHeader2() {\n  const Header2 = useEmitterValue$1(\"HeaderComponent\");\n  const headerHeight = usePublisher$1(\"headerHeight\");\n  const headerFooterTag = useEmitterValue$1(\"headerFooterTag\");\n  const ref = useSize((el) => headerHeight(correctItemSize(el, \"height\")));\n  const context = useEmitterValue$1(\"context\");\n  return Header2 ? React.createElement(headerFooterTag, { ref }, React.createElement(Header2, contextPropIfNotDomElement(Header2, context))) : null;\n});\nconst Footer = React.memo(function VirtuosoGridFooter() {\n  const Footer2 = useEmitterValue$1(\"FooterComponent\");\n  const footerHeight = usePublisher$1(\"footerHeight\");\n  const headerFooterTag = useEmitterValue$1(\"headerFooterTag\");\n  const ref = useSize((el) => footerHeight(correctItemSize(el, \"height\")));\n  const context = useEmitterValue$1(\"context\");\n  return Footer2 ? React.createElement(headerFooterTag, { ref }, React.createElement(Footer2, contextPropIfNotDomElement(Footer2, context))) : null;\n});\nconst Viewport$1 = ({ children }) => {\n  const ctx = React.useContext(VirtuosoGridMockContext);\n  const itemDimensions = usePublisher$1(\"itemDimensions\");\n  const viewportDimensions = usePublisher$1(\"viewportDimensions\");\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect());\n  });\n  React.useEffect(() => {\n    if (ctx) {\n      viewportDimensions({ height: ctx.viewportHeight, width: ctx.viewportWidth });\n      itemDimensions({ height: ctx.itemHeight, width: ctx.itemWidth });\n    }\n  }, [ctx, viewportDimensions, itemDimensions]);\n  return /* @__PURE__ */ React.createElement(\"div\", { style: viewportStyle, ref: viewportRef }, children);\n};\nconst WindowViewport$1 = ({ children }) => {\n  const ctx = React.useContext(VirtuosoGridMockContext);\n  const windowViewportRect = usePublisher$1(\"windowViewportRect\");\n  const itemDimensions = usePublisher$1(\"itemDimensions\");\n  const customScrollParent = useEmitterValue$1(\"customScrollParent\");\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent);\n  React.useEffect(() => {\n    if (ctx) {\n      itemDimensions({ height: ctx.itemHeight, width: ctx.itemWidth });\n      windowViewportRect({ offsetTop: 0, visibleHeight: ctx.viewportHeight, visibleWidth: ctx.viewportWidth });\n    }\n  }, [ctx, windowViewportRect, itemDimensions]);\n  return /* @__PURE__ */ React.createElement(\"div\", { ref: viewportRef, style: viewportStyle }, children);\n};\nconst GridRoot = /* @__PURE__ */ React.memo(function GridRoot2({ ...props }) {\n  const useWindowScroll = useEmitterValue$1(\"useWindowScroll\");\n  const customScrollParent = useEmitterValue$1(\"customScrollParent\");\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller$1 : Scroller$1;\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport$1 : Viewport$1;\n  return /* @__PURE__ */ React.createElement(TheScroller, { ...props }, /* @__PURE__ */ React.createElement(TheViewport, null, /* @__PURE__ */ React.createElement(Header, null), /* @__PURE__ */ React.createElement(GridItems, null), /* @__PURE__ */ React.createElement(Footer, null)));\n});\nconst {\n  Component: Grid,\n  usePublisher: usePublisher$1,\n  useEmitterValue: useEmitterValue$1,\n  useEmitter: useEmitter$1\n} = /* @__PURE__ */ systemToComponent(\n  combinedSystem$1,\n  {\n    optional: {\n      context: \"context\",\n      totalCount: \"totalCount\",\n      overscan: \"overscan\",\n      itemContent: \"itemContent\",\n      components: \"components\",\n      computeItemKey: \"computeItemKey\",\n      data: \"data\",\n      initialItemCount: \"initialItemCount\",\n      scrollSeekConfiguration: \"scrollSeekConfiguration\",\n      headerFooterTag: \"headerFooterTag\",\n      listClassName: \"listClassName\",\n      itemClassName: \"itemClassName\",\n      useWindowScroll: \"useWindowScroll\",\n      customScrollParent: \"customScrollParent\",\n      scrollerRef: \"scrollerRef\",\n      logLevel: \"logLevel\",\n      restoreStateFrom: \"restoreStateFrom\",\n      initialTopMostItemIndex: \"initialTopMostItemIndex\"\n    },\n    methods: {\n      scrollTo: \"scrollTo\",\n      scrollBy: \"scrollBy\",\n      scrollToIndex: \"scrollToIndex\"\n    },\n    events: {\n      isScrolling: \"isScrolling\",\n      endReached: \"endReached\",\n      startReached: \"startReached\",\n      rangeChanged: \"rangeChanged\",\n      atBottomStateChange: \"atBottomStateChange\",\n      atTopStateChange: \"atTopStateChange\",\n      stateChanged: \"stateChanged\"\n    }\n  },\n  GridRoot\n);\nconst Scroller$1 = /* @__PURE__ */ buildScroller({ usePublisher: usePublisher$1, useEmitterValue: useEmitterValue$1, useEmitter: useEmitter$1 });\nconst WindowScroller$1 = /* @__PURE__ */ buildWindowScroller({ usePublisher: usePublisher$1, useEmitterValue: useEmitterValue$1, useEmitter: useEmitter$1 });\nfunction resolveGapValue(property, value, log) {\n  if (value !== \"normal\" && !(value == null ? void 0 : value.endsWith(\"px\"))) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN);\n  }\n  if (value === \"normal\") {\n    return 0;\n  }\n  return parseInt(value != null ? value : \"0\", 10);\n}\nconst VirtuosoGrid = Grid;\nconst tableComponentPropsSystem = /* @__PURE__ */ system(() => {\n  const itemContent = statefulStream((index) => /* @__PURE__ */ React.createElement(\"td\", null, \"Item $\", index));\n  const context = statefulStream(null);\n  const fixedHeaderContent = statefulStream(null);\n  const fixedFooterContent = statefulStream(null);\n  const components = statefulStream({});\n  const computeItemKey = statefulStream(identity);\n  const scrollerRef = statefulStream(noop);\n  const distinctProp = (propName, defaultValue = null) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components2) => components2[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    );\n  };\n  return {\n    context,\n    itemContent,\n    fixedHeaderContent,\n    fixedFooterContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp(\"Table\", \"table\"),\n    TableHeadComponent: distinctProp(\"TableHead\", \"thead\"),\n    TableFooterComponent: distinctProp(\"TableFoot\", \"tfoot\"),\n    TableBodyComponent: distinctProp(\"TableBody\", \"tbody\"),\n    TableRowComponent: distinctProp(\"TableRow\", \"tr\"),\n    ScrollerComponent: distinctProp(\"Scroller\", \"div\"),\n    EmptyPlaceholder: distinctProp(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: distinctProp(\"ScrollSeekPlaceholder\"),\n    FillerRow: distinctProp(\"FillerRow\")\n  };\n});\nconst combinedSystem = /* @__PURE__ */ system(([listSystem2, propsSystem]) => {\n  return { ...listSystem2, ...propsSystem };\n}, tup(listSystem, tableComponentPropsSystem));\nconst DefaultScrollSeekPlaceholder = ({ height }) => /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { style: { height } }));\nconst DefaultFillerRow = ({ height }) => /* @__PURE__ */ React.createElement(\"tr\", null, /* @__PURE__ */ React.createElement(\"td\", { style: { height, padding: 0, border: 0 } }));\nconst ITEM_STYLE = { overflowAnchor: \"none\" };\nconst Items = /* @__PURE__ */ React.memo(function VirtuosoItems2() {\n  const listState = useEmitterValue(\"listState\");\n  const sizeRanges = usePublisher(\"sizeRanges\");\n  const useWindowScroll = useEmitterValue(\"useWindowScroll\");\n  const customScrollParent = useEmitterValue(\"customScrollParent\");\n  const windowScrollContainerStateCallback = usePublisher(\"windowScrollContainerState\");\n  const _scrollContainerStateCallback = usePublisher(\"scrollContainerState\");\n  const scrollContainerStateCallback = customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback;\n  const itemContent = useEmitterValue(\"itemContent\");\n  const trackItemSizes = useEmitterValue(\"trackItemSizes\");\n  const itemSize = useEmitterValue(\"itemSize\");\n  const log = useEmitterValue(\"log\");\n  const { callbackRef, ref } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    scrollContainerStateCallback,\n    log,\n    void 0,\n    customScrollParent\n  );\n  const [deviation, setDeviation] = React.useState(0);\n  useEmitter(\"deviation\", (value) => {\n    if (deviation !== value) {\n      ref.current.style.marginTop = `${value}px`;\n      setDeviation(value);\n    }\n  });\n  const EmptyPlaceholder = useEmitterValue(\"EmptyPlaceholder\");\n  const ScrollSeekPlaceholder = useEmitterValue(\"ScrollSeekPlaceholder\") || DefaultScrollSeekPlaceholder;\n  const FillerRow = useEmitterValue(\"FillerRow\") || DefaultFillerRow;\n  const TableBodyComponent = useEmitterValue(\"TableBodyComponent\");\n  const TableRowComponent = useEmitterValue(\"TableRowComponent\");\n  const computeItemKey = useEmitterValue(\"computeItemKey\");\n  const isSeeking = useEmitterValue(\"isSeeking\");\n  const paddingTopAddition = useEmitterValue(\"paddingTopAddition\");\n  const firstItemIndex = useEmitterValue(\"firstItemIndex\");\n  const statefulTotalCount = useEmitterValue(\"statefulTotalCount\");\n  const context = useEmitterValue(\"context\");\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return React.createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context));\n  }\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation;\n  const paddingBottom = listState.offsetBottom;\n  const paddingTopEl = paddingTop > 0 ? /* @__PURE__ */ React.createElement(FillerRow, { height: paddingTop, key: \"padding-top\", context }) : null;\n  const paddingBottomEl = paddingBottom > 0 ? /* @__PURE__ */ React.createElement(FillerRow, { height: paddingBottom, key: \"padding-bottom\", context }) : null;\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex;\n    const key = computeItemKey(index + firstItemIndex, item.data, context);\n    if (isSeeking) {\n      return React.createElement(ScrollSeekPlaceholder, {\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || \"item\"\n      });\n    }\n    return React.createElement(\n      TableRowComponent,\n      {\n        ...contextPropIfNotDomElement(TableRowComponent, context),\n        key,\n        \"data-index\": index,\n        \"data-known-size\": item.size,\n        \"data-item-index\": item.index,\n        item: item.data,\n        style: ITEM_STYLE\n      },\n      itemContent(item.index, item.data, context)\n    );\n  });\n  return React.createElement(\n    TableBodyComponent,\n    { ref: callbackRef, \"data-test-id\": \"virtuoso-item-list\", ...contextPropIfNotDomElement(TableBodyComponent, context) },\n    [paddingTopEl, ...items, paddingBottomEl]\n  );\n});\nconst Viewport = ({ children }) => {\n  const ctx = React.useContext(VirtuosoMockContext);\n  const viewportHeight = usePublisher(\"viewportHeight\");\n  const fixedItemHeight = usePublisher(\"fixedItemHeight\");\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, \"height\")));\n  React.useEffect(() => {\n    if (ctx) {\n      viewportHeight(ctx.viewportHeight);\n      fixedItemHeight(ctx.itemHeight);\n    }\n  }, [ctx, viewportHeight, fixedItemHeight]);\n  return /* @__PURE__ */ React.createElement(\"div\", { style: viewportStyle, ref: viewportRef, \"data-viewport-type\": \"element\" }, children);\n};\nconst WindowViewport = ({ children }) => {\n  const ctx = React.useContext(VirtuosoMockContext);\n  const windowViewportRect = usePublisher(\"windowViewportRect\");\n  const fixedItemHeight = usePublisher(\"fixedItemHeight\");\n  const customScrollParent = useEmitterValue(\"customScrollParent\");\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent);\n  React.useEffect(() => {\n    if (ctx) {\n      fixedItemHeight(ctx.itemHeight);\n      windowViewportRect({ offsetTop: 0, visibleHeight: ctx.viewportHeight, visibleWidth: 100 });\n    }\n  }, [ctx, windowViewportRect, fixedItemHeight]);\n  return /* @__PURE__ */ React.createElement(\"div\", { ref: viewportRef, style: viewportStyle, \"data-viewport-type\": \"window\" }, children);\n};\nconst TableRoot = /* @__PURE__ */ React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue(\"useWindowScroll\");\n  const customScrollParent = useEmitterValue(\"customScrollParent\");\n  const fixedHeaderHeight = usePublisher(\"fixedHeaderHeight\");\n  const fixedFooterHeight = usePublisher(\"fixedFooterHeight\");\n  const fixedHeaderContent = useEmitterValue(\"fixedHeaderContent\");\n  const fixedFooterContent = useEmitterValue(\"fixedFooterContent\");\n  const context = useEmitterValue(\"context\");\n  const theadRef = useSize(compose(fixedHeaderHeight, (el) => correctItemSize(el, \"height\")));\n  const tfootRef = useSize(compose(fixedFooterHeight, (el) => correctItemSize(el, \"height\")));\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller;\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport;\n  const TheTable = useEmitterValue(\"TableComponent\");\n  const TheTHead = useEmitterValue(\"TableHeadComponent\");\n  const TheTFoot = useEmitterValue(\"TableFooterComponent\");\n  const theHead = fixedHeaderContent ? React.createElement(\n    TheTHead,\n    {\n      key: \"TableHead\",\n      style: { zIndex: 2, position: \"sticky\", top: 0 },\n      ref: theadRef,\n      ...contextPropIfNotDomElement(TheTHead, context)\n    },\n    fixedHeaderContent()\n  ) : null;\n  const theFoot = fixedFooterContent ? React.createElement(\n    TheTFoot,\n    {\n      key: \"TableFoot\",\n      style: { zIndex: 1, position: \"sticky\", bottom: 0 },\n      ref: tfootRef,\n      ...contextPropIfNotDomElement(TheTFoot, context)\n    },\n    fixedFooterContent()\n  ) : null;\n  return /* @__PURE__ */ React.createElement(TheScroller, { ...props }, /* @__PURE__ */ React.createElement(TheViewport, null, React.createElement(\n    TheTable,\n    { style: { borderSpacing: 0, overflowAnchor: \"none\" }, ...contextPropIfNotDomElement(TheTable, context) },\n    [theHead, /* @__PURE__ */ React.createElement(Items, { key: \"TableBody\" }), theFoot]\n  )));\n});\nconst {\n  Component: Table,\n  usePublisher,\n  useEmitterValue,\n  useEmitter\n} = /* @__PURE__ */ systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: \"context\",\n      followOutput: \"followOutput\",\n      firstItemIndex: \"firstItemIndex\",\n      itemContent: \"itemContent\",\n      fixedHeaderContent: \"fixedHeaderContent\",\n      fixedFooterContent: \"fixedFooterContent\",\n      overscan: \"overscan\",\n      increaseViewportBy: \"increaseViewportBy\",\n      totalCount: \"totalCount\",\n      topItemCount: \"topItemCount\",\n      initialTopMostItemIndex: \"initialTopMostItemIndex\",\n      components: \"components\",\n      groupCounts: \"groupCounts\",\n      atBottomThreshold: \"atBottomThreshold\",\n      atTopThreshold: \"atTopThreshold\",\n      computeItemKey: \"computeItemKey\",\n      defaultItemHeight: \"defaultItemHeight\",\n      fixedItemHeight: \"fixedItemHeight\",\n      itemSize: \"itemSize\",\n      scrollSeekConfiguration: \"scrollSeekConfiguration\",\n      data: \"data\",\n      initialItemCount: \"initialItemCount\",\n      initialScrollTop: \"initialScrollTop\",\n      alignToBottom: \"alignToBottom\",\n      useWindowScroll: \"useWindowScroll\",\n      customScrollParent: \"customScrollParent\",\n      scrollerRef: \"scrollerRef\",\n      logLevel: \"logLevel\"\n    },\n    methods: {\n      scrollToIndex: \"scrollToIndex\",\n      scrollIntoView: \"scrollIntoView\",\n      scrollTo: \"scrollTo\",\n      scrollBy: \"scrollBy\"\n    },\n    events: {\n      isScrolling: \"isScrolling\",\n      endReached: \"endReached\",\n      startReached: \"startReached\",\n      rangeChanged: \"rangeChanged\",\n      atBottomStateChange: \"atBottomStateChange\",\n      atTopStateChange: \"atTopStateChange\",\n      totalListHeightChanged: \"totalListHeightChanged\",\n      itemsRendered: \"itemsRendered\",\n      groupIndices: \"groupIndices\"\n    }\n  },\n  TableRoot\n);\nconst Scroller = /* @__PURE__ */ buildScroller({ usePublisher, useEmitterValue, useEmitter });\nconst WindowScroller = /* @__PURE__ */ buildWindowScroller({ usePublisher, useEmitterValue, useEmitter });\nconst TableVirtuoso = Table;\nexport {\n  GroupedVirtuoso,\n  LogLevel,\n  TableVirtuoso,\n  Virtuoso,\n  VirtuosoGrid,\n  VirtuosoGridMockContext,\n  VirtuosoMockContext\n};\n","import { jsx, jsxs } from 'react/jsx-runtime';\nimport React, { Component, Children, cloneElement } from 'react';\nimport withScrolling, { createScrollingComponent, createVerticalStrength, createHorizontalStrength } from '@nosferatu500/react-dnd-scrollzone';\nimport isEqual from 'lodash.isequal';\nimport { DragSource, DropTarget, DndContext, DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { Virtuoso } from 'react-virtuoso';\n\nconst defaultGetNodeKey = ({ treeIndex }) => treeIndex;\nconst getReactElementText = (parent) => {\n  if (typeof parent === \"string\") {\n    return parent;\n  }\n  if (parent === void 0 || typeof parent !== \"object\" || !parent.props || !parent.props.children || typeof parent.props.children !== \"string\" && typeof parent.props.children !== \"object\") {\n    return \"\";\n  }\n  if (typeof parent.props.children === \"string\") {\n    return parent.props.children;\n  }\n  return parent.props.children.map((child) => getReactElementText(child)).join(\"\");\n};\nconst stringSearch = (key, searchQuery, node, path, treeIndex) => {\n  if (typeof node[key] === \"function\") {\n    return String(node[key]({ node, path, treeIndex })).includes(searchQuery);\n  }\n  if (typeof node[key] === \"object\") {\n    return getReactElementText(node[key]).includes(searchQuery);\n  }\n  return node[key] && String(node[key]).includes(searchQuery);\n};\nconst defaultSearchMethod = ({\n  node,\n  path,\n  treeIndex,\n  searchQuery\n}) => {\n  return stringSearch(\"title\", searchQuery, node, path, treeIndex) || stringSearch(\"subtitle\", searchQuery, node, path, treeIndex);\n};\n\nconst getNodeDataAtTreeIndexOrNextIndex = ({\n  targetIndex,\n  node,\n  currentIndex,\n  getNodeKey,\n  path = [],\n  lowerSiblingCounts = [],\n  ignoreCollapsed = true,\n  isPseudoRoot = false\n}) => {\n  const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({ node, treeIndex: currentIndex })];\n  if (currentIndex === targetIndex) {\n    return {\n      node,\n      lowerSiblingCounts,\n      path: selfPath\n    };\n  }\n  if (!(node == null ? void 0 : node.children) || ignoreCollapsed && (node == null ? void 0 : node.expanded) !== true) {\n    return { nextIndex: currentIndex + 1 };\n  }\n  let childIndex = currentIndex + 1;\n  const childCount = node.children.length;\n  for (let i = 0; i < childCount; i += 1) {\n    const result = getNodeDataAtTreeIndexOrNextIndex({\n      ignoreCollapsed,\n      getNodeKey,\n      targetIndex,\n      node: node.children[i],\n      currentIndex: childIndex,\n      lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n      path: selfPath\n    });\n    if (result.node) {\n      return result;\n    }\n    childIndex = result.nextIndex;\n  }\n  return { nextIndex: childIndex };\n};\nconst getDescendantCount = ({\n  node,\n  ignoreCollapsed = true\n}) => {\n  return getNodeDataAtTreeIndexOrNextIndex({\n    getNodeKey: () => {\n    },\n    ignoreCollapsed,\n    node,\n    currentIndex: 0,\n    targetIndex: -1\n  }).nextIndex - 1;\n};\nconst walkDescendants = ({\n  callback,\n  getNodeKey,\n  ignoreCollapsed,\n  isPseudoRoot = false,\n  node,\n  parentNode = void 0,\n  currentIndex,\n  path = [],\n  lowerSiblingCounts = []\n}) => {\n  const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({ node, treeIndex: currentIndex })];\n  const selfInfo = isPseudoRoot ? void 0 : {\n    node,\n    parentNode,\n    path: selfPath,\n    lowerSiblingCounts,\n    treeIndex: currentIndex\n  };\n  if (!isPseudoRoot) {\n    const callbackResult = callback(selfInfo);\n    if (callbackResult === false) {\n      return false;\n    }\n  }\n  if (!node.children || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return currentIndex;\n  }\n  let childIndex = currentIndex;\n  const childCount = node.children.length;\n  if (typeof node.children !== \"function\") {\n    for (let i = 0; i < childCount; i += 1) {\n      childIndex = walkDescendants({\n        callback,\n        getNodeKey,\n        ignoreCollapsed,\n        node: node.children[i],\n        parentNode: isPseudoRoot ? void 0 : node,\n        currentIndex: childIndex + 1,\n        lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n        path: selfPath\n      });\n      if (childIndex === false) {\n        return false;\n      }\n    }\n  }\n  return childIndex;\n};\nconst mapDescendants = ({\n  callback,\n  getNodeKey,\n  ignoreCollapsed,\n  isPseudoRoot = false,\n  node,\n  parentNode = void 0,\n  currentIndex,\n  path = [],\n  lowerSiblingCounts = []\n}) => {\n  const nextNode = { ...node };\n  const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({ node: nextNode, treeIndex: currentIndex })];\n  const selfInfo = {\n    node: nextNode,\n    parentNode,\n    path: selfPath,\n    lowerSiblingCounts,\n    treeIndex: currentIndex\n  };\n  if (!nextNode.children || nextNode.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return {\n      treeIndex: currentIndex,\n      node: callback(selfInfo)\n    };\n  }\n  let childIndex = currentIndex;\n  const childCount = nextNode.children.length;\n  if (typeof nextNode.children !== \"function\") {\n    nextNode.children = nextNode.children.map((child, i) => {\n      const mapResult = mapDescendants({\n        callback,\n        getNodeKey,\n        ignoreCollapsed,\n        node: child,\n        parentNode: isPseudoRoot ? void 0 : nextNode,\n        currentIndex: childIndex + 1,\n        lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n        path: selfPath\n      });\n      childIndex = mapResult.treeIndex;\n      return mapResult.node;\n    });\n  }\n  return {\n    node: callback(selfInfo),\n    treeIndex: childIndex\n  };\n};\nconst getVisibleNodeCount = ({ treeData }) => {\n  const traverse = (node) => {\n    if (!node.children || node.expanded !== true || typeof node.children === \"function\") {\n      return 1;\n    }\n    return 1 + node.children.reduce(\n      (total, currentNode) => total + traverse(currentNode),\n      0\n    );\n  };\n  return treeData.reduce(\n    (total, currentNode) => total + traverse(currentNode),\n    0\n  );\n};\nconst getVisibleNodeInfoAtIndex = ({\n  treeData,\n  index: targetIndex,\n  getNodeKey\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return void 0;\n  }\n  const result = getNodeDataAtTreeIndexOrNextIndex({\n    targetIndex,\n    getNodeKey,\n    node: {\n      children: treeData,\n      expanded: true\n    },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: [],\n    isPseudoRoot: true\n  });\n  if (result.node) {\n    return result;\n  }\n  return void 0;\n};\nconst walk = ({\n  treeData,\n  getNodeKey,\n  callback,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return;\n  }\n  walkDescendants({\n    callback,\n    getNodeKey,\n    ignoreCollapsed,\n    isPseudoRoot: true,\n    node: { children: treeData },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: []\n  });\n};\nconst map = ({\n  treeData,\n  getNodeKey,\n  callback,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return [];\n  }\n  return mapDescendants({\n    callback,\n    getNodeKey,\n    ignoreCollapsed,\n    isPseudoRoot: true,\n    node: { children: treeData },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: []\n  }).node.children;\n};\nconst toggleExpandedForAll = ({\n  treeData,\n  expanded = true\n}) => {\n  return map({\n    treeData,\n    callback: ({ node }) => ({ ...node, expanded }),\n    getNodeKey: ({ treeIndex }) => treeIndex,\n    ignoreCollapsed: false\n  });\n};\nconst changeNodeAtPath = ({\n  treeData,\n  path,\n  newNode,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  const RESULT_MISS = \"RESULT_MISS\";\n  const traverse = ({\n    isPseudoRoot = false,\n    node,\n    currentTreeIndex,\n    pathIndex\n  }) => {\n    if (!isPseudoRoot && getNodeKey({ node, treeIndex: currentTreeIndex }) !== path[pathIndex]) {\n      return RESULT_MISS;\n    }\n    if (pathIndex >= path.length - 1) {\n      return typeof newNode === \"function\" ? newNode({ node, treeIndex: currentTreeIndex }) : newNode;\n    }\n    if (!node.children) {\n      throw new Error(\"Path referenced children of node with no children.\");\n    }\n    let nextTreeIndex = currentTreeIndex + 1;\n    for (let i = 0; i < node.children.length; i += 1) {\n      const result2 = traverse({\n        node: node.children[i],\n        currentTreeIndex: nextTreeIndex,\n        pathIndex: pathIndex + 1\n      });\n      if (result2 !== RESULT_MISS) {\n        if (result2) {\n          return {\n            ...node,\n            children: [\n              ...node.children.slice(0, i),\n              result2,\n              ...node.children.slice(i + 1)\n            ]\n          };\n        }\n        return {\n          ...node,\n          children: [\n            ...node.children.slice(0, i),\n            ...node.children.slice(i + 1)\n          ]\n        };\n      }\n      nextTreeIndex += 1 + getDescendantCount({ node: node.children[i], ignoreCollapsed });\n    }\n    return RESULT_MISS;\n  };\n  const result = traverse({\n    node: { children: treeData },\n    currentTreeIndex: -1,\n    pathIndex: -1,\n    isPseudoRoot: true\n  });\n  if (result === RESULT_MISS) {\n    throw new Error(\"No node found at the given path.\");\n  }\n  return result.children;\n};\nconst removeNodeAtPath = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  return changeNodeAtPath({\n    treeData,\n    path,\n    getNodeKey,\n    ignoreCollapsed,\n    newNode: void 0\n    // Delete the node\n  });\n};\nconst removeNode = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  let removedNode;\n  let removedTreeIndex;\n  const nextTreeData = changeNodeAtPath({\n    treeData,\n    path,\n    getNodeKey,\n    ignoreCollapsed,\n    newNode: ({ node, treeIndex }) => {\n      removedNode = node;\n      removedTreeIndex = treeIndex;\n      return void 0;\n    }\n  });\n  return {\n    treeData: nextTreeData,\n    node: removedNode,\n    treeIndex: removedTreeIndex\n  };\n};\nconst getNodeAtPath = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  let foundNodeInfo;\n  try {\n    changeNodeAtPath({\n      treeData,\n      path,\n      getNodeKey,\n      ignoreCollapsed,\n      newNode: ({ node, treeIndex }) => {\n        foundNodeInfo = { node, treeIndex };\n        return node;\n      }\n    });\n  } catch {\n  }\n  return foundNodeInfo;\n};\nconst addNodeUnderParent = ({\n  treeData,\n  newNode,\n  parentKey = void 0,\n  getNodeKey,\n  ignoreCollapsed = true,\n  expandParent = false,\n  addAsFirstChild = false\n}) => {\n  if (parentKey === null || parentKey === void 0) {\n    return addAsFirstChild ? {\n      treeData: [newNode, ...treeData || []],\n      treeIndex: 0\n    } : {\n      treeData: [...treeData || [], newNode],\n      treeIndex: (treeData || []).length\n    };\n  }\n  let insertedTreeIndex;\n  let hasBeenAdded = false;\n  const changedTreeData = map({\n    treeData,\n    getNodeKey,\n    ignoreCollapsed,\n    callback: ({ node, treeIndex, path }) => {\n      const key = path ? path[path.length - 1] : void 0;\n      if (hasBeenAdded || key !== parentKey) {\n        return node;\n      }\n      hasBeenAdded = true;\n      const parentNode = {\n        ...node\n      };\n      if (expandParent) {\n        parentNode.expanded = true;\n      }\n      if (!parentNode.children) {\n        insertedTreeIndex = treeIndex + 1;\n        return {\n          ...parentNode,\n          children: [newNode]\n        };\n      }\n      if (typeof parentNode.children === \"function\") {\n        throw new TypeError(\"Cannot add to children defined by a function\");\n      }\n      let nextTreeIndex = treeIndex + 1;\n      for (let i = 0; i < parentNode.children.length; i += 1) {\n        nextTreeIndex += 1 + getDescendantCount({ node: parentNode.children[i], ignoreCollapsed });\n      }\n      insertedTreeIndex = nextTreeIndex;\n      const children = addAsFirstChild ? [newNode, ...parentNode.children] : [...parentNode.children, newNode];\n      return {\n        ...parentNode,\n        children\n      };\n    }\n  });\n  if (!hasBeenAdded) {\n    throw new Error(\"No node found with the given key.\");\n  }\n  return {\n    treeData: changedTreeData,\n    treeIndex: insertedTreeIndex\n  };\n};\nconst addNodeAtDepthAndIndex = ({\n  targetDepth,\n  minimumTreeIndex,\n  newNode,\n  ignoreCollapsed,\n  expandParent,\n  isPseudoRoot = false,\n  isLastChild,\n  node,\n  currentIndex,\n  currentDepth,\n  getNodeKey,\n  path = []\n}) => {\n  const selfPath = (n) => isPseudoRoot ? [] : [...path, getNodeKey({ node: n, treeIndex: currentIndex })];\n  if (currentIndex >= minimumTreeIndex - 1 || isLastChild && !(node.children && node.children.length > 0)) {\n    if (typeof node.children === \"function\") {\n      throw new TypeError(\"Cannot add to children defined by a function\");\n    } else {\n      const extraNodeProps = expandParent ? { expanded: true } : {};\n      const nextNode2 = {\n        ...node,\n        ...extraNodeProps,\n        children: node.children ? [newNode, ...node.children] : [newNode]\n      };\n      return {\n        node: nextNode2,\n        nextIndex: currentIndex + 2,\n        insertedTreeIndex: currentIndex + 1,\n        parentPath: selfPath(nextNode2),\n        parentNode: isPseudoRoot ? void 0 : nextNode2\n      };\n    }\n  }\n  if (currentDepth >= targetDepth - 1) {\n    if (!node.children || typeof node.children === \"function\" || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n      return { node, nextIndex: currentIndex + 1 };\n    }\n    let childIndex2 = currentIndex + 1;\n    let insertedTreeIndex2;\n    let insertIndex;\n    for (let i = 0; i < node.children.length; i += 1) {\n      if (childIndex2 >= minimumTreeIndex) {\n        insertedTreeIndex2 = childIndex2;\n        insertIndex = i;\n        break;\n      }\n      childIndex2 += 1 + getDescendantCount({ node: node.children[i], ignoreCollapsed });\n    }\n    if (insertIndex === null || insertIndex === void 0) {\n      if (childIndex2 < minimumTreeIndex && !isLastChild) {\n        return { node, nextIndex: childIndex2 };\n      }\n      insertedTreeIndex2 = childIndex2;\n      insertIndex = node.children.length;\n    }\n    const nextNode2 = {\n      ...node,\n      children: [\n        ...node.children.slice(0, insertIndex),\n        newNode,\n        ...node.children.slice(insertIndex)\n      ]\n    };\n    return {\n      node: nextNode2,\n      nextIndex: childIndex2,\n      insertedTreeIndex: insertedTreeIndex2,\n      parentPath: selfPath(nextNode2),\n      parentNode: isPseudoRoot ? void 0 : nextNode2\n    };\n  }\n  if (!node.children || typeof node.children === \"function\" || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return { node, nextIndex: currentIndex + 1 };\n  }\n  let insertedTreeIndex;\n  let pathFragment;\n  let parentNode;\n  let childIndex = currentIndex + 1;\n  let newChildren = node.children;\n  if (typeof newChildren !== \"function\") {\n    newChildren = newChildren.map((child, i) => {\n      if (insertedTreeIndex !== null && insertedTreeIndex !== void 0) {\n        return child;\n      }\n      const mapResult = addNodeAtDepthAndIndex({\n        targetDepth,\n        minimumTreeIndex,\n        newNode,\n        ignoreCollapsed,\n        expandParent,\n        isLastChild: isLastChild && i === newChildren.length - 1,\n        node: child,\n        currentIndex: childIndex,\n        currentDepth: currentDepth + 1,\n        getNodeKey,\n        path: []\n        // Cannot determine the parent path until the children have been processed\n      });\n      if (\"insertedTreeIndex\" in mapResult) {\n        ({\n          insertedTreeIndex,\n          parentNode,\n          parentPath: pathFragment\n        } = mapResult);\n      }\n      childIndex = mapResult.nextIndex;\n      return mapResult.node;\n    });\n  }\n  const nextNode = { ...node, children: newChildren };\n  const result = {\n    node: nextNode,\n    nextIndex: childIndex\n  };\n  if (insertedTreeIndex !== null && insertedTreeIndex !== void 0) {\n    result.insertedTreeIndex = insertedTreeIndex;\n    result.parentPath = [...selfPath(nextNode), ...pathFragment];\n    result.parentNode = parentNode;\n  }\n  return result;\n};\nconst insertNode = ({\n  treeData,\n  depth: targetDepth,\n  minimumTreeIndex,\n  newNode,\n  getNodeKey,\n  ignoreCollapsed = true,\n  expandParent = false\n}) => {\n  if (!treeData && targetDepth === 0) {\n    return {\n      treeData: [newNode],\n      treeIndex: 0,\n      path: [getNodeKey({ node: newNode, treeIndex: 0 })],\n      parentNode: void 0\n    };\n  }\n  const insertResult = addNodeAtDepthAndIndex({\n    targetDepth,\n    minimumTreeIndex,\n    newNode,\n    ignoreCollapsed,\n    expandParent,\n    getNodeKey,\n    isPseudoRoot: true,\n    isLastChild: true,\n    node: { children: treeData },\n    currentIndex: -1,\n    currentDepth: -1\n  });\n  if (!(\"insertedTreeIndex\" in insertResult)) {\n    throw new Error(\"No suitable position found to insert.\");\n  }\n  const treeIndex = insertResult.insertedTreeIndex;\n  return {\n    treeData: insertResult.node.children,\n    treeIndex,\n    path: [\n      ...insertResult.parentPath,\n      getNodeKey({ node: newNode, treeIndex })\n    ],\n    parentNode: insertResult.parentNode\n  };\n};\nconst getFlatDataFromTree = ({\n  treeData,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return [];\n  }\n  const flattened = [];\n  walk({\n    treeData,\n    getNodeKey,\n    ignoreCollapsed,\n    callback: (nodeInfo) => {\n      flattened.push(nodeInfo);\n    }\n  });\n  return flattened;\n};\nconst getTreeFromFlatData = ({\n  flatData,\n  getKey = (node) => node.id,\n  getParentKey = (node) => node.parentId,\n  rootKey = \"0\"\n}) => {\n  if (!flatData) {\n    return [];\n  }\n  const childrenToParents = {};\n  for (const child of flatData) {\n    const parentKey = getParentKey(child);\n    if (parentKey in childrenToParents) {\n      childrenToParents[parentKey].push(child);\n    } else {\n      childrenToParents[parentKey] = [child];\n    }\n  }\n  if (!(rootKey in childrenToParents)) {\n    return [];\n  }\n  const trav = (parent) => {\n    const parentKey = getKey(parent);\n    if (parentKey in childrenToParents) {\n      return {\n        ...parent,\n        children: childrenToParents[parentKey].map((child) => trav(child))\n      };\n    }\n    return { ...parent };\n  };\n  return childrenToParents[rootKey].map((child) => trav(child));\n};\nconst isDescendant = (older, younger) => {\n  return !!older.children && typeof older.children !== \"function\" && older.children.some(\n    (child) => child === younger || isDescendant(child, younger)\n  );\n};\nconst getDepth = (node, depth = 0) => {\n  if (!node.children) {\n    return depth;\n  }\n  if (typeof node.children === \"function\") {\n    return depth + 1;\n  }\n  return node.children.reduce(\n    (deepest, child) => Math.max(deepest, getDepth(child, depth + 1)),\n    depth\n  );\n};\nconst find = ({\n  getNodeKey,\n  treeData,\n  searchQuery,\n  searchMethod,\n  searchFocusOffset,\n  expandAllMatchPaths = false,\n  expandFocusMatchPaths = true\n}) => {\n  let matchCount = 0;\n  const trav = ({ isPseudoRoot = false, node, currentIndex, path = [] }) => {\n    let matches = [];\n    let isSelfMatch = false;\n    let hasFocusMatch = false;\n    const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({ node, treeIndex: currentIndex })];\n    const extraInfo = isPseudoRoot ? void 0 : {\n      path: selfPath,\n      treeIndex: currentIndex\n    };\n    const hasChildren = node.children && typeof node.children !== \"function\" && node.children.length > 0;\n    if (!isPseudoRoot && searchMethod({ ...extraInfo, node, searchQuery })) {\n      if (matchCount === searchFocusOffset) {\n        hasFocusMatch = true;\n      }\n      matchCount += 1;\n      isSelfMatch = true;\n    }\n    let childIndex = currentIndex;\n    const newNode = { ...node };\n    if (hasChildren) {\n      newNode.children = newNode.children.map((child) => {\n        const mapResult = trav({\n          node: child,\n          currentIndex: childIndex + 1,\n          path: selfPath\n        });\n        if (mapResult.node.expanded) {\n          childIndex = mapResult.treeIndex;\n        } else {\n          childIndex += 1;\n        }\n        if (mapResult.matches.length > 0 || mapResult.hasFocusMatch) {\n          matches = [...matches, ...mapResult.matches];\n          if (mapResult.hasFocusMatch) {\n            hasFocusMatch = true;\n          }\n          if (expandAllMatchPaths && mapResult.matches.length > 0 || (expandAllMatchPaths || expandFocusMatchPaths) && mapResult.hasFocusMatch) {\n            newNode.expanded = true;\n          }\n        }\n        return mapResult.node;\n      });\n    }\n    if (!isPseudoRoot && !newNode.expanded) {\n      matches = matches.map((match) => ({\n        ...match,\n        treeIndex: void 0\n      }));\n    }\n    if (isSelfMatch) {\n      matches = [{ ...extraInfo, node: newNode }, ...matches];\n    }\n    return {\n      node: matches.length > 0 ? newNode : node,\n      matches,\n      hasFocusMatch,\n      treeIndex: childIndex\n    };\n  };\n  const result = trav({\n    node: { children: treeData },\n    isPseudoRoot: true,\n    currentIndex: -1\n  });\n  return {\n    matches: result.matches,\n    treeData: result.node.children\n  };\n};\n\nconst classnames = (...classes) => classes.filter(Boolean).join(\" \");\n\nconst defaultProps$3 = {\n  isSearchMatch: false,\n  isSearchFocus: false,\n  canDrag: false,\n  toggleChildrenVisibility: void 0,\n  buttons: [],\n  className: \"\",\n  style: {},\n  parentNode: void 0,\n  draggedNode: void 0,\n  canDrop: false,\n  title: void 0,\n  subtitle: void 0,\n  rowDirection: \"ltr\"\n};\nconst NodeRendererDefault = function(props) {\n  props = { ...defaultProps$3, ...props };\n  const {\n    scaffoldBlockPxWidth,\n    toggleChildrenVisibility,\n    connectDragPreview,\n    connectDragSource,\n    isDragging,\n    canDrop,\n    canDrag,\n    node,\n    title,\n    subtitle,\n    draggedNode,\n    path,\n    treeIndex,\n    isSearchMatch,\n    isSearchFocus,\n    buttons,\n    className,\n    style,\n    didDrop,\n    treeId: _treeId,\n    isOver: _isOver,\n    // Not needed, but preserved for other renderers\n    parentNode: _parentNode,\n    // Needed for dndManager\n    rowDirection,\n    ...otherProps\n  } = props;\n  const nodeTitle = title || node.title;\n  const nodeSubtitle = subtitle || node.subtitle;\n  const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : void 0;\n  let handle;\n  if (canDrag) {\n    handle = typeof node.children === \"function\" && node.expanded ? /* @__PURE__ */ jsx(\"div\", { className: \"rst__loadingHandle\", children: /* @__PURE__ */ jsx(\"div\", { className: \"rst__loadingCircle\", children: Array.from({ length: 12 }).map((_, index) => /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        className: classnames(\n          \"rst__loadingCirclePoint\",\n          rowDirectionClass ?? \"\"\n        )\n      },\n      index\n    )) }) }) : connectDragSource(/* @__PURE__ */ jsx(\"div\", { className: \"rst__moveHandle\" }), {\n      dropEffect: \"copy\"\n    });\n  }\n  const isDraggedDescendant = draggedNode && isDescendant(draggedNode, node);\n  const isLandingPadActive = !didDrop && isDragging;\n  let buttonStyle = { left: -0.5 * scaffoldBlockPxWidth, right: 0 };\n  if (rowDirection === \"rtl\") {\n    buttonStyle = { right: -0.5 * scaffoldBlockPxWidth, left: 0 };\n  }\n  return /* @__PURE__ */ jsxs(\"div\", { style: { height: \"100%\" }, ...otherProps, children: [\n    toggleChildrenVisibility && node.children && (node.children.length > 0 || typeof node.children === \"function\") && /* @__PURE__ */ jsxs(\"div\", { children: [\n      /* @__PURE__ */ jsx(\n        \"button\",\n        {\n          type: \"button\",\n          \"aria-label\": node.expanded ? \"Collapse\" : \"Expand\",\n          className: classnames(\n            node.expanded ? \"rst__collapseButton\" : \"rst__expandButton\",\n            rowDirectionClass ?? \"\"\n          ),\n          style: buttonStyle,\n          onClick: () => toggleChildrenVisibility({\n            node,\n            path,\n            treeIndex\n          })\n        }\n      ),\n      node.expanded && !isDragging && /* @__PURE__ */ jsx(\n        \"div\",\n        {\n          style: { width: scaffoldBlockPxWidth },\n          className: classnames(\n            \"rst__lineChildren\",\n            rowDirectionClass ?? \"\"\n          )\n        }\n      )\n    ] }),\n    /* @__PURE__ */ jsx(\"div\", { className: classnames(\"rst__rowWrapper\", rowDirectionClass ?? \"\"), children: connectDragPreview(\n      /* @__PURE__ */ jsxs(\n        \"div\",\n        {\n          className: classnames(\n            \"rst__row\",\n            isLandingPadActive ? \"rst__rowLandingPad\" : \"\",\n            isLandingPadActive && !canDrop ? \"rst__rowCancelPad\" : \"\",\n            isSearchMatch ? \"rst__rowSearchMatch\" : \"\",\n            isSearchFocus ? \"rst__rowSearchFocus\" : \"\",\n            rowDirectionClass ?? \"\",\n            className ?? \"\"\n          ),\n          style: {\n            opacity: isDraggedDescendant ? 0.5 : 1,\n            ...style\n          },\n          children: [\n            handle,\n            /* @__PURE__ */ jsxs(\n              \"div\",\n              {\n                className: classnames(\n                  \"rst__rowContents\",\n                  canDrag ? \"\" : \"rst__rowContentsDragDisabled\",\n                  rowDirectionClass ?? \"\"\n                ),\n                children: [\n                  /* @__PURE__ */ jsxs(\n                    \"div\",\n                    {\n                      className: classnames(\n                        \"rst__rowLabel\",\n                        rowDirectionClass ?? \"\"\n                      ),\n                      children: [\n                        /* @__PURE__ */ jsx(\n                          \"span\",\n                          {\n                            className: classnames(\n                              \"rst__rowTitle\",\n                              node.subtitle ? \"rst__rowTitleWithSubtitle\" : \"\"\n                            ),\n                            children: typeof nodeTitle === \"function\" ? nodeTitle({\n                              node,\n                              path,\n                              treeIndex\n                            }) : nodeTitle\n                          }\n                        ),\n                        nodeSubtitle && /* @__PURE__ */ jsx(\"span\", { className: \"rst__rowSubtitle\", children: typeof nodeSubtitle === \"function\" ? nodeSubtitle({\n                          node,\n                          path,\n                          treeIndex\n                        }) : nodeSubtitle })\n                      ]\n                    }\n                  ),\n                  /* @__PURE__ */ jsx(\"div\", { className: \"rst__rowToolbar\", children: buttons == null ? void 0 : buttons.map((btn, index) => /* @__PURE__ */ jsx(\"div\", { className: \"rst__toolbarButton\", children: btn }, index)) })\n                ]\n              }\n            )\n          ]\n        }\n      )\n    ) })\n  ] });\n};\n\nconst defaultProps$2 = {\n  isOver: false,\n  canDrop: false\n};\nconst PlaceholderRendererDefault = function(props) {\n  props = { ...defaultProps$2, ...props };\n  const { canDrop, isOver } = props;\n  return /* @__PURE__ */ jsx(\n    \"div\",\n    {\n      className: classnames(\n        \"rst__placeholder\",\n        canDrop ? \"rst__placeholderLandingPad\" : \"\",\n        canDrop && !isOver ? \"rst__placeholderCancelPad\" : \"\"\n      )\n    }\n  );\n};\n\nconst defaultProps$1 = {\n  swapFrom: void 0,\n  swapDepth: void 0,\n  swapLength: void 0,\n  canDrop: false,\n  draggedNode: void 0,\n  rowDirection: \"ltr\"\n};\nclass TreeNodeComponent extends Component {\n  render() {\n    const props = { ...defaultProps$1, ...this.props };\n    const {\n      children,\n      listIndex,\n      swapFrom,\n      swapLength,\n      swapDepth,\n      scaffoldBlockPxWidth,\n      lowerSiblingCounts,\n      connectDropTarget,\n      isOver,\n      draggedNode,\n      canDrop,\n      treeIndex,\n      rowHeight,\n      treeId: _treeId,\n      // Delete from otherProps\n      getPrevRow: _getPrevRow,\n      // Delete from otherProps\n      node: _node,\n      // Delete from otherProps\n      path: _path,\n      // Delete from otherProps\n      rowDirection,\n      ...otherProps\n    } = props;\n    const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : void 0;\n    const scaffoldBlockCount = lowerSiblingCounts.length;\n    const scaffold = [];\n    for (const [i, lowerSiblingCount] of lowerSiblingCounts.entries()) {\n      let lineClass = \"\";\n      if (lowerSiblingCount > 0) {\n        if (listIndex === 0) {\n          lineClass = \"rst__lineHalfHorizontalRight rst__lineHalfVerticalBottom\";\n        } else if (i === scaffoldBlockCount - 1) {\n          lineClass = \"rst__lineHalfHorizontalRight rst__lineFullVertical\";\n        } else {\n          lineClass = \"rst__lineFullVertical\";\n        }\n      } else if (listIndex === 0) {\n        lineClass = \"rst__lineHalfHorizontalRight\";\n      } else if (i === scaffoldBlockCount - 1) {\n        lineClass = \"rst__lineHalfVerticalTop rst__lineHalfHorizontalRight\";\n      }\n      scaffold.push(\n        /* @__PURE__ */ jsx(\n          \"div\",\n          {\n            style: { width: scaffoldBlockPxWidth },\n            className: classnames(\n              \"rst__lineBlock\",\n              lineClass,\n              rowDirectionClass ?? \"\"\n            )\n          },\n          `pre_${1 + i}`\n        )\n      );\n      if (treeIndex !== listIndex && i === swapDepth) {\n        let highlightLineClass = \"\";\n        if (listIndex === swapFrom + swapLength - 1) {\n          highlightLineClass = \"rst__highlightBottomLeftCorner\";\n        } else if (treeIndex === swapFrom) {\n          highlightLineClass = \"rst__highlightTopLeftCorner\";\n        } else {\n          highlightLineClass = \"rst__highlightLineVertical\";\n        }\n        const style2 = rowDirection === \"rtl\" ? {\n          width: scaffoldBlockPxWidth,\n          right: scaffoldBlockPxWidth * i\n        } : {\n          width: scaffoldBlockPxWidth,\n          left: scaffoldBlockPxWidth * i\n        };\n        scaffold.push(\n          /* @__PURE__ */ jsx(\n            \"div\",\n            {\n              style: style2,\n              className: classnames(\n                \"rst__absoluteLineBlock\",\n                highlightLineClass,\n                rowDirectionClass ?? \"\"\n              )\n            },\n            i\n          )\n        );\n      }\n    }\n    const style = rowDirection === \"rtl\" ? { right: scaffoldBlockPxWidth * scaffoldBlockCount } : { left: scaffoldBlockPxWidth * scaffoldBlockCount };\n    let calculatedRowHeight = rowHeight;\n    if (typeof rowHeight === \"function\") {\n      calculatedRowHeight = rowHeight(treeIndex, _node, _path);\n    }\n    return connectDropTarget(\n      /* @__PURE__ */ jsxs(\n        \"div\",\n        {\n          ...otherProps,\n          style: { height: `${calculatedRowHeight}px` },\n          className: classnames(\"rst__node\", rowDirectionClass ?? \"\"),\n          ref: (node) => this.node = node,\n          children: [\n            scaffold,\n            /* @__PURE__ */ jsx(\"div\", { className: \"rst__nodeContent\", style, children: Children.map(\n              children,\n              (child) => cloneElement(child, {\n                isOver,\n                canDrop,\n                draggedNode\n              })\n            ) })\n          ]\n        }\n      )\n    );\n  }\n}\n\nconst defaultProps = {\n  canDrop: false,\n  draggedNode: void 0\n};\nconst TreePlaceholder = (props) => {\n  props = { ...defaultProps, ...props };\n  const { children, connectDropTarget, treeId, drop, ...otherProps } = props;\n  return connectDropTarget(\n    /* @__PURE__ */ jsx(\"div\", { children: Children.map(\n      children,\n      (child) => cloneElement(child, {\n        ...otherProps\n      })\n    ) })\n  );\n};\n\nlet rafId = 0;\nconst nodeDragSourcePropInjection = (connect, monitor) => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview(),\n  isDragging: monitor.isDragging(),\n  didDrop: monitor.didDrop()\n});\nconst wrapSource = (el, startDrag, endDrag, dndType) => {\n  const nodeDragSource = {\n    beginDrag: (props) => {\n      startDrag(props);\n      return {\n        node: props.node,\n        parentNode: props.parentNode,\n        path: props.path,\n        treeIndex: props.treeIndex,\n        treeId: props.treeId\n      };\n    },\n    endDrag: (props, monitor) => {\n      endDrag(monitor.getDropResult());\n    },\n    isDragging: (props, monitor) => {\n      const dropTargetNode = monitor.getItem().node;\n      const draggedNode = props.node;\n      return draggedNode === dropTargetNode;\n    }\n  };\n  return DragSource(dndType, nodeDragSource, nodeDragSourcePropInjection)(el);\n};\nconst propInjection = (connect, monitor) => {\n  const dragged = monitor.getItem();\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    draggedNode: dragged ? dragged.node : void 0\n  };\n};\nconst wrapPlaceholder = (el, treeId, drop, dndType) => {\n  const placeholderDropTarget = {\n    drop: (dropTargetProps, monitor) => {\n      const { node, path, treeIndex } = monitor.getItem();\n      const result = {\n        node,\n        path,\n        treeIndex,\n        treeId,\n        minimumTreeIndex: 0,\n        depth: 0\n      };\n      drop(result);\n      return result;\n    }\n  };\n  return DropTarget(dndType, placeholderDropTarget, propInjection)(el);\n};\nconst getTargetDepth = (dropTargetProps, monitor, component, canNodeHaveChildren, treeId, maxDepth) => {\n  let dropTargetDepth = 0;\n  const rowAbove = dropTargetProps.getPrevRow();\n  if (rowAbove) {\n    const { node } = rowAbove;\n    let { path } = rowAbove;\n    const aboveNodeCannotHaveChildren = !canNodeHaveChildren(node);\n    if (aboveNodeCannotHaveChildren) {\n      path = path.slice(0, -1);\n    }\n    dropTargetDepth = Math.min(path.length, dropTargetProps.path.length);\n  }\n  let blocksOffset;\n  let dragSourceInitialDepth = (monitor.getItem().path || []).length;\n  if (monitor.getItem().treeId === treeId) {\n    const direction = dropTargetProps.rowDirection === \"rtl\" ? -1 : 1;\n    blocksOffset = Math.round(\n      direction * monitor.getDifferenceFromInitialOffset().x / dropTargetProps.scaffoldBlockPxWidth\n    );\n  } else {\n    dragSourceInitialDepth = 0;\n    if (component) {\n      const relativePosition = component.node.getBoundingClientRect();\n      const leftShift = monitor.getSourceClientOffset().x - relativePosition.left;\n      blocksOffset = Math.round(\n        leftShift / dropTargetProps.scaffoldBlockPxWidth\n      );\n    } else {\n      blocksOffset = dropTargetProps.path.length;\n    }\n  }\n  let targetDepth = Math.min(\n    dropTargetDepth,\n    Math.max(0, dragSourceInitialDepth + blocksOffset - 1)\n  );\n  if (maxDepth !== void 0 && maxDepth !== void 0) {\n    const draggedNode = monitor.getItem().node;\n    const draggedChildDepth = getDepth(draggedNode);\n    targetDepth = Math.max(\n      0,\n      Math.min(targetDepth, maxDepth - draggedChildDepth - 1)\n    );\n  }\n  return targetDepth;\n};\nconst canDrop = (dropTargetProps, monitor, canNodeHaveChildren, treeId, maxDepth, treeRefcanDrop, draggingTreeData, treeReftreeData, getNodeKey) => {\n  if (!monitor.isOver()) {\n    return false;\n  }\n  const rowAbove = dropTargetProps.getPrevRow();\n  const abovePath = rowAbove ? rowAbove.path : [];\n  const aboveNode = rowAbove ? rowAbove.node : {};\n  const targetDepth = getTargetDepth(\n    dropTargetProps,\n    monitor,\n    void 0,\n    canNodeHaveChildren,\n    treeId,\n    maxDepth\n  );\n  if (targetDepth >= abovePath.length && typeof aboveNode.children === \"function\") {\n    return false;\n  }\n  if (typeof treeRefcanDrop === \"function\") {\n    const { node } = monitor.getItem();\n    return treeRefcanDrop({\n      node,\n      prevPath: monitor.getItem().path,\n      prevParent: monitor.getItem().parentNode,\n      prevTreeIndex: monitor.getItem().treeIndex,\n      // Equals -1 when dragged from external tree\n      nextPath: dropTargetProps.children.props.path,\n      nextParent: dropTargetProps.children.props.parentNode,\n      nextTreeIndex: dropTargetProps.children.props.treeIndex\n    });\n  }\n  return true;\n};\nconst wrapTarget = (el, canNodeHaveChildren, treeId, maxDepth, treeRefcanDrop, drop, dragHover, dndType, draggingTreeData, treeReftreeData, getNodeKey) => {\n  const nodeDropTarget = {\n    drop: (dropTargetProps, monitor, component) => {\n      const result = {\n        node: monitor.getItem().node,\n        path: monitor.getItem().path,\n        treeIndex: monitor.getItem().treeIndex,\n        treeId,\n        minimumTreeIndex: dropTargetProps.treeIndex,\n        depth: getTargetDepth(\n          dropTargetProps,\n          monitor,\n          component,\n          canNodeHaveChildren,\n          treeId,\n          maxDepth\n        )\n      };\n      drop(result);\n      return result;\n    },\n    hover: (dropTargetProps, monitor, component) => {\n      const targetDepth = getTargetDepth(\n        dropTargetProps,\n        monitor,\n        component,\n        canNodeHaveChildren,\n        treeId,\n        maxDepth\n      );\n      const draggedNode = monitor.getItem().node;\n      const needsRedraw = (\n        // Redraw if hovered above different nodes\n        dropTargetProps.node !== draggedNode || // Or hovered above the same node but at a different depth\n        targetDepth !== dropTargetProps.path.length - 1\n      );\n      if (!needsRedraw) {\n        return;\n      }\n      cancelAnimationFrame(rafId);\n      rafId = requestAnimationFrame(() => {\n        const item = monitor.getItem();\n        if (!item || !monitor.isOver()) {\n          return;\n        }\n        dragHover({\n          node: draggedNode,\n          path: item.path,\n          minimumTreeIndex: dropTargetProps.listIndex,\n          depth: targetDepth\n        });\n      });\n    },\n    canDrop: (dropTargetProps, monitor) => canDrop(\n      dropTargetProps,\n      monitor,\n      canNodeHaveChildren,\n      treeId,\n      maxDepth,\n      treeRefcanDrop)\n  };\n  return DropTarget(dndType, nodeDropTarget, propInjection)(el);\n};\n\nconst slideRows = (rows, fromIndex, toIndex, count = 1) => {\n  const rowsWithoutMoved = [\n    ...rows.slice(0, fromIndex),\n    ...rows.slice(fromIndex + count)\n  ];\n  return [\n    ...rowsWithoutMoved.slice(0, toIndex),\n    ...rows.slice(fromIndex, fromIndex + count),\n    ...rowsWithoutMoved.slice(toIndex)\n  ];\n};\n\nconst memoize = (f) => {\n  let savedArgsArray = [];\n  let savedKeysArray = [];\n  let savedResult;\n  return (args) => {\n    const keysArray = Object.keys(args).sort();\n    const argsArray = keysArray.map((key) => args[key]);\n    if (argsArray.length !== savedArgsArray.length || argsArray.some((arg, index) => arg !== savedArgsArray[index]) || keysArray.some((key, index) => key !== savedKeysArray[index])) {\n      savedArgsArray = argsArray;\n      savedKeysArray = keysArray;\n      savedResult = f(args);\n    }\n    return savedResult;\n  };\n};\nconst memoizedInsertNode = memoize(insertNode);\nconst memoizedGetFlatDataFromTree = memoize(getFlatDataFromTree);\nconst memoizedGetDescendantCount = memoize(getDescendantCount);\n\nlet treeIdCounter = 1;\nconst mergeTheme = (props) => {\n  const merged = {\n    ...props,\n    style: { ...props.theme.style, ...props.style },\n    innerStyle: { ...props.theme.innerStyle, ...props.innerStyle }\n  };\n  const overridableDefaults = {\n    nodeContentRenderer: NodeRendererDefault,\n    placeholderRenderer: PlaceholderRendererDefault,\n    scaffoldBlockPxWidth: 44,\n    slideRegionSize: 100,\n    rowHeight: 62,\n    treeNodeRenderer: TreeNodeComponent\n  };\n  for (const propKey of Object.keys(overridableDefaults)) {\n    if (props[propKey] === void 0) {\n      merged[propKey] = props.theme[propKey] === void 0 ? overridableDefaults[propKey] : props.theme[propKey];\n    }\n  }\n  return merged;\n};\nclass ReactSortableTree extends Component {\n  constructor(props) {\n    super(props);\n    this.startDrag = ({ path }) => {\n      this.setState((prevState) => {\n        const {\n          treeData: draggingTreeData,\n          node: draggedNode,\n          treeIndex: draggedMinimumTreeIndex\n        } = removeNode({\n          treeData: prevState.instanceProps.treeData,\n          path,\n          getNodeKey: this.props.getNodeKey\n        });\n        return {\n          draggingTreeData,\n          draggedNode,\n          draggedDepth: path.length - 1,\n          draggedMinimumTreeIndex,\n          dragging: true\n        };\n      });\n    };\n    this.dragHover = ({\n      node: draggedNode,\n      depth: draggedDepth,\n      minimumTreeIndex: draggedMinimumTreeIndex\n    }) => {\n      if (this.state.draggedDepth === draggedDepth && this.state.draggedMinimumTreeIndex === draggedMinimumTreeIndex) {\n        return;\n      }\n      this.setState(({ draggingTreeData, instanceProps }) => {\n        const newDraggingTreeData = draggingTreeData || instanceProps.treeData;\n        const addedResult = memoizedInsertNode({\n          treeData: newDraggingTreeData,\n          newNode: draggedNode,\n          depth: draggedDepth,\n          minimumTreeIndex: draggedMinimumTreeIndex,\n          expandParent: true,\n          getNodeKey: this.props.getNodeKey\n        });\n        const rows = this.getRows(addedResult.treeData);\n        const expandedParentPath = rows[addedResult.treeIndex].path;\n        return {\n          draggedNode,\n          draggedDepth,\n          draggedMinimumTreeIndex,\n          draggingTreeData: changeNodeAtPath({\n            treeData: newDraggingTreeData,\n            path: expandedParentPath.slice(0, -1),\n            newNode: ({ node }) => ({ ...node, expanded: true }),\n            getNodeKey: this.props.getNodeKey\n          }),\n          // reset the scroll focus so it doesn't jump back\n          // to a search result while dragging\n          searchFocusTreeIndex: void 0,\n          dragging: true\n        };\n      });\n    };\n    this.endDrag = (dropResult) => {\n      const { instanceProps } = this.state;\n      if (!dropResult) {\n        this.setState({\n          draggingTreeData: void 0,\n          draggedNode: void 0,\n          draggedMinimumTreeIndex: void 0,\n          draggedDepth: void 0,\n          dragging: false\n        });\n      } else if (dropResult.treeId !== this.treeId) {\n        const { node, path, treeIndex } = dropResult;\n        let shouldCopy = this.props.shouldCopyOnOutsideDrop;\n        if (typeof shouldCopy === \"function\") {\n          shouldCopy = shouldCopy({\n            node,\n            prevTreeIndex: treeIndex,\n            prevPath: path\n          });\n        }\n        let treeData = this.state.draggingTreeData || instanceProps.treeData;\n        if (shouldCopy) {\n          treeData = changeNodeAtPath({\n            treeData: instanceProps.treeData,\n            // use treeData unaltered by the drag operation\n            path,\n            newNode: ({ node: copyNode }) => ({ ...copyNode }),\n            // create a shallow copy of the node\n            getNodeKey: this.props.getNodeKey\n          });\n        }\n        this.props.onChange(treeData);\n        this.props.onMoveNode({\n          treeData,\n          node,\n          treeIndex: void 0,\n          path: void 0,\n          nextPath: void 0,\n          nextTreeIndex: void 0,\n          prevPath: path,\n          prevTreeIndex: treeIndex\n        });\n      }\n    };\n    this.drop = (dropResult) => {\n      this.moveNode(dropResult);\n    };\n    this.canNodeHaveChildren = (node) => {\n      const { canNodeHaveChildren } = this.props;\n      if (canNodeHaveChildren) {\n        return canNodeHaveChildren(node);\n      }\n      return true;\n    };\n    this.listRef = props.virtuosoRef || React.createRef();\n    this.listProps = props.virtuosoProps || {};\n    const { dndType, nodeContentRenderer, treeNodeRenderer, slideRegionSize } = mergeTheme(props);\n    this.treeId = `rst__${treeIdCounter}`;\n    treeIdCounter += 1;\n    this.dndType = dndType || this.treeId;\n    this.nodeContentRenderer = wrapSource(\n      nodeContentRenderer,\n      this.startDrag,\n      this.endDrag,\n      this.dndType\n    );\n    this.treePlaceholderRenderer = wrapPlaceholder(\n      TreePlaceholder,\n      this.treeId,\n      this.drop,\n      this.dndType\n    );\n    this.scrollZoneVirtualList = (createScrollingComponent || withScrolling)(\n      React.forwardRef((props2, ref) => {\n        const { dragDropManager, rowHeight, ...otherProps } = props2;\n        return /* @__PURE__ */ jsx(\n          Virtuoso,\n          {\n            ref: this.listRef,\n            scrollerRef: (scrollContainer) => ref.current = scrollContainer,\n            ...otherProps\n          }\n        );\n      })\n    );\n    this.vStrength = createVerticalStrength(slideRegionSize);\n    this.hStrength = createHorizontalStrength(slideRegionSize);\n    this.state = {\n      draggingTreeData: void 0,\n      draggedNode: void 0,\n      draggedMinimumTreeIndex: void 0,\n      draggedDepth: void 0,\n      searchMatches: [],\n      searchFocusTreeIndex: void 0,\n      dragging: false,\n      // props that need to be used in gDSFP or static functions will be stored here\n      instanceProps: {\n        treeData: [],\n        ignoreOneTreeUpdate: false,\n        searchQuery: void 0,\n        searchFocusOffset: void 0\n      }\n    };\n    this.treeNodeRenderer = wrapTarget(\n      treeNodeRenderer,\n      this.canNodeHaveChildren,\n      this.treeId,\n      this.props.maxDepth,\n      this.props.canDrop,\n      this.drop,\n      this.dragHover,\n      this.dndType,\n      this.state.draggingTreeData,\n      this.props.treeData,\n      this.props.getNodeKey\n    );\n    this.toggleChildrenVisibility = this.toggleChildrenVisibility.bind(this);\n    this.moveNode = this.moveNode.bind(this);\n    this.startDrag = this.startDrag.bind(this);\n    this.dragHover = this.dragHover.bind(this);\n    this.endDrag = this.endDrag.bind(this);\n    this.drop = this.drop.bind(this);\n    this.handleDndMonitorChange = this.handleDndMonitorChange.bind(this);\n  }\n  // returns the new state after search\n  static search(props, state, seekIndex, expand, singleSearch) {\n    const {\n      onChange,\n      getNodeKey,\n      searchFinishCallback,\n      searchQuery,\n      searchMethod,\n      searchFocusOffset,\n      onlyExpandSearchedNodes\n    } = props;\n    const { instanceProps } = state;\n    if (!searchQuery && !searchMethod) {\n      if (searchFinishCallback) {\n        searchFinishCallback([]);\n      }\n      return { searchMatches: [] };\n    }\n    const newState = { instanceProps: {} };\n    const { treeData: expandedTreeData, matches: searchMatches } = find({\n      getNodeKey,\n      treeData: onlyExpandSearchedNodes ? toggleExpandedForAll({\n        treeData: instanceProps.treeData,\n        expanded: false\n      }) : instanceProps.treeData,\n      searchQuery,\n      searchMethod: searchMethod || defaultSearchMethod,\n      searchFocusOffset,\n      expandAllMatchPaths: expand && !singleSearch,\n      expandFocusMatchPaths: !!expand\n    });\n    if (expand) {\n      newState.instanceProps.ignoreOneTreeUpdate = true;\n      onChange(expandedTreeData);\n    }\n    if (searchFinishCallback) {\n      searchFinishCallback(searchMatches);\n    }\n    let searchFocusTreeIndex;\n    if (seekIndex && searchFocusOffset !== void 0 && searchFocusOffset < searchMatches.length) {\n      searchFocusTreeIndex = searchMatches[searchFocusOffset].treeIndex;\n    }\n    newState.searchMatches = searchMatches;\n    newState.searchFocusTreeIndex = searchFocusTreeIndex;\n    return newState;\n  }\n  // Load any children in the tree that are given by a function\n  // calls the onChange callback on the new treeData\n  static loadLazyChildren(props, state) {\n    const { instanceProps } = state;\n    walk({\n      treeData: instanceProps.treeData,\n      getNodeKey: props.getNodeKey,\n      callback: ({ node, path, lowerSiblingCounts, treeIndex }) => {\n        if (node.children && typeof node.children === \"function\" && (node.expanded || props.loadCollapsedLazyChildren)) {\n          node.children({\n            node,\n            path,\n            lowerSiblingCounts,\n            treeIndex,\n            // Provide a helper to append the new data when it is received\n            done: (childrenArray) => props.onChange(\n              changeNodeAtPath({\n                treeData: instanceProps.treeData,\n                path,\n                newNode: ({ node: oldNode }) => (\n                  // Only replace the old node if it's the one we set off to find children\n                  //  for in the first place\n                  oldNode === node ? {\n                    ...oldNode,\n                    children: childrenArray\n                  } : oldNode\n                ),\n                getNodeKey: props.getNodeKey\n              })\n            )\n          });\n        }\n      }\n    });\n  }\n  componentDidMount() {\n    ReactSortableTree.loadLazyChildren(this.props, this.state);\n    const stateUpdate = ReactSortableTree.search(\n      this.props,\n      this.state,\n      true,\n      true,\n      false\n    );\n    this.setState(stateUpdate);\n    this.clearMonitorSubscription = this.props.dragDropManager.getMonitor().subscribeToStateChange(this.handleDndMonitorChange);\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const { instanceProps } = prevState;\n    const newState = {};\n    const newInstanceProps = { ...instanceProps };\n    const isTreeDataEqual = isEqual(instanceProps.treeData, nextProps.treeData);\n    newInstanceProps.treeData = nextProps.treeData;\n    if (!isTreeDataEqual) {\n      if (instanceProps.ignoreOneTreeUpdate) {\n        newInstanceProps.ignoreOneTreeUpdate = false;\n      } else {\n        newState.searchFocusTreeIndex = void 0;\n        ReactSortableTree.loadLazyChildren(nextProps, prevState);\n        Object.assign(\n          newState,\n          ReactSortableTree.search(nextProps, prevState, false, false, false)\n        );\n      }\n      newState.draggingTreeData = void 0;\n      newState.draggedNode = void 0;\n      newState.draggedMinimumTreeIndex = void 0;\n      newState.draggedDepth = void 0;\n      newState.dragging = false;\n    } else if (!isEqual(instanceProps.searchQuery, nextProps.searchQuery)) {\n      Object.assign(\n        newState,\n        ReactSortableTree.search(nextProps, prevState, true, true, false)\n      );\n    } else if (instanceProps.searchFocusOffset !== nextProps.searchFocusOffset) {\n      Object.assign(\n        newState,\n        ReactSortableTree.search(nextProps, prevState, true, true, true)\n      );\n    }\n    newInstanceProps.searchQuery = nextProps.searchQuery;\n    newInstanceProps.searchFocusOffset = nextProps.searchFocusOffset;\n    newState.instanceProps = { ...newInstanceProps, ...newState.instanceProps };\n    return newState;\n  }\n  // listen to dragging\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.dragging !== prevState.dragging && this.props.onDragStateChanged) {\n      this.props.onDragStateChanged({\n        isDragging: this.state.dragging,\n        draggedNode: this.state.draggedNode\n      });\n    }\n  }\n  componentWillUnmount() {\n    this.clearMonitorSubscription();\n  }\n  handleDndMonitorChange() {\n    const monitor = this.props.dragDropManager.getMonitor();\n    if (!monitor.isDragging() && this.state.draggingTreeData) {\n      setTimeout(() => {\n        this.endDrag();\n      });\n    }\n  }\n  getRows(treeData) {\n    return memoizedGetFlatDataFromTree({\n      ignoreCollapsed: true,\n      getNodeKey: this.props.getNodeKey,\n      treeData\n    });\n  }\n  toggleChildrenVisibility({ node: targetNode, path }) {\n    const { instanceProps } = this.state;\n    const treeData = changeNodeAtPath({\n      treeData: instanceProps.treeData,\n      path,\n      newNode: ({ node }) => ({ ...node, expanded: !node.expanded }),\n      getNodeKey: this.props.getNodeKey\n    });\n    this.props.onChange(treeData);\n    this.props.onVisibilityToggle({\n      treeData,\n      node: targetNode,\n      expanded: !targetNode.expanded,\n      path\n    });\n  }\n  moveNode({\n    node,\n    path: prevPath,\n    treeIndex: prevTreeIndex,\n    depth,\n    minimumTreeIndex\n  }) {\n    const {\n      treeData,\n      treeIndex,\n      path,\n      parentNode: nextParentNode\n    } = insertNode({\n      treeData: this.state.draggingTreeData,\n      newNode: node,\n      depth,\n      minimumTreeIndex,\n      expandParent: true,\n      getNodeKey: this.props.getNodeKey\n    });\n    this.props.onChange(treeData);\n    this.props.onMoveNode({\n      treeData,\n      node,\n      treeIndex,\n      path,\n      nextPath: path,\n      nextTreeIndex: treeIndex,\n      prevPath,\n      prevTreeIndex,\n      nextParentNode\n    });\n  }\n  renderRow(row, { listIndex, style, getPrevRow, matchKeys, swapFrom, swapDepth, swapLength }) {\n    const { node, parentNode, path, lowerSiblingCounts, treeIndex } = row;\n    const {\n      canDrag,\n      generateNodeProps,\n      scaffoldBlockPxWidth,\n      searchFocusOffset,\n      rowDirection,\n      rowHeight\n    } = mergeTheme(this.props);\n    const TreeNodeRenderer = this.treeNodeRenderer;\n    const NodeContentRenderer = this.nodeContentRenderer;\n    const nodeKey = path[path.length - 1];\n    const isSearchMatch = nodeKey in matchKeys;\n    const isSearchFocus = isSearchMatch && matchKeys[nodeKey] === searchFocusOffset;\n    const callbackParams = {\n      node,\n      parentNode,\n      path,\n      lowerSiblingCounts,\n      treeIndex,\n      isSearchMatch,\n      isSearchFocus\n    };\n    const nodeProps = generateNodeProps ? generateNodeProps(callbackParams) : {};\n    const rowCanDrag = typeof canDrag === \"function\" ? canDrag(callbackParams) : canDrag;\n    const sharedProps = {\n      treeIndex,\n      scaffoldBlockPxWidth,\n      node,\n      path,\n      treeId: this.treeId,\n      rowDirection\n    };\n    return /* @__PURE__ */ jsx(\n      TreeNodeRenderer,\n      {\n        style,\n        rowHeight,\n        listIndex,\n        getPrevRow,\n        lowerSiblingCounts,\n        swapFrom,\n        swapLength,\n        swapDepth,\n        ...sharedProps,\n        children: /* @__PURE__ */ jsx(\n          NodeContentRenderer,\n          {\n            parentNode,\n            isSearchMatch,\n            isSearchFocus,\n            canDrag: rowCanDrag,\n            toggleChildrenVisibility: this.toggleChildrenVisibility,\n            ...sharedProps,\n            ...nodeProps\n          }\n        )\n      },\n      nodeKey\n    );\n  }\n  render() {\n    const {\n      dragDropManager,\n      style,\n      className,\n      innerStyle,\n      placeholderRenderer,\n      getNodeKey,\n      rowDirection\n    } = mergeTheme(this.props);\n    const {\n      searchMatches,\n      searchFocusTreeIndex,\n      draggedNode,\n      draggedDepth,\n      draggedMinimumTreeIndex,\n      instanceProps\n    } = this.state;\n    const treeData = this.state.draggingTreeData || instanceProps.treeData;\n    const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : void 0;\n    let rows;\n    let swapFrom;\n    let swapLength;\n    if (draggedNode && draggedMinimumTreeIndex !== void 0) {\n      const addedResult = memoizedInsertNode({\n        treeData,\n        newNode: draggedNode,\n        depth: draggedDepth,\n        minimumTreeIndex: draggedMinimumTreeIndex,\n        expandParent: true,\n        getNodeKey\n      });\n      const swapTo = draggedMinimumTreeIndex;\n      swapFrom = addedResult.treeIndex;\n      swapLength = 1 + memoizedGetDescendantCount({ node: draggedNode });\n      rows = slideRows(\n        this.getRows(addedResult.treeData),\n        swapFrom,\n        swapTo,\n        swapLength\n      );\n    } else {\n      rows = this.getRows(treeData);\n    }\n    const matchKeys = {};\n    for (const [i, { path }] of searchMatches.entries()) {\n      matchKeys[path[path.length - 1]] = i;\n    }\n    if (searchFocusTreeIndex !== void 0) {\n      this.listRef.current.scrollToIndex({\n        index: searchFocusTreeIndex,\n        align: \"center\"\n      });\n    }\n    let containerStyle = style;\n    let list;\n    if (rows.length === 0) {\n      const Placeholder = this.treePlaceholderRenderer;\n      const PlaceholderContent = placeholderRenderer;\n      list = /* @__PURE__ */ jsx(Placeholder, { treeId: this.treeId, drop: this.drop, children: /* @__PURE__ */ jsx(PlaceholderContent, {}) });\n    } else {\n      containerStyle = { height: \"100%\", ...containerStyle };\n      const ScrollZoneVirtualList = this.scrollZoneVirtualList;\n      list = /* @__PURE__ */ jsx(\n        ScrollZoneVirtualList,\n        {\n          data: rows,\n          dragDropManager,\n          verticalStrength: this.vStrength,\n          horizontalStrength: this.hStrength,\n          className: \"rst__virtualScrollOverride\",\n          style: innerStyle,\n          itemContent: (index) => this.renderRow(rows[index], {\n            listIndex: index,\n            getPrevRow: () => rows[index - 1] || void 0,\n            matchKeys,\n            swapFrom,\n            swapDepth: draggedDepth,\n            swapLength\n          }),\n          ...this.listProps\n        }\n      );\n    }\n    return /* @__PURE__ */ jsx(\n      \"div\",\n      {\n        className: classnames(\"rst__tree\", className, rowDirectionClass),\n        style: containerStyle,\n        children: list\n      }\n    );\n  }\n}\nReactSortableTree.defaultProps = {\n  canDrag: true,\n  canDrop: void 0,\n  canNodeHaveChildren: () => true,\n  className: \"\",\n  dndType: void 0,\n  generateNodeProps: void 0,\n  getNodeKey: defaultGetNodeKey,\n  innerStyle: {},\n  maxDepth: void 0,\n  treeNodeRenderer: void 0,\n  nodeContentRenderer: void 0,\n  onMoveNode: () => {\n  },\n  onVisibilityToggle: () => {\n  },\n  placeholderRenderer: void 0,\n  scaffoldBlockPxWidth: void 0,\n  searchFinishCallback: void 0,\n  searchFocusOffset: void 0,\n  searchMethod: void 0,\n  searchQuery: void 0,\n  shouldCopyOnOutsideDrop: false,\n  slideRegionSize: void 0,\n  style: {},\n  theme: {},\n  onDragStateChanged: () => {\n  },\n  onlyExpandSearchedNodes: false,\n  rowDirection: \"ltr\",\n  debugMode: false,\n  overscan: 0\n};\nconst SortableTreeWithoutDndContext = function(props) {\n  return /* @__PURE__ */ jsx(DndContext.Consumer, { children: ({ dragDropManager }) => dragDropManager === void 0 ? void 0 : /* @__PURE__ */ jsx(ReactSortableTree, { ...props, dragDropManager }) });\n};\nconst SortableTree = function(props) {\n  return /* @__PURE__ */ jsx(DndProvider, { debugMode: props.debugMode, backend: HTML5Backend, children: /* @__PURE__ */ jsx(SortableTreeWithoutDndContext, { ...props }) });\n};\n\nexport { SortableTreeWithoutDndContext, addNodeUnderParent, changeNodeAtPath, SortableTree as default, defaultGetNodeKey, defaultSearchMethod, find, getDepth, getDescendantCount, getFlatDataFromTree, getNodeAtPath, getTreeFromFlatData, getVisibleNodeCount, getVisibleNodeInfoAtIndex, insertNode, isDescendant, map, removeNode, removeNodeAtPath, toggleExpandedForAll, walk };\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar jsxRuntime = require('react/jsx-runtime');\nvar react = require('react');\nvar hoist = require('hoist-non-react-statics');\nvar throttle = require('lodash.throttle');\nvar reactDnd = require('react-dnd');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar hoist__default = /*#__PURE__*/_interopDefaultLegacy(hoist);\nvar throttle__default = /*#__PURE__*/_interopDefaultLegacy(throttle);\n\nconst noop = () => {};\n\nconst intBetween = (min, max, val) => Math.floor(Math.min(max, Math.max(min, val)));\n\nconst getCoords = evt => {\n  if (evt.type === 'touchmove') {\n    return {\n      x: evt.changedTouches[0].clientX,\n      y: evt.changedTouches[0].clientY\n    };\n  }\n\n  return {\n    x: evt.clientX,\n    y: evt.clientY\n  };\n};\n\nconst DEFAULT_BUFFER = 150;\nconst createHorizontalStrength = _buffer => ({\n  x,\n  w,\n  y,\n  h\n}, point) => {\n  const buffer = Math.min(w / 2, _buffer);\n  const inRange = point.x >= x && point.x <= x + w;\n  const inBox = inRange && point.y >= y && point.y <= y + h;\n\n  if (inBox) {\n    if (point.x < x + buffer) {\n      return (point.x - x - buffer) / buffer;\n    }\n\n    if (point.x > x + w - buffer) {\n      return -(x + w - point.x - buffer) / buffer;\n    }\n  }\n\n  return 0;\n};\nconst createVerticalStrength = _buffer => ({\n  y,\n  h,\n  x,\n  w\n}, point) => {\n  const buffer = Math.min(h / 2, _buffer);\n  const inRange = point.y >= y && point.y <= y + h;\n  const inBox = inRange && point.x >= x && point.x <= x + w;\n\n  if (inBox) {\n    if (point.y < y + buffer) {\n      return (point.y - y - buffer) / buffer;\n    }\n\n    if (point.y > y + h - buffer) {\n      return -(y + h - point.y - buffer) / buffer;\n    }\n  }\n\n  return 0;\n};\nconst defaultHorizontalStrength = createHorizontalStrength(DEFAULT_BUFFER);\nconst defaultVerticalStrength = createVerticalStrength(DEFAULT_BUFFER);\nconst defaultProps = {\n  onScrollChange: noop,\n  verticalStrength: defaultVerticalStrength,\n  horizontalStrength: defaultHorizontalStrength,\n  strengthMultiplier: 30\n};\nconst createScrollingComponent = WrappedComponent => {\n  const ScrollingComponent = props => {\n    props = { ...defaultProps,\n      ...props\n    };\n    let container;\n    const wrappedInstance = react.createRef();\n    let frame;\n    let scaleX = 0;\n    let scaleY = 0;\n    let attached = false;\n    let dragging = false;\n    const updateScrolling = throttle__default[\"default\"](evt => {\n      const {\n        left: x,\n        top: y,\n        width: w,\n        height: h\n      } = container.getBoundingClientRect();\n      const box = {\n        x,\n        y,\n        w,\n        h\n      };\n      const coords = getCoords(evt);\n      scaleX = props.horizontalStrength(box, coords);\n      scaleY = props.verticalStrength(box, coords);\n\n      if (!frame && (scaleX || scaleY)) {\n        startScrolling();\n      }\n    }, 100, {\n      trailing: false\n    });\n    react.useEffect(() => {\n      container = wrappedInstance.current;\n\n      if (container && typeof container.addEventListener === 'function') {\n        container.addEventListener('dragover', handleEvent);\n      }\n\n      window.document.body.addEventListener('touchmove', handleEvent);\n      const clearMonitorSubscription = props.dragDropManager.getMonitor().subscribeToStateChange(() => handleMonitorChange());\n      return () => {\n        if (container && typeof container.removeEventListener === 'function') {\n          container.removeEventListener('dragover', handleEvent);\n        }\n\n        window.document.body.removeEventListener('touchmove', handleEvent);\n        clearMonitorSubscription();\n        stopScrolling();\n      };\n    }, []);\n\n    const handleEvent = evt => {\n      if (dragging && !attached) {\n        attach();\n        updateScrolling(evt);\n      }\n    };\n\n    const handleMonitorChange = () => {\n      const isDragging = props.dragDropManager.getMonitor().isDragging();\n\n      if (!dragging && isDragging) {\n        dragging = true;\n      } else if (dragging && !isDragging) {\n        dragging = false;\n        stopScrolling();\n      }\n    };\n\n    const attach = () => {\n      attached = true;\n      window.document.body.addEventListener('dragover', updateScrolling);\n      window.document.body.addEventListener('touchmove', updateScrolling);\n    };\n\n    const detach = () => {\n      attached = false;\n      window.document.body.removeEventListener('dragover', updateScrolling);\n      window.document.body.removeEventListener('touchmove', updateScrolling);\n    };\n\n    const startScrolling = () => {\n      let i = 0;\n\n      const tick = () => {\n        if (props.strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          stopScrolling();\n          return;\n        }\n\n        i += 1;\n\n        if (i % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight\n          } = container;\n          const newLeft = scaleX ? container.scrollLeft = intBetween(0, scrollWidth - clientWidth, scrollLeft + scaleX * props.strengthMultiplier) : scrollLeft;\n          const newTop = scaleY ? container.scrollTop = intBetween(0, scrollHeight - clientHeight, scrollTop + scaleY * props.strengthMultiplier) : scrollTop;\n          props.onScrollChange(newLeft, newTop);\n        }\n\n        frame = requestAnimationFrame(tick);\n      };\n\n      tick();\n    };\n\n    const stopScrolling = () => {\n      detach();\n      scaleX = 0;\n      scaleY = 0;\n\n      if (frame) {\n        cancelAnimationFrame(frame);\n        frame = undefined;\n      }\n    };\n\n    const {\n      strengthMultiplier,\n      verticalStrength,\n      horizontalStrength,\n      onScrollChange,\n      ...other\n    } = props;\n    return jsxRuntime.jsx(WrappedComponent, {\n      ref: wrappedInstance,\n      ...other\n    });\n  };\n\n  return hoist__default[\"default\"](ScrollingComponent, WrappedComponent);\n};\n\nconst createScrollingComponentWithConsumer = WrappedComponent => {\n  const ScrollingComponent = createScrollingComponent(WrappedComponent);\n  return props => {\n    return jsxRuntime.jsx(reactDnd.DndContext.Consumer, {\n      children: ({\n        dragDropManager\n      }) => dragDropManager === undefined ? undefined : jsxRuntime.jsx(ScrollingComponent, { ...props,\n        dragDropManager: dragDropManager\n      })\n    });\n  };\n};\n\nexports.createHorizontalStrength = createHorizontalStrength;\nexports.createScrollingComponent = createScrollingComponent;\nexports.createVerticalStrength = createVerticalStrength;\nexports[\"default\"] = createScrollingComponentWithConsumer;\nexports.defaultHorizontalStrength = defaultHorizontalStrength;\nexports.defaultVerticalStrength = defaultVerticalStrength;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","export * from './asap.js'\nexport * from './types.js'\nexport * from './AsapQueue.js'\nexport * from './TaskFactory.js'\n","import { AsapQueue } from './AsapQueue.js'\nimport { TaskFactory } from './TaskFactory.js'\nimport type { TaskFn } from './types.js'\n\nconst asapQueue = new AsapQueue()\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError)\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nexport function asap(task: TaskFn) {\n\tasapQueue.enqueueTask(taskFactory.create(task))\n}\n","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nconst scope = typeof global !== 'undefined' ? global : self\nconst BrowserMutationObserver =\n\t(scope as any).MutationObserver || (scope as any).WebKitMutationObserver\n\nexport function makeRequestCallFromTimer(callback: () => void) {\n\treturn function requestCall() {\n\t\t// We dispatch a timeout with a specified delay of 0 for engines that\n\t\t// can reliably accommodate that request. This will usually be snapped\n\t\t// to a 4 milisecond delay, but once we're flushing, there's no delay\n\t\t// between events.\n\t\tconst timeoutHandle = setTimeout(handleTimer, 0)\n\t\t// However, since this timer gets frequently dropped in Firefox\n\t\t// workers, we enlist an interval handle that will try to fire\n\t\t// an event 20 times per second until it succeeds.\n\t\tconst intervalHandle = setInterval(handleTimer, 50)\n\n\t\tfunction handleTimer() {\n\t\t\t// Whichever timer succeeds will cancel both timers and\n\t\t\t// execute the callback.\n\t\t\tclearTimeout(timeoutHandle)\n\t\t\tclearInterval(intervalHandle)\n\t\t\tcallback()\n\t\t}\n\t}\n}\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback: () => void) {\n\tlet toggle = 1\n\tconst observer = new BrowserMutationObserver(callback)\n\tconst node = document.createTextNode('')\n\tobserver.observe(node, { characterData: true })\n\treturn function requestCall() {\n\t\ttoggle = -toggle\n\t\t;(node as any).data = toggle\n\t}\n}\n\nexport const makeRequestCall =\n\ttypeof BrowserMutationObserver === 'function'\n\t\t? // MutationObservers are desirable because they have high priority and work\n\t\t  // reliably everywhere they are implemented.\n\t\t  // They are implemented in all modern browsers.\n\t\t  //\n\t\t  // - Android 4-4.3\n\t\t  // - Chrome 26-34\n\t\t  // - Firefox 14-29\n\t\t  // - Internet Explorer 11\n\t\t  // - iPad Safari 6-7.1\n\t\t  // - iPhone Safari 7-7.1\n\t\t  // - Safari 6-7\n\t\t  makeRequestCallFromMutationObserver\n\t\t: // MessageChannels are desirable because they give direct access to the HTML\n\t\t  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t\t  // 11-12, and in web workers in many engines.\n\t\t  // Although message channels yield to any queued rendering and IO tasks, they\n\t\t  // would be better than imposing the 4ms delay of timers.\n\t\t  // However, they do not work reliably in Internet Explorer or Safari.\n\n\t\t  // Internet Explorer 10 is the only browser that has setImmediate but does\n\t\t  // not have MutationObservers.\n\t\t  // Although setImmediate yields to the browser's renderer, it would be\n\t\t  // preferrable to falling back to setTimeout since it does not have\n\t\t  // the minimum 4ms penalty.\n\t\t  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t\t  // Desktop to a lesser extent) that renders both setImmediate and\n\t\t  // MessageChannel useless for the purposes of ASAP.\n\t\t  // https://github.com/kriskowal/q/issues/396\n\n\t\t  // Timers are implemented universally.\n\t\t  // We fall back to timers in workers in most engines, and in foreground\n\t\t  // contexts in the following browsers.\n\t\t  // However, note that even this simple case requires nuances to operate in a\n\t\t  // broad spectrum of browsers.\n\t\t  //\n\t\t  // - Firefox 3-13\n\t\t  // - Internet Explorer 6-9\n\t\t  // - iPad Safari 4.3\n\t\t  // - Lynx 2.8.7\n\t\t  makeRequestCallFromTimer\n","// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { TaskFn, Task } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","export function registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nexport function registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from './isRef';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nexport var SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, SourceConnector);\n\n    _defineProperty(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty(this, \"handlerId\", null);\n\n    _defineProperty(this, \"dragSourceRef\", null);\n\n    _defineProperty(this, \"dragSourceNode\", void 0);\n\n    _defineProperty(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty(this, \"dragPreviewRef\", null);\n\n    _defineProperty(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nexport var DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck(this, DragSourceMonitorImpl);\n\n    _defineProperty(this, \"internalMonitor\", void 0);\n\n    _defineProperty(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrop = false;\nexport var DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck(this, DropTargetMonitorImpl);\n\n    _defineProperty(this, \"internalMonitor\", void 0);\n\n    _defineProperty(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from './isRef';\nexport var TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, TargetConnector);\n\n    _defineProperty(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty(this, \"handlerId\", null);\n\n    _defineProperty(this, \"dropTargetRef\", null);\n\n    _defineProperty(this, \"dropTargetNode\", void 0);\n\n    _defineProperty(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();","export var INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport var HOVER = 'dnd-core/HOVER';\nexport var DROP = 'dnd-core/DROP';\nexport var END_DRAG = 'dnd-core/END_DRAG';","import { INIT_COORDS } from '../types';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isString(input) {\n  return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isObject(input) {\n  return _typeof(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nexport function xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nexport function intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}","import { invariant } from '@react-dnd/invariant';\nimport { setClientOffset } from './local/setClientOffset';\nimport { isObject } from '../../utils/js_utils';\nimport { BEGIN_DRAG, INIT_COORDS } from './types';\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nexport function createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}","import { PUBLISH_DRAG_SOURCE } from './types';\nexport function createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}","export function matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType';\nimport { HOVER } from './types';\nexport function createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { DROP } from './types';\nimport { isObject } from '../../utils/js_utils';\nexport function createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types';\nexport function createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createDragDropActions } from '../actions/dragDrop';\nexport var DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck(this, DragDropManagerImpl);\n\n    _defineProperty(this, \"store\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    _defineProperty(this, \"isSetUp\", false);\n\n    _defineProperty(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();","import { createBeginDrag } from './beginDrag';\nimport { createPublishDragSource } from './publishDragSource';\nimport { createHover } from './hover';\nimport { createDrop } from './drop';\nimport { createEndDrag } from './endDrag';\nexport * from './types';\nexport function createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","export var strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nexport function areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nexport function areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INIT_COORDS, BEGIN_DRAG, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { areCoordsEqual } from '../utils/equality';\nvar initialState = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","export var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport var ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nexport function removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { REMOVE_TARGET } from '../actions/registry';\nimport { without } from '../utils/js_utils';\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: without(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}","import { intersection } from './js_utils';\nexport var NONE = [];\nexport var ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nexport function areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}","import { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nimport { areArraysEqual } from '../utils/equality';\nimport { NONE, ALL } from '../utils/dirtiness';\nimport { xor } from '../utils/js_utils';\nexport function reduce() {\n  var _state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}","export function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { reduce as dragOffset } from './dragOffset';\nimport { reduce as dragOperation } from './dragOperation';\nimport { reduce as refCount } from './refCount';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds';\nimport { reduce as stateId } from './stateId';\nimport { get } from '../utils/js_utils';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread(_objectSpread({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: dragOffset(state.dragOffset, action),\n    refCount: refCount(state.refCount, action),\n    dragOperation: dragOperation(state.dragOperation, action),\n    stateId: stateId(state.stateId)\n  };\n}","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nexport function subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nexport function getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nexport function getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../utils/matchesType';\nimport { getSourceClientOffset as _getSourceClientOffset, getDifferenceFromInitialOffset as _getDifferenceFromInitialOffset } from '../utils/coords';\nimport { areDirty } from '../utils/dirtiness';\nexport var DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck(this, DragDropMonitorImpl);\n\n    _defineProperty(this, \"store\", void 0);\n\n    _defineProperty(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      };\n\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return _getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return _getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();","export var HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));","var nextUniqueId = 0;\nexport function getNextUniqueId() {\n  return nextUniqueId++;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from '../actions/registry';\nimport { getNextUniqueId } from '../utils/getNextUniqueId';\nimport { HandlerRole } from '../interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from '../contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    _defineProperty(this, \"types\", new Map());\n\n    _defineProperty(this, \"dragSources\", new Map());\n\n    _defineProperty(this, \"dropTargets\", new Map());\n\n    _defineProperty(this, \"pinnedSourceId\", null);\n\n    _defineProperty(this, \"pinnedSource\", null);\n\n    _defineProperty(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();","import { DragDropManagerImpl } from './classes/DragDropManagerImpl';\nimport { createStore } from 'redux';\nimport { reduce } from './reducers';\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl';\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl';\nexport function createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}"],"sourceRoot":""}