(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[76],{170:function(e,t,a){"use strict";a.r(t);var c=a(8),n=a(5),i=a(9),l=a(0),o=a(21),r=a(83),s=(a(586),a(10)),d=a(82),u=a(572),m=(a(216),a(160),a(84)),b=a(31),j=(a(584),a(576),a(587),a(577)),p=a(92),f=a(369),O=(a(85),a(14)),g=(a(7),a(2));t.default=function(e){var t=e.show,v=e.setShow,y=e.detailPage,h=e.formState,x=e.setFormState,N=Object(d.a)().t,S=Object(o.g)().id,M=Object(l.useContext)(m.a).colors,D=Object(l.useState)("Please Wait"),k=Object(i.a)(D,2),_=(k[0],k[1]),w=Object(O.b)(),F=Object(O.c)((function(e){return e})),T=Object(l.useState)({}),A=Object(i.a)(T,2),C=A[0],E=A[1],G=Object(l.useState)({}),L=Object(i.a)(G,2),V=L[0],q=(L[1],Object(l.useState)({})),z=Object(i.a)(q,2),J=z[0],I=z[1],B=Object(j.e)({}),P=(B.control,B.setError),U=B.handleSubmit,R=(B.formState.errors,function(){w(Object(p.resetSelectedData)())}),W=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a&&!Array.isArray(e))if(V[t]){var i=V[t].indexOf(e);-1!==i?V[t].splice(i,1):V[t].push(e)}else V[t]=[e];else V[t]=e;I(Object(n.a)(Object(n.a)({},J),{},Object(c.a)({},t,!1)))};return Object(l.useEffect)((function(){for(var e={},t=p.dynamicForm.filter((function(e){return"dropdown"===e.type||"table"===e.type})),c=function(c){var n,i,o,r,s,d=t[c].fieldName,u=t[c].fieldName.replaceAll("id_","");V[d]=null,J[d]=!1;var m=Object(l.lazy)((function(){return a(605)("./".concat(u))}));e["".concat(u,"_comp")]=Object(g.jsx)(m,{lookupMode:!0,lookupMode_fieldName:d,lookupMode_dropdown:"dropdown"===t[c].type,lookupMode_isMulti:null!==(n=t[c].isMultiSelection)&&void 0!==n&&n,lookupMode_onChange:W,lookupMode_defaultValue:null!==(i=t[c])&&void 0!==i&&i.isM2MDefValFromGrid?F[p.storeName].data.map((function(e){return e[d]})):null!==(o=F[p.storeName])&&void 0!==o&&o.selectedData?F[p.storeName].selectedData[d]:"",lookupMode_isM2MDefValFromGrid:null!==(r=null===(s=t[c])||void 0===s?void 0:s.isM2MDefValFromGrid)&&void 0!==r&&r})},n=0;n<t.length;n++)c(n);E(e)}),[]),Object(g.jsx)(s.F,{isOpen:t,toggle:function(){R(),v(!t)},className:"modal-dialog-centered modal-lg",children:Object(g.jsxs)(u.a,{blocking:F[p.storeName].isLoadingAddEdit||F[p.storeName].isLoadingDetail,loader:Object(g.jsx)(f.b,{}),children:[Object(g.jsx)(s.I,{className:"bg-transparent",toggle:function(){R(),v(!t)}}),Object(g.jsxs)(s.G,{className:"px-sm-5 pt-50 pb-5",children:[Object(g.jsx)("div",{className:"text-center mb-2",children:Object(g.jsxs)("h2",{className:"mb-1",children:[N("edit"===h?"Edit":"Add")," ",N(p.pageTitle)]})}),Object(g.jsx)(s.y,{onSubmit:U("edit"===h?function(){if(function(e){if("edit"===h){var t=Object(n.a)({},Object(b.z)(F[p.storeName].selectedData));for(var a in delete t.id,t)a in e||delete t[a];return JSON.stringify(Object(b.z)(t))!==JSON.stringify(Object(b.z)(e))}return!0}(V))if(Object.values(data).every((function(e){return null!==e&&""!==e})))_("".concat(N("Updating")," ").concat(N(p.pageTitle)," ").concat(N("Detail")," Data")),w(Object(p.putData)(data)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),r.b.success("".concat(N("Successfully Updated")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),y&&w(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else for(var e in data){var a;0===(null===(a=data[e])||void 0===a?void 0:a.length)&&P(e,{type:"manual"})}else Object(r.b)("".concat(N("You haven't changed anything")),{icon:"\ud83d\udc4f"})}:function(){if(Object.values(V).every((function(e){return null!==e&&""!==e})))_("".concat(N("Creating a New ".concat(p.pageTitle)))),w(Object(p.postData)(V)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),r.b.success("".concat(N("Successfully Created")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),y&&w(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&r.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else{var e=Object.assign({},J);for(var a in V){var c;null!==V[a]&&0!==(null===(c=V[a])||void 0===c?void 0:c.length)||(e[a]=!0)}I(e)}}),children:Object(g.jsxs)(s.R,{className:"gy-1 pt-75",children:[p.dynamicForm.map((function(e,t){if(["dropdown","table"].includes(e.type)){var a,c,n=e.fieldName.replaceAll("id_","");return Object(g.jsxs)(s.t,{md:12,xs:12,children:["table"!==e.type&&Object(g.jsx)(s.E,{className:"form-label",for:e.fieldName,children:N(null!==(a=e.fieldLabel)&&void 0!==a?a:"")}),Object(g.jsx)(l.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsxs)("div",{className:J[e.fieldName]?"dynamicForm_input dynamicForm_input_invalid":"dynamicForm_input",children:[C["".concat(n,"_comp")],(null===e||void 0===e?void 0:e.isM2MDefValFromGrid)&&V[e.fieldName]&&Object(g.jsxs)("div",{style:{textAlign:"right"},className:"text-primary",children:[null===(c=V[e.fieldName])||void 0===c?void 0:c.length," ",N(e.fieldLabel)," ",N("Selected")]})]})})]},n)}})),Object(g.jsxs)(s.t,{xs:12,className:"text-center mt-2 pt-50",children:[Object(g.jsx)(s.i,{type:"submit",className:"me-1",color:"primary",children:N("Submit")}),Object(g.jsx)(s.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){R(),x("add"),v(!1)},children:N("Cancel")})]})]})})]})]})})}}}]);
//# sourceMappingURL=76.0d3eee3f.chunk.js.map