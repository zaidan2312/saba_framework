(this["webpackJsonpsaba-react-framework"]=this["webpackJsonpsaba-react-framework"]||[]).push([[78],{171:function(e,t,a){"use strict";a.r(t);var c=a(8),n=a(5),i=a(9),l=a(0),o=a(21),s=a(82),r=(a(587),a(10)),d=a(121),u=a(573),m=(a(216),a(160),a(83)),b=a(31),j=(a(585),a(577),a(588),a(578)),p=a(90),f=a(370),O=(a(84),a(14)),g=(a(7),a(2));t.default=function(e){var t=e.show,v=e.setShow,h=e.detailPage,x=e.formState,y=e.setFormState,N=Object(d.a)().t,S=Object(o.g)().id,M=Object(l.useContext)(m.a).colors,D=Object(l.useState)("Please Wait"),k=Object(i.a)(D,2),_=(k[0],k[1]),w=Object(O.b)(),F=Object(O.c)((function(e){return e})),T=Object(l.useState)({}),C=Object(i.a)(T,2),A=C[0],E=C[1],L=Object(l.useState)({}),V=Object(i.a)(L,2),q=V[0],G=(V[1],Object(l.useState)({})),J=Object(i.a)(G,2),B=J[0],I=J[1],P=Object(j.e)({}),U=(P.control,P.setError),z=P.handleSubmit,H=(P.formState.errors,function(){w(Object(p.resetSelectedData)())}),Q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(a)if(q[t]){var i=q[t].indexOf(e);-1!==i?q[t].splice(i,1):q[t].push(e)}else q[t]=[e];else q[t]=e;I(Object(n.a)(Object(n.a)({},B),{},Object(c.a)({},t,!1)))};return Object(l.useEffect)((function(){for(var e={},t=p.dynamicForm.filter((function(e){return"dropdown"===e.type||"table"===e.type})),c=function(c){var n,i,o,s,r,d=t[c].fieldName,u=t[c].fieldName.replaceAll("id_","");q[d]=null,B[d]=!1;var m=Object(l.lazy)((function(){return a(607)("./".concat(u))}));e["".concat(u,"_comp")]=Object(g.jsx)(m,{lookupMode:!0,lookupMode_fieldName:d,lookupMode_dropdown:"dropdown"===t[c].type,lookupMode_isMulti:null!==(n=t[c].isMultiSelection)&&void 0!==n&&n,lookupMode_onChange:Q,lookupMode_defaultValue:null!==(i=t[c])&&void 0!==i&&i.isM2MDefValFromGrid?F[p.storeName].data.map((function(e){return e[d]})):null!==(o=F[p.storeName])&&void 0!==o&&o.selectedData?F[p.storeName].selectedData[d]:"",lookupMode_isM2MDefValFromGrid:null!==(s=null===(r=t[c])||void 0===r?void 0:r.isM2MDefValFromGrid)&&void 0!==s&&s})},n=0;n<t.length;n++)c(n);E(e)}),[]),Object(g.jsx)(r.E,{isOpen:t,toggle:function(){H(),v(!t)},className:"modal-dialog-centered modal-lg",children:Object(g.jsxs)(u.a,{blocking:F[p.storeName].isLoadingAddEdit||F[p.storeName].isLoadingDetail,loader:Object(g.jsx)(f.b,{}),children:[Object(g.jsx)(r.H,{className:"bg-transparent",toggle:function(){H(),v(!t)}}),Object(g.jsxs)(r.F,{className:"px-sm-5 pt-50 pb-5",children:[Object(g.jsx)("div",{className:"text-center mb-2",children:Object(g.jsxs)("h2",{className:"mb-1",children:[N("edit"===x?"Edit":"Add")," ",N(p.pageTitle)]})}),Object(g.jsx)(r.x,{onSubmit:z("edit"===x?function(){if(function(e){if("edit"===x){var t=Object(n.a)({},Object(b.x)(F[p.storeName].selectedData));for(var a in delete t.id,t)a in e||delete t[a];return JSON.stringify(Object(b.x)(t))!==JSON.stringify(Object(b.x)(e))}return!0}(q))if(Object.values(data).every((function(e){return null!==e&&""!==e})))_("".concat(N("Updating")," ").concat(N(p.pageTitle)," ").concat(N("Detail")," Data")),w(Object(p.putData)(data)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),s.b.success("".concat(N("Successfully Updated")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),h&&w(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&s.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else for(var e in data){var a;0===(null===(a=data[e])||void 0===a?void 0:a.length)&&U(e,{type:"manual"})}else Object(s.b)("".concat(N("You haven't changed anything")),{icon:"\ud83d\udc4f"})}:function(){if(Object.values(q).every((function(e){return null!==e&&""!==e})))_("".concat(N("Creating a New ".concat(p.pageTitle)))),w(Object(p.postData)(q)).then((function(e){"fulfilled"===e.meta.requestStatus?(v(!t),s.b.success("".concat(N("Successfully Created")," ").concat(N(p.pageTitle)),{style:{padding:"16px",color:M.success.main,border:"1px solid ".concat(M.success.main)},iconTheme:{primary:M.success.main}}),h&&w(Object(p.getDataById)(S))):"rejected"===e.meta.requestStatus&&s.b.error(e.payload.message,{style:{padding:"16px",color:M.danger.main,border:"1px solid ".concat(M.danger.main)},iconTheme:{primary:M.danger.main}})}));else{var e=Object.assign({},B);for(var a in q){var c;null!==q[a]&&0!==(null===(c=q[a])||void 0===c?void 0:c.length)||(e[a]=!0)}I(e)}}),children:Object(g.jsxs)(r.Q,{className:"gy-1 pt-75",children:[p.dynamicForm.map((function(e,t){if(["dropdown","table"].includes(e.type)){var a,c,n=e.fieldName.replaceAll("id_","");return Object(g.jsxs)(r.s,{md:12,xs:12,children:[Object(g.jsx)(r.D,{className:"form-label",for:e.fieldName,children:N(null!==(a=e.fieldLabel)&&void 0!==a?a:"")}),Object(g.jsx)(l.Suspense,{fallback:Object(g.jsx)("div",{children:"Loading..."}),children:Object(g.jsxs)("div",{className:B[e.fieldName]?"dynamicForm_input dynamicForm_input_invalid":"dynamicForm_input",children:[A["".concat(n,"_comp")],(null===e||void 0===e?void 0:e.isM2MDefValFromGrid)&&q[e.fieldName]&&Object(g.jsxs)("div",{style:{textAlign:"right"},className:"text-primary",children:[null===(c=q[e.fieldName])||void 0===c?void 0:c.length," ",N(e.fieldLabel)," ",N("Selected")]})]})})]},n)}})),Object(g.jsxs)(r.s,{xs:12,className:"text-center mt-2 pt-50",children:[Object(g.jsx)(r.i,{type:"submit",className:"me-1",color:"primary",children:N("Submit")}),Object(g.jsx)(r.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){H(),y("add"),v(!1)},children:N("Cancel")})]})]})})]})]})})}}}]);
//# sourceMappingURL=78.6526b102.chunk.js.map