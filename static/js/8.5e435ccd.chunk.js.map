{"version":3,"sources":["../../src/index.ts","../../src/mounts.js","../../src/index.js","../node_modules/react-dnd/dist/esm/core/DndContext.js","../node_modules/react-dnd/dist/esm/core/DndProvider.js","../../../src/AsapQueue.ts","../../../src/TaskFactory.ts","../node_modules/react-dnd/dist/esm/core/DragPreviewImage.js","../node_modules/react-dnd/dist/esm/internals/registration.js","../node_modules/react-dnd/dist/esm/internals/wrapConnectorHooks.js","../node_modules/react-dnd/dist/esm/internals/isRef.js","../node_modules/react-dnd/dist/esm/internals/SourceConnector.js","../node_modules/react-dnd/dist/esm/internals/DragSourceMonitorImpl.js","../node_modules/react-dnd/dist/esm/decorators/utils.js","../node_modules/react-dnd/dist/esm/decorators/disposables.js","../node_modules/react-dnd/dist/esm/decorators/decorateHandler.js","../node_modules/react-dnd/dist/esm/decorators/createSourceFactory.js","../node_modules/react-dnd/dist/esm/decorators/DragSource.js","../node_modules/react-dnd/dist/esm/internals/DropTargetMonitorImpl.js","../node_modules/react-dnd/dist/esm/internals/TargetConnector.js","../node_modules/react-dnd/dist/esm/decorators/createTargetFactory.js","../node_modules/react-dnd/dist/esm/decorators/DropTarget.js","../node_modules/react-dnd/dist/esm/decorators/DragLayer.js","../node_modules/react-dnd/dist/esm/hooks/useIsomorphicLayoutEffect.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/DragSourceImpl.js","../node_modules/react-dnd/dist/esm/hooks/useDragDropManager.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useRegisteredDragSource.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSource.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragType.js","../node_modules/react-dnd/dist/esm/hooks/useOptionalFactory.js","../node_modules/react-dnd/dist/esm/hooks/useCollector.js","../node_modules/react-dnd/dist/esm/hooks/useMonitorOutput.js","../node_modules/react-dnd/dist/esm/hooks/useCollectedProps.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/connectors.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDrag.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSourceMonitor.js","../node_modules/react-dnd/dist/esm/hooks/useDrag/useDragSourceConnector.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/DropTargetImpl.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useRegisteredDropTarget.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTarget.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useAccept.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/connectors.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDrop.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTargetMonitor.js","../node_modules/react-dnd/dist/esm/hooks/useDrop/useDropTargetConnector.js","../node_modules/react-dnd/dist/esm/hooks/useDragLayer.js","../node_modules/@nosferatu500/react-sortable-tree/index.js","../node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/@nosferatu500/react-dnd-scrollzone/index.js","../../../src/index.ts","../../../src/asap.ts","../../../src/makeRequestCall.ts","../../../src/RawTask.ts","../node_modules/fast-deep-equal/index.js","../node_modules/lodash.isequal/index.js","../node_modules/react-dnd-html5-backend/dist/esm/utils/js_utils.js","../node_modules/react-dnd-html5-backend/dist/esm/EnterLeaveCounter.js","../node_modules/react-dnd-html5-backend/dist/esm/BrowserDetector.js","../node_modules/react-dnd-html5-backend/dist/esm/MonotonicInterpolant.js","../node_modules/react-dnd-html5-backend/dist/esm/OffsetUtils.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeTypes.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/nativeTypesConfig.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/getDataFromDataTransfer.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/NativeDragSource.js","../node_modules/react-dnd-html5-backend/dist/esm/NativeDragSources/index.js","../node_modules/react-dnd-html5-backend/dist/esm/OptionsReader.js","../node_modules/react-dnd-html5-backend/dist/esm/HTML5BackendImpl.js","../node_modules/react-dnd-html5-backend/dist/esm/getEmptyImage.js","../node_modules/react-dnd-html5-backend/dist/esm/index.js","../../src/utils.ts","../../src/actions.ts","../../src/constants.ts","../../src/streams.ts","../../src/pipe.ts","../../src/transformers.ts","../../src/system.ts","../../src/hooks/useIsomorphicLayoutEffect.ts","../../src/loggerSystem.ts","../../src/hooks/useSize.ts","../../src/hooks/useChangedChildSizes.ts","../../src/utils/correctItemSize.ts","../../src/utils/approximatelyEqual.ts","../../src/hooks/useScrollTop.ts","../../src/domIOSystem.ts","../../src/AATree.ts","../../src/utils/binaryArraySearch.ts","../../src/recalcSystem.ts","../../src/sizeSystem.ts","../../src/scrollToIndexSystem.ts","../../src/stateFlagsSystem.ts","../../src/propsReadySystem.ts","../../src/initialTopMostItemIndexSystem.ts","../../src/followOutputSystem.ts","../../src/groupedListSystem.ts","../../src/comparators.tsx","../../src/sizeRangeSystem.ts","../../src/listStateSystem.ts","../../src/initialItemCountSystem.ts","../../src/scrollSeekSystem.ts","../../src/topItemCountSystem.ts","../../src/totalListHeightSystem.ts","../../src/utils/simpleMemoize.ts","../../src/upwardScrollFixSystem.ts","../../src/initialScrollTopSystem.ts","../../src/alignToBottomSystem.ts","../../src/windowScrollerSystem.ts","../../src/scrollIntoViewSystem.ts","../../src/listSystem.ts","../../src/utils/positionStickyCssValue.ts","../../src/hooks/useWindowViewportRect.ts","../../src/List.tsx","../../src/gridSystem.ts","../../src/Grid.tsx","../../src/Table.tsx","../../src/components.tsx","../node_modules/dnd-core/dist/esm/actions/dragDrop/types.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/local/setClientOffset.js","../node_modules/dnd-core/dist/esm/utils/js_utils.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/beginDrag.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/publishDragSource.js","../node_modules/dnd-core/dist/esm/utils/matchesType.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/hover.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/drop.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/endDrag.js","../node_modules/dnd-core/dist/esm/classes/DragDropManagerImpl.js","../node_modules/dnd-core/dist/esm/actions/dragDrop/index.js","../node_modules/dnd-core/node_modules/redux/es/redux.js","../node_modules/dnd-core/dist/esm/utils/equality.js","../node_modules/dnd-core/dist/esm/reducers/dragOffset.js","../node_modules/dnd-core/dist/esm/actions/registry.js","../node_modules/dnd-core/dist/esm/reducers/dragOperation.js","../node_modules/dnd-core/dist/esm/reducers/refCount.js","../node_modules/dnd-core/dist/esm/utils/dirtiness.js","../node_modules/dnd-core/dist/esm/reducers/dirtyHandlerIds.js","../node_modules/dnd-core/dist/esm/reducers/stateId.js","../node_modules/dnd-core/dist/esm/reducers/index.js","../node_modules/dnd-core/dist/esm/utils/coords.js","../node_modules/dnd-core/dist/esm/classes/DragDropMonitorImpl.js","../node_modules/dnd-core/dist/esm/interfaces.js","../node_modules/dnd-core/dist/esm/utils/getNextUniqueId.js","../node_modules/dnd-core/dist/esm/contracts.js","../node_modules/dnd-core/dist/esm/classes/HandlerRegistryImpl.js","../node_modules/dnd-core/dist/esm/createDragDropManager.js"],"names":["invariant","condition","format","args","Array","_len","_key","arguments","error","undefined","Error","argIndex","replace","name","framesToPop","mounts","key","getter","swal","getTitle","getHtmlContainer","getConfirmButton","getDenyButton","getCancelButton","getFooter","getCloseButton","getIcon","querySelector","getLoader","noop","withReactContent","ParentSwal","extractReactParams","params","reactParams","otherParams","mountKeys","map","mount","Object","entries","forEach","_ref","_ref2","_slicedToArray","value","includes","React__default","isValidElement","render","_ref3","_ref4","domElement","find","ReactDOM__default","__mountedDomElements","push","unrender","unmountComponentAtNode","_ParentSwal","_inherits","_class","_super","_createSuper","_classCallCheck","apply","_createClass","mixinParams","_this","this","__params","assign","_extractReactParams","_extractReactParams2","superDidOpen","didOpen","superDidDestroy","didDestroy","_get","_getPrototypeOf","prototype","call","popup","_extractReactParams3","_extractReactParams4","index","argsToParams","DndContext","createContext","dragDropManager","_excluded","arr","i","isArray","_arrayWithHoles","_i","Symbol","iterator","_s","_e","_arr","_n","_d","next","done","length","err","_iterableToArrayLimit","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","len","arr2","_objectWithoutProperties","source","excluded","target","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","refCount","INSTANCE_SYM","for","DndProvider","memo","children","_getDndContextValue","props","manager","backend","context","getGlobalContext","options","debugMode","ctx","createDragDropManager","createSingletonDndContext","isGlobalInstance","getDndContextValue","_getDndContextValue2","useEffect","_jsx","Provider","global","window","require","default","_makeRequestCallJs","AsapQueue","queue","pendingErrors","flushing","capacity","flush","q","currentIndex","scan","newLength","registerPendingError","requestErrorThrow","requestFlush","makeRequestCall","makeRequestCallFromTimer","shift","task","_rawTaskJs","TaskFactory","onError","freeTasks","tasks","t1","pop","RawTask","t","DragPreviewImage","connect","src","Image","connected","img","onload","registerTarget","type","registry","getRegistry","targetId","addTarget","removeTarget","registerSource","sourceId","addSource","removeSource","throwIfCompositeComponentElement","element","displayName","concat","wrapConnectorHooks","hooks","wrappedHooks","hook","endsWith","wrappedHook","elementOrNode","node","ref","cloneWithRef","wrapHookToRecognizeElement","setRef","current","newRef","previousRef","cloneElement","_typeof","obj","isRef","hasOwnProperty","shallowEqual","objA","objB","compare","compareContext","compareResult","keysA","keysB","bHasOwnProperty","bind","idx","valueA","valueB","_defineProperties","descriptor","enumerable","configurable","writable","defineProperty","_defineProperty","SourceConnector","instance","Constructor","dragSource","clearDragSource","dragSourceOptions","dragSourceRef","dragSourceNode","reconnectDragSource","dragPreview","clearDragPreview","dragPreviewOptions","dragPreviewRef","dragPreviewNode","reconnectDragPreview","protoProps","staticProps","newHandlerId","handlerId","reconnect","get","dragSourceOptionsInternal","set","dragPreviewOptionsInternal","didChange","didHandlerIdChange","didConnectedDragSourceChange","didDragSourceOptionsChange","disconnectDragSource","lastConnectedHandlerId","lastConnectedDragSource","lastConnectedDragSourceOptions","dragSourceUnsubscribe","connectDragSource","didConnectedDragPreviewChange","didDragPreviewOptionsChange","disconnectDragPreview","lastConnectedDragPreview","lastConnectedDragPreviewOptions","dragPreviewUnsubscribe","connectDragPreview","isCallingCanDrag","isCallingIsDragging","DragSourceMonitorImpl","internalMonitor","getMonitor","canDragSource","isDraggingSource","listener","subscribeToStateChange","isOverTarget","getTargetIds","isSourcePublic","getSourceId","subscribeToOffsetChange","canDropOnTarget","getItemType","getItem","getDropResult","didDrop","getInitialClientOffset","getInitialSourceClientOffset","getSourceClientOffset","getClientOffset","getDifferenceFromInitialOffset","getDecoratedComponent","instanceRef","currentRef","decoratedRef","isRefable","C","Component","_item$$$typeof","$$typeof","isRefForwardingComponent","isFunction","input","isPlainObject","isObjectLike","getPrototypeOf","proto","isValidType","allowArray","every","Disposable","action","isDisposed","d","Boolean","dispose","result","isDisposable","empty","CompositeDisposable","disposables","item","shouldDispose","splice","currentDisposables","_i2","SerialDisposable","old","_setPrototypeOf","p","setPrototypeOf","__proto__","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","e","_isNativeReflectConstruct","Super","NewTarget","_possibleConstructorReturn","self","_assertThisInitialized","ReferenceError","decorateHandler","DecoratedComponent","createHandler","createMonitor","createConnector","registerHandler","containerDisplayName","getType","collect","_options$arePropsEqua","arePropsEqual","Decorated","DragDropContainer","_Component","subClass","superClass","create","createRef","nextState","getCurrentState","state","setState","disposable","receiveProps","nextProps","currentType","handleChange","prevProps","handler","receiveType","handlerMonitor","handlerConnector","_registerHandler2","unregister","receiveHandlerId","unsubscribe","handlerIds","setDisposable","_this2","Consumer","receiveDragDropManager","requestAnimationFrame","_this2$handlerConnect","getBackend","hoistStatics","ALLOWED_SPEC_METHODS","REQUIRED_SPEC_METHODS","SourceImpl","spec","monitor","beginDrag","canDrag","globalMonitor","isDragging","endDrag","createSourceFactory","join","DragSource","createSource","isCallingCanDrop","DropTargetMonitorImpl","TargetConnector","dropTarget","clearDropTarget","dropTargetOptions","dropTargetRef","dropTargetNode","didDropTargetChange","didOptionsChange","disconnectDropTarget","lastConnectedDropTarget","lastConnectedDropTargetOptions","unsubscribeDropTarget","connectDropTarget","dropTargetOptionsInternal","TargetImpl","canDrop","hover","drop","createTargetFactory","DropTarget","createTarget","DragLayer","DragLayerContainer","isCurrentlyMounted","unsubscribeFromOffsetChange","unsubscribeFromStateChange","useIsomorphicLayoutEffect","useLayoutEffect","DragSourceImpl","connector","_result","end","useDragDropManager","useContext","useRegisteredDragSource","useMemo","useDragSource","itemType","useDragType","_registerSource2","_toConsumableArray","_arrayWithoutHoles","iter","_iterableToArray","_nonIterableSpread","useOptionalFactory","arg","deps","memoDeps","useCollector","onUpdate","_useState2","useState","collected","setCollected","updateCollected","useCallback","nextValue","equal","useCollectedProps","collector","onCollect","_useCollector2","getHandlerId","useMonitorOutput","useConnectDragSource","useConnectDragPreview","useDrag","specArg","begin","useDragSourceMonitor","useDragSourceConnector","previewOptions","DropTargetImpl","useRegisteredDropTarget","useDropTarget","accept","useAccept","_registerTarget2","a","useConnectDropTarget","useDrop","useDropTargetMonitor","useDropTargetConnector","useDragLayer","_createForOfIteratorHelper","_objectSpread","_excluded2","_excluded3","_excluded4","exports","jsxRuntime","React","withScrolling","isEqual","reactDnd","reactDndHtml5Backend","reactVirtuoso","_interopDefaultLegacy","withScrolling__default","isEqual__default","defaultGetNodeKey","treeIndex","getReactElementText","parent","child","stringSearch","searchQuery","path","String","defaultSearchMethod","getNodeDataAtTreeIndexOrNextIndex","targetIndex","getNodeKey","_ref3$path","_ref3$lowerSiblingCou","lowerSiblingCounts","_ref3$ignoreCollapsed","ignoreCollapsed","_ref3$isPseudoRoot","isPseudoRoot","selfPath","expanded","nextIndex","childIndex","childCount","getDescendantCount","_ref4$ignoreCollapsed","walkDescendants","_ref5","callback","_ref5$isPseudoRoot","_ref5$parentNode","parentNode","_ref5$path","_ref5$lowerSiblingCou","mapDescendants","_ref6","_ref6$isPseudoRoot","_ref6$parentNode","_ref6$path","_ref6$lowerSiblingCou","nextNode","selfInfo","mapResult","walk","_ref9","treeData","_ref9$ignoreCollapsed","_ref10","_ref10$ignoreCollapse","toggleExpandedForAll","_ref11","_ref11$expanded","_ref12","_ref13","changeNodeAtPath","_ref14","newNode","_ref14$ignoreCollapse","RESULT_MISS","traverse","_ref15","_ref15$isPseudoRoot","currentTreeIndex","pathIndex","nextTreeIndex","removeNode","_ref17","removedNode","removedTreeIndex","_ref17$ignoreCollapse","_ref18","addNodeAtDepthAndIndex","_ref23","insertedTreeIndex","pathFragment","targetDepth","minimumTreeIndex","expandParent","_ref23$isPseudoRoot","isLastChild","currentDepth","_ref23$path","extraNodeProps","parentPath","insertIndex","newChildren","insertNode","_ref24","depth","_ref24$ignoreCollapse","_ref24$expandParent","insertResult","getFlatDataFromTree","_ref25","_ref25$ignoreCollapse","flattened","nodeInfo","isDescendant","older","younger","some","getDepth","reduce","deepest","Math","max","_ref27","searchMethod","searchFocusOffset","_ref27$expandAllMatch","expandAllMatchPaths","_ref27$expandFocusMat","expandFocusMatchPaths","matchCount","trav","_ref28","_ref28$isPseudoRoot","_ref28$path","matches","isSelfMatch","hasFocusMatch","extraInfo","hasChildren","match","classnames","classes","filter","defaultProps$3","isSearchMatch","isSearchFocus","toggleChildrenVisibility","buttons","className","style","draggedNode","title","subtitle","rowDirection","NodeRendererDefault$1","handle","_props","scaffoldBlockPxWidth","treeId","isOver","otherProps","nodeTitle","nodeSubtitle","rowDirectionClass","jsx","_","dropEffect","isDraggedDescendant","isLandingPadActive","buttonStyle","left","right","jsxs","height","onClick","width","opacity","btn","defaultProps$2","PlaceholderRendererDefault$1","_props2","defaultProps$1","swapFrom","swapDepth","swapLength","TreeNodeComponent","_React$Component","_step2","listIndex","rowHeight","_node","getPrevRow","_path","scaffoldBlockCount","scaffold","_iterator2","s","_step2$value","lowerSiblingCount","lineClass","highlightLineClass","f","calculatedRowHeight","Children","TreeNode","defaultProps","TreePlaceholder$1","_props3","rafId","nodeDragSourcePropInjection","propInjection","dragged","getTargetDepth","dropTargetProps","component","canNodeHaveChildren","maxDepth","blocksOffset","dropTargetDepth","rowAbove","min","dragSourceInitialDepth","relativePosition","getBoundingClientRect","leftShift","x","round","direction","draggedChildDepth","wrapTarget","el","treeRefcanDrop","dragHover","dndType","draggingTreeData","treeReftreeData","nodeDropTarget","cancelAnimationFrame","abovePath","aboveNode","prevPath","prevParent","prevTreeIndex","nextPath","nextParent","memoize","savedResult","savedArgsArray","savedKeysArray","keysArray","sort","argsArray","memoizedInsertNode","memoizedGetFlatDataFromTree","memoizedGetDescendantCount","treeIdCounter","mergeTheme","merged","theme","innerStyle","overridableDefaults","nodeContentRenderer","placeholderRenderer","slideRegionSize","treeNodeRenderer","_Object$keys","propKey","ReactSortableTree","_React$Component2","_super2","_ref29","prevState","_removeNode","instanceProps","draggedMinimumTreeIndex","draggedDepth","dragging","_ref30","_ref31","newDraggingTreeData","addedResult","expandedParentPath","getRows","_ref32","searchFocusTreeIndex","dropResult","shouldCopy","shouldCopyOnOutsideDrop","_ref33","copyNode","onChange","onMoveNode","moveNode","listRef","_mergeTheme","startDrag","nodeDragSource","wrapSource","treePlaceholderRenderer","placeholderDropTarget","_monitor$getItem","wrapPlaceholder","scrollZoneVirtualList","createScrollingComponent","forwardRef","classname","Virtuoso","vStrength","createVerticalStrength","hStrength","createHorizontalStrength","searchMatches","ignoreOneTreeUpdate","handleDndMonitorChange","loadLazyChildren","stateUpdate","search","clearMonitorSubscription","onDragStateChanged","_this3","setTimeout","_ref34","targetNode","_ref35","onVisibilityToggle","_ref36","_insertNode","nextParentNode","row","_ref37","matchKeys","_mergeTheme2","generateNodeProps","TreeNodeRenderer","NodeContentRenderer","nodeKey","callbackParams","nodeProps","rowCanDrag","sharedProps","rows","_this4","_mergeTheme3","_this$state","swapTo","fromIndex","toIndex","count","rowsWithoutMoved","slideRows","_step3","_iterator3","_step3$value","scrollToIndex","align","list","containerStyle","Placeholder","PlaceholderContent","ScrollZoneVirtualList","data","verticalStrength","horizontalStrength","itemContent","renderRow","seekIndex","expand","singleSearch","searchFinishCallback","onlyExpandSearchedNodes","newState","_find","expandedTreeData","_ref38","loadCollapsedLazyChildren","childrenArray","_ref39","oldNode","isTreeDataEqual","overscan","SortableTreeWithoutDndContext","_ref40","SortableTree$1","HTML5Backend","SortableTreeWithExternalManager","addNodeUnderParent","_ref21","_ref21$parentKey","parentKey","_ref21$ignoreCollapse","_ref21$expandParent","_ref21$addAsFirstChil","addAsFirstChild","hasBeenAdded","changedTreeData","_ref22","getNodeAtPath","_ref19","foundNodeInfo","_ref19$ignoreCollapse","_ref20","_unused","getTreeFromFlatData","_ref26","flatData","_ref26$getKey","getKey","id","_ref26$getParentKey","getParentKey","parentId","_ref26$rootKey","rootKey","_step","childrenToParents","_iterator","getVisibleNodeCount","_ref7","total","currentNode","getVisibleNodeInfoAtIndex","_ref8","removeNodeAtPath","_ref16","_ref16$ignoreCollapse","unsupportedIterableToArray","module","allowArrayLike","it","F","normalCompletion","didErr","step","_e2","__esModule","react","intBetween","val","floor","_buffer","point","w","y","h","buffer","onScrollChange","strengthMultiplier","WrappedComponent","container","wrappedInstance","animationFrameID","useRef","scaleX","scaleY","attached","updateScrolling","func","timeFrame","lastTime","now","Date","throttle","evt","_container$getBoundin","box","top","coords","clientX","clientY","getCoords","startScrolling","handleEvent","document","body","addEventListener","handleMonitorChange","removeEventListener","stopScrolling","tick","_container","scrollLeft","scrollTop","scrollWidth","scrollHeight","clientWidth","clientHeight","newLeft","newTop","other","ScrollingComponent","_asapJs","_typesJs","_asapQueueJs","_taskFactoryJs","asap","asapQueue","enqueueTask","taskFactory","makeRequestCallFromMutationObserver","scope","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","timeoutHandle","handleTimer","intervalHandle","setInterval","clearTimeout","clearInterval","toggle","observer","createTextNode","observe","characterData","release","b","RegExp","flags","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","arrayTag","boolTag","dateTag","errorTag","funcTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","array","predicate","mapToArray","size","setToArray","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","uid","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Uint8Array","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","clear","entry","ListCache","MapCache","SetCache","values","__data__","add","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","iteratee","baseTimes","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","baseIsEqual","bitmask","customizer","stack","object","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","message","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","baseKeys","Ctor","isPrototype","arrLength","seen","arrValue","othIndex","has","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","isKeyable","getValue","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","isLength","baseUnary","fn","EnterLeaveCounter","isNodeInDocument","enteringNode","previousLength","entered","itemsA","itemsB","insertItem","union","contains","leavingNode","items","isFirefox","navigator","userAgent","isSafari","safari","MonotonicInterpolant","xs","ys","indexes","dx","dy","dys","dxs","ms","c1s","m2","mNext","dxNext","common","m","c2s","c3s","_i3","c1","invDx","_common","mid","low","high","xHere","diff","diffSq","getNodeClientOffset","parentElement","_el$getBoundingClient","getEventClientOffset","getDragPreviewOffset","sourceNode","clientOffset","anchorPoint","offsetPoint","isImage","_document$documentEle","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","_getDragPreviewSize","dragPreviewWidth","dragPreviewHeight","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","_nativeTypesConfig","FILE","URL","TEXT","HTML","getDataFromDataTransfer","dataTransfer","typesToTry","defaultValue","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","exposeProperties","files","_dataTransfer","matchesTypes","html","_dataTransfer2","urls","split","_dataTransfer3","text","_dataTransfer4","NativeDragSource","config","initializeExposedProperties","property","console","warn","newProperties","defineProperties","matchNativeItemType","dataTransferTypes","types","nativeItemType","OptionsReader","globalContext","optionsArgs","_this$globalContext","_this$optionsArgs","rootElement","ownKeys","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","getOwnPropertyDescriptors","emptyImage","HTML5BackendImpl","sourceNodes","isDraggingNativeItem","actions","currentNativeHandle","currentNativeSource","currentDragSourceNode","clearCurrentDragSourceNode","dragStartSourceIds","defaultPrevented","publishSource","nativeType","setDragImage","sourcePreviewNodes","_this$getCurrentSourc","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","setCurrentDragSourceNode","captureDraggingState","publishDragSource","beginDragNativeItem","hasAttribute","preventDefault","dragEnterTargetIds","enterLeaveCounter","enter","altKeyPressed","altKey","getCurrentDropEffect","dragOverTargetIds","lastClientOffset","hoverRafId","leave","endDragNativeItem","_this$currentNativeSo","dropTargetIds","loadDataTransfer","reset","dragDrop","tagName","isContentEditable","getActions","_this$dragStartSource","_this$dragOverTargetI","sourcePreviewNodeOptions","sourceNodeOptions","__isReactDndBackendSetUp","addEventListeners","_this$window","removeEventListeners","asyncEndDragFrameId","delete","handleDragStart","handleSelectStart","setAttribute","handleDragEnter","handleDragOver","handleDrop","handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture","getCurrentSourceNodeOptions","createNativeDragSource","_this5","mouseMoveTimeoutTimer","_this5$rootElement","endDragIfSourceWasRemovedFromDOM","_this$window2","unshift","getEmptyImage","compose","thrush","proc","curry2to1","arg1","arg2","curry1to0","tap","tup","always","joinProc","procs","_len2","_key2","subscribe","emitter","subscription","publish","publisher","depot","handleNext","unsub","stream","subscriptions","statefulStream","initial","innerSubject","streamFromEmitter","statefulStreamFromEmitter","combineOperators","operators","subscriber","reduceRight","pipe","project","defaultComparator","previous","distinctUntilChanged","comparator","mapTo","scanner","skip","times","throttleTime","interval","currentValue","timeout","debounceTime","withLatestFrom","sources","_len3","_key3","called","pendingCall","allCalled","pow","bit","prevCalled","merge","duc","combineLatest","emitters","system","dependencies","_temp","singleton","systemToComponent","systemSpec","Root","requiredPropNames","required","optionalPropNames","optional","methodNames","methods","eventNames","events","Context","applyPropsToSystem","_createForOfIteratorHelperLoose","requiredPropName","optionalPropName","buildEventHandlers","handlers","eventName","currentSubscription","cleanup","eventHandler","propsWithChildren","_useState","singletons","_init","init","useImperativeHandle","acc","methodName","buildMethods","createElement","prop","omit","usePublisher","useEmitterValue","_useState3","setValue","useEmitter","r","DEBUG","INFO","WARN","ERROR","g","v","log","globalThis","VIRTUOSO_LOG_LEVEL","logLevel","S","ResizeObserver","offsetParent","unobserve","callbackRef","I","l","dataset","parseInt","u","parseFloat","knownSize","c","endIndex","startIndex","virtuosoScroller","firstElementChild","viewportType","pageYOffset","innerHeight","viewportHeight","getComputedStyle","rowGap","T","abs","passive","scrollerRef","scrollByCallback","scrollBy","scrollToCallback","behavior","ceil","scrollTo","scrollContainerState","headerHeight","fixedHeaderHeight","footerHeight","smoothScrollTargetReached","react18ConcurrentRendering","statefulScrollTop","deviation","scrollingInProgress","lvl","E","k","H","R","L","P","U","M","O","Infinity","z","N","D","B","V","A","W","start","G","j","recalcInProgress","K","Y","Z","J","offsetTree","lastIndex","lastOffset","lastSize","$","sizeTree","groupOffsetTree","Q","groupIndices","X","groupIndex","tt","et","nt","rt","changed","sizes","prev","firstItemIndex","ranges","prevIndex","prevSize","totalCount","sizeRanges","defaultItemSize","fixedItemSize","unshiftWith","shiftWith","shiftWithOffset","beforeUnshiftWith","gap","listRefresh","statefulTotalCount","trackItemSizes","itemSize","ot","at","location","topListHeight","lt","st","atBottom","notAtBottomBecause","offsetBottom","ut","scrollTopDelta","atBottomBecause","jump","prevScrollTop","isScrolling","isAtTop","isAtBottom","atBottomState","atTopStateChange","atBottomStateChange","scrollDirection","atBottomThreshold","atTopThreshold","scrollVelocity","lastJumpDueToItemResize","ct","propsReady","didMount","mt","scrolledToInitialItem","initialTopMostItemIndex","dt","ft","shouldFollow","followOutputBehavior","refreshed","followOutput","autoscrollToBottom","pt","ht","groupCounts","topItemsIndexes","gt","vt","St","main","reverse","It","Ct","listBoundary","increaseViewportBy","visibleRange","Tt","topItems","offsetTop","bottom","wt","originalIndex","xt","bt","listState","endReached","startReached","rangeChanged","itemsRendered","yt","initialItemCount","Et","exit","change","isSeeking","scrollSeekConfiguration","scrollSeekRangeChanged","Ht","topItemCount","Rt","totalListHeight","totalListHeightChanged","Lt","kt","zt","amount","Bt","initialScrollTop","Ft","alignToBottom","paddingTopAddition","Pt","useWindowScroll","customScrollParent","windowScrollContainerState","windowViewportRect","windowScrollTo","Ot","Mt","scrollIntoView","Vt","Ut","At","visibleHeight","fixedItemHeight","defaultItemHeight","Wt","position","Nt","visibleWidth","Dt","Gt","_t","jt","Kt","groupContent","components","computeItemKey","headerFooterTag","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","Yt","qt","group","itemHeight","scrollingStateChange","adjustForPrependedItems","maxHeightCacheSize","footer","header","HeaderContainer","FooterContainer","ItemContainer","ScrollContainer","GroupContainer","ListContainer","emptyComponent","scrollSeek","placeholder","Zt","Jt","zIndex","overflowAnchor","$t","Qt","showTopList","fe","de","pe","boxSizing","paddingTop","paddingBottom","marginTop","ne","Xt","outline","overflowY","WebkitOverflowScrolling","te","ee","re","oe","ie","tabIndex","ae","le","se","ue","ce","ge","he","me","ve","itemWidth","Se","Ie","Ce","Te","we","xe","be","ye","column","Ee","Le","He","Re","viewportDimensions","itemDimensions","gridState","ke","ze","itemClassName","listClassName","Be","Fe","Ae","Ue","firstChild","Ge","columnGap","Pe","Oe","Me","De","Ne","Ve","We","fixedHeaderContent","TableComponent","TableHeadComponent","TableBodyComponent","TableRowComponent","FillerRow","je","Ke","Ye","padding","border","qe","tn","Xe","en","Ze","Je","$e","rn","nn","borderSpacing","Qe","on","an","ln","sn","INIT_COORDS","BEGIN_DRAG","PUBLISH_DRAG_SOURCE","HOVER","DROP","END_DRAG","setClientOffset","sourceClientOffset","payload","without","xor","ResetCoordinatesAction","createBeginDrag","sourceIds","_options$publishSourc","dispatch","verifyInvariants","getDraggableSource","verifyGetSourceClientOffsetIsFunction","getSource","verifyItemIsObject","pinSource","getSourceType","createPublishDragSource","matchesType","targetType","draggedItemType","createHover","targetIdsArg","verifyTargetIdsIsArray","targetIds","checkInvariants","removeNonMatchingTargetIds","hoverAllTargets","lastIndexOf","getTarget","getTargetType","createDrop","getDroppableTargets","determineDropResult","verifyDropResultType","createEndDrag","verifyIsDragging","unpinSource","DragDropManagerImpl","store","shouldSetUp","getState","isSetUp","setup","teardown","handleRefCountChange","createDragDropActions","boundActions","actionCreator","formatProdErrorMessage","code","$$observable","observable","randomString","random","substring","ActionTypes","INIT","REPLACE","PROBE_UNKNOWN_ACTION","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","isSubscribed","listeners","replaceReducer","nextReducer","outerSubscribe","observeState","strictEquality","areCoordsEqual","offsetA","offsetB","areArraysEqual","initialState","initialSourceClientOffset","initialClientOffset","ADD_SOURCE","ADD_TARGET","REMOVE_SOURCE","REMOVE_TARGET","NONE","ALL","areDirty","dirtyIds","_action$payload","_action$payload$targe","_action$payload$prevT","prevTargetIds","prevInnermostTargetId","innermostTargetId","dirtyHandlerIds","dragOffset","dragOperation","stateId","subtract","__IS_NONE__","__IS_ALL__","HandlerRole","DragDropMonitorImpl","prevStateId","currentStateId","previousState","shallow","_getSourceClientOffset","_getDifferenceFromInitialOffset","nextUniqueId","validateType","getNextHandlerId","role","SOURCE","TARGET","parseRoleFromHandlerId","mapContainsValue","searchValue","isDone","_entries$next","HandlerRegistryImpl","validateSourceContract","addHandler","_addSource","validateTargetContract","_addTarget","dragSources","dropTargets","includePinned","isSourceId","isPinned","pinnedSourceId","pinnedSource","isTargetId","_removeSource","_removeTarget","backendFactory","backendOptions","makeStoreInstance","receiveBackend","reduxDevTools","__REDUX_DEVTOOLS_EXTENSION__","instanceId"],"mappings":"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","file":"static/js/8.5e435ccd.chunk.js","sourcesContent":["/**\n * `@virtuoso.dev/react-urx` exports the [[systemToComponent]] function.\n * It wraps urx systems in to UI **logic provider components**,\n * mapping the system input and output streams to the component input / output points.\n *\n * ### Simple System wrapped as React Component\n *\n * ```tsx\n * const sys = system(() => {\n *   const foo = statefulStream(42)\n *   return { foo }\n * })\n *\n * const { Component: MyComponent, useEmitterValue } = systemToComponent(sys, {\n *   required: { fooProp: 'foo' },\n * })\n *\n * const Child = () => {\n *   const foo = useEmitterValue('foo')\n *   return <div>{foo}</div>\n * }\n *\n * const App = () => {\n *   return <Comp fooProp={42}><Child /><Comp>\n * }\n * ```\n *\n * @packageDocumentation\n */\nimport * as React from 'react'\nimport {\n  ComponentType,\n  createContext,\n  createElement,\n  forwardRef,\n  ForwardRefExoticComponent,\n  ReactNode,\n  RefAttributes,\n  useContext,\n  useImperativeHandle,\n  useState,\n  useCallback,\n} from 'react'\nimport {\n  AnySystemSpec,\n  reset,\n  curry1to0,\n  curry2to1,\n  Emitter,\n  SR,\n  eventHandler,\n  getValue,\n  publish,\n  Publisher,\n  init,\n  StatefulStream,\n  Stream,\n  subscribe,\n  always,\n  tap,\n} from '@virtuoso.dev/urx'\n\n/** @internal */\ninterface Dict<T> {\n  [key: string]: T\n}\n\n/** @internal */\nfunction omit<O extends Dict<any>, K extends readonly string[]>(keys: K, obj: O): Omit<O, K[number]> {\n  var result = {} as Dict<any>\n  var index = {} as Dict<1>\n  var idx = 0\n  var len = keys.length\n\n  while (idx < len) {\n    index[keys[idx]] = 1\n    idx += 1\n  }\n\n  for (var prop in obj) {\n    if (!index.hasOwnProperty(prop)) {\n      result[prop] = obj[prop]\n    }\n  }\n\n  return result as any\n}\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\n/** @internal */\nexport type Observable<T> = Emitter<T> | Publisher<T>\n\n/**\n * Describes the mapping between the system streams and the component properties.\n * Each property uses the keys as the names of the properties and the values as the corresponding stream names.\n * @typeParam SS the type of the system.\n */\nexport interface SystemPropsMap<SS extends AnySystemSpec, K = keyof SR<SS>, D = { [key: string]: K }> {\n  /**\n   * Specifies the required component properties.\n   */\n  required?: D\n  /**\n   * Specifies the optional component properties.\n   */\n  optional?: D\n  /**\n   * Specifies the component methods, if any. Streams are converted to methods with a single argument.\n   * When invoked, the method publishes the value of the argument to the specified stream.\n   */\n  methods?: D\n  /**\n   * Specifies the component \"event\" properties, if any.\n   * Event properties accept callback functions which get executed when the stream emits a new value.\n   */\n  events?: D\n}\n\n/** @internal */\nexport type PropsFromPropMap<E extends AnySystemSpec, M extends SystemPropsMap<E>> = {\n  [K in Extract<keyof M['required'], string>]: M['required'][K] extends string\n    ? SR<E>[M['required'][K]] extends Observable<infer R>\n      ? R\n      : never\n    : never\n} &\n  {\n    [K in Extract<keyof M['optional'], string>]?: M['optional'][K] extends string\n      ? SR<E>[M['optional'][K]] extends Observable<infer R>\n        ? R\n        : never\n      : never\n  } &\n  {\n    [K in Extract<keyof M['events'], string>]?: M['events'][K] extends string\n      ? SR<E>[M['events'][K]] extends Observable<infer R>\n        ? (value: R) => void\n        : never\n      : never\n  }\n\n/** @internal */\nexport type MethodsFromPropMap<E extends AnySystemSpec, M extends SystemPropsMap<E>> = {\n  [K in Extract<keyof M['methods'], string>]: M['methods'][K] extends string\n    ? SR<E>[M['methods'][K]] extends Observable<infer R>\n      ? (value: R) => void\n      : never\n    : never\n}\n\n/**\n * Used to correctly specify type refs for system components\n *\n * ```tsx\n * const s = system(() => { return { a: statefulStream(0) } })\n * const { Component } = systemToComponent(s)\n *\n * const App = () => {\n *  const ref = useRef<RefHandle<typeof Component>>()\n *  return <Component ref={ref} />\n * }\n * ```\n *\n * @typeParam T the type of the component\n */\nexport type RefHandle<T> = T extends ForwardRefExoticComponent<RefAttributes<infer Handle>> ? Handle : never\n\n/**\n * Converts a system spec to React component by mapping the system streams to component properties, events and methods. Returns hooks for querying and modifying\n * the system streams from the component's child components.\n * @param systemSpec The return value from a [[system]] call.\n * @param map The streams to props / events / methods mapping Check [[SystemPropsMap]] for more details.\n * @param Root The optional React component to render. By default, the resulting component renders nothing, acting as a logical wrapper for its children.\n * @returns an object containing the following:\n *  - `Component`: the React component.\n *  - `useEmitterValue`: a hook that lets child components use values emitted from the specified output stream.\n *  - `useEmitter`: a hook that calls the provided callback whenever the specified stream emits a value.\n *  - `usePublisher`: a hook which lets child components publish values to the specified stream.\n *  <hr />\n */\nexport function systemToComponent<SS extends AnySystemSpec, M extends SystemPropsMap<SS>, S extends SR<SS>, R>(\n  systemSpec: SS,\n  map: M,\n  Root?: R\n) {\n  const requiredPropNames = Object.keys(map.required || {})\n  const optionalPropNames = Object.keys(map.optional || {})\n  const methodNames = Object.keys(map.methods || {})\n  const eventNames = Object.keys(map.events || {})\n  const Context = createContext<SR<SS>>(({} as unknown) as any)\n\n  type RootCompProps = R extends ComponentType<infer RP> ? RP : { children?: ReactNode }\n\n  type CompProps = PropsFromPropMap<SS, M> & RootCompProps\n\n  type CompMethods = MethodsFromPropMap<SS, M>\n\n  function applyPropsToSystem(system: ReturnType<SS['constructor']>, props: any) {\n    if (system['propsReady']) {\n      publish(system['propsReady'], false)\n    }\n\n    for (const requiredPropName of requiredPropNames) {\n      const stream = system[map.required![requiredPropName]]\n      publish(stream, (props as any)[requiredPropName])\n    }\n\n    for (const optionalPropName of optionalPropNames) {\n      if (optionalPropName in props) {\n        const stream = system[map.optional![optionalPropName]]\n        publish(stream, (props as any)[optionalPropName])\n      }\n    }\n\n    if (system['propsReady']) {\n      publish(system['propsReady'], true)\n    }\n  }\n\n  function buildMethods(system: ReturnType<SS['constructor']>) {\n    return methodNames.reduce((acc, methodName) => {\n      ;(acc as any)[methodName] = (value: any) => {\n        const stream = system[map.methods![methodName]]\n        publish(stream, value)\n      }\n      return acc\n    }, {} as CompMethods)\n  }\n\n  function buildEventHandlers(system: ReturnType<SS['constructor']>) {\n    return eventNames.reduce((handlers, eventName) => {\n      handlers[eventName] = eventHandler(system[map.events![eventName]])\n      return handlers\n    }, {} as { [key: string]: Emitter<any> })\n  }\n\n  /**\n   * A React component generated from an urx system\n   */\n  const Component = forwardRef<CompMethods, CompProps>((propsWithChildren, ref) => {\n    const { children, ...props } = propsWithChildren as any\n\n    const [system] = useState(() => {\n      return tap(init(systemSpec), system => applyPropsToSystem(system, props))\n    })\n\n    const [handlers] = useState(curry1to0(buildEventHandlers, system))\n\n    useIsomorphicLayoutEffect(() => {\n      for (const eventName of eventNames) {\n        if (eventName in props) {\n          subscribe(handlers[eventName], props[eventName])\n        }\n      }\n      return () => {\n        Object.values(handlers).map(reset)\n      }\n    }, [props, handlers, system])\n\n    useIsomorphicLayoutEffect(() => {\n      applyPropsToSystem(system, props)\n    })\n\n    useImperativeHandle(ref, always(buildMethods(system)))\n\n    return createElement(\n      Context.Provider,\n      { value: system },\n      Root\n        ? createElement(\n            (Root as unknown) as ComponentType,\n            omit([...requiredPropNames, ...optionalPropNames, ...eventNames], props),\n            children\n          )\n        : children\n    )\n  })\n\n  const usePublisher = <K extends keyof S>(key: K) => {\n    return useCallback(curry2to1(publish, React.useContext(Context)[key]), [key]) as (\n      value: S[K] extends Stream<infer R> ? R : never\n    ) => void\n  }\n\n  /**\n   * Returns the value emitted from the stream.\n   */\n  const useEmitterValue = <K extends keyof S, V = S[K] extends StatefulStream<infer R> ? R : never>(key: K) => {\n    const context = useContext(Context)\n    const source: StatefulStream<V> = context[key]\n\n    const [value, setValue] = useState(curry1to0(getValue, source))\n\n    useIsomorphicLayoutEffect(\n      () =>\n        subscribe(source, (next: V) => {\n          if (next !== value) {\n            setValue(always(next))\n          }\n        }),\n      [source, value]\n    )\n\n    return value\n  }\n\n  const useEmitter = <K extends keyof S, V = S[K] extends Stream<infer R> ? R : never>(key: K, callback: (value: V) => void) => {\n    const context = useContext(Context)\n    const source: Stream<V> = context[key]\n    useIsomorphicLayoutEffect(() => subscribe(source, callback), [callback, source])\n  }\n\n  return {\n    Component,\n    usePublisher,\n    useEmitterValue,\n    useEmitter,\n  }\n}\n","export const mounts = [\n  {\n    key: 'title',\n    getter: swal => swal.getTitle(),\n  },\n  {\n    key: 'html',\n    getter: swal => swal.getHtmlContainer(),\n  },\n  {\n    key: 'confirmButtonText',\n    getter: swal => swal.getConfirmButton(),\n  },\n  {\n    key: 'denyButtonText',\n    getter: swal => swal.getDenyButton(),\n  },\n  {\n    key: 'cancelButtonText',\n    getter: swal => swal.getCancelButton(),\n  },\n  {\n    key: 'footer',\n    getter: swal => swal.getFooter(),\n  },\n  {\n    key: 'closeButtonHtml',\n    getter: swal => swal.getCloseButton(),\n  },\n  {\n    key: 'iconHtml',\n    getter: swal => swal.getIcon().querySelector('.swal2-icon-content'),\n  },\n  {\n    key: 'loaderHtml',\n    getter: swal => swal.getLoader(),\n  },\n]\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { mounts } from './mounts'\n\nconst noop = () => {} // eslint-disable-line @typescript-eslint/no-empty-function\n\nexport default function withReactContent (ParentSwal) {\n  /* Returns `params` separated into a tuple of `reactParams` (the React params that need to be rendered)\n  and`otherParams` (all the other parameters, with any React params replaced with a space ' ') */\n  function extractReactParams (params) {\n    const reactParams = {}\n    const otherParams = {}\n    const mountKeys = mounts.map(mount => mount.key)\n    Object.entries(params).forEach(([key, value]) => {\n      if (mountKeys.includes(key) && React.isValidElement(value)) {\n        reactParams[key] = value\n        otherParams[key] = ' '\n      } else {\n        otherParams[key] = value\n      }\n    })\n    return [reactParams, otherParams]\n  }\n  function render (swal, reactParams) {\n    Object.entries(reactParams).forEach(([key, value]) => {\n      const mount = mounts.find(mount => mount.key === key)\n      const domElement = mount.getter(ParentSwal)\n      ReactDOM.render(value, domElement)\n      swal.__mountedDomElements.push(domElement)\n    })\n  }\n\n  function unrender (swal) {\n    swal.__mountedDomElements.forEach(domElement => {\n      ReactDOM.unmountComponentAtNode(domElement)\n    })\n    swal.__mountedDomElements = []\n  }\n\n  return class extends ParentSwal {\n    static argsToParams (args) {\n      if (React.isValidElement(args[0]) || React.isValidElement(args[1])) {\n        const params = {}\n        ;['title', 'html', 'icon'].forEach((name, index) => {\n          if (args[index] !== undefined) {\n            params[name] = args[index]\n          }\n        })\n        return params\n      } else {\n        return ParentSwal.argsToParams(args)\n      }\n    }\n\n    _main (params, mixinParams) {\n      this.__mountedDomElements = []\n      this.__params = Object.assign({}, mixinParams, params)\n      const [reactParams, otherParams] = extractReactParams(this.__params)\n      const superDidOpen = otherParams.didOpen || noop\n      const superDidDestroy = otherParams.didDestroy || noop\n      return super._main(\n        Object.assign({}, otherParams, {\n          didOpen: popup => {\n            render(this, reactParams)\n            superDidOpen(popup)\n          },\n          didDestroy: popup => {\n            superDidDestroy(popup)\n            unrender(this)\n          },\n        }),\n      )\n    }\n\n    update (params) {\n      Object.assign(this.__params, params)\n      unrender(this)\n      const [reactParams, otherParams] = extractReactParams(this.__params)\n      super.update(otherParams)\n      render(this, reactParams)\n    }\n  }\n}\n","import { createContext } from 'react';\n/**\n * Create the React Context\n */\n\nexport var DndContext = createContext({\n  dragDropManager: undefined\n});","var _excluded = [\"children\"];\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useEffect, memo } from 'react';\nimport { createDragDropManager } from 'dnd-core';\nimport { DndContext } from './DndContext';\nvar refCount = 0;\nvar INSTANCE_SYM = Symbol.for('__REACT_DND_CONTEXT_INSTANCE__');\n/**\n * A React component that provides the React-DnD context\n */\n\nexport var DndProvider = memo(function DndProvider(_ref) {\n  var children = _ref.children,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  var _getDndContextValue = getDndContextValue(props),\n      _getDndContextValue2 = _slicedToArray(_getDndContextValue, 2),\n      manager = _getDndContextValue2[0],\n      isGlobalInstance = _getDndContextValue2[1]; // memoized from props\n\n  /**\n   * If the global context was used to store the DND context\n   * then where theres no more references to it we should\n   * clean it up to avoid memory leaks\n   */\n\n\n  useEffect(function () {\n    if (isGlobalInstance) {\n      var context = getGlobalContext();\n      ++refCount;\n      return function () {\n        if (--refCount === 0) {\n          context[INSTANCE_SYM] = null;\n        }\n      };\n    }\n  }, []);\n  return _jsx(DndContext.Provider, Object.assign({\n    value: manager\n  }, {\n    children: children\n  }), void 0);\n});\n\nfunction getDndContextValue(props) {\n  if ('manager' in props) {\n    var _manager = {\n      dragDropManager: props.manager\n    };\n    return [_manager, false];\n  }\n\n  var manager = createSingletonDndContext(props.backend, props.context, props.options, props.debugMode);\n  var isGlobalInstance = !props.context;\n  return [manager, isGlobalInstance];\n}\n\nfunction createSingletonDndContext(backend) {\n  var context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getGlobalContext();\n  var options = arguments.length > 2 ? arguments[2] : undefined;\n  var debugMode = arguments.length > 3 ? arguments[3] : undefined;\n  var ctx = context;\n\n  if (!ctx[INSTANCE_SYM]) {\n    ctx[INSTANCE_SYM] = {\n      dragDropManager: createDragDropManager(backend, context, options, debugMode)\n    };\n  }\n\n  return ctx[INSTANCE_SYM];\n}\n\nfunction getGlobalContext() {\n  return typeof global !== 'undefined' ? global : window;\n}","/* eslint-disable no-restricted-globals, @typescript-eslint/ban-ts-comment, @typescript-eslint/no-unused-vars, @typescript-eslint/no-non-null-assertion */\nimport type { Task } from './types.js'\nimport { makeRequestCall, makeRequestCallFromTimer } from './makeRequestCall.js'\n\nexport class AsapQueue {\n\tprivate queue: Task[] = []\n\t// We queue errors to ensure they are thrown in right order (FIFO).\n\t// Array-as-queue is good enough here, since we are just dealing with exceptions.\n\tprivate pendingErrors: any[] = []\n\t// Once a flush has been requested, no further calls to `requestFlush` are\n\t// necessary until the next `flush` completes.\n\t// @ts-ignore\n\tprivate flushing = false\n\t// `requestFlush` is an implementation-specific method that attempts to kick\n\t// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n\t// the event queue before yielding to the browser's own event loop.\n\tprivate requestFlush: () => void\n\n\tprivate requestErrorThrow: () => void\n\t// The position of the next task to execute in the task queue. This is\n\t// preserved between calls to `flush` so that it can be resumed if\n\t// a task throws an exception.\n\tprivate index = 0\n\t// If a task schedules additional tasks recursively, the task queue can grow\n\t// unbounded. To prevent memory exhaustion, the task queue will periodically\n\t// truncate already-completed tasks.\n\tprivate capacity = 1024\n\n\tpublic constructor() {\n\t\t// `requestFlush` requests that the high priority event queue be flushed as\n\t\t// soon as possible.\n\t\t// This is useful to prevent an error thrown in a task from stalling the event\n\t\t// queue if the exception handled by Node.js’s\n\t\t// `process.on(\"uncaughtException\")` or by a domain.\n\n\t\t// `requestFlush` is implemented using a strategy based on data collected from\n\t\t// every available SauceLabs Selenium web driver worker at time of writing.\n\t\t// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\t\tthis.requestFlush = makeRequestCall(this.flush)\n\t\tthis.requestErrorThrow = makeRequestCallFromTimer(() => {\n\t\t\t// Throw first error\n\t\t\tif (this.pendingErrors.length) {\n\t\t\t\tthrow this.pendingErrors.shift()\n\t\t\t}\n\t\t})\n\t}\n\n\t// Use the fastest means possible to execute a task in its own turn, with\n\t// priority over other events including IO, animation, reflow, and redraw\n\t// events in browsers.\n\t//\n\t// An exception thrown by a task will permanently interrupt the processing of\n\t// subsequent tasks. The higher level `asap` function ensures that if an\n\t// exception is thrown by a task, that the task queue will continue flushing as\n\t// soon as possible, but if you use `rawAsap` directly, you are responsible to\n\t// either ensure that no exceptions are thrown from your task, or to manually\n\t// call `rawAsap.requestFlush` if an exception is thrown.\n\tpublic enqueueTask(task: Task): void {\n\t\tconst { queue: q, requestFlush } = this\n\t\tif (!q.length) {\n\t\t\trequestFlush()\n\t\t\tthis.flushing = true\n\t\t}\n\t\t// Equivalent to push, but avoids a function call.\n\t\tq[q.length] = task\n\t}\n\n\t// The flush function processes all tasks that have been scheduled with\n\t// `rawAsap` unless and until one of those tasks throws an exception.\n\t// If a task throws an exception, `flush` ensures that its state will remain\n\t// consistent and will resume where it left off when called again.\n\t// However, `flush` does not make any arrangements to be called again if an\n\t// exception is thrown.\n\tprivate flush = () => {\n\t\tconst { queue: q } = this\n\t\twhile (this.index < q.length) {\n\t\t\tconst currentIndex = this.index\n\t\t\t// Advance the index before calling the task. This ensures that we will\n\t\t\t// begin flushing on the next task the task throws an error.\n\t\t\tthis.index++\n\t\t\tq[currentIndex]!.call()\n\t\t\t// Prevent leaking memory for long chains of recursive calls to `asap`.\n\t\t\t// If we call `asap` within tasks scheduled by `asap`, the queue will\n\t\t\t// grow, but to avoid an O(n) walk for every task we execute, we don't\n\t\t\t// shift tasks off the queue after they have been executed.\n\t\t\t// Instead, we periodically shift 1024 tasks off the queue.\n\t\t\tif (this.index > this.capacity) {\n\t\t\t\t// Manually shift all values starting at the index back to the\n\t\t\t\t// beginning of the queue.\n\t\t\t\tfor (\n\t\t\t\t\tlet scan = 0, newLength = q.length - this.index;\n\t\t\t\t\tscan < newLength;\n\t\t\t\t\tscan++\n\t\t\t\t) {\n\t\t\t\t\tq[scan] = q[scan + this.index]!\n\t\t\t\t}\n\t\t\t\tq.length -= this.index\n\t\t\t\tthis.index = 0\n\t\t\t}\n\t\t}\n\t\tq.length = 0\n\t\tthis.index = 0\n\t\tthis.flushing = false\n\t}\n\n\t// In a web browser, exceptions are not fatal. However, to avoid\n\t// slowing down the queue of pending tasks, we rethrow the error in a\n\t// lower priority turn.\n\tpublic registerPendingError = (err: any) => {\n\t\tthis.pendingErrors.push(err)\n\t\tthis.requestErrorThrow()\n\t}\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// // its existence.\n// rawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n","import type { Task } from './types.js'\nimport { RawTask } from './RawTask.js'\n\nexport class TaskFactory {\n\tprivate freeTasks: RawTask[] = []\n\n\tpublic constructor(private onError: (err: any) => void) {}\n\n\tpublic create(task: () => void): Task {\n\t\tconst tasks = this.freeTasks\n\t\tconst t = tasks.length\n\t\t\t? (tasks.pop() as RawTask)\n\t\t\t: new RawTask(this.onError, (t) => (tasks[tasks.length] = t))\n\t\tt.task = task\n\t\treturn t\n\t}\n}\n","import { useEffect, memo } from 'react';\n/**\n * A utility for rendering a drag preview image\n */\n\nexport var DragPreviewImage = memo(function DragPreviewImage(_ref) {\n  var connect = _ref.connect,\n      src = _ref.src;\n  useEffect(function () {\n    if (typeof Image === 'undefined') return;\n    var connected = false;\n    var img = new Image();\n    img.src = src;\n\n    img.onload = function () {\n      connect(img);\n      connected = true;\n    };\n\n    return function () {\n      if (connected) {\n        connect(null);\n      }\n    };\n  });\n  return null;\n});","export function registerTarget(type, target, manager) {\n  var registry = manager.getRegistry();\n  var targetId = registry.addTarget(type, target);\n  return [targetId, function () {\n    return registry.removeTarget(targetId);\n  }];\n}\nexport function registerSource(type, source, manager) {\n  var registry = manager.getRegistry();\n  var sourceId = registry.addSource(type, source);\n  return [sourceId, function () {\n    return registry.removeSource(sourceId);\n  }];\n}","import { invariant } from '@react-dnd/invariant';\nimport { cloneElement, isValidElement } from 'react';\n\nfunction throwIfCompositeComponentElement(element) {\n  // Custom components can no longer be wrapped directly in React DnD 2.0\n  // so that we don't need to depend on findDOMNode() from react-dom.\n  if (typeof element.type === 'string') {\n    return;\n  }\n\n  var displayName = element.type.displayName || element.type.name || 'the component';\n  throw new Error('Only native element nodes can now be passed to React DnD connectors.' + \"You can either wrap \".concat(displayName, \" into a <div>, or turn it into a \") + 'drag source or a drop target itself.');\n}\n\nfunction wrapHookToRecognizeElement(hook) {\n  return function () {\n    var elementOrNode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    // When passed a node, call the hook straight away.\n    if (!isValidElement(elementOrNode)) {\n      var node = elementOrNode;\n      hook(node, options); // return the node so it can be chained (e.g. when within callback refs\n      // <div ref={node => connectDragSource(connectDropTarget(node))}/>\n\n      return node;\n    } // If passed a ReactElement, clone it and attach this function as a ref.\n    // This helps us achieve a neat API where user doesn't even know that refs\n    // are being used under the hood.\n\n\n    var element = elementOrNode;\n    throwIfCompositeComponentElement(element); // When no options are passed, use the hook directly\n\n    var ref = options ? function (node) {\n      return hook(node, options);\n    } : hook;\n    return cloneWithRef(element, ref);\n  };\n}\n\nexport function wrapConnectorHooks(hooks) {\n  var wrappedHooks = {};\n  Object.keys(hooks).forEach(function (key) {\n    var hook = hooks[key]; // ref objects should be passed straight through without wrapping\n\n    if (key.endsWith('Ref')) {\n      wrappedHooks[key] = hooks[key];\n    } else {\n      var wrappedHook = wrapHookToRecognizeElement(hook);\n\n      wrappedHooks[key] = function () {\n        return wrappedHook;\n      };\n    }\n  });\n  return wrappedHooks;\n}\n\nfunction setRef(ref, node) {\n  if (typeof ref === 'function') {\n    ref(node);\n  } else {\n    ref.current = node;\n  }\n}\n\nfunction cloneWithRef(element, newRef) {\n  var previousRef = element.ref;\n  invariant(typeof previousRef !== 'string', 'Cannot connect React DnD to an element with an existing string ref. ' + 'Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. ' + 'Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs');\n\n  if (!previousRef) {\n    // When there is no ref on the element, use the new ref directly\n    return cloneElement(element, {\n      ref: newRef\n    });\n  } else {\n    return cloneElement(element, {\n      ref: function ref(node) {\n        setRef(previousRef, node);\n        setRef(newRef, node);\n      }\n    });\n  }\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function isRef(obj) {\n  return (// eslint-disable-next-line no-prototype-builtins\n    obj !== null && _typeof(obj) === 'object' && Object.prototype.hasOwnProperty.call(obj, 'current')\n  );\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from './isRef';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nexport var SourceConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  // The drag preview may either be attached via ref or connect function\n  function SourceConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, SourceConnector);\n\n    _defineProperty(this, \"hooks\", wrapConnectorHooks({\n      dragSource: function dragSource(node, options) {\n        _this.clearDragSource();\n\n        _this.dragSourceOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragSourceRef = node;\n        } else {\n          _this.dragSourceNode = node;\n        }\n\n        _this.reconnectDragSource();\n      },\n      dragPreview: function dragPreview(node, options) {\n        _this.clearDragPreview();\n\n        _this.dragPreviewOptions = options || null;\n\n        if (isRef(node)) {\n          _this.dragPreviewRef = node;\n        } else {\n          _this.dragPreviewNode = node;\n        }\n\n        _this.reconnectDragPreview();\n      }\n    }));\n\n    _defineProperty(this, \"handlerId\", null);\n\n    _defineProperty(this, \"dragSourceRef\", null);\n\n    _defineProperty(this, \"dragSourceNode\", void 0);\n\n    _defineProperty(this, \"dragSourceOptionsInternal\", null);\n\n    _defineProperty(this, \"dragSourceUnsubscribe\", void 0);\n\n    _defineProperty(this, \"dragPreviewRef\", null);\n\n    _defineProperty(this, \"dragPreviewNode\", void 0);\n\n    _defineProperty(this, \"dragPreviewOptionsInternal\", null);\n\n    _defineProperty(this, \"dragPreviewUnsubscribe\", void 0);\n\n    _defineProperty(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty(this, \"lastConnectedDragSource\", null);\n\n    _defineProperty(this, \"lastConnectedDragSourceOptions\", null);\n\n    _defineProperty(this, \"lastConnectedDragPreview\", null);\n\n    _defineProperty(this, \"lastConnectedDragPreviewOptions\", null);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass(SourceConnector, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (this.handlerId === newHandlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dragSource;\n    }\n  }, {\n    key: \"dragSourceOptions\",\n    get: function get() {\n      return this.dragSourceOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragSourceOptionsInternal = options;\n    }\n  }, {\n    key: \"dragPreviewOptions\",\n    get: function get() {\n      return this.dragPreviewOptionsInternal;\n    },\n    set: function set(options) {\n      this.dragPreviewOptionsInternal = options;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      this.reconnectDragSource();\n      this.reconnectDragPreview();\n    }\n  }, {\n    key: \"reconnectDragSource\",\n    value: function reconnectDragSource() {\n      var dragSource = this.dragSource; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragSourceChange() || this.didDragSourceOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragSource();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragSource) {\n        this.lastConnectedDragSource = dragSource;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragSource = dragSource;\n        this.lastConnectedDragSourceOptions = this.dragSourceOptions;\n        this.dragSourceUnsubscribe = this.backend.connectDragSource(this.handlerId, dragSource, this.dragSourceOptions);\n      }\n    }\n  }, {\n    key: \"reconnectDragPreview\",\n    value: function reconnectDragPreview() {\n      var dragPreview = this.dragPreview; // if nothing has changed then don't resubscribe\n\n      var didChange = this.didHandlerIdChange() || this.didConnectedDragPreviewChange() || this.didDragPreviewOptionsChange();\n\n      if (didChange) {\n        this.disconnectDragPreview();\n      }\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dragPreview) {\n        this.lastConnectedDragPreview = dragPreview;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDragPreview = dragPreview;\n        this.lastConnectedDragPreviewOptions = this.dragPreviewOptions;\n        this.dragPreviewUnsubscribe = this.backend.connectDragPreview(this.handlerId, dragPreview, this.dragPreviewOptions);\n      }\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didConnectedDragSourceChange\",\n    value: function didConnectedDragSourceChange() {\n      return this.lastConnectedDragSource !== this.dragSource;\n    }\n  }, {\n    key: \"didConnectedDragPreviewChange\",\n    value: function didConnectedDragPreviewChange() {\n      return this.lastConnectedDragPreview !== this.dragPreview;\n    }\n  }, {\n    key: \"didDragSourceOptionsChange\",\n    value: function didDragSourceOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragSourceOptions, this.dragSourceOptions);\n    }\n  }, {\n    key: \"didDragPreviewOptionsChange\",\n    value: function didDragPreviewOptionsChange() {\n      return !shallowEqual(this.lastConnectedDragPreviewOptions, this.dragPreviewOptions);\n    }\n  }, {\n    key: \"disconnectDragSource\",\n    value: function disconnectDragSource() {\n      if (this.dragSourceUnsubscribe) {\n        this.dragSourceUnsubscribe();\n        this.dragSourceUnsubscribe = undefined;\n      }\n    }\n  }, {\n    key: \"disconnectDragPreview\",\n    value: function disconnectDragPreview() {\n      if (this.dragPreviewUnsubscribe) {\n        this.dragPreviewUnsubscribe();\n        this.dragPreviewUnsubscribe = undefined;\n        this.dragPreviewNode = null;\n        this.dragPreviewRef = null;\n      }\n    }\n  }, {\n    key: \"dragSource\",\n    get: function get() {\n      return this.dragSourceNode || this.dragSourceRef && this.dragSourceRef.current;\n    }\n  }, {\n    key: \"dragPreview\",\n    get: function get() {\n      return this.dragPreviewNode || this.dragPreviewRef && this.dragPreviewRef.current;\n    }\n  }, {\n    key: \"clearDragSource\",\n    value: function clearDragSource() {\n      this.dragSourceNode = null;\n      this.dragSourceRef = null;\n    }\n  }, {\n    key: \"clearDragPreview\",\n    value: function clearDragPreview() {\n      this.dragPreviewNode = null;\n      this.dragPreviewRef = null;\n    }\n  }]);\n\n  return SourceConnector;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrag = false;\nvar isCallingIsDragging = false;\nexport var DragSourceMonitorImpl = /*#__PURE__*/function () {\n  function DragSourceMonitorImpl(manager) {\n    _classCallCheck(this, DragSourceMonitorImpl);\n\n    _defineProperty(this, \"internalMonitor\", void 0);\n\n    _defineProperty(this, \"sourceId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DragSourceMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(sourceId) {\n      this.sourceId = sourceId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.sourceId;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      invariant(!isCallingCanDrag, 'You may not call monitor.canDrag() inside your canDrag() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingCanDrag = true;\n        return this.internalMonitor.canDragSource(this.sourceId);\n      } finally {\n        isCallingCanDrag = false;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      if (!this.sourceId) {\n        return false;\n      }\n\n      invariant(!isCallingIsDragging, 'You may not call monitor.isDragging() inside your isDragging() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor');\n\n      try {\n        isCallingIsDragging = true;\n        return this.internalMonitor.isDraggingSource(this.sourceId);\n      } finally {\n        isCallingIsDragging = false;\n      }\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      return this.internalMonitor.isDraggingSource(sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId, options) {\n      return this.internalMonitor.isOverTarget(targetId, options);\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.internalMonitor.getTargetIds();\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return this.internalMonitor.isSourcePublic();\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.internalMonitor.getSourceId();\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      return this.internalMonitor.subscribeToOffsetChange(listener);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      return this.internalMonitor.canDragSource(sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      return this.internalMonitor.canDropOnTarget(targetId);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DragSourceMonitorImpl;\n}();","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport function getDecoratedComponent(instanceRef) {\n  var currentRef = instanceRef.current;\n\n  if (currentRef == null) {\n    return null;\n  } else if (currentRef.decoratedRef) {\n    // go through the private field in decorateHandler to avoid the invariant hit\n    return currentRef.decoratedRef.current;\n  } else {\n    return currentRef;\n  }\n}\nexport function isClassComponent(Component) {\n  return Component && Component.prototype && typeof Component.prototype.render === 'function';\n}\nexport function isRefForwardingComponent(C) {\n  var _item$$$typeof;\n\n  var item = C;\n  return (item === null || item === void 0 ? void 0 : (_item$$$typeof = item.$$typeof) === null || _item$$$typeof === void 0 ? void 0 : _item$$$typeof.toString()) === 'Symbol(react.forward_ref)';\n}\nexport function isRefable(C) {\n  return isClassComponent(C) || isRefForwardingComponent(C);\n}\nexport function checkDecoratorArguments(functionName, signature) {\n  if (process.env.NODE_ENV !== 'production') {\n    for (var i = 0; i < (arguments.length <= 2 ? 0 : arguments.length - 2); i++) {\n      var arg = i + 2 < 2 || arguments.length <= i + 2 ? undefined : arguments[i + 2];\n\n      if (arg && arg.prototype && arg.prototype.render) {\n        // eslint-disable-next-line no-console\n        console.error('You seem to be applying the arguments in the wrong order. ' + \"It should be \".concat(functionName, \"(\").concat(signature, \")(Component), not the other way around. \") + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#you-seem-to-be-applying-the-arguments-in-the-wrong-order');\n        return;\n      }\n    }\n  }\n}\nexport function isFunction(input) {\n  return typeof input === 'function';\n}\nexport function noop() {// noop\n}\n\nfunction isObjectLike(input) {\n  return _typeof(input) === 'object' && input !== null;\n}\n\nexport function isPlainObject(input) {\n  if (!isObjectLike(input)) {\n    return false;\n  }\n\n  if (Object.getPrototypeOf(input) === null) {\n    return true;\n  }\n\n  var proto = input;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(input) === proto;\n}\nexport function isValidType(type, allowArray) {\n  return typeof type === 'string' || _typeof(type) === 'symbol' || !!allowArray && Array.isArray(type) && type.every(function (t) {\n    return isValidType(t, false);\n  });\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { isFunction, noop } from './utils';\n/**\n * Provides a set of static methods for creating Disposables.\n * @param {Function} action Action to run during the first call to dispose.\n * The action is guaranteed to be run at most once.\n */\n\nexport var Disposable = /*#__PURE__*/function () {\n  function Disposable(action) {\n    _classCallCheck(this, Disposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"action\", void 0);\n\n    this.action = isFunction(action) ? action : noop;\n  }\n  /** Performs the task of cleaning up resources. */\n\n\n  _createClass(Disposable, [{\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.action();\n        this.isDisposed = true;\n      }\n    }\n  }], [{\n    key: \"isDisposable\",\n    value:\n    /**\n     * Gets the disposable that does nothing when disposed.\n     */\n\n    /**\n     * Validates whether the given object is a disposable\n     * @param {Object} Object to test whether it has a dispose method\n     * @returns {Boolean} true if a disposable object, else false.\n     */\n    function isDisposable(d) {\n      return Boolean(d && isFunction(d.dispose));\n    }\n  }, {\n    key: \"_fixup\",\n    value: function _fixup(result) {\n      return Disposable.isDisposable(result) ? result : Disposable.empty;\n    }\n    /**\n     * Creates a disposable object that invokes the specified action when disposed.\n     * @param {Function} dispose Action to run during the first call to dispose.\n     * The action is guaranteed to be run at most once.\n     * @return {Disposable} The disposable object that runs the given action upon disposal.\n     */\n\n  }, {\n    key: \"create\",\n    value: function create(action) {\n      return new Disposable(action);\n    }\n  }]);\n\n  return Disposable;\n}();\n/**\n * Represents a group of disposable resources that are disposed together.\n * @constructor\n */\n\n_defineProperty(Disposable, \"empty\", {\n  dispose: noop\n});\n\nexport var CompositeDisposable = /*#__PURE__*/function () {\n  function CompositeDisposable() {\n    _classCallCheck(this, CompositeDisposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"disposables\", void 0);\n\n    for (var _len = arguments.length, disposables = new Array(_len), _key = 0; _key < _len; _key++) {\n      disposables[_key] = arguments[_key];\n    }\n\n    this.disposables = disposables;\n  }\n  /**\n   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.\n   * @param {Any} item Disposable to add.\n   */\n\n\n  _createClass(CompositeDisposable, [{\n    key: \"add\",\n    value: function add(item) {\n      if (this.isDisposed) {\n        item.dispose();\n      } else {\n        this.disposables.push(item);\n      }\n    }\n    /**\n     * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.\n     * @param {Any} item Disposable to remove.\n     * @returns {Boolean} true if found; false otherwise.\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(item) {\n      var shouldDispose = false;\n\n      if (!this.isDisposed) {\n        var idx = this.disposables.indexOf(item);\n\n        if (idx !== -1) {\n          shouldDispose = true;\n          this.disposables.splice(idx, 1);\n          item.dispose();\n        }\n      }\n\n      return shouldDispose;\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group but\n     *  does not dispose the CompositeDisposable.\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      if (!this.isDisposed) {\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i = 0; _i < len; _i++) {\n          currentDisposables[_i].dispose();\n        }\n      }\n    }\n    /**\n     *  Disposes all disposables in the group and removes them from the group.\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var len = this.disposables.length;\n        var currentDisposables = new Array(len);\n\n        for (var i = 0; i < len; i++) {\n          currentDisposables[i] = this.disposables[i];\n        }\n\n        this.disposables = [];\n\n        for (var _i2 = 0; _i2 < len; _i2++) {\n          currentDisposables[_i2].dispose();\n        }\n      }\n    }\n  }]);\n\n  return CompositeDisposable;\n}();\n/**\n * Represents a disposable resource whose underlying disposable resource can\n * be replaced by another disposable resource, causing automatic disposal of\n * the previous underlying disposable resource.\n */\n\nexport var SerialDisposable = /*#__PURE__*/function () {\n  function SerialDisposable() {\n    _classCallCheck(this, SerialDisposable);\n\n    _defineProperty(this, \"isDisposed\", false);\n\n    _defineProperty(this, \"current\", void 0);\n  }\n\n  _createClass(SerialDisposable, [{\n    key: \"getDisposable\",\n    value:\n    /**\n     * Gets the underlying disposable.\n     * @returns {Any} the underlying disposable.\n     */\n    function getDisposable() {\n      return this.current;\n    }\n  }, {\n    key: \"setDisposable\",\n    value: function setDisposable(value) {\n      var shouldDispose = this.isDisposed;\n\n      if (!shouldDispose) {\n        var old = this.current;\n        this.current = value;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n\n      if (shouldDispose && value) {\n        value.dispose();\n      }\n    }\n    /** Performs the task of cleaning up resources. */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (!this.isDisposed) {\n        this.isDisposed = true;\n        var old = this.current;\n        this.current = undefined;\n\n        if (old) {\n          old.dispose();\n        }\n      }\n    }\n  }]);\n\n  return SerialDisposable;\n}();","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createRef, Component } from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../core';\nimport { isPlainObject } from './utils';\nimport { Disposable, CompositeDisposable, SerialDisposable } from './disposables';\nimport { isRefable } from './utils';\nimport hoistStatics from 'hoist-non-react-statics';\nexport function decorateHandler(_ref) {\n  var DecoratedComponent = _ref.DecoratedComponent,\n      createHandler = _ref.createHandler,\n      createMonitor = _ref.createMonitor,\n      createConnector = _ref.createConnector,\n      registerHandler = _ref.registerHandler,\n      containerDisplayName = _ref.containerDisplayName,\n      getType = _ref.getType,\n      collect = _ref.collect,\n      options = _ref.options;\n  var _options$arePropsEqua = options.arePropsEqual,\n      arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n  var Decorated = DecoratedComponent;\n  var displayName = DecoratedComponent.displayName || DecoratedComponent.name || 'Component';\n\n  var DragDropContainer = /*#__PURE__*/function (_Component) {\n    _inherits(DragDropContainer, _Component);\n\n    var _super = _createSuper(DragDropContainer);\n\n    function DragDropContainer(props) {\n      var _this;\n\n      _classCallCheck(this, DragDropContainer);\n\n      _this = _super.call(this, props);\n\n      _defineProperty(_assertThisInitialized(_this), \"decoratedRef\", createRef());\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerId\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"manager\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerMonitor\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handlerConnector\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handler\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"disposable\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"currentType\", void 0);\n\n      _defineProperty(_assertThisInitialized(_this), \"handleChange\", function () {\n        var nextState = _this.getCurrentState();\n\n        if (!shallowEqual(nextState, _this.state)) {\n          _this.setState(nextState);\n        }\n      });\n\n      _this.disposable = new SerialDisposable();\n\n      _this.receiveProps(props);\n\n      _this.dispose();\n\n      return _this;\n    }\n\n    _createClass(DragDropContainer, [{\n      key: \"getHandlerId\",\n      value: function getHandlerId() {\n        return this.handlerId;\n      }\n    }, {\n      key: \"getDecoratedComponentInstance\",\n      value: function getDecoratedComponentInstance() {\n        invariant(this.decoratedRef.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n        return this.decoratedRef.current;\n      }\n    }, {\n      key: \"shouldComponentUpdate\",\n      value: function shouldComponentUpdate(nextProps, nextState) {\n        return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n      }\n    }, {\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        this.disposable = new SerialDisposable();\n        this.currentType = undefined;\n        this.receiveProps(this.props);\n        this.handleChange();\n      }\n    }, {\n      key: \"componentDidUpdate\",\n      value: function componentDidUpdate(prevProps) {\n        if (!arePropsEqual(this.props, prevProps)) {\n          this.receiveProps(this.props);\n          this.handleChange();\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.dispose();\n      }\n    }, {\n      key: \"receiveProps\",\n      value: function receiveProps(props) {\n        if (!this.handler) {\n          return;\n        }\n\n        this.handler.receiveProps(props);\n        this.receiveType(getType(props));\n      }\n    }, {\n      key: \"receiveType\",\n      value: function receiveType(type) {\n        if (!this.handlerMonitor || !this.manager || !this.handlerConnector) {\n          return;\n        }\n\n        if (type === this.currentType) {\n          return;\n        }\n\n        this.currentType = type;\n\n        var _registerHandler = registerHandler(type, this.handler, this.manager),\n            _registerHandler2 = _slicedToArray(_registerHandler, 2),\n            handlerId = _registerHandler2[0],\n            unregister = _registerHandler2[1];\n\n        this.handlerId = handlerId;\n        this.handlerMonitor.receiveHandlerId(handlerId);\n        this.handlerConnector.receiveHandlerId(handlerId);\n        var globalMonitor = this.manager.getMonitor();\n        var unsubscribe = globalMonitor.subscribeToStateChange(this.handleChange, {\n          handlerIds: [handlerId]\n        });\n        this.disposable.setDisposable(new CompositeDisposable(new Disposable(unsubscribe), new Disposable(unregister)));\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.disposable.dispose();\n\n        if (this.handlerConnector) {\n          this.handlerConnector.receiveHandlerId(null);\n        }\n      }\n    }, {\n      key: \"getCurrentState\",\n      value: function getCurrentState() {\n        if (!this.handlerConnector) {\n          return {};\n        }\n\n        var nextState = collect(this.handlerConnector.hooks, this.handlerMonitor, this.props);\n\n        if (process.env.NODE_ENV !== 'production') {\n          invariant(isPlainObject(nextState), 'Expected `collect` specified as the second argument to ' + '%s for %s to return a plain object of props to inject. ' + 'Instead, received %s.', containerDisplayName, displayName, nextState);\n        }\n\n        return nextState;\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this2 = this;\n\n        return _jsx(DndContext.Consumer, {\n          children: function children(_ref2) {\n            var dragDropManager = _ref2.dragDropManager;\n\n            _this2.receiveDragDropManager(dragDropManager);\n\n            if (typeof requestAnimationFrame !== 'undefined') {\n              requestAnimationFrame(function () {\n                var _this2$handlerConnect;\n\n                return (_this2$handlerConnect = _this2.handlerConnector) === null || _this2$handlerConnect === void 0 ? void 0 : _this2$handlerConnect.reconnect();\n              });\n            }\n\n            return _jsx(Decorated, Object.assign({}, _this2.props, _this2.getCurrentState(), {\n              // NOTE: if Decorated is a Function Component, decoratedRef will not be populated unless it's a refforwarding component.\n              ref: isRefable(Decorated) ? _this2.decoratedRef : null\n            }), void 0);\n          }\n        }, void 0);\n      }\n    }, {\n      key: \"receiveDragDropManager\",\n      value: function receiveDragDropManager(dragDropManager) {\n        if (this.manager !== undefined) {\n          return;\n        }\n\n        invariant(dragDropManager !== undefined, 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n\n        if (dragDropManager === undefined) {\n          return;\n        }\n\n        this.manager = dragDropManager;\n        this.handlerMonitor = createMonitor(dragDropManager);\n        this.handlerConnector = createConnector(dragDropManager.getBackend());\n        this.handler = createHandler(this.handlerMonitor, this.decoratedRef);\n      }\n    }]);\n\n    return DragDropContainer;\n  }(Component);\n\n  _defineProperty(DragDropContainer, \"DecoratedComponent\", DecoratedComponent);\n\n  _defineProperty(DragDropContainer, \"displayName\", \"\".concat(containerDisplayName, \"(\").concat(displayName, \")\"));\n\n  return hoistStatics(DragDropContainer, DecoratedComponent);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject, getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrag', 'beginDrag', 'isDragging', 'endDrag'];\nvar REQUIRED_SPEC_METHODS = ['beginDrag'];\n\nvar SourceImpl = /*#__PURE__*/function () {\n  function SourceImpl(spec, monitor, ref) {\n    var _this = this;\n\n    _classCallCheck(this, SourceImpl);\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"ref\", void 0);\n\n    _defineProperty(this, \"beginDrag\", function () {\n      if (!_this.props) {\n        return;\n      }\n\n      var item = _this.spec.beginDrag(_this.props, _this.monitor, _this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(isPlainObject(item), 'beginDrag() must return a plain object that represents the dragged item. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', item);\n      }\n\n      return item;\n    });\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(SourceImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.canDrag) {\n        return true;\n      }\n\n      return this.spec.canDrag(this.props, this.monitor);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, sourceId) {\n      if (!this.props) {\n        return false;\n      }\n\n      if (!this.spec.isDragging) {\n        return sourceId === globalMonitor.getSourceId();\n      }\n\n      return this.spec.isDragging(this.props, this.monitor);\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      if (!this.props) {\n        return;\n      }\n\n      if (!this.spec.endDrag) {\n        return;\n      }\n\n      this.spec.endDrag(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }]);\n\n  return SourceImpl;\n}();\n\nexport function createSourceFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drag source specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  REQUIRED_SPEC_METHODS.forEach(function (key) {\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drag source specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', key, key, spec[key]);\n  });\n  return function createSource(monitor, ref) {\n    return new SourceImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { registerSource, DragSourceMonitorImpl, SourceConnector } from '../internals';\nimport { checkDecoratorArguments, isPlainObject, isValidType } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { createSourceFactory } from './createSourceFactory';\n/**\n * Decorates a component as a dragsource\n * @param type The dragsource type\n * @param spec The drag source specification\n * @param collect The props collector function\n * @param options DnD options\n */\n\nexport function DragSource(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DragSource', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type), 'Expected \"type\" provided as the first argument to DragSource to be ' + 'a string, or a function that returns a string given the current props. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DragSource to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', spec);\n  var createSource = createSourceFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DragSource to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DragSource to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source', collect);\n  return function decorateSource(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DragSource',\n      createHandler: createSource,\n      registerHandler: registerSource,\n      createConnector: function createConnector(backend) {\n        return new SourceConnector(backend);\n      },\n      createMonitor: function createMonitor(manager) {\n        return new DragSourceMonitorImpl(manager);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nvar isCallingCanDrop = false;\nexport var DropTargetMonitorImpl = /*#__PURE__*/function () {\n  function DropTargetMonitorImpl(manager) {\n    _classCallCheck(this, DropTargetMonitorImpl);\n\n    _defineProperty(this, \"internalMonitor\", void 0);\n\n    _defineProperty(this, \"targetId\", null);\n\n    this.internalMonitor = manager.getMonitor();\n  }\n\n  _createClass(DropTargetMonitorImpl, [{\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(targetId) {\n      this.targetId = targetId;\n    }\n  }, {\n    key: \"getHandlerId\",\n    value: function getHandlerId() {\n      return this.targetId;\n    }\n  }, {\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener, options) {\n      return this.internalMonitor.subscribeToStateChange(listener, options);\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      // Cut out early if the target id has not been set. This should prevent errors\n      // where the user has an older version of dnd-core like in\n      // https://github.com/react-dnd/react-dnd/issues/1310\n      if (!this.targetId) {\n        return false;\n      }\n\n      invariant(!isCallingCanDrop, 'You may not call monitor.canDrop() inside your canDrop() implementation. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor');\n\n      try {\n        isCallingCanDrop = true;\n        return this.internalMonitor.canDropOnTarget(this.targetId);\n      } finally {\n        isCallingCanDrop = false;\n      }\n    }\n  }, {\n    key: \"isOver\",\n    value: function isOver(options) {\n      if (!this.targetId) {\n        return false;\n      }\n\n      return this.internalMonitor.isOverTarget(this.targetId, options);\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.internalMonitor.getItemType();\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.internalMonitor.getItem();\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.internalMonitor.getDropResult();\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.internalMonitor.didDrop();\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.internalMonitor.getInitialClientOffset();\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.internalMonitor.getInitialSourceClientOffset();\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return this.internalMonitor.getSourceClientOffset();\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.internalMonitor.getClientOffset();\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return this.internalMonitor.getDifferenceFromInitialOffset();\n    }\n  }]);\n\n  return DropTargetMonitorImpl;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { wrapConnectorHooks } from './wrapConnectorHooks';\nimport { isRef } from './isRef';\nexport var TargetConnector = /*#__PURE__*/function () {\n  // The drop target may either be attached via ref or connect function\n  function TargetConnector(backend) {\n    var _this = this;\n\n    _classCallCheck(this, TargetConnector);\n\n    _defineProperty(this, \"hooks\", wrapConnectorHooks({\n      dropTarget: function dropTarget(node, options) {\n        _this.clearDropTarget();\n\n        _this.dropTargetOptions = options;\n\n        if (isRef(node)) {\n          _this.dropTargetRef = node;\n        } else {\n          _this.dropTargetNode = node;\n        }\n\n        _this.reconnect();\n      }\n    }));\n\n    _defineProperty(this, \"handlerId\", null);\n\n    _defineProperty(this, \"dropTargetRef\", null);\n\n    _defineProperty(this, \"dropTargetNode\", void 0);\n\n    _defineProperty(this, \"dropTargetOptionsInternal\", null);\n\n    _defineProperty(this, \"unsubscribeDropTarget\", void 0);\n\n    _defineProperty(this, \"lastConnectedHandlerId\", null);\n\n    _defineProperty(this, \"lastConnectedDropTarget\", null);\n\n    _defineProperty(this, \"lastConnectedDropTargetOptions\", null);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    this.backend = backend;\n  }\n\n  _createClass(TargetConnector, [{\n    key: \"connectTarget\",\n    get: function get() {\n      return this.dropTarget;\n    }\n  }, {\n    key: \"reconnect\",\n    value: function reconnect() {\n      // if nothing has changed then don't resubscribe\n      var didChange = this.didHandlerIdChange() || this.didDropTargetChange() || this.didOptionsChange();\n\n      if (didChange) {\n        this.disconnectDropTarget();\n      }\n\n      var dropTarget = this.dropTarget;\n\n      if (!this.handlerId) {\n        return;\n      }\n\n      if (!dropTarget) {\n        this.lastConnectedDropTarget = dropTarget;\n        return;\n      }\n\n      if (didChange) {\n        this.lastConnectedHandlerId = this.handlerId;\n        this.lastConnectedDropTarget = dropTarget;\n        this.lastConnectedDropTargetOptions = this.dropTargetOptions;\n        this.unsubscribeDropTarget = this.backend.connectDropTarget(this.handlerId, dropTarget, this.dropTargetOptions);\n      }\n    }\n  }, {\n    key: \"receiveHandlerId\",\n    value: function receiveHandlerId(newHandlerId) {\n      if (newHandlerId === this.handlerId) {\n        return;\n      }\n\n      this.handlerId = newHandlerId;\n      this.reconnect();\n    }\n  }, {\n    key: \"dropTargetOptions\",\n    get: function get() {\n      return this.dropTargetOptionsInternal;\n    },\n    set: function set(options) {\n      this.dropTargetOptionsInternal = options;\n    }\n  }, {\n    key: \"didHandlerIdChange\",\n    value: function didHandlerIdChange() {\n      return this.lastConnectedHandlerId !== this.handlerId;\n    }\n  }, {\n    key: \"didDropTargetChange\",\n    value: function didDropTargetChange() {\n      return this.lastConnectedDropTarget !== this.dropTarget;\n    }\n  }, {\n    key: \"didOptionsChange\",\n    value: function didOptionsChange() {\n      return !shallowEqual(this.lastConnectedDropTargetOptions, this.dropTargetOptions);\n    }\n  }, {\n    key: \"disconnectDropTarget\",\n    value: function disconnectDropTarget() {\n      if (this.unsubscribeDropTarget) {\n        this.unsubscribeDropTarget();\n        this.unsubscribeDropTarget = undefined;\n      }\n    }\n  }, {\n    key: \"dropTarget\",\n    get: function get() {\n      return this.dropTargetNode || this.dropTargetRef && this.dropTargetRef.current;\n    }\n  }, {\n    key: \"clearDropTarget\",\n    value: function clearDropTarget() {\n      this.dropTargetRef = null;\n      this.dropTargetNode = null;\n    }\n  }]);\n\n  return TargetConnector;\n}();","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { isPlainObject, getDecoratedComponent } from './utils';\nvar ALLOWED_SPEC_METHODS = ['canDrop', 'hover', 'drop'];\n\nvar TargetImpl = /*#__PURE__*/function () {\n  function TargetImpl(spec, monitor, ref) {\n    _classCallCheck(this, TargetImpl);\n\n    _defineProperty(this, \"props\", null);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"ref\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.ref = ref;\n  }\n\n  _createClass(TargetImpl, [{\n    key: \"receiveProps\",\n    value: function receiveProps(props) {\n      this.props = props;\n    }\n  }, {\n    key: \"receiveMonitor\",\n    value: function receiveMonitor(monitor) {\n      this.monitor = monitor;\n    }\n  }, {\n    key: \"canDrop\",\n    value: function canDrop() {\n      if (!this.spec.canDrop) {\n        return true;\n      }\n\n      return this.spec.canDrop(this.props, this.monitor);\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      if (!this.spec.hover || !this.props) {\n        return;\n      }\n\n      this.spec.hover(this.props, this.monitor, getDecoratedComponent(this.ref));\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      if (!this.spec.drop) {\n        return undefined;\n      }\n\n      var dropResult = this.spec.drop(this.props, this.monitor, this.ref.current);\n\n      if (process.env.NODE_ENV !== 'production') {\n        invariant(typeof dropResult === 'undefined' || isPlainObject(dropResult), 'drop() must either return undefined, or an object that represents the drop result. ' + 'Instead received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', dropResult);\n      }\n\n      return dropResult;\n    }\n  }]);\n\n  return TargetImpl;\n}();\n\nexport function createTargetFactory(spec) {\n  Object.keys(spec).forEach(function (key) {\n    invariant(ALLOWED_SPEC_METHODS.indexOf(key) > -1, 'Expected the drop target specification to only have ' + 'some of the following keys: %s. ' + 'Instead received a specification with an unexpected \"%s\" key. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', ALLOWED_SPEC_METHODS.join(', '), key);\n    invariant(typeof spec[key] === 'function', 'Expected %s in the drop target specification to be a function. ' + 'Instead received a specification with %s: %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', key, key, spec[key]);\n  });\n  return function createTarget(monitor, ref) {\n    return new TargetImpl(spec, monitor, ref);\n  };\n}","import { invariant } from '@react-dnd/invariant';\nimport { TargetConnector, DropTargetMonitorImpl, registerTarget } from '../internals';\nimport { isPlainObject, isValidType } from './utils';\nimport { checkDecoratorArguments } from './utils';\nimport { decorateHandler } from './decorateHandler';\nimport { createTargetFactory } from './createTargetFactory';\n/**\n * @param type The accepted target type\n * @param spec The DropTarget specification\n * @param collect The props collector function\n * @param options Options\n */\n\nexport function DropTarget(type, spec, collect) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  checkDecoratorArguments('DropTarget', 'type, spec, collect[, options]', type, spec, collect, options);\n  var getType = type;\n\n  if (typeof type !== 'function') {\n    invariant(isValidType(type, true), 'Expected \"type\" provided as the first argument to DropTarget to be ' + 'a string, an array of strings, or a function that returns either given ' + 'the current props. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', type);\n\n    getType = function getType() {\n      return type;\n    };\n  }\n\n  invariant(isPlainObject(spec), 'Expected \"spec\" provided as the second argument to DropTarget to be ' + 'a plain object. Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', spec);\n  var createTarget = createTargetFactory(spec);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the third argument to DropTarget to be ' + 'a function that returns a plain object of props to inject. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the fourth argument to DropTarget to be ' + 'a plain object when specified. ' + 'Instead, received %s. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target', collect);\n  return function decorateTarget(DecoratedComponent) {\n    return decorateHandler({\n      containerDisplayName: 'DropTarget',\n      createHandler: createTarget,\n      registerHandler: registerTarget,\n      createMonitor: function createMonitor(manager) {\n        return new DropTargetMonitorImpl(manager);\n      },\n      createConnector: function createConnector(backend) {\n        return new TargetConnector(backend);\n      },\n      DecoratedComponent: DecoratedComponent,\n      getType: getType,\n      collect: collect,\n      options: options\n    });\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { createRef, Component } from 'react';\nimport { shallowEqual } from '@react-dnd/shallowequal';\nimport { invariant } from '@react-dnd/invariant';\nimport hoistStatics from 'hoist-non-react-statics';\nimport { DndContext } from '../core';\nimport { isRefable, checkDecoratorArguments, isPlainObject } from './utils';\n/**\n * @param collect The props collector function\n * @param options The DnD options\n */\n\nexport function DragLayer(collect) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  checkDecoratorArguments('DragLayer', 'collect[, options]', collect, options);\n  invariant(typeof collect === 'function', 'Expected \"collect\" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ', 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', collect);\n  invariant(isPlainObject(options), 'Expected \"options\" provided as the second argument to DragLayer to be a plain object when specified. ' + 'Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer', options);\n  return function decorateLayer(DecoratedComponent) {\n    var Decorated = DecoratedComponent;\n    var _options$arePropsEqua = options.arePropsEqual,\n        arePropsEqual = _options$arePropsEqua === void 0 ? shallowEqual : _options$arePropsEqua;\n    var displayName = Decorated.displayName || Decorated.name || 'Component';\n\n    var DragLayerContainer = /*#__PURE__*/function (_Component) {\n      _inherits(DragLayerContainer, _Component);\n\n      var _super = _createSuper(DragLayerContainer);\n\n      function DragLayerContainer() {\n        var _this;\n\n        _classCallCheck(this, DragLayerContainer);\n\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        _this = _super.call.apply(_super, [this].concat(args));\n\n        _defineProperty(_assertThisInitialized(_this), \"manager\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"isCurrentlyMounted\", false);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribeFromOffsetChange\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribeFromStateChange\", void 0);\n\n        _defineProperty(_assertThisInitialized(_this), \"ref\", createRef());\n\n        _defineProperty(_assertThisInitialized(_this), \"handleChange\", function () {\n          if (!_this.isCurrentlyMounted) {\n            return;\n          }\n\n          var nextState = _this.getCurrentState();\n\n          if (!shallowEqual(nextState, _this.state)) {\n            _this.setState(nextState);\n          }\n        });\n\n        return _this;\n      }\n\n      _createClass(DragLayerContainer, [{\n        key: \"getDecoratedComponentInstance\",\n        value: function getDecoratedComponentInstance() {\n          invariant(this.ref.current, 'In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()');\n          return this.ref.current;\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          return !arePropsEqual(nextProps, this.props) || !shallowEqual(nextState, this.state);\n        }\n      }, {\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          this.isCurrentlyMounted = true;\n          this.handleChange();\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          this.isCurrentlyMounted = false;\n\n          if (this.unsubscribeFromOffsetChange) {\n            this.unsubscribeFromOffsetChange();\n            this.unsubscribeFromOffsetChange = undefined;\n          }\n\n          if (this.unsubscribeFromStateChange) {\n            this.unsubscribeFromStateChange();\n            this.unsubscribeFromStateChange = undefined;\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this2 = this;\n\n          return _jsx(DndContext.Consumer, {\n            children: function children(_ref) {\n              var dragDropManager = _ref.dragDropManager;\n\n              if (dragDropManager === undefined) {\n                return null;\n              }\n\n              _this2.receiveDragDropManager(dragDropManager); // Let componentDidMount fire to initialize the collected state\n\n\n              if (!_this2.isCurrentlyMounted) {\n                return null;\n              }\n\n              return _jsx(Decorated, Object.assign({}, _this2.props, _this2.state, {\n                ref: isRefable(Decorated) ? _this2.ref : null\n              }), void 0);\n            }\n          }, void 0);\n        }\n      }, {\n        key: \"receiveDragDropManager\",\n        value: function receiveDragDropManager(dragDropManager) {\n          if (this.manager !== undefined) {\n            return;\n          }\n\n          this.manager = dragDropManager;\n          invariant(_typeof(dragDropManager) === 'object', 'Could not find the drag and drop manager in the context of %s. ' + 'Make sure to render a DndProvider component in your top-level component. ' + 'Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context', displayName, displayName);\n          var monitor = this.manager.getMonitor();\n          this.unsubscribeFromOffsetChange = monitor.subscribeToOffsetChange(this.handleChange);\n          this.unsubscribeFromStateChange = monitor.subscribeToStateChange(this.handleChange);\n        }\n      }, {\n        key: \"getCurrentState\",\n        value: function getCurrentState() {\n          if (!this.manager) {\n            return {};\n          }\n\n          var monitor = this.manager.getMonitor();\n          return collect(monitor, this.props);\n        }\n      }]);\n\n      return DragLayerContainer;\n    }(Component);\n\n    _defineProperty(DragLayerContainer, \"displayName\", \"DragLayer(\".concat(displayName, \")\"));\n\n    _defineProperty(DragLayerContainer, \"DecoratedComponent\", DecoratedComponent);\n\n    return hoistStatics(DragLayerContainer, DecoratedComponent);\n  };\n}","import { useLayoutEffect, useEffect } from 'react'; // suppress the useLayoutEffect warning on server side.\n\nexport var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var DragSourceImpl = /*#__PURE__*/function () {\n  function DragSourceImpl(spec, monitor, connector) {\n    _classCallCheck(this, DragSourceImpl);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"connector\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n    this.connector = connector;\n  }\n\n  _createClass(DragSourceImpl, [{\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      var _result;\n\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var result = null;\n\n      if (_typeof(spec.item) === 'object') {\n        result = spec.item;\n      } else if (typeof spec.item === 'function') {\n        result = spec.item(monitor);\n      } else {\n        result = {};\n      }\n\n      return (_result = result) !== null && _result !== void 0 ? _result : null;\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (typeof spec.canDrag === 'boolean') {\n        return spec.canDrag;\n      } else if (typeof spec.canDrag === 'function') {\n        return spec.canDrag(monitor);\n      } else {\n        return true;\n      }\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(globalMonitor, target) {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var isDragging = spec.isDragging;\n      return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      var connector = this.connector;\n      var end = spec.end;\n\n      if (end) {\n        end(monitor.getItem(), monitor);\n      }\n\n      connector.reconnect();\n    }\n  }]);\n\n  return DragSourceImpl;\n}();","import { useContext } from 'react';\nimport { invariant } from '@react-dnd/invariant';\nimport { DndContext } from '../core';\n/**\n * A hook to retrieve the DragDropManager from Context\n */\n\nexport function useDragDropManager() {\n  var _useContext = useContext(DndContext),\n      dragDropManager = _useContext.dragDropManager;\n\n  invariant(dragDropManager != null, 'Expected drag drop context');\n  return dragDropManager;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { registerSource } from '../../internals';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nimport { useDragSource } from './useDragSource';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useDragType } from './useDragType';\nexport function useRegisteredDragSource(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var handler = useDragSource(spec, monitor, connector);\n  var itemType = useDragType(spec);\n  useIsomorphicLayoutEffect(function registerDragSource() {\n    if (itemType != null) {\n      var _registerSource = registerSource(itemType, handler, manager),\n          _registerSource2 = _slicedToArray(_registerSource, 2),\n          handlerId = _registerSource2[0],\n          unregister = _registerSource2[1];\n\n      monitor.receiveHandlerId(handlerId);\n      connector.receiveHandlerId(handlerId);\n      return unregister;\n    }\n  }, [manager, monitor, connector, handler, itemType]);\n}","import { useEffect, useMemo } from 'react';\nimport { DragSourceImpl } from './DragSourceImpl';\nexport function useDragSource(spec, monitor, connector) {\n  var handler = useMemo(function () {\n    return new DragSourceImpl(spec, monitor, connector);\n  }, [monitor, connector]);\n  useEffect(function () {\n    handler.spec = spec;\n  }, [spec]);\n  return handler;\n}","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\nexport function useDragType(spec) {\n  return useMemo(function () {\n    var result = spec.type;\n    invariant(result != null, 'spec.type must be defined');\n    return result;\n  }, [spec]);\n}","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { useMemo } from 'react';\nexport function useOptionalFactory(arg, deps) {\n  var memoDeps = _toConsumableArray(deps || []);\n\n  if (deps == null && typeof arg !== 'function') {\n    memoDeps.push(arg);\n  }\n\n  return useMemo(function () {\n    return typeof arg === 'function' ? arg() : arg;\n  }, memoDeps);\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport equal from 'fast-deep-equal';\nimport { useState, useCallback } from 'react';\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\n/**\n *\n * @param monitor The monitor to collect state from\n * @param collect The collecting function\n * @param onUpdate A method to invoke when updates occur\n */\n\nexport function useCollector(monitor, collect, onUpdate) {\n  var _useState = useState(function () {\n    return collect(monitor);\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      collected = _useState2[0],\n      setCollected = _useState2[1];\n\n  var updateCollected = useCallback(function () {\n    var nextValue = collect(monitor); // This needs to be a deep-equality check because some monitor-collected values\n    // include XYCoord objects that may be equivalent, but do not have instance equality.\n\n    if (!equal(collected, nextValue)) {\n      setCollected(nextValue);\n\n      if (onUpdate) {\n        onUpdate();\n      }\n    }\n  }, [collected, monitor, onUpdate]); // update the collected properties after react renders.\n  // Note that the \"Dustbin Stress Test\" fails if this is not\n  // done when the component updates\n\n  useIsomorphicLayoutEffect(updateCollected);\n  return [collected, updateCollected];\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect';\nimport { useCollector } from './useCollector';\nexport function useMonitorOutput(monitor, collect, onCollect) {\n  var _useCollector = useCollector(monitor, collect, onCollect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useIsomorphicLayoutEffect(function subscribeToMonitorStateChange() {\n    var handlerId = monitor.getHandlerId();\n\n    if (handlerId == null) {\n      return;\n    }\n\n    return monitor.subscribeToStateChange(updateCollected, {\n      handlerIds: [handlerId]\n    });\n  }, [monitor, updateCollected]);\n  return collected;\n}","import { useMonitorOutput } from './useMonitorOutput';\nexport function useCollectedProps(collector, monitor, connector) {\n  return useMonitorOutput(monitor, collector || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n}","import { useMemo } from 'react';\nexport function useConnectDragSource(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n}\nexport function useConnectDragPreview(connector) {\n  return useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n}","import { useRegisteredDragSource } from './useRegisteredDragSource';\nimport { useOptionalFactory } from '../useOptionalFactory';\nimport { useDragSourceMonitor } from './useDragSourceMonitor';\nimport { useDragSourceConnector } from './useDragSourceConnector';\nimport { useCollectedProps } from '../useCollectedProps';\nimport { useConnectDragPreview, useConnectDragSource } from './connectors';\nimport { invariant } from '@react-dnd/invariant';\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nexport function useDrag(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  invariant(!spec.begin, \"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)\");\n  var monitor = useDragSourceMonitor();\n  var connector = useDragSourceConnector(spec.options, spec.previewOptions);\n  useRegisteredDragSource(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDragSource(connector), useConnectDragPreview(connector)];\n}","import { useMemo } from 'react';\nimport { DragSourceMonitorImpl } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nexport function useDragSourceMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DragSourceMonitorImpl(manager);\n  }, [manager]);\n}","import { useMemo } from 'react';\nimport { SourceConnector } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nexport function useDragSourceConnector(dragSourceOptions, dragPreviewOptions) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new SourceConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = dragSourceOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragSource();\n    };\n  }, [connector, dragSourceOptions]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = dragPreviewOptions || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDragPreview();\n    };\n  }, [connector, dragPreviewOptions]);\n  return connector;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var DropTargetImpl = /*#__PURE__*/function () {\n  function DropTargetImpl(spec, monitor) {\n    _classCallCheck(this, DropTargetImpl);\n\n    _defineProperty(this, \"spec\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    this.spec = spec;\n    this.monitor = monitor;\n  }\n\n  _createClass(DropTargetImpl, [{\n    key: \"canDrop\",\n    value: function canDrop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n      return spec.canDrop ? spec.canDrop(monitor.getItem(), monitor) : true;\n    }\n  }, {\n    key: \"hover\",\n    value: function hover() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.hover) {\n        spec.hover(monitor.getItem(), monitor);\n      }\n    }\n  }, {\n    key: \"drop\",\n    value: function drop() {\n      var spec = this.spec;\n      var monitor = this.monitor;\n\n      if (spec.drop) {\n        return spec.drop(monitor.getItem(), monitor);\n      }\n    }\n  }]);\n\n  return DropTargetImpl;\n}();","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { registerTarget } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nimport { useAccept } from './useAccept';\nimport { useDropTarget } from './useDropTarget';\nexport function useRegisteredDropTarget(spec, monitor, connector) {\n  var manager = useDragDropManager();\n  var dropTarget = useDropTarget(spec, monitor);\n  var accept = useAccept(spec);\n  useIsomorphicLayoutEffect(function registerDropTarget() {\n    var _registerTarget = registerTarget(accept, dropTarget, manager),\n        _registerTarget2 = _slicedToArray(_registerTarget, 2),\n        handlerId = _registerTarget2[0],\n        unregister = _registerTarget2[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [manager, monitor, dropTarget, connector, accept.map(function (a) {\n    return a.toString();\n  }).join('|')]);\n}","import { useEffect, useMemo } from 'react';\nimport { DropTargetImpl } from './DropTargetImpl';\nexport function useDropTarget(spec, monitor) {\n  var dropTarget = useMemo(function () {\n    return new DropTargetImpl(spec, monitor);\n  }, [monitor]);\n  useEffect(function () {\n    dropTarget.spec = spec;\n  }, [spec]);\n  return dropTarget;\n}","import { invariant } from '@react-dnd/invariant';\nimport { useMemo } from 'react';\n/**\n * Internal utility hook to get an array-version of spec.accept.\n * The main utility here is that we aren't creating a new array on every render if a non-array spec.accept is passed in.\n * @param spec\n */\n\nexport function useAccept(spec) {\n  var accept = spec.accept;\n  return useMemo(function () {\n    invariant(spec.accept != null, 'accept must be defined');\n    return Array.isArray(accept) ? accept : [accept];\n  }, [accept]);\n}","import { useMemo } from 'react';\nexport function useConnectDropTarget(connector) {\n  return useMemo(function () {\n    return connector.hooks.dropTarget();\n  }, [connector]);\n}","import { useRegisteredDropTarget } from './useRegisteredDropTarget';\nimport { useOptionalFactory } from '../useOptionalFactory';\nimport { useDropTargetMonitor } from './useDropTargetMonitor';\nimport { useDropTargetConnector } from './useDropTargetConnector';\nimport { useCollectedProps } from '../useCollectedProps';\nimport { useConnectDropTarget } from './connectors';\n/**\n * useDropTarget Hook\n * @param spec The drop target specification (object or function, function preferred)\n * @param deps The memoization deps array to use when evaluating spec changes\n */\n\nexport function useDrop(specArg, deps) {\n  var spec = useOptionalFactory(specArg, deps);\n  var monitor = useDropTargetMonitor();\n  var connector = useDropTargetConnector(spec.options);\n  useRegisteredDropTarget(spec, monitor, connector);\n  return [useCollectedProps(spec.collect, monitor, connector), useConnectDropTarget(connector)];\n}","import { useMemo } from 'react';\nimport { DropTargetMonitorImpl } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nexport function useDropTargetMonitor() {\n  var manager = useDragDropManager();\n  return useMemo(function () {\n    return new DropTargetMonitorImpl(manager);\n  }, [manager]);\n}","import { useMemo } from 'react';\nimport { TargetConnector } from '../../internals';\nimport { useDragDropManager } from '../useDragDropManager';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\nexport function useDropTargetConnector(options) {\n  var manager = useDragDropManager();\n  var connector = useMemo(function () {\n    return new TargetConnector(manager.getBackend());\n  }, [manager]);\n  useIsomorphicLayoutEffect(function () {\n    connector.dropTargetOptions = options || null;\n    connector.reconnect();\n    return function () {\n      return connector.disconnectDropTarget();\n    };\n  }, [options]);\n  return connector;\n}","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { useEffect } from 'react';\nimport { useDragDropManager } from './useDragDropManager';\nimport { useCollector } from './useCollector';\n/**\n * useDragLayer Hook\n * @param collector The property collector\n */\n\nexport function useDragLayer(collect) {\n  var dragDropManager = useDragDropManager();\n  var monitor = dragDropManager.getMonitor();\n\n  var _useCollector = useCollector(monitor, collect),\n      _useCollector2 = _slicedToArray(_useCollector, 2),\n      collected = _useCollector2[0],\n      updateCollected = _useCollector2[1];\n\n  useEffect(function () {\n    return monitor.subscribeToOffsetChange(updateCollected);\n  });\n  useEffect(function () {\n    return monitor.subscribeToStateChange(updateCollected);\n  });\n  return collected;\n}","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar jsxRuntime = require('react/jsx-runtime');\nvar React = require('react');\nvar withScrolling = require('@nosferatu500/react-dnd-scrollzone');\nvar isEqual = require('lodash.isequal');\nvar reactDnd = require('react-dnd');\nvar reactDndHtml5Backend = require('react-dnd-html5-backend');\nvar reactVirtuoso = require('react-virtuoso');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar React__default = /*#__PURE__*/_interopDefaultLegacy(React);\nvar withScrolling__default = /*#__PURE__*/_interopDefaultLegacy(withScrolling);\nvar isEqual__default = /*#__PURE__*/_interopDefaultLegacy(isEqual);\n\nconst defaultGetNodeKey = ({\n  treeIndex\n}) => treeIndex;\n\nconst getReactElementText = parent => {\n  if (typeof parent === \"string\") {\n    return parent;\n  }\n\n  if (parent === undefined || typeof parent !== \"object\" || !parent.props || !parent.props.children || typeof parent.props.children !== \"string\" && typeof parent.props.children !== \"object\") {\n    return \"\";\n  }\n\n  if (typeof parent.props.children === \"string\") {\n    return parent.props.children;\n  }\n\n  return parent.props.children.map(child => getReactElementText(child)).join(\"\");\n};\n\nconst stringSearch = (key, searchQuery, node, path, treeIndex) => {\n  if (typeof node[key] === \"function\") {\n    return String(node[key]({\n      node,\n      path,\n      treeIndex\n    })).includes(searchQuery);\n  }\n\n  if (typeof node[key] === \"object\") {\n    return getReactElementText(node[key]).includes(searchQuery);\n  }\n\n  return node[key] && String(node[key]).includes(searchQuery);\n};\n\nconst defaultSearchMethod = ({\n  node,\n  path,\n  treeIndex,\n  searchQuery\n}) => {\n  return stringSearch(\"title\", searchQuery, node, path, treeIndex) || stringSearch(\"subtitle\", searchQuery, node, path, treeIndex);\n};\n\nconst getNodeDataAtTreeIndexOrNextIndex = ({\n  targetIndex,\n  node,\n  currentIndex,\n  getNodeKey,\n  path = [],\n  lowerSiblingCounts = [],\n  ignoreCollapsed = true,\n  isPseudoRoot = false\n}) => {\n  const selfPath = !isPseudoRoot ? [...path, getNodeKey({\n    node,\n    treeIndex: currentIndex\n  })] : [];\n\n  if (currentIndex === targetIndex) {\n    return {\n      node,\n      lowerSiblingCounts,\n      path: selfPath\n    };\n  }\n\n  if (!node.children || ignoreCollapsed && node.expanded !== true) {\n    return {\n      nextIndex: currentIndex + 1\n    };\n  }\n\n  let childIndex = currentIndex + 1;\n  const childCount = node.children.length;\n\n  for (let i = 0; i < childCount; i += 1) {\n    const result = getNodeDataAtTreeIndexOrNextIndex({\n      ignoreCollapsed,\n      getNodeKey,\n      targetIndex,\n      node: node.children[i],\n      currentIndex: childIndex,\n      lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n      path: selfPath\n    });\n\n    if (result.node) {\n      return result;\n    }\n\n    childIndex = result.nextIndex;\n  }\n\n  return {\n    nextIndex: childIndex\n  };\n};\n\nconst getDescendantCount = ({\n  node,\n  ignoreCollapsed = true\n}) => {\n  return getNodeDataAtTreeIndexOrNextIndex({\n    getNodeKey: () => {},\n    ignoreCollapsed,\n    node,\n    currentIndex: 0,\n    targetIndex: -1\n  }).nextIndex - 1;\n};\n\nconst walkDescendants = ({\n  callback,\n  getNodeKey,\n  ignoreCollapsed,\n  isPseudoRoot = false,\n  node,\n  parentNode = undefined,\n  currentIndex,\n  path = [],\n  lowerSiblingCounts = []\n}) => {\n  const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({\n    node,\n    treeIndex: currentIndex\n  })];\n  const selfInfo = isPseudoRoot ? undefined : {\n    node,\n    parentNode,\n    path: selfPath,\n    lowerSiblingCounts,\n    treeIndex: currentIndex\n  };\n\n  if (!isPseudoRoot) {\n    const callbackResult = callback(selfInfo);\n\n    if (callbackResult === false) {\n      return false;\n    }\n  }\n\n  if (!node.children || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return currentIndex;\n  }\n\n  let childIndex = currentIndex;\n  const childCount = node.children.length;\n\n  if (typeof node.children !== \"function\") {\n    for (let i = 0; i < childCount; i += 1) {\n      childIndex = walkDescendants({\n        callback,\n        getNodeKey,\n        ignoreCollapsed,\n        node: node.children[i],\n        parentNode: isPseudoRoot ? undefined : node,\n        currentIndex: childIndex + 1,\n        lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n        path: selfPath\n      });\n\n      if (childIndex === false) {\n        return false;\n      }\n    }\n  }\n\n  return childIndex;\n};\n\nconst mapDescendants = ({\n  callback,\n  getNodeKey,\n  ignoreCollapsed,\n  isPseudoRoot = false,\n  node,\n  parentNode = undefined,\n  currentIndex,\n  path = [],\n  lowerSiblingCounts = []\n}) => {\n  const nextNode = { ...node\n  };\n  const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({\n    node: nextNode,\n    treeIndex: currentIndex\n  })];\n  const selfInfo = {\n    node: nextNode,\n    parentNode,\n    path: selfPath,\n    lowerSiblingCounts,\n    treeIndex: currentIndex\n  };\n\n  if (!nextNode.children || nextNode.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return {\n      treeIndex: currentIndex,\n      node: callback(selfInfo)\n    };\n  }\n\n  let childIndex = currentIndex;\n  const childCount = nextNode.children.length;\n\n  if (typeof nextNode.children !== \"function\") {\n    nextNode.children = nextNode.children.map((child, i) => {\n      const mapResult = mapDescendants({\n        callback,\n        getNodeKey,\n        ignoreCollapsed,\n        node: child,\n        parentNode: isPseudoRoot ? undefined : nextNode,\n        currentIndex: childIndex + 1,\n        lowerSiblingCounts: [...lowerSiblingCounts, childCount - i - 1],\n        path: selfPath\n      });\n      childIndex = mapResult.treeIndex;\n      return mapResult.node;\n    });\n  }\n\n  return {\n    node: callback(selfInfo),\n    treeIndex: childIndex\n  };\n};\n\nconst getVisibleNodeCount = ({\n  treeData\n}) => {\n  const traverse = node => {\n    if (!node.children || node.expanded !== true || typeof node.children === \"function\") {\n      return 1;\n    }\n\n    return 1 + node.children.reduce((total, currentNode) => total + traverse(currentNode), 0);\n  };\n\n  return treeData.reduce((total, currentNode) => total + traverse(currentNode), 0);\n};\nconst getVisibleNodeInfoAtIndex = ({\n  treeData,\n  index: targetIndex,\n  getNodeKey\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return undefined;\n  }\n\n  const result = getNodeDataAtTreeIndexOrNextIndex({\n    targetIndex,\n    getNodeKey,\n    node: {\n      children: treeData,\n      expanded: true\n    },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: [],\n    isPseudoRoot: true\n  });\n\n  if (result.node) {\n    return result;\n  }\n\n  return undefined;\n};\nconst walk = ({\n  treeData,\n  getNodeKey,\n  callback,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return;\n  }\n\n  walkDescendants({\n    callback,\n    getNodeKey,\n    ignoreCollapsed,\n    isPseudoRoot: true,\n    node: {\n      children: treeData\n    },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: []\n  });\n};\nconst map = ({\n  treeData,\n  getNodeKey,\n  callback,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return [];\n  }\n\n  return mapDescendants({\n    callback,\n    getNodeKey,\n    ignoreCollapsed,\n    isPseudoRoot: true,\n    node: {\n      children: treeData\n    },\n    currentIndex: -1,\n    path: [],\n    lowerSiblingCounts: []\n  }).node.children;\n};\nconst toggleExpandedForAll = ({\n  treeData,\n  expanded = true\n}) => {\n  return map({\n    treeData,\n    callback: ({\n      node\n    }) => ({ ...node,\n      expanded\n    }),\n    getNodeKey: ({\n      treeIndex\n    }) => treeIndex,\n    ignoreCollapsed: false\n  });\n};\nconst changeNodeAtPath = ({\n  treeData,\n  path,\n  newNode,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  const RESULT_MISS = \"RESULT_MISS\";\n\n  const traverse = ({\n    isPseudoRoot = false,\n    node,\n    currentTreeIndex,\n    pathIndex\n  }) => {\n    if (!isPseudoRoot && getNodeKey({\n      node,\n      treeIndex: currentTreeIndex\n    }) !== path[pathIndex]) {\n      return RESULT_MISS;\n    }\n\n    if (pathIndex >= path.length - 1) {\n      return typeof newNode === \"function\" ? newNode({\n        node,\n        treeIndex: currentTreeIndex\n      }) : newNode;\n    }\n\n    if (!node.children) {\n      throw new Error(\"Path referenced children of node with no children.\");\n    }\n\n    let nextTreeIndex = currentTreeIndex + 1;\n\n    for (let i = 0; i < node.children.length; i += 1) {\n      const result = traverse({\n        node: node.children[i],\n        currentTreeIndex: nextTreeIndex,\n        pathIndex: pathIndex + 1\n      });\n\n      if (result !== RESULT_MISS) {\n        if (result) {\n          return { ...node,\n            children: [...node.children.slice(0, i), result, ...node.children.slice(i + 1)]\n          };\n        }\n\n        return { ...node,\n          children: [...node.children.slice(0, i), ...node.children.slice(i + 1)]\n        };\n      }\n\n      nextTreeIndex += 1 + getDescendantCount({\n        node: node.children[i],\n        ignoreCollapsed\n      });\n    }\n\n    return RESULT_MISS;\n  };\n\n  const result = traverse({\n    node: {\n      children: treeData\n    },\n    currentTreeIndex: -1,\n    pathIndex: -1,\n    isPseudoRoot: true\n  });\n\n  if (result === RESULT_MISS) {\n    throw new Error(\"No node found at the given path.\");\n  }\n\n  return result.children;\n};\nconst removeNodeAtPath = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  return changeNodeAtPath({\n    treeData,\n    path,\n    getNodeKey,\n    ignoreCollapsed,\n    newNode: undefined\n  });\n};\nconst removeNode = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  let removedNode;\n  let removedTreeIndex;\n  const nextTreeData = changeNodeAtPath({\n    treeData,\n    path,\n    getNodeKey,\n    ignoreCollapsed,\n    newNode: ({\n      node,\n      treeIndex\n    }) => {\n      removedNode = node;\n      removedTreeIndex = treeIndex;\n      return undefined;\n    }\n  });\n  return {\n    treeData: nextTreeData,\n    node: removedNode,\n    treeIndex: removedTreeIndex\n  };\n};\nconst getNodeAtPath = ({\n  treeData,\n  path,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  let foundNodeInfo;\n\n  try {\n    changeNodeAtPath({\n      treeData,\n      path,\n      getNodeKey,\n      ignoreCollapsed,\n      newNode: ({\n        node,\n        treeIndex\n      }) => {\n        foundNodeInfo = {\n          node,\n          treeIndex\n        };\n        return node;\n      }\n    });\n  } catch {}\n\n  return foundNodeInfo;\n};\nconst addNodeUnderParent = ({\n  treeData,\n  newNode,\n  parentKey = undefined,\n  getNodeKey,\n  ignoreCollapsed = true,\n  expandParent = false,\n  addAsFirstChild = false\n}) => {\n  if (parentKey === null || parentKey === undefined) {\n    return addAsFirstChild ? {\n      treeData: [newNode, ...(treeData || [])],\n      treeIndex: 0\n    } : {\n      treeData: [...(treeData || []), newNode],\n      treeIndex: (treeData || []).length\n    };\n  }\n\n  let insertedTreeIndex;\n  let hasBeenAdded = false;\n  const changedTreeData = map({\n    treeData,\n    getNodeKey,\n    ignoreCollapsed,\n    callback: ({\n      node,\n      treeIndex,\n      path\n    }) => {\n      const key = path ? path[path.length - 1] : undefined;\n\n      if (hasBeenAdded || key !== parentKey) {\n        return node;\n      }\n\n      hasBeenAdded = true;\n      const parentNode = { ...node\n      };\n\n      if (expandParent) {\n        parentNode.expanded = true;\n      }\n\n      if (!parentNode.children) {\n        insertedTreeIndex = treeIndex + 1;\n        return { ...parentNode,\n          children: [newNode]\n        };\n      }\n\n      if (typeof parentNode.children === \"function\") {\n        throw new TypeError(\"Cannot add to children defined by a function\");\n      }\n\n      let nextTreeIndex = treeIndex + 1;\n\n      for (let i = 0; i < parentNode.children.length; i += 1) {\n        nextTreeIndex += 1 + getDescendantCount({\n          node: parentNode.children[i],\n          ignoreCollapsed\n        });\n      }\n\n      insertedTreeIndex = nextTreeIndex;\n      const children = addAsFirstChild ? [newNode, ...parentNode.children] : [...parentNode.children, newNode];\n      return { ...parentNode,\n        children\n      };\n    }\n  });\n\n  if (!hasBeenAdded) {\n    throw new Error(\"No node found with the given key.\");\n  }\n\n  return {\n    treeData: changedTreeData,\n    treeIndex: insertedTreeIndex\n  };\n};\n\nconst addNodeAtDepthAndIndex = ({\n  targetDepth,\n  minimumTreeIndex,\n  newNode,\n  ignoreCollapsed,\n  expandParent,\n  isPseudoRoot = false,\n  isLastChild,\n  node,\n  currentIndex,\n  currentDepth,\n  getNodeKey,\n  path = []\n}) => {\n  const selfPath = n => isPseudoRoot ? [] : [...path, getNodeKey({\n    node: n,\n    treeIndex: currentIndex\n  })];\n\n  if (currentIndex >= minimumTreeIndex - 1 || isLastChild && !(node.children && node.children.length > 0)) {\n    if (typeof node.children === \"function\") {\n      throw new TypeError(\"Cannot add to children defined by a function\");\n    } else {\n      const extraNodeProps = expandParent ? {\n        expanded: true\n      } : {};\n      const nextNode = { ...node,\n        ...extraNodeProps,\n        children: node.children ? [newNode, ...node.children] : [newNode]\n      };\n      return {\n        node: nextNode,\n        nextIndex: currentIndex + 2,\n        insertedTreeIndex: currentIndex + 1,\n        parentPath: selfPath(nextNode),\n        parentNode: isPseudoRoot ? undefined : nextNode\n      };\n    }\n  }\n\n  if (currentDepth >= targetDepth - 1) {\n    if (!node.children || typeof node.children === \"function\" || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n      return {\n        node,\n        nextIndex: currentIndex + 1\n      };\n    }\n\n    let childIndex = currentIndex + 1;\n    let insertedTreeIndex;\n    let insertIndex;\n\n    for (let i = 0; i < node.children.length; i += 1) {\n      if (childIndex >= minimumTreeIndex) {\n        insertedTreeIndex = childIndex;\n        insertIndex = i;\n        break;\n      }\n\n      childIndex += 1 + getDescendantCount({\n        node: node.children[i],\n        ignoreCollapsed\n      });\n    }\n\n    if (insertIndex === null || insertIndex === undefined) {\n      if (childIndex < minimumTreeIndex && !isLastChild) {\n        return {\n          node,\n          nextIndex: childIndex\n        };\n      }\n\n      insertedTreeIndex = childIndex;\n      insertIndex = node.children.length;\n    }\n\n    const nextNode = { ...node,\n      children: [...node.children.slice(0, insertIndex), newNode, ...node.children.slice(insertIndex)]\n    };\n    return {\n      node: nextNode,\n      nextIndex: childIndex,\n      insertedTreeIndex,\n      parentPath: selfPath(nextNode),\n      parentNode: isPseudoRoot ? undefined : nextNode\n    };\n  }\n\n  if (!node.children || typeof node.children === \"function\" || node.expanded !== true && ignoreCollapsed && !isPseudoRoot) {\n    return {\n      node,\n      nextIndex: currentIndex + 1\n    };\n  }\n\n  let insertedTreeIndex;\n  let pathFragment;\n  let parentNode;\n  let childIndex = currentIndex + 1;\n  let newChildren = node.children;\n\n  if (typeof newChildren !== \"function\") {\n    newChildren = newChildren.map((child, i) => {\n      if (insertedTreeIndex !== null && insertedTreeIndex !== undefined) {\n        return child;\n      }\n\n      const mapResult = addNodeAtDepthAndIndex({\n        targetDepth,\n        minimumTreeIndex,\n        newNode,\n        ignoreCollapsed,\n        expandParent,\n        isLastChild: isLastChild && i === newChildren.length - 1,\n        node: child,\n        currentIndex: childIndex,\n        currentDepth: currentDepth + 1,\n        getNodeKey,\n        path: []\n      });\n\n      if (\"insertedTreeIndex\" in mapResult) {\n        ({\n          insertedTreeIndex,\n          parentNode,\n          parentPath: pathFragment\n        } = mapResult);\n      }\n\n      childIndex = mapResult.nextIndex;\n      return mapResult.node;\n    });\n  }\n\n  const nextNode = { ...node,\n    children: newChildren\n  };\n  const result = {\n    node: nextNode,\n    nextIndex: childIndex\n  };\n\n  if (insertedTreeIndex !== null && insertedTreeIndex !== undefined) {\n    result.insertedTreeIndex = insertedTreeIndex;\n    result.parentPath = [...selfPath(nextNode), ...pathFragment];\n    result.parentNode = parentNode;\n  }\n\n  return result;\n};\n\nconst insertNode = ({\n  treeData,\n  depth: targetDepth,\n  minimumTreeIndex,\n  newNode,\n  getNodeKey,\n  ignoreCollapsed = true,\n  expandParent = false\n}) => {\n  if (!treeData && targetDepth === 0) {\n    return {\n      treeData: [newNode],\n      treeIndex: 0,\n      path: [getNodeKey({\n        node: newNode,\n        treeIndex: 0\n      })],\n      parentNode: undefined\n    };\n  }\n\n  const insertResult = addNodeAtDepthAndIndex({\n    targetDepth,\n    minimumTreeIndex,\n    newNode,\n    ignoreCollapsed,\n    expandParent,\n    getNodeKey,\n    isPseudoRoot: true,\n    isLastChild: true,\n    node: {\n      children: treeData\n    },\n    currentIndex: -1,\n    currentDepth: -1\n  });\n\n  if (!(\"insertedTreeIndex\" in insertResult)) {\n    throw new Error(\"No suitable position found to insert.\");\n  }\n\n  const treeIndex = insertResult.insertedTreeIndex;\n  return {\n    treeData: insertResult.node.children,\n    treeIndex,\n    path: [...insertResult.parentPath, getNodeKey({\n      node: newNode,\n      treeIndex\n    })],\n    parentNode: insertResult.parentNode\n  };\n};\nconst getFlatDataFromTree = ({\n  treeData,\n  getNodeKey,\n  ignoreCollapsed = true\n}) => {\n  if (!treeData || treeData.length === 0) {\n    return [];\n  }\n\n  const flattened = [];\n  walk({\n    treeData,\n    getNodeKey,\n    ignoreCollapsed,\n    callback: nodeInfo => {\n      flattened.push(nodeInfo);\n    }\n  });\n  return flattened;\n};\nconst getTreeFromFlatData = ({\n  flatData,\n  getKey = node => node.id,\n  getParentKey = node => node.parentId,\n  rootKey = \"0\"\n}) => {\n  if (!flatData) {\n    return [];\n  }\n\n  const childrenToParents = {};\n\n  for (const child of flatData) {\n    const parentKey = getParentKey(child);\n\n    if (parentKey in childrenToParents) {\n      childrenToParents[parentKey].push(child);\n    } else {\n      childrenToParents[parentKey] = [child];\n    }\n  }\n\n  if (!(rootKey in childrenToParents)) {\n    return [];\n  }\n\n  const trav = parent => {\n    const parentKey = getKey(parent);\n\n    if (parentKey in childrenToParents) {\n      return { ...parent,\n        children: childrenToParents[parentKey].map(child => trav(child))\n      };\n    }\n\n    return { ...parent\n    };\n  };\n\n  return childrenToParents[rootKey].map(child => trav(child));\n};\nconst isDescendant = (older, younger) => {\n  return !!older.children && typeof older.children !== \"function\" && older.children.some(child => child === younger || isDescendant(child, younger));\n};\nconst getDepth = (node, depth = 0) => {\n  if (!node.children) {\n    return depth;\n  }\n\n  if (typeof node.children === \"function\") {\n    return depth + 1;\n  }\n\n  return node.children.reduce((deepest, child) => Math.max(deepest, getDepth(child, depth + 1)), depth);\n};\nconst find = ({\n  getNodeKey,\n  treeData,\n  searchQuery,\n  searchMethod,\n  searchFocusOffset,\n  expandAllMatchPaths = false,\n  expandFocusMatchPaths = true\n}) => {\n  let matchCount = 0;\n\n  const trav = ({\n    isPseudoRoot = false,\n    node,\n    currentIndex,\n    path = []\n  }) => {\n    let matches = [];\n    let isSelfMatch = false;\n    let hasFocusMatch = false;\n    const selfPath = isPseudoRoot ? [] : [...path, getNodeKey({\n      node,\n      treeIndex: currentIndex\n    })];\n    const extraInfo = isPseudoRoot ? undefined : {\n      path: selfPath,\n      treeIndex: currentIndex\n    };\n    const hasChildren = node.children && typeof node.children !== \"function\" && node.children.length > 0;\n\n    if (!isPseudoRoot && searchMethod({ ...extraInfo,\n      node,\n      searchQuery\n    })) {\n      if (matchCount === searchFocusOffset) {\n        hasFocusMatch = true;\n      }\n\n      matchCount += 1;\n      isSelfMatch = true;\n    }\n\n    let childIndex = currentIndex;\n    const newNode = { ...node\n    };\n\n    if (hasChildren) {\n      newNode.children = newNode.children.map(child => {\n        const mapResult = trav({\n          node: child,\n          currentIndex: childIndex + 1,\n          path: selfPath\n        });\n\n        if (mapResult.node.expanded) {\n          childIndex = mapResult.treeIndex;\n        } else {\n          childIndex += 1;\n        }\n\n        if (mapResult.matches.length > 0 || mapResult.hasFocusMatch) {\n          matches = [...matches, ...mapResult.matches];\n\n          if (mapResult.hasFocusMatch) {\n            hasFocusMatch = true;\n          }\n\n          if (expandAllMatchPaths && mapResult.matches.length > 0 || (expandAllMatchPaths || expandFocusMatchPaths) && mapResult.hasFocusMatch) {\n            newNode.expanded = true;\n          }\n        }\n\n        return mapResult.node;\n      });\n    }\n\n    if (!isPseudoRoot && !newNode.expanded) {\n      matches = matches.map(match => ({ ...match,\n        treeIndex: undefined\n      }));\n    }\n\n    if (isSelfMatch) {\n      matches = [{ ...extraInfo,\n        node: newNode\n      }, ...matches];\n    }\n\n    return {\n      node: matches.length > 0 ? newNode : node,\n      matches,\n      hasFocusMatch,\n      treeIndex: childIndex\n    };\n  };\n\n  const result = trav({\n    node: {\n      children: treeData\n    },\n    isPseudoRoot: true,\n    currentIndex: -1\n  });\n  return {\n    matches: result.matches,\n    treeData: result.node.children\n  };\n};\n\nconst classnames = (...classes) => classes.filter(Boolean).join(\" \");\n\nconst defaultProps$3 = {\n  isSearchMatch: false,\n  isSearchFocus: false,\n  canDrag: false,\n  toggleChildrenVisibility: undefined,\n  buttons: [],\n  className: \"\",\n  style: {},\n  parentNode: undefined,\n  draggedNode: undefined,\n  canDrop: false,\n  title: undefined,\n  subtitle: undefined,\n  rowDirection: \"ltr\"\n};\n\nconst NodeRendererDefault = function (props) {\n  props = { ...defaultProps$3,\n    ...props\n  };\n  const {\n    scaffoldBlockPxWidth,\n    toggleChildrenVisibility,\n    connectDragPreview,\n    connectDragSource,\n    isDragging,\n    canDrop,\n    canDrag,\n    node,\n    title,\n    subtitle,\n    draggedNode,\n    path,\n    treeIndex,\n    isSearchMatch,\n    isSearchFocus,\n    buttons,\n    className,\n    style,\n    didDrop,\n    treeId: _treeId,\n    isOver: _isOver,\n    parentNode: _parentNode,\n    rowDirection,\n    ...otherProps\n  } = props;\n  const nodeTitle = title || node.title;\n  const nodeSubtitle = subtitle || node.subtitle;\n  const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : undefined;\n  let handle;\n\n  if (canDrag) {\n    handle = typeof node.children === \"function\" && node.expanded ? jsxRuntime.jsx(\"div\", {\n      className: \"rst__loadingHandle\",\n      children: jsxRuntime.jsx(\"div\", {\n        className: \"rst__loadingCircle\",\n        children: [...Array.from({\n          length: 12\n        })].map((_, index) => jsxRuntime.jsx(\"div\", {\n          className: classnames(\"rst__loadingCirclePoint\", rowDirectionClass ?? \"\")\n        }, index))\n      })\n    }) : connectDragSource(jsxRuntime.jsx(\"div\", {\n      className: \"rst__moveHandle\"\n    }), {\n      dropEffect: \"copy\"\n    });\n  }\n\n  const isDraggedDescendant = draggedNode && isDescendant(draggedNode, node);\n  const isLandingPadActive = !didDrop && isDragging;\n  let buttonStyle = {\n    left: -0.5 * scaffoldBlockPxWidth,\n    right: 0\n  };\n\n  if (rowDirection === \"rtl\") {\n    buttonStyle = {\n      right: -0.5 * scaffoldBlockPxWidth,\n      left: 0\n    };\n  }\n\n  return jsxRuntime.jsxs(\"div\", {\n    style: {\n      height: \"100%\"\n    },\n    ...otherProps,\n    children: [toggleChildrenVisibility && node.children && (node.children.length > 0 || typeof node.children === \"function\") && jsxRuntime.jsxs(\"div\", {\n      children: [jsxRuntime.jsx(\"button\", {\n        type: \"button\",\n        \"aria-label\": node.expanded ? \"Collapse\" : \"Expand\",\n        className: classnames(node.expanded ? \"rst__collapseButton\" : \"rst__expandButton\", rowDirectionClass ?? \"\"),\n        style: buttonStyle,\n        onClick: () => toggleChildrenVisibility({\n          node,\n          path,\n          treeIndex\n        })\n      }), node.expanded && !isDragging && jsxRuntime.jsx(\"div\", {\n        style: {\n          width: scaffoldBlockPxWidth\n        },\n        className: classnames(\"rst__lineChildren\", rowDirectionClass ?? \"\")\n      })]\n    }), jsxRuntime.jsx(\"div\", {\n      className: classnames(\"rst__rowWrapper\", rowDirectionClass ?? \"\"),\n      children: connectDragPreview(jsxRuntime.jsxs(\"div\", {\n        className: classnames(\"rst__row\", isLandingPadActive ? \"rst__rowLandingPad\" : \"\", isLandingPadActive && !canDrop ? \"rst__rowCancelPad\" : \"\", isSearchMatch ? \"rst__rowSearchMatch\" : \"\", isSearchFocus ? \"rst__rowSearchFocus\" : \"\", rowDirectionClass ?? \"\", className ?? \"\"),\n        style: {\n          opacity: isDraggedDescendant ? 0.5 : 1,\n          ...style\n        },\n        children: [handle, jsxRuntime.jsxs(\"div\", {\n          className: classnames(\"rst__rowContents\", !canDrag ? \"rst__rowContentsDragDisabled\" : \"\", rowDirectionClass ?? \"\"),\n          children: [jsxRuntime.jsxs(\"div\", {\n            className: classnames(\"rst__rowLabel\", rowDirectionClass ?? \"\"),\n            children: [jsxRuntime.jsx(\"span\", {\n              className: classnames(\"rst__rowTitle\", node.subtitle ? \"rst__rowTitleWithSubtitle\" : \"\"),\n              children: typeof nodeTitle === \"function\" ? nodeTitle({\n                node,\n                path,\n                treeIndex\n              }) : nodeTitle\n            }), nodeSubtitle && jsxRuntime.jsx(\"span\", {\n              className: \"rst__rowSubtitle\",\n              children: typeof nodeSubtitle === \"function\" ? nodeSubtitle({\n                node,\n                path,\n                treeIndex\n              }) : nodeSubtitle\n            })]\n          }), jsxRuntime.jsx(\"div\", {\n            className: \"rst__rowToolbar\",\n            children: buttons?.map((btn, index) => jsxRuntime.jsx(\"div\", {\n              className: \"rst__toolbarButton\",\n              children: btn\n            }, index))\n          })]\n        })]\n      }))\n    })]\n  });\n};\n\nvar NodeRendererDefault$1 = NodeRendererDefault;\n\nconst defaultProps$2 = {\n  isOver: false,\n  canDrop: false\n};\n\nconst PlaceholderRendererDefault = function (props) {\n  props = { ...defaultProps$2,\n    ...props\n  };\n  const {\n    canDrop,\n    isOver\n  } = props;\n  return jsxRuntime.jsx(\"div\", {\n    className: classnames(\"rst__placeholder\", canDrop ? \"rst__placeholderLandingPad\" : \"\", canDrop && !isOver ? \"rst__placeholderCancelPad\" : \"\")\n  });\n};\n\nvar PlaceholderRendererDefault$1 = PlaceholderRendererDefault;\n\nconst defaultProps$1 = {\n  swapFrom: undefined,\n  swapDepth: undefined,\n  swapLength: undefined,\n  canDrop: false,\n  draggedNode: undefined,\n  rowDirection: \"ltr\"\n};\n\nclass TreeNodeComponent extends React.Component {\n  render() {\n    const props = { ...defaultProps$1,\n      ...this.props\n    };\n    const {\n      children,\n      listIndex,\n      swapFrom,\n      swapLength,\n      swapDepth,\n      scaffoldBlockPxWidth,\n      lowerSiblingCounts,\n      connectDropTarget,\n      isOver,\n      draggedNode,\n      canDrop,\n      treeIndex,\n      rowHeight,\n      treeId: _treeId,\n      getPrevRow: _getPrevRow,\n      node: _node,\n      path: _path,\n      rowDirection,\n      ...otherProps\n    } = props;\n    const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : undefined;\n    const scaffoldBlockCount = lowerSiblingCounts.length;\n    const scaffold = [];\n\n    for (const [i, lowerSiblingCount] of lowerSiblingCounts.entries()) {\n      let lineClass = \"\";\n\n      if (lowerSiblingCount > 0) {\n        if (listIndex === 0) {\n          lineClass = \"rst__lineHalfHorizontalRight rst__lineHalfVerticalBottom\";\n        } else if (i === scaffoldBlockCount - 1) {\n          lineClass = \"rst__lineHalfHorizontalRight rst__lineFullVertical\";\n        } else {\n          lineClass = \"rst__lineFullVertical\";\n        }\n      } else if (listIndex === 0) {\n        lineClass = \"rst__lineHalfHorizontalRight\";\n      } else if (i === scaffoldBlockCount - 1) {\n        lineClass = \"rst__lineHalfVerticalTop rst__lineHalfHorizontalRight\";\n      }\n\n      scaffold.push(jsxRuntime.jsx(\"div\", {\n        style: {\n          width: scaffoldBlockPxWidth\n        },\n        className: classnames(\"rst__lineBlock\", lineClass, rowDirectionClass ?? \"\")\n      }, `pre_${1 + i}`));\n\n      if (treeIndex !== listIndex && i === swapDepth) {\n        let highlightLineClass = \"\";\n\n        if (listIndex === swapFrom + swapLength - 1) {\n          highlightLineClass = \"rst__highlightBottomLeftCorner\";\n        } else if (treeIndex === swapFrom) {\n          highlightLineClass = \"rst__highlightTopLeftCorner\";\n        } else {\n          highlightLineClass = \"rst__highlightLineVertical\";\n        }\n\n        const style = rowDirection === \"rtl\" ? {\n          width: scaffoldBlockPxWidth,\n          right: scaffoldBlockPxWidth * i\n        } : {\n          width: scaffoldBlockPxWidth,\n          left: scaffoldBlockPxWidth * i\n        };\n        scaffold.push(jsxRuntime.jsx(\"div\", {\n          style: style,\n          className: classnames(\"rst__absoluteLineBlock\", highlightLineClass, rowDirectionClass ?? \"\")\n        }, i));\n      }\n    }\n\n    const style = rowDirection === \"rtl\" ? {\n      right: scaffoldBlockPxWidth * scaffoldBlockCount\n    } : {\n      left: scaffoldBlockPxWidth * scaffoldBlockCount\n    };\n    let calculatedRowHeight = rowHeight;\n\n    if (typeof rowHeight === \"function\") {\n      calculatedRowHeight = rowHeight(treeIndex, _node, _path);\n    }\n\n    return connectDropTarget(jsxRuntime.jsxs(\"div\", { ...otherProps,\n      style: {\n        height: `${calculatedRowHeight}px`\n      },\n      className: classnames(\"rst__node\", rowDirectionClass ?? \"\"),\n      ref: node => this.node = node,\n      children: [scaffold, jsxRuntime.jsx(\"div\", {\n        className: \"rst__nodeContent\",\n        style: style,\n        children: React.Children.map(children, child => React.cloneElement(child, {\n          isOver,\n          canDrop,\n          draggedNode\n        }))\n      })]\n    }));\n  }\n\n}\n\nvar TreeNode = TreeNodeComponent;\n\nconst defaultProps = {\n  canDrop: false,\n  draggedNode: undefined\n};\n\nconst TreePlaceholder = props => {\n  props = { ...defaultProps,\n    ...props\n  };\n  const {\n    children,\n    connectDropTarget,\n    treeId,\n    drop,\n    ...otherProps\n  } = props;\n  return connectDropTarget(jsxRuntime.jsx(\"div\", {\n    children: React.Children.map(children, child => React.cloneElement(child, { ...otherProps\n    }))\n  }));\n};\n\nvar TreePlaceholder$1 = TreePlaceholder;\n\nlet rafId = 0;\n\nconst nodeDragSourcePropInjection = (connect, monitor) => ({\n  connectDragSource: connect.dragSource(),\n  connectDragPreview: connect.dragPreview(),\n  isDragging: monitor.isDragging(),\n  didDrop: monitor.didDrop()\n});\n\nconst wrapSource = (el, startDrag, endDrag, dndType) => {\n  const nodeDragSource = {\n    beginDrag: props => {\n      startDrag(props);\n      return {\n        node: props.node,\n        parentNode: props.parentNode,\n        path: props.path,\n        treeIndex: props.treeIndex,\n        treeId: props.treeId\n      };\n    },\n    endDrag: (props, monitor) => {\n      endDrag(monitor.getDropResult());\n    },\n    isDragging: (props, monitor) => {\n      const dropTargetNode = monitor.getItem().node;\n      const draggedNode = props.node;\n      return draggedNode === dropTargetNode;\n    }\n  };\n  return reactDnd.DragSource(dndType, nodeDragSource, nodeDragSourcePropInjection)(el);\n};\n\nconst propInjection = (connect, monitor) => {\n  const dragged = monitor.getItem();\n  return {\n    connectDropTarget: connect.dropTarget(),\n    isOver: monitor.isOver(),\n    canDrop: monitor.canDrop(),\n    draggedNode: dragged ? dragged.node : undefined\n  };\n};\n\nconst wrapPlaceholder = (el, treeId, drop, dndType) => {\n  const placeholderDropTarget = {\n    drop: (dropTargetProps, monitor) => {\n      const {\n        node,\n        path,\n        treeIndex\n      } = monitor.getItem();\n      const result = {\n        node,\n        path,\n        treeIndex,\n        treeId,\n        minimumTreeIndex: 0,\n        depth: 0\n      };\n      drop(result);\n      return result;\n    }\n  };\n  return reactDnd.DropTarget(dndType, placeholderDropTarget, propInjection)(el);\n};\n\nconst getTargetDepth = (dropTargetProps, monitor, component, canNodeHaveChildren, treeId, maxDepth) => {\n  let dropTargetDepth = 0;\n  const rowAbove = dropTargetProps.getPrevRow();\n\n  if (rowAbove) {\n    const {\n      node\n    } = rowAbove;\n    let {\n      path\n    } = rowAbove;\n    const aboveNodeCannotHaveChildren = !canNodeHaveChildren(node);\n\n    if (aboveNodeCannotHaveChildren) {\n      path = path.slice(0, -1);\n    }\n\n    dropTargetDepth = Math.min(path.length, dropTargetProps.path.length);\n  }\n\n  let blocksOffset;\n  let dragSourceInitialDepth = (monitor.getItem().path || []).length;\n\n  if (monitor.getItem().treeId !== treeId) {\n    dragSourceInitialDepth = 0;\n\n    if (component) {\n      const relativePosition = component.node.getBoundingClientRect();\n      const leftShift = monitor.getSourceClientOffset().x - relativePosition.left;\n      blocksOffset = Math.round(leftShift / dropTargetProps.scaffoldBlockPxWidth);\n    } else {\n      blocksOffset = dropTargetProps.path.length;\n    }\n  } else {\n    const direction = dropTargetProps.rowDirection === \"rtl\" ? -1 : 1;\n    blocksOffset = Math.round(direction * monitor.getDifferenceFromInitialOffset().x / dropTargetProps.scaffoldBlockPxWidth);\n  }\n\n  let targetDepth = Math.min(dropTargetDepth, Math.max(0, dragSourceInitialDepth + blocksOffset - 1));\n\n  if (typeof maxDepth !== \"undefined\" && maxDepth !== undefined) {\n    const draggedNode = monitor.getItem().node;\n    const draggedChildDepth = getDepth(draggedNode);\n    targetDepth = Math.max(0, Math.min(targetDepth, maxDepth - draggedChildDepth - 1));\n  }\n\n  return targetDepth;\n};\n\nconst canDrop = (dropTargetProps, monitor, canNodeHaveChildren, treeId, maxDepth, treeRefcanDrop, draggingTreeData, treeReftreeData, getNodeKey) => {\n  if (!monitor.isOver()) {\n    return false;\n  }\n\n  const rowAbove = dropTargetProps.getPrevRow();\n  const abovePath = rowAbove ? rowAbove.path : [];\n  const aboveNode = rowAbove ? rowAbove.node : {};\n  const targetDepth = getTargetDepth(dropTargetProps, monitor, undefined, canNodeHaveChildren, treeId, maxDepth);\n\n  if (targetDepth >= abovePath.length && typeof aboveNode.children === \"function\") {\n    return false;\n  }\n\n  if (typeof treeRefcanDrop === \"function\") {\n    const {\n      node\n    } = monitor.getItem();\n    return treeRefcanDrop({\n      node,\n      prevPath: monitor.getItem().path,\n      prevParent: monitor.getItem().parentNode,\n      prevTreeIndex: monitor.getItem().treeIndex,\n      nextPath: dropTargetProps.children.props.path,\n      nextParent: dropTargetProps.children.props.parentNode,\n      nextTreeIndex: dropTargetProps.children.props.treeIndex\n    });\n  }\n\n  return true;\n};\n\nconst wrapTarget = (el, canNodeHaveChildren, treeId, maxDepth, treeRefcanDrop, drop, dragHover, dndType, draggingTreeData, treeReftreeData, getNodeKey) => {\n  const nodeDropTarget = {\n    drop: (dropTargetProps, monitor, component) => {\n      const result = {\n        node: monitor.getItem().node,\n        path: monitor.getItem().path,\n        treeIndex: monitor.getItem().treeIndex,\n        treeId,\n        minimumTreeIndex: dropTargetProps.treeIndex,\n        depth: getTargetDepth(dropTargetProps, monitor, component, canNodeHaveChildren, treeId, maxDepth)\n      };\n      drop(result);\n      return result;\n    },\n    hover: (dropTargetProps, monitor, component) => {\n      const targetDepth = getTargetDepth(dropTargetProps, monitor, component, canNodeHaveChildren, treeId, maxDepth);\n      const draggedNode = monitor.getItem().node;\n      const needsRedraw = dropTargetProps.node !== draggedNode || targetDepth !== dropTargetProps.path.length - 1;\n\n      if (!needsRedraw) {\n        return;\n      }\n\n      cancelAnimationFrame(rafId);\n      rafId = requestAnimationFrame(() => {\n        const item = monitor.getItem();\n\n        if (!item || !monitor.isOver()) {\n          return;\n        }\n\n        dragHover({\n          node: draggedNode,\n          path: item.path,\n          minimumTreeIndex: dropTargetProps.listIndex,\n          depth: targetDepth\n        });\n      });\n    },\n    canDrop: (dropTargetProps, monitor) => canDrop(dropTargetProps, monitor, canNodeHaveChildren, treeId, maxDepth, treeRefcanDrop)\n  };\n  return reactDnd.DropTarget(dndType, nodeDropTarget, propInjection)(el);\n};\n\nconst slideRows = (rows, fromIndex, toIndex, count = 1) => {\n  const rowsWithoutMoved = [...rows.slice(0, fromIndex), ...rows.slice(fromIndex + count)];\n  return [...rowsWithoutMoved.slice(0, toIndex), ...rows.slice(fromIndex, fromIndex + count), ...rowsWithoutMoved.slice(toIndex)];\n};\n\nconst memoize = f => {\n  let savedArgsArray = [];\n  let savedKeysArray = [];\n  let savedResult;\n  return args => {\n    const keysArray = Object.keys(args).sort();\n    const argsArray = keysArray.map(key => args[key]);\n\n    if (argsArray.length !== savedArgsArray.length || argsArray.some((arg, index) => arg !== savedArgsArray[index]) || keysArray.some((key, index) => key !== savedKeysArray[index])) {\n      savedArgsArray = argsArray;\n      savedKeysArray = keysArray;\n      savedResult = f(args);\n    }\n\n    return savedResult;\n  };\n};\n\nconst memoizedInsertNode = memoize(insertNode);\nconst memoizedGetFlatDataFromTree = memoize(getFlatDataFromTree);\nconst memoizedGetDescendantCount = memoize(getDescendantCount);\n\nlet treeIdCounter = 1;\n\nconst mergeTheme = props => {\n  const merged = { ...props,\n    style: { ...props.theme.style,\n      ...props.style\n    },\n    innerStyle: { ...props.theme.innerStyle,\n      ...props.innerStyle\n    }\n  };\n  const overridableDefaults = {\n    nodeContentRenderer: NodeRendererDefault$1,\n    placeholderRenderer: PlaceholderRendererDefault$1,\n    scaffoldBlockPxWidth: 44,\n    slideRegionSize: 100,\n    rowHeight: 62,\n    treeNodeRenderer: TreeNode\n  };\n\n  for (const propKey of Object.keys(overridableDefaults)) {\n    if (props[propKey] === undefined) {\n      merged[propKey] = typeof props.theme[propKey] !== \"undefined\" ? props.theme[propKey] : overridableDefaults[propKey];\n    }\n  }\n\n  return merged;\n};\n\nclass ReactSortableTree extends React.Component {\n  static search(props, state, seekIndex, expand, singleSearch) {\n    const {\n      onChange,\n      getNodeKey,\n      searchFinishCallback,\n      searchQuery,\n      searchMethod,\n      searchFocusOffset,\n      onlyExpandSearchedNodes\n    } = props;\n    const {\n      instanceProps\n    } = state;\n\n    if (!searchQuery && !searchMethod) {\n      if (searchFinishCallback) {\n        searchFinishCallback([]);\n      }\n\n      return {\n        searchMatches: []\n      };\n    }\n\n    const newState = {\n      instanceProps: {}\n    };\n    const {\n      treeData: expandedTreeData,\n      matches: searchMatches\n    } = find({\n      getNodeKey,\n      treeData: onlyExpandSearchedNodes ? toggleExpandedForAll({\n        treeData: instanceProps.treeData,\n        expanded: false\n      }) : instanceProps.treeData,\n      searchQuery,\n      searchMethod: searchMethod || defaultSearchMethod,\n      searchFocusOffset,\n      expandAllMatchPaths: expand && !singleSearch,\n      expandFocusMatchPaths: !!expand\n    });\n\n    if (expand) {\n      newState.instanceProps.ignoreOneTreeUpdate = true;\n      onChange(expandedTreeData);\n    }\n\n    if (searchFinishCallback) {\n      searchFinishCallback(searchMatches);\n    }\n\n    let searchFocusTreeIndex;\n\n    if (seekIndex && searchFocusOffset !== undefined && searchFocusOffset < searchMatches.length) {\n      searchFocusTreeIndex = searchMatches[searchFocusOffset].treeIndex;\n    }\n\n    newState.searchMatches = searchMatches;\n    newState.searchFocusTreeIndex = searchFocusTreeIndex;\n    return newState;\n  }\n\n  static loadLazyChildren(props, state) {\n    const {\n      instanceProps\n    } = state;\n    walk({\n      treeData: instanceProps.treeData,\n      getNodeKey: props.getNodeKey,\n      callback: ({\n        node,\n        path,\n        lowerSiblingCounts,\n        treeIndex\n      }) => {\n        if (node.children && typeof node.children === \"function\" && (node.expanded || props.loadCollapsedLazyChildren)) {\n          node.children({\n            node,\n            path,\n            lowerSiblingCounts,\n            treeIndex,\n            done: childrenArray => props.onChange(changeNodeAtPath({\n              treeData: instanceProps.treeData,\n              path,\n              newNode: ({\n                node: oldNode\n              }) => oldNode === node ? { ...oldNode,\n                children: childrenArray\n              } : oldNode,\n              getNodeKey: props.getNodeKey\n            }))\n          });\n        }\n      }\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.listRef = React__default[\"default\"].createRef();\n    const {\n      dndType,\n      nodeContentRenderer,\n      treeNodeRenderer,\n      slideRegionSize\n    } = mergeTheme(props);\n    this.treeId = `rst__${treeIdCounter}`;\n    treeIdCounter += 1;\n    this.dndType = dndType || this.treeId;\n    this.nodeContentRenderer = wrapSource(nodeContentRenderer, this.startDrag, this.endDrag, this.dndType);\n    this.treePlaceholderRenderer = wrapPlaceholder(TreePlaceholder$1, this.treeId, this.drop, this.dndType);\n    this.scrollZoneVirtualList = (withScrolling.createScrollingComponent || withScrolling__default[\"default\"])(React__default[\"default\"].forwardRef((props, ref) => {\n      const {\n        dragDropManager,\n        rowHeight,\n        classname,\n        style,\n        ...otherProps\n      } = props;\n      return jsxRuntime.jsx(reactVirtuoso.Virtuoso, {\n        ref: this.listRef,\n        ...otherProps\n      });\n    }));\n    this.vStrength = withScrolling.createVerticalStrength(slideRegionSize);\n    this.hStrength = withScrolling.createHorizontalStrength(slideRegionSize);\n    this.state = {\n      draggingTreeData: undefined,\n      draggedNode: undefined,\n      draggedMinimumTreeIndex: undefined,\n      draggedDepth: undefined,\n      searchMatches: [],\n      searchFocusTreeIndex: undefined,\n      dragging: false,\n      instanceProps: {\n        treeData: [],\n        ignoreOneTreeUpdate: false,\n        searchQuery: undefined,\n        searchFocusOffset: undefined\n      }\n    };\n    this.treeNodeRenderer = wrapTarget(treeNodeRenderer, this.canNodeHaveChildren, this.treeId, this.props.maxDepth, this.props.canDrop, this.drop, this.dragHover, this.dndType, this.state.draggingTreeData, this.props.treeData, this.props.getNodeKey);\n    this.toggleChildrenVisibility = this.toggleChildrenVisibility.bind(this);\n    this.moveNode = this.moveNode.bind(this);\n    this.startDrag = this.startDrag.bind(this);\n    this.dragHover = this.dragHover.bind(this);\n    this.endDrag = this.endDrag.bind(this);\n    this.drop = this.drop.bind(this);\n    this.handleDndMonitorChange = this.handleDndMonitorChange.bind(this);\n  }\n\n  componentDidMount() {\n    ReactSortableTree.loadLazyChildren(this.props, this.state);\n    const stateUpdate = ReactSortableTree.search(this.props, this.state, true, true, false);\n    this.setState(stateUpdate);\n    this.clearMonitorSubscription = this.props.dragDropManager.getMonitor().subscribeToStateChange(this.handleDndMonitorChange);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    const {\n      instanceProps\n    } = prevState;\n    const newState = {};\n    const isTreeDataEqual = isEqual__default[\"default\"](instanceProps.treeData, nextProps.treeData);\n    instanceProps.treeData = nextProps.treeData;\n\n    if (!isTreeDataEqual) {\n      if (instanceProps.ignoreOneTreeUpdate) {\n        instanceProps.ignoreOneTreeUpdate = false;\n      } else {\n        newState.searchFocusTreeIndex = undefined;\n        ReactSortableTree.loadLazyChildren(nextProps, prevState);\n        Object.assign(newState, ReactSortableTree.search(nextProps, prevState, false, false, false));\n      }\n\n      newState.draggingTreeData = undefined;\n      newState.draggedNode = undefined;\n      newState.draggedMinimumTreeIndex = undefined;\n      newState.draggedDepth = undefined;\n      newState.dragging = false;\n    } else if (!isEqual__default[\"default\"](instanceProps.searchQuery, nextProps.searchQuery)) {\n      Object.assign(newState, ReactSortableTree.search(nextProps, prevState, true, true, false));\n    } else if (instanceProps.searchFocusOffset !== nextProps.searchFocusOffset) {\n      Object.assign(newState, ReactSortableTree.search(nextProps, prevState, true, true, true));\n    }\n\n    instanceProps.searchQuery = nextProps.searchQuery;\n    instanceProps.searchFocusOffset = nextProps.searchFocusOffset;\n    newState.instanceProps = { ...instanceProps,\n      ...newState.instanceProps\n    };\n    return newState;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.state.dragging !== prevState.dragging && this.props.onDragStateChanged) {\n      this.props.onDragStateChanged({\n        isDragging: this.state.dragging,\n        draggedNode: this.state.draggedNode\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    this.clearMonitorSubscription();\n  }\n\n  handleDndMonitorChange() {\n    const monitor = this.props.dragDropManager.getMonitor();\n\n    if (!monitor.isDragging() && this.state.draggingTreeData) {\n      setTimeout(() => {\n        this.endDrag();\n      });\n    }\n  }\n\n  getRows(treeData) {\n    return memoizedGetFlatDataFromTree({\n      ignoreCollapsed: true,\n      getNodeKey: this.props.getNodeKey,\n      treeData\n    });\n  }\n\n  startDrag = ({\n    path\n  }) => {\n    this.setState(prevState => {\n      const {\n        treeData: draggingTreeData,\n        node: draggedNode,\n        treeIndex: draggedMinimumTreeIndex\n      } = removeNode({\n        treeData: prevState.instanceProps.treeData,\n        path,\n        getNodeKey: this.props.getNodeKey\n      });\n      return {\n        draggingTreeData,\n        draggedNode,\n        draggedDepth: path.length - 1,\n        draggedMinimumTreeIndex,\n        dragging: true\n      };\n    });\n  };\n  dragHover = ({\n    node: draggedNode,\n    depth: draggedDepth,\n    minimumTreeIndex: draggedMinimumTreeIndex\n  }) => {\n    if (this.state.draggedDepth === draggedDepth && this.state.draggedMinimumTreeIndex === draggedMinimumTreeIndex) {\n      return;\n    }\n\n    this.setState(({\n      draggingTreeData,\n      instanceProps\n    }) => {\n      const newDraggingTreeData = draggingTreeData || instanceProps.treeData;\n      const addedResult = memoizedInsertNode({\n        treeData: newDraggingTreeData,\n        newNode: draggedNode,\n        depth: draggedDepth,\n        minimumTreeIndex: draggedMinimumTreeIndex,\n        expandParent: true,\n        getNodeKey: this.props.getNodeKey\n      });\n      const rows = this.getRows(addedResult.treeData);\n      const expandedParentPath = rows[addedResult.treeIndex].path;\n      return {\n        draggedNode,\n        draggedDepth,\n        draggedMinimumTreeIndex,\n        draggingTreeData: changeNodeAtPath({\n          treeData: newDraggingTreeData,\n          path: expandedParentPath.slice(0, -1),\n          newNode: ({\n            node\n          }) => ({ ...node,\n            expanded: true\n          }),\n          getNodeKey: this.props.getNodeKey\n        }),\n        searchFocusTreeIndex: undefined,\n        dragging: true\n      };\n    });\n  };\n  endDrag = dropResult => {\n    const {\n      instanceProps\n    } = this.state;\n\n    if (!dropResult) {\n      this.setState({\n        draggingTreeData: undefined,\n        draggedNode: undefined,\n        draggedMinimumTreeIndex: undefined,\n        draggedDepth: undefined,\n        dragging: false\n      });\n    } else if (dropResult.treeId !== this.treeId) {\n      const {\n        node,\n        path,\n        treeIndex\n      } = dropResult;\n      let shouldCopy = this.props.shouldCopyOnOutsideDrop;\n\n      if (typeof shouldCopy === \"function\") {\n        shouldCopy = shouldCopy({\n          node,\n          prevTreeIndex: treeIndex,\n          prevPath: path\n        });\n      }\n\n      let treeData = this.state.draggingTreeData || instanceProps.treeData;\n\n      if (shouldCopy) {\n        treeData = changeNodeAtPath({\n          treeData: instanceProps.treeData,\n          path,\n          newNode: ({\n            node: copyNode\n          }) => ({ ...copyNode\n          }),\n          getNodeKey: this.props.getNodeKey\n        });\n      }\n\n      this.props.onChange(treeData);\n      this.props.onMoveNode({\n        treeData,\n        node,\n        treeIndex: undefined,\n        path: undefined,\n        nextPath: undefined,\n        nextTreeIndex: undefined,\n        prevPath: path,\n        prevTreeIndex: treeIndex\n      });\n    }\n  };\n  drop = dropResult => {\n    this.moveNode(dropResult);\n  };\n  canNodeHaveChildren = node => {\n    const {\n      canNodeHaveChildren\n    } = this.props;\n\n    if (canNodeHaveChildren) {\n      return canNodeHaveChildren(node);\n    }\n\n    return true;\n  };\n\n  toggleChildrenVisibility({\n    node: targetNode,\n    path\n  }) {\n    const {\n      instanceProps\n    } = this.state;\n    const treeData = changeNodeAtPath({\n      treeData: instanceProps.treeData,\n      path,\n      newNode: ({\n        node\n      }) => ({ ...node,\n        expanded: !node.expanded\n      }),\n      getNodeKey: this.props.getNodeKey\n    });\n    this.props.onChange(treeData);\n    this.props.onVisibilityToggle({\n      treeData,\n      node: targetNode,\n      expanded: !targetNode.expanded,\n      path\n    });\n  }\n\n  moveNode({\n    node,\n    path: prevPath,\n    treeIndex: prevTreeIndex,\n    depth,\n    minimumTreeIndex\n  }) {\n    const {\n      treeData,\n      treeIndex,\n      path,\n      parentNode: nextParentNode\n    } = insertNode({\n      treeData: this.state.draggingTreeData,\n      newNode: node,\n      depth,\n      minimumTreeIndex,\n      expandParent: true,\n      getNodeKey: this.props.getNodeKey\n    });\n    this.props.onChange(treeData);\n    this.props.onMoveNode({\n      treeData,\n      node,\n      treeIndex,\n      path,\n      nextPath: path,\n      nextTreeIndex: treeIndex,\n      prevPath,\n      prevTreeIndex,\n      nextParentNode\n    });\n  }\n\n  renderRow(row, {\n    listIndex,\n    style,\n    getPrevRow,\n    matchKeys,\n    swapFrom,\n    swapDepth,\n    swapLength\n  }) {\n    const {\n      node,\n      parentNode,\n      path,\n      lowerSiblingCounts,\n      treeIndex\n    } = row;\n    const {\n      canDrag,\n      generateNodeProps,\n      scaffoldBlockPxWidth,\n      searchFocusOffset,\n      rowDirection,\n      rowHeight\n    } = mergeTheme(this.props);\n    const TreeNodeRenderer = this.treeNodeRenderer;\n    const NodeContentRenderer = this.nodeContentRenderer;\n    const nodeKey = path[path.length - 1];\n    const isSearchMatch = (nodeKey in matchKeys);\n    const isSearchFocus = isSearchMatch && matchKeys[nodeKey] === searchFocusOffset;\n    const callbackParams = {\n      node,\n      parentNode,\n      path,\n      lowerSiblingCounts,\n      treeIndex,\n      isSearchMatch,\n      isSearchFocus\n    };\n    const nodeProps = !generateNodeProps ? {} : generateNodeProps(callbackParams);\n    const rowCanDrag = typeof canDrag !== \"function\" ? canDrag : canDrag(callbackParams);\n    const sharedProps = {\n      treeIndex,\n      scaffoldBlockPxWidth,\n      node,\n      path,\n      treeId: this.treeId,\n      rowDirection\n    };\n    return jsxRuntime.jsx(TreeNodeRenderer, {\n      style: style,\n      rowHeight: rowHeight,\n      listIndex: listIndex,\n      getPrevRow: getPrevRow,\n      lowerSiblingCounts: lowerSiblingCounts,\n      swapFrom: swapFrom,\n      swapLength: swapLength,\n      swapDepth: swapDepth,\n      ...sharedProps,\n      children: jsxRuntime.jsx(NodeContentRenderer, {\n        parentNode: parentNode,\n        isSearchMatch: isSearchMatch,\n        isSearchFocus: isSearchFocus,\n        canDrag: rowCanDrag,\n        toggleChildrenVisibility: this.toggleChildrenVisibility,\n        ...sharedProps,\n        ...nodeProps\n      })\n    }, nodeKey);\n  }\n\n  render() {\n    const {\n      dragDropManager,\n      style,\n      className,\n      innerStyle,\n      placeholderRenderer,\n      getNodeKey,\n      rowDirection\n    } = mergeTheme(this.props);\n    const {\n      searchMatches,\n      searchFocusTreeIndex,\n      draggedNode,\n      draggedDepth,\n      draggedMinimumTreeIndex,\n      instanceProps\n    } = this.state;\n    const treeData = this.state.draggingTreeData || instanceProps.treeData;\n    const rowDirectionClass = rowDirection === \"rtl\" ? \"rst__rtl\" : undefined;\n    let rows;\n    let swapFrom;\n    let swapLength;\n\n    if (draggedNode && draggedMinimumTreeIndex !== undefined) {\n      const addedResult = memoizedInsertNode({\n        treeData,\n        newNode: draggedNode,\n        depth: draggedDepth,\n        minimumTreeIndex: draggedMinimumTreeIndex,\n        expandParent: true,\n        getNodeKey\n      });\n      const swapTo = draggedMinimumTreeIndex;\n      swapFrom = addedResult.treeIndex;\n      swapLength = 1 + memoizedGetDescendantCount({\n        node: draggedNode\n      });\n      rows = slideRows(this.getRows(addedResult.treeData), swapFrom, swapTo, swapLength);\n    } else {\n      rows = this.getRows(treeData);\n    }\n\n    const matchKeys = {};\n\n    for (const [i, {\n      path\n    }] of searchMatches.entries()) {\n      matchKeys[path[path.length - 1]] = i;\n    }\n\n    if (searchFocusTreeIndex !== undefined) {\n      this.listRef.current.scrollToIndex({\n        index: searchFocusTreeIndex,\n        align: \"center\"\n      });\n    }\n\n    let containerStyle = style;\n    let list;\n\n    if (rows.length === 0) {\n      const Placeholder = this.treePlaceholderRenderer;\n      const PlaceholderContent = placeholderRenderer;\n      list = jsxRuntime.jsx(Placeholder, {\n        treeId: this.treeId,\n        drop: this.drop,\n        children: jsxRuntime.jsx(PlaceholderContent, {})\n      });\n    } else {\n      containerStyle = {\n        height: \"100%\",\n        ...containerStyle\n      };\n      const ScrollZoneVirtualList = this.scrollZoneVirtualList;\n      list = jsxRuntime.jsx(ScrollZoneVirtualList, {\n        data: rows,\n        dragDropManager: dragDropManager,\n        verticalStrength: this.vStrength,\n        horizontalStrength: this.hStrength,\n        className: \"rst__virtualScrollOverride\",\n        style: innerStyle,\n        itemContent: index => this.renderRow(rows[index], {\n          listIndex: index,\n          getPrevRow: () => rows[index - 1] || undefined,\n          matchKeys,\n          swapFrom,\n          swapDepth: draggedDepth,\n          swapLength\n        })\n      });\n    }\n\n    return jsxRuntime.jsx(\"div\", {\n      className: classnames(\"rst__tree\", className, rowDirectionClass),\n      style: containerStyle,\n      children: list\n    });\n  }\n\n}\n\nReactSortableTree.defaultProps = {\n  canDrag: true,\n  canDrop: undefined,\n  canNodeHaveChildren: () => true,\n  className: \"\",\n  dndType: undefined,\n  generateNodeProps: undefined,\n  getNodeKey: defaultGetNodeKey,\n  innerStyle: {},\n  maxDepth: undefined,\n  treeNodeRenderer: undefined,\n  nodeContentRenderer: undefined,\n  onMoveNode: () => {},\n  onVisibilityToggle: () => {},\n  placeholderRenderer: undefined,\n  scaffoldBlockPxWidth: undefined,\n  searchFinishCallback: undefined,\n  searchFocusOffset: undefined,\n  searchMethod: undefined,\n  searchQuery: undefined,\n  shouldCopyOnOutsideDrop: false,\n  slideRegionSize: undefined,\n  style: {},\n  theme: {},\n  onDragStateChanged: () => {},\n  onlyExpandSearchedNodes: false,\n  rowDirection: \"ltr\",\n  debugMode: false,\n  overscan: 0\n};\n\nconst SortableTreeWithoutDndContext = function (props) {\n  return jsxRuntime.jsx(reactDnd.DndContext.Consumer, {\n    children: ({\n      dragDropManager\n    }) => dragDropManager === undefined ? undefined : jsxRuntime.jsx(ReactSortableTree, { ...props,\n      dragDropManager: dragDropManager\n    })\n  });\n};\n\nconst SortableTree = function (props) {\n  return jsxRuntime.jsx(reactDnd.DndProvider, {\n    debugMode: props.debugMode,\n    backend: reactDndHtml5Backend.HTML5Backend,\n    children: jsxRuntime.jsx(SortableTreeWithoutDndContext, { ...props\n    })\n  });\n};\n\nconst SortableTreeWithExternalManager = function (props) {\n  return jsxRuntime.jsx(reactDnd.DndProvider, {\n    manager: props.dragDropManager,\n    children: jsxRuntime.jsx(SortableTreeWithoutDndContext, { ...props\n    })\n  });\n};\nvar SortableTree$1 = SortableTree;\n\nexports.SortableTreeWithExternalManager = SortableTreeWithExternalManager;\nexports.SortableTreeWithoutDndContext = SortableTreeWithoutDndContext;\nexports.addNodeUnderParent = addNodeUnderParent;\nexports.changeNodeAtPath = changeNodeAtPath;\nexports[\"default\"] = SortableTree$1;\nexports.defaultGetNodeKey = defaultGetNodeKey;\nexports.defaultSearchMethod = defaultSearchMethod;\nexports.find = find;\nexports.getDepth = getDepth;\nexports.getDescendantCount = getDescendantCount;\nexports.getFlatDataFromTree = getFlatDataFromTree;\nexports.getNodeAtPath = getNodeAtPath;\nexports.getTreeFromFlatData = getTreeFromFlatData;\nexports.getVisibleNodeCount = getVisibleNodeCount;\nexports.getVisibleNodeInfoAtIndex = getVisibleNodeInfoAtIndex;\nexports.insertNode = insertNode;\nexports.isDescendant = isDescendant;\nexports.map = map;\nexports.removeNode = removeNode;\nexports.removeNodeAtPath = removeNodeAtPath;\nexports.toggleExpandedForAll = toggleExpandedForAll;\nexports.walk = walk;\n","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      var F = function F() {};\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n  var normalCompletion = true,\n    didErr = false,\n    err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\nmodule.exports = _createForOfIteratorHelper, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar jsxRuntime = require('react/jsx-runtime');\nvar react = require('react');\nvar reactDnd = require('react-dnd');\n\nconst throttle = (func, timeFrame) => {\n  let lastTime = 0;\n  return (...args) => {\n    const now = new Date();\n\n    if (now - lastTime >= timeFrame) {\n      func(...args);\n      lastTime = now;\n    }\n  };\n};\n\nconst intBetween = (min, max, val) => Math.floor(Math.min(max, Math.max(min, val)));\n\nconst getCoords = evt => {\n  return {\n    x: evt.clientX,\n    y: evt.clientY\n  };\n};\n\nconst DEFAULT_BUFFER = 150;\nconst createHorizontalStrength = _buffer => ({\n  x,\n  w,\n  y,\n  h\n}, point) => {\n  const buffer = Math.min(w / 2, _buffer);\n  const inRange = point.x >= x && point.x <= x + w;\n  const inBox = inRange && point.y >= y && point.y <= y + h;\n\n  if (inBox) {\n    if (point.x < x + buffer) {\n      return (point.x - x - buffer) / buffer;\n    }\n\n    if (point.x > x + w - buffer) {\n      return -(x + w - point.x - buffer) / buffer;\n    }\n  }\n\n  return 0;\n};\nconst createVerticalStrength = _buffer => ({\n  y,\n  h,\n  x,\n  w\n}, point) => {\n  const buffer = Math.min(h / 2, _buffer);\n  const inRange = point.y >= y && point.y <= y + h;\n  const inBox = inRange && point.x >= x && point.x <= x + w;\n\n  if (inBox) {\n    if (point.y < y + buffer) {\n      return (point.y - y - buffer) / buffer;\n    }\n\n    if (point.y > y + h - buffer) {\n      return -(y + h - point.y - buffer) / buffer;\n    }\n  }\n\n  return 0;\n};\nconst defaultProps = {\n  onScrollChange: () => {},\n  verticalStrength: createVerticalStrength(DEFAULT_BUFFER),\n  horizontalStrength: createHorizontalStrength(DEFAULT_BUFFER),\n  strengthMultiplier: 30\n};\nconst createScrollingComponent = WrappedComponent => {\n  return props => {\n    props = { ...defaultProps,\n      ...props\n    };\n    let container;\n    const wrappedInstance = react.createRef();\n    const animationFrameID = react.useRef(0);\n    let scaleX = 0;\n    let scaleY = 0;\n    let attached = false;\n    let dragging = false;\n    const updateScrolling = throttle(evt => {\n      const {\n        left: x,\n        top: y,\n        width: w,\n        height: h\n      } = container.getBoundingClientRect();\n      const box = {\n        x,\n        y,\n        w,\n        h\n      };\n      const coords = getCoords(evt);\n      scaleX = props.horizontalStrength(box, coords);\n      scaleY = props.verticalStrength(box, coords);\n\n      if (!animationFrameID.current && (scaleX || scaleY)) {\n        startScrolling();\n      }\n    }, 100);\n\n    const handleEvent = evt => {\n      if (dragging && !attached) {\n        attached = true;\n        window.document.body.addEventListener('dragover', updateScrolling);\n        updateScrolling(evt);\n      }\n    };\n\n    react.useEffect(() => {\n      container = wrappedInstance.current;\n\n      if (container && typeof container.addEventListener === 'function') {\n        container.addEventListener('dragover', handleEvent);\n      }\n\n      const clearMonitorSubscription = props.dragDropManager.getMonitor().subscribeToStateChange(handleMonitorChange);\n      return () => {\n        if (container && typeof container.removeEventListener === 'function') {\n          container.removeEventListener('dragover', handleEvent);\n        }\n\n        clearMonitorSubscription();\n        stopScrolling();\n      };\n    }, []);\n\n    const handleMonitorChange = () => {\n      const isDragging = props.dragDropManager.getMonitor().isDragging();\n\n      if (!dragging && isDragging) {\n        dragging = true;\n      } else if (dragging && !isDragging) {\n        dragging = false;\n        stopScrolling();\n      }\n    };\n\n    const startScrolling = () => {\n      let i = 0;\n\n      const tick = () => {\n        if (props.strengthMultiplier === 0 || scaleX + scaleY === 0) {\n          stopScrolling();\n          return;\n        }\n\n        i += 1;\n\n        if (i % 2) {\n          const {\n            scrollLeft,\n            scrollTop,\n            scrollWidth,\n            scrollHeight,\n            clientWidth,\n            clientHeight\n          } = container;\n          const newLeft = scaleX ? container.scrollLeft = intBetween(0, scrollWidth - clientWidth, scrollLeft + scaleX * props.strengthMultiplier) : scrollLeft;\n          const newTop = scaleY ? container.scrollTop = intBetween(0, scrollHeight - clientHeight, scrollTop + scaleY * props.strengthMultiplier) : scrollTop;\n          props.onScrollChange(newLeft, newTop);\n        }\n\n        animationFrameID.current = window.requestAnimationFrame(tick);\n      };\n\n      tick();\n    };\n\n    const stopScrolling = () => {\n      attached = false;\n      window.document.body.removeEventListener('dragover', updateScrolling);\n      scaleX = 0;\n      scaleY = 0;\n\n      if (animationFrameID.current) {\n        window.cancelAnimationFrame(animationFrameID.current);\n        animationFrameID.current = 0;\n      }\n    };\n\n    const {\n      strengthMultiplier,\n      verticalStrength,\n      horizontalStrength,\n      onScrollChange,\n      ...other\n    } = props;\n    return jsxRuntime.jsx(WrappedComponent, {\n      ref: wrappedInstance,\n      ...other\n    });\n  };\n};\n\nconst createScrollingComponentWithConsumer = WrappedComponent => {\n  const ScrollingComponent = createScrollingComponent(WrappedComponent);\n  return props => {\n    return jsxRuntime.jsx(reactDnd.DndContext.Consumer, {\n      children: ({\n        dragDropManager\n      }) => !dragDropManager ? undefined : jsxRuntime.jsx(ScrollingComponent, { ...props,\n        dragDropManager: dragDropManager\n      })\n    });\n  };\n};\n\nexports.createHorizontalStrength = createHorizontalStrength;\nexports.createScrollingComponent = createScrollingComponent;\nexports.createVerticalStrength = createVerticalStrength;\nexports[\"default\"] = createScrollingComponentWithConsumer;\n","export * from './asap.js'\nexport * from './types.js'\nexport * from './AsapQueue.js'\nexport * from './TaskFactory.js'\n","import { AsapQueue } from './AsapQueue.js'\nimport { TaskFactory } from './TaskFactory.js'\nimport type { TaskFn } from './types.js'\n\nconst asapQueue = new AsapQueue()\nconst taskFactory = new TaskFactory(asapQueue.registerPendingError)\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nexport function asap(task: TaskFn) {\n\tasapQueue.enqueueTask(taskFactory.create(task))\n}\n","// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nconst scope = typeof global !== 'undefined' ? global : self\nconst BrowserMutationObserver =\n\t(scope as any).MutationObserver || (scope as any).WebKitMutationObserver\n\nexport function makeRequestCallFromTimer(callback: () => void) {\n\treturn function requestCall() {\n\t\t// We dispatch a timeout with a specified delay of 0 for engines that\n\t\t// can reliably accommodate that request. This will usually be snapped\n\t\t// to a 4 milisecond delay, but once we're flushing, there's no delay\n\t\t// between events.\n\t\tconst timeoutHandle = setTimeout(handleTimer, 0)\n\t\t// However, since this timer gets frequently dropped in Firefox\n\t\t// workers, we enlist an interval handle that will try to fire\n\t\t// an event 20 times per second until it succeeds.\n\t\tconst intervalHandle = setInterval(handleTimer, 50)\n\n\t\tfunction handleTimer() {\n\t\t\t// Whichever timer succeeds will cancel both timers and\n\t\t\t// execute the callback.\n\t\t\tclearTimeout(timeoutHandle)\n\t\t\tclearInterval(intervalHandle)\n\t\t\tcallback()\n\t\t}\n\t}\n}\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nexport function makeRequestCallFromMutationObserver(callback: () => void) {\n\tlet toggle = 1\n\tconst observer = new BrowserMutationObserver(callback)\n\tconst node = document.createTextNode('')\n\tobserver.observe(node, { characterData: true })\n\treturn function requestCall() {\n\t\ttoggle = -toggle\n\t\t;(node as any).data = toggle\n\t}\n}\n\nexport const makeRequestCall =\n\ttypeof BrowserMutationObserver === 'function'\n\t\t? // MutationObservers are desirable because they have high priority and work\n\t\t  // reliably everywhere they are implemented.\n\t\t  // They are implemented in all modern browsers.\n\t\t  //\n\t\t  // - Android 4-4.3\n\t\t  // - Chrome 26-34\n\t\t  // - Firefox 14-29\n\t\t  // - Internet Explorer 11\n\t\t  // - iPad Safari 6-7.1\n\t\t  // - iPhone Safari 7-7.1\n\t\t  // - Safari 6-7\n\t\t  makeRequestCallFromMutationObserver\n\t\t: // MessageChannels are desirable because they give direct access to the HTML\n\t\t  // task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n\t\t  // 11-12, and in web workers in many engines.\n\t\t  // Although message channels yield to any queued rendering and IO tasks, they\n\t\t  // would be better than imposing the 4ms delay of timers.\n\t\t  // However, they do not work reliably in Internet Explorer or Safari.\n\n\t\t  // Internet Explorer 10 is the only browser that has setImmediate but does\n\t\t  // not have MutationObservers.\n\t\t  // Although setImmediate yields to the browser's renderer, it would be\n\t\t  // preferrable to falling back to setTimeout since it does not have\n\t\t  // the minimum 4ms penalty.\n\t\t  // Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n\t\t  // Desktop to a lesser extent) that renders both setImmediate and\n\t\t  // MessageChannel useless for the purposes of ASAP.\n\t\t  // https://github.com/kriskowal/q/issues/396\n\n\t\t  // Timers are implemented universally.\n\t\t  // We fall back to timers in workers in most engines, and in foreground\n\t\t  // contexts in the following browsers.\n\t\t  // However, note that even this simple case requires nuances to operate in a\n\t\t  // broad spectrum of browsers.\n\t\t  //\n\t\t  // - Firefox 3-13\n\t\t  // - Internet Explorer 6-9\n\t\t  // - iPad Safari 4.3\n\t\t  // - Lynx 2.8.7\n\t\t  makeRequestCallFromTimer\n","// We wrap tasks with recyclable task objects.  A task object implements\n\nimport type { TaskFn, Task } from 'types'\n\n// `call`, just like a function.\nexport class RawTask implements Task {\n\tpublic task: TaskFn | null = null\n\n\tpublic constructor(\n\t\tprivate onError: (err: any) => void,\n\t\tprivate release: (t: RawTask) => void,\n\t) {}\n\n\tpublic call() {\n\t\ttry {\n\t\t\tthis.task && this.task()\n\t\t} catch (error) {\n\t\t\tthis.onError(error)\n\t\t} finally {\n\t\t\tthis.task = null\n\t\t\tthis.release(this)\n\t\t}\n\t}\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","// cheap lodash replacements\nexport function memoize(fn) {\n  var result = null;\n\n  var memoized = function memoized() {\n    if (result == null) {\n      result = fn();\n    }\n\n    return result;\n  };\n\n  return memoized;\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\nexport function union(itemsA, itemsB) {\n  var set = new Set();\n\n  var insertItem = function insertItem(item) {\n    return set.add(item);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  set.forEach(function (key) {\n    return result.push(key);\n  });\n  return result;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { union, without } from './utils/js_utils';\nexport var EnterLeaveCounter = /*#__PURE__*/function () {\n  function EnterLeaveCounter(isNodeInDocument) {\n    _classCallCheck(this, EnterLeaveCounter);\n\n    _defineProperty(this, \"entered\", []);\n\n    _defineProperty(this, \"isNodeInDocument\", void 0);\n\n    this.isNodeInDocument = isNodeInDocument;\n  }\n\n  _createClass(EnterLeaveCounter, [{\n    key: \"enter\",\n    value: function enter(enteringNode) {\n      var _this = this;\n\n      var previousLength = this.entered.length;\n\n      var isNodeEntered = function isNodeEntered(node) {\n        return _this.isNodeInDocument(node) && (!node.contains || node.contains(enteringNode));\n      };\n\n      this.entered = union(this.entered.filter(isNodeEntered), [enteringNode]);\n      return previousLength === 0 && this.entered.length > 0;\n    }\n  }, {\n    key: \"leave\",\n    value: function leave(leavingNode) {\n      var previousLength = this.entered.length;\n      this.entered = without(this.entered.filter(this.isNodeInDocument), leavingNode);\n      return previousLength > 0 && this.entered.length === 0;\n    }\n  }, {\n    key: \"reset\",\n    value: function reset() {\n      this.entered = [];\n    }\n  }]);\n\n  return EnterLeaveCounter;\n}();","import { memoize } from './utils/js_utils';\nexport var isFirefox = memoize(function () {\n  return /firefox/i.test(navigator.userAgent);\n});\nexport var isSafari = memoize(function () {\n  return Boolean(window.safari);\n});","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var MonotonicInterpolant = /*#__PURE__*/function () {\n  function MonotonicInterpolant(xs, ys) {\n    _classCallCheck(this, MonotonicInterpolant);\n\n    _defineProperty(this, \"xs\", void 0);\n\n    _defineProperty(this, \"ys\", void 0);\n\n    _defineProperty(this, \"c1s\", void 0);\n\n    _defineProperty(this, \"c2s\", void 0);\n\n    _defineProperty(this, \"c3s\", void 0);\n\n    var length = xs.length; // Rearrange xs and ys so that xs is sorted\n\n    var indexes = [];\n\n    for (var i = 0; i < length; i++) {\n      indexes.push(i);\n    }\n\n    indexes.sort(function (a, b) {\n      return xs[a] < xs[b] ? -1 : 1;\n    }); // Get consecutive differences and slopes\n\n    var dys = [];\n    var dxs = [];\n    var ms = [];\n    var dx;\n    var dy;\n\n    for (var _i = 0; _i < length - 1; _i++) {\n      dx = xs[_i + 1] - xs[_i];\n      dy = ys[_i + 1] - ys[_i];\n      dxs.push(dx);\n      dys.push(dy);\n      ms.push(dy / dx);\n    } // Get degree-1 coefficients\n\n\n    var c1s = [ms[0]];\n\n    for (var _i2 = 0; _i2 < dxs.length - 1; _i2++) {\n      var m2 = ms[_i2];\n      var mNext = ms[_i2 + 1];\n\n      if (m2 * mNext <= 0) {\n        c1s.push(0);\n      } else {\n        dx = dxs[_i2];\n        var dxNext = dxs[_i2 + 1];\n        var common = dx + dxNext;\n        c1s.push(3 * common / ((common + dxNext) / m2 + (common + dx) / mNext));\n      }\n    }\n\n    c1s.push(ms[ms.length - 1]); // Get degree-2 and degree-3 coefficients\n\n    var c2s = [];\n    var c3s = [];\n    var m;\n\n    for (var _i3 = 0; _i3 < c1s.length - 1; _i3++) {\n      m = ms[_i3];\n      var c1 = c1s[_i3];\n      var invDx = 1 / dxs[_i3];\n\n      var _common = c1 + c1s[_i3 + 1] - m - m;\n\n      c2s.push((m - c1 - _common) * invDx);\n      c3s.push(_common * invDx * invDx);\n    }\n\n    this.xs = xs;\n    this.ys = ys;\n    this.c1s = c1s;\n    this.c2s = c2s;\n    this.c3s = c3s;\n  }\n\n  _createClass(MonotonicInterpolant, [{\n    key: \"interpolate\",\n    value: function interpolate(x) {\n      var xs = this.xs,\n          ys = this.ys,\n          c1s = this.c1s,\n          c2s = this.c2s,\n          c3s = this.c3s; // The rightmost point in the dataset should give an exact result\n\n      var i = xs.length - 1;\n\n      if (x === xs[i]) {\n        return ys[i];\n      } // Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\n\n      var low = 0;\n      var high = c3s.length - 1;\n      var mid;\n\n      while (low <= high) {\n        mid = Math.floor(0.5 * (low + high));\n        var xHere = xs[mid];\n\n        if (xHere < x) {\n          low = mid + 1;\n        } else if (xHere > x) {\n          high = mid - 1;\n        } else {\n          return ys[mid];\n        }\n      }\n\n      i = Math.max(0, high); // Interpolate\n\n      var diff = x - xs[i];\n      var diffSq = diff * diff;\n      return ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq;\n    }\n  }]);\n\n  return MonotonicInterpolant;\n}();","import { isSafari, isFirefox } from './BrowserDetector';\nimport { MonotonicInterpolant } from './MonotonicInterpolant';\nvar ELEMENT_NODE = 1;\nexport function getNodeClientOffset(node) {\n  var el = node.nodeType === ELEMENT_NODE ? node : node.parentElement;\n\n  if (!el) {\n    return null;\n  }\n\n  var _el$getBoundingClient = el.getBoundingClientRect(),\n      top = _el$getBoundingClient.top,\n      left = _el$getBoundingClient.left;\n\n  return {\n    x: left,\n    y: top\n  };\n}\nexport function getEventClientOffset(e) {\n  return {\n    x: e.clientX,\n    y: e.clientY\n  };\n}\n\nfunction isImageNode(node) {\n  var _document$documentEle;\n\n  return node.nodeName === 'IMG' && (isFirefox() || !((_document$documentEle = document.documentElement) !== null && _document$documentEle !== void 0 && _document$documentEle.contains(node)));\n}\n\nfunction getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight) {\n  var dragPreviewWidth = isImage ? dragPreview.width : sourceWidth;\n  var dragPreviewHeight = isImage ? dragPreview.height : sourceHeight; // Work around @2x coordinate discrepancies in browsers\n\n  if (isSafari() && isImage) {\n    dragPreviewHeight /= window.devicePixelRatio;\n    dragPreviewWidth /= window.devicePixelRatio;\n  }\n\n  return {\n    dragPreviewWidth: dragPreviewWidth,\n    dragPreviewHeight: dragPreviewHeight\n  };\n}\n\nexport function getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint) {\n  // The browsers will use the image intrinsic size under different conditions.\n  // Firefox only cares if it's an image, but WebKit also wants it to be detached.\n  var isImage = isImageNode(dragPreview);\n  var dragPreviewNode = isImage ? sourceNode : dragPreview;\n  var dragPreviewNodeOffsetFromClient = getNodeClientOffset(dragPreviewNode);\n  var offsetFromDragPreview = {\n    x: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n    y: clientOffset.y - dragPreviewNodeOffsetFromClient.y\n  };\n  var sourceWidth = sourceNode.offsetWidth,\n      sourceHeight = sourceNode.offsetHeight;\n  var anchorX = anchorPoint.anchorX,\n      anchorY = anchorPoint.anchorY;\n\n  var _getDragPreviewSize = getDragPreviewSize(isImage, dragPreview, sourceWidth, sourceHeight),\n      dragPreviewWidth = _getDragPreviewSize.dragPreviewWidth,\n      dragPreviewHeight = _getDragPreviewSize.dragPreviewHeight;\n\n  var calculateYOffset = function calculateYOffset() {\n    var interpolantY = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the top\n    offsetFromDragPreview.y, // Align at the center\n    offsetFromDragPreview.y / sourceHeight * dragPreviewHeight, // Dock to the bottom\n    offsetFromDragPreview.y + dragPreviewHeight - sourceHeight]);\n    var y = interpolantY.interpolate(anchorY); // Work around Safari 8 positioning bug\n\n    if (isSafari() && isImage) {\n      // We'll have to wait for @3x to see if this is entirely correct\n      y += (window.devicePixelRatio - 1) * dragPreviewHeight;\n    }\n\n    return y;\n  };\n\n  var calculateXOffset = function calculateXOffset() {\n    // Interpolate coordinates depending on anchor point\n    // If you know a simpler way to do this, let me know\n    var interpolantX = new MonotonicInterpolant([0, 0.5, 1], [// Dock to the left\n    offsetFromDragPreview.x, // Align at the center\n    offsetFromDragPreview.x / sourceWidth * dragPreviewWidth, // Dock to the right\n    offsetFromDragPreview.x + dragPreviewWidth - sourceWidth]);\n    return interpolantX.interpolate(anchorX);\n  }; // Force offsets if specified in the options.\n\n\n  var offsetX = offsetPoint.offsetX,\n      offsetY = offsetPoint.offsetY;\n  var isManualOffsetX = offsetX === 0 || offsetX;\n  var isManualOffsetY = offsetY === 0 || offsetY;\n  return {\n    x: isManualOffsetX ? offsetX : calculateXOffset(),\n    y: isManualOffsetY ? offsetY : calculateYOffset()\n  };\n}","export var FILE = '__NATIVE_FILE__';\nexport var URL = '__NATIVE_URL__';\nexport var TEXT = '__NATIVE_TEXT__';\nexport var HTML = '__NATIVE_HTML__';","var _nativeTypesConfig;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as NativeTypes from '../NativeTypes';\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer';\nexport var nativeTypesConfig = (_nativeTypesConfig = {}, _defineProperty(_nativeTypesConfig, NativeTypes.FILE, {\n  exposeProperties: {\n    files: function files(dataTransfer) {\n      return Array.prototype.slice.call(dataTransfer.files);\n    },\n    items: function items(dataTransfer) {\n      return dataTransfer.items;\n    },\n    dataTransfer: function dataTransfer(_dataTransfer) {\n      return _dataTransfer;\n    }\n  },\n  matchesTypes: ['Files']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.HTML, {\n  exposeProperties: {\n    html: function html(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer2) {\n      return _dataTransfer2;\n    }\n  },\n  matchesTypes: ['Html', 'text/html']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.URL, {\n  exposeProperties: {\n    urls: function urls(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer3) {\n      return _dataTransfer3;\n    }\n  },\n  matchesTypes: ['Url', 'text/uri-list']\n}), _defineProperty(_nativeTypesConfig, NativeTypes.TEXT, {\n  exposeProperties: {\n    text: function text(dataTransfer, matchesTypes) {\n      return getDataFromDataTransfer(dataTransfer, matchesTypes, '');\n    },\n    dataTransfer: function dataTransfer(_dataTransfer4) {\n      return _dataTransfer4;\n    }\n  },\n  matchesTypes: ['Text', 'text/plain']\n}), _nativeTypesConfig);","export function getDataFromDataTransfer(dataTransfer, typesToTry, defaultValue) {\n  var result = typesToTry.reduce(function (resultSoFar, typeToTry) {\n    return resultSoFar || dataTransfer.getData(typeToTry);\n  }, '');\n  return result != null ? result : defaultValue;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var NativeDragSource = /*#__PURE__*/function () {\n  function NativeDragSource(config) {\n    _classCallCheck(this, NativeDragSource);\n\n    _defineProperty(this, \"item\", void 0);\n\n    _defineProperty(this, \"config\", void 0);\n\n    this.config = config;\n    this.item = {};\n    this.initializeExposedProperties();\n  }\n\n  _createClass(NativeDragSource, [{\n    key: \"initializeExposedProperties\",\n    value: function initializeExposedProperties() {\n      var _this = this;\n\n      Object.keys(this.config.exposeProperties).forEach(function (property) {\n        Object.defineProperty(_this.item, property, {\n          configurable: true,\n          enumerable: true,\n          get: function get() {\n            // eslint-disable-next-line no-console\n            console.warn(\"Browser doesn't allow reading \\\"\".concat(property, \"\\\" until the drop event.\"));\n            return null;\n          }\n        });\n      });\n    }\n  }, {\n    key: \"loadDataTransfer\",\n    value: function loadDataTransfer(dataTransfer) {\n      var _this2 = this;\n\n      if (dataTransfer) {\n        var newProperties = {};\n        Object.keys(this.config.exposeProperties).forEach(function (property) {\n          newProperties[property] = {\n            value: _this2.config.exposeProperties[property](dataTransfer, _this2.config.matchesTypes),\n            configurable: true,\n            enumerable: true\n          };\n        });\n        Object.defineProperties(this.item, newProperties);\n      }\n    }\n  }, {\n    key: \"canDrag\",\n    value: function canDrag() {\n      return true;\n    }\n  }, {\n    key: \"beginDrag\",\n    value: function beginDrag() {\n      return this.item;\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging(monitor, handle) {\n      return handle === monitor.getSourceId();\n    }\n  }, {\n    key: \"endDrag\",\n    value: function endDrag() {// empty\n    }\n  }]);\n\n  return NativeDragSource;\n}();","import { nativeTypesConfig } from './nativeTypesConfig';\nimport { NativeDragSource } from './NativeDragSource';\nexport function createNativeDragSource(type, dataTransfer) {\n  var result = new NativeDragSource(nativeTypesConfig[type]);\n  result.loadDataTransfer(dataTransfer);\n  return result;\n}\nexport function matchNativeItemType(dataTransfer) {\n  if (!dataTransfer) {\n    return null;\n  }\n\n  var dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || []);\n  return Object.keys(nativeTypesConfig).filter(function (nativeItemType) {\n    var matchesTypes = nativeTypesConfig[nativeItemType].matchesTypes;\n    return matchesTypes.some(function (t) {\n      return dataTransferTypes.indexOf(t) > -1;\n    });\n  })[0] || null;\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nexport var OptionsReader = /*#__PURE__*/function () {\n  function OptionsReader(globalContext, options) {\n    _classCallCheck(this, OptionsReader);\n\n    _defineProperty(this, \"ownerDocument\", null);\n\n    _defineProperty(this, \"globalContext\", void 0);\n\n    _defineProperty(this, \"optionsArgs\", void 0);\n\n    this.globalContext = globalContext;\n    this.optionsArgs = options;\n  }\n\n  _createClass(OptionsReader, [{\n    key: \"window\",\n    get: function get() {\n      if (this.globalContext) {\n        return this.globalContext;\n      } else if (typeof window !== 'undefined') {\n        return window;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      var _this$globalContext;\n\n      if ((_this$globalContext = this.globalContext) !== null && _this$globalContext !== void 0 && _this$globalContext.document) {\n        return this.globalContext.document;\n      } else if (this.window) {\n        return this.window.document;\n      } else {\n        return undefined;\n      }\n    }\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      var _this$optionsArgs;\n\n      return ((_this$optionsArgs = this.optionsArgs) === null || _this$optionsArgs === void 0 ? void 0 : _this$optionsArgs.rootElement) || this.window;\n    }\n  }]);\n\n  return OptionsReader;\n}();","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter';\nimport { getNodeClientOffset, getEventClientOffset, getDragPreviewOffset } from './OffsetUtils';\nimport { createNativeDragSource, matchNativeItemType } from './NativeDragSources';\nimport * as NativeTypes from './NativeTypes';\nimport { OptionsReader } from './OptionsReader';\nexport var HTML5BackendImpl = /*#__PURE__*/function () {\n  // React-Dnd Components\n  // Internal State\n  function HTML5BackendImpl(manager, globalContext, options) {\n    var _this = this;\n\n    _classCallCheck(this, HTML5BackendImpl);\n\n    _defineProperty(this, \"options\", void 0);\n\n    _defineProperty(this, \"actions\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"registry\", void 0);\n\n    _defineProperty(this, \"enterLeaveCounter\", void 0);\n\n    _defineProperty(this, \"sourcePreviewNodes\", new Map());\n\n    _defineProperty(this, \"sourcePreviewNodeOptions\", new Map());\n\n    _defineProperty(this, \"sourceNodes\", new Map());\n\n    _defineProperty(this, \"sourceNodeOptions\", new Map());\n\n    _defineProperty(this, \"dragStartSourceIds\", null);\n\n    _defineProperty(this, \"dropTargetIds\", []);\n\n    _defineProperty(this, \"dragEnterTargetIds\", []);\n\n    _defineProperty(this, \"currentNativeSource\", null);\n\n    _defineProperty(this, \"currentNativeHandle\", null);\n\n    _defineProperty(this, \"currentDragSourceNode\", null);\n\n    _defineProperty(this, \"altKeyPressed\", false);\n\n    _defineProperty(this, \"mouseMoveTimeoutTimer\", null);\n\n    _defineProperty(this, \"asyncEndDragFrameId\", null);\n\n    _defineProperty(this, \"dragOverTargetIds\", null);\n\n    _defineProperty(this, \"lastClientOffset\", null);\n\n    _defineProperty(this, \"hoverRafId\", null);\n\n    _defineProperty(this, \"getSourceClientOffset\", function (sourceId) {\n      var source = _this.sourceNodes.get(sourceId);\n\n      return source && getNodeClientOffset(source) || null;\n    });\n\n    _defineProperty(this, \"endDragNativeItem\", function () {\n      if (!_this.isDraggingNativeItem()) {\n        return;\n      }\n\n      _this.actions.endDrag();\n\n      if (_this.currentNativeHandle) {\n        _this.registry.removeSource(_this.currentNativeHandle);\n      }\n\n      _this.currentNativeHandle = null;\n      _this.currentNativeSource = null;\n    });\n\n    _defineProperty(this, \"isNodeInDocument\", function (node) {\n      // Check the node either in the main document or in the current context\n      return Boolean(node && _this.document && _this.document.body && _this.document.body.contains(node));\n    });\n\n    _defineProperty(this, \"endDragIfSourceWasRemovedFromDOM\", function () {\n      var node = _this.currentDragSourceNode;\n\n      if (node == null || _this.isNodeInDocument(node)) {\n        return;\n      }\n\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragStartCapture\", function () {\n      _this.clearCurrentDragSourceNode();\n\n      _this.dragStartSourceIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragStart\", function (e) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      var dragStartSourceIds = _this.dragStartSourceIds;\n      _this.dragStartSourceIds = null;\n      var clientOffset = getEventClientOffset(e); // Avoid crashing if we missed a drop event or our previous drag died\n\n      if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      } // Don't publish the source just yet (see why below)\n\n\n      _this.actions.beginDrag(dragStartSourceIds || [], {\n        publishSource: false,\n        getSourceClientOffset: _this.getSourceClientOffset,\n        clientOffset: clientOffset\n      });\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (_this.monitor.isDragging()) {\n        if (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n          // Use custom drag image if user specifies it.\n          // If child drag source refuses drag but parent agrees,\n          // use parent's node as drag image. Neither works in IE though.\n          var sourceId = _this.monitor.getSourceId();\n\n          var sourceNode = _this.sourceNodes.get(sourceId);\n\n          var dragPreview = _this.sourcePreviewNodes.get(sourceId) || sourceNode;\n\n          if (dragPreview) {\n            var _this$getCurrentSourc = _this.getCurrentSourcePreviewNodeOptions(),\n                anchorX = _this$getCurrentSourc.anchorX,\n                anchorY = _this$getCurrentSourc.anchorY,\n                offsetX = _this$getCurrentSourc.offsetX,\n                offsetY = _this$getCurrentSourc.offsetY;\n\n            var anchorPoint = {\n              anchorX: anchorX,\n              anchorY: anchorY\n            };\n            var offsetPoint = {\n              offsetX: offsetX,\n              offsetY: offsetY\n            };\n            var dragPreviewOffset = getDragPreviewOffset(sourceNode, dragPreview, clientOffset, anchorPoint, offsetPoint);\n            dataTransfer.setDragImage(dragPreview, dragPreviewOffset.x, dragPreviewOffset.y);\n          }\n        }\n\n        try {\n          // Firefox won't drag without setting data\n          dataTransfer === null || dataTransfer === void 0 ? void 0 : dataTransfer.setData('application/json', {});\n        } catch (err) {// IE doesn't support MIME types in setData\n        } // Store drag source node so we can check whether\n        // it is removed from DOM and trigger endDrag manually.\n\n\n        _this.setCurrentDragSourceNode(e.target); // Now we are ready to publish the drag source.. or are we not?\n\n\n        var _this$getCurrentSourc2 = _this.getCurrentSourcePreviewNodeOptions(),\n            captureDraggingState = _this$getCurrentSourc2.captureDraggingState;\n\n        if (!captureDraggingState) {\n          // Usually we want to publish it in the next tick so that browser\n          // is able to screenshot the current (not yet dragging) state.\n          //\n          // It also neatly avoids a situation where render() returns null\n          // in the same tick for the source element, and browser freaks out.\n          setTimeout(function () {\n            return _this.actions.publishDragSource();\n          }, 0);\n        } else {\n          // In some cases the user may want to override this behavior, e.g.\n          // to work around IE not supporting custom drag previews.\n          //\n          // When using a custom drag layer, the only way to prevent\n          // the default drag preview from drawing in IE is to screenshot\n          // the dragging state in which the node itself has zero opacity\n          // and height. In this case, though, returning null from render()\n          // will abruptly end the dragging, which is not obvious.\n          //\n          // This is the reason such behavior is strictly opt-in.\n          _this.actions.publishDragSource();\n        }\n      } else if (nativeType) {\n        // A native item (such as URL) dragged from inside the document\n        _this.beginDragNativeItem(nativeType);\n      } else if (dataTransfer && !dataTransfer.types && (e.target && !e.target.hasAttribute || !e.target.hasAttribute('draggable'))) {\n        // Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n        // Just let it drag. It's a native type (URL or text) and will be picked up in\n        // dragenter handler.\n        return;\n      } else {\n        // If by this time no drag source reacted, tell browser not to drag.\n        e.preventDefault();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEndCapture\", function () {\n      if (_this.clearCurrentDragSourceNode() && _this.monitor.isDragging()) {\n        // Firefox can dispatch this event in an infinite loop\n        // if dragend handler does something like showing an alert.\n        // Only proceed if we have not handled it already.\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnterCapture\", function (e) {\n      _this.dragEnterTargetIds = [];\n\n      var isFirstEnter = _this.enterLeaveCounter.enter(e.target);\n\n      if (!isFirstEnter || _this.monitor.isDragging()) {\n        return;\n      }\n\n      var dataTransfer = e.dataTransfer;\n      var nativeType = matchNativeItemType(dataTransfer);\n\n      if (nativeType) {\n        // A native item (such as file or URL) dragged from outside the document\n        _this.beginDragNativeItem(nativeType, dataTransfer);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragEnter\", function (e) {\n      var dragEnterTargetIds = _this.dragEnterTargetIds;\n      _this.dragEnterTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey; // If the target changes position as the result of `dragenter`, `dragover` might still\n      // get dispatched despite target being no longer there. The easy solution is to check\n      // whether there actually is a target before firing `hover`.\n\n      if (dragEnterTargetIds.length > 0) {\n        _this.actions.hover(dragEnterTargetIds, {\n          clientOffset: getEventClientOffset(e)\n        });\n      }\n\n      var canDrop = dragEnterTargetIds.some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // IE requires this to fire dragover events\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragOverCapture\", function () {\n      _this.dragOverTargetIds = [];\n    });\n\n    _defineProperty(this, \"handleTopDragOver\", function (e) {\n      var dragOverTargetIds = _this.dragOverTargetIds;\n      _this.dragOverTargetIds = [];\n\n      if (!_this.monitor.isDragging()) {\n        // This is probably a native item type we don't understand.\n        // Prevent default \"drop and blow away the whole document\" action.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n\n        return;\n      }\n\n      _this.altKeyPressed = e.altKey;\n      _this.lastClientOffset = getEventClientOffset(e);\n\n      if (_this.hoverRafId === null && typeof requestAnimationFrame !== 'undefined') {\n        _this.hoverRafId = requestAnimationFrame(function () {\n          if (_this.monitor.isDragging()) {\n            _this.actions.hover(dragOverTargetIds || [], {\n              clientOffset: _this.lastClientOffset\n            });\n          }\n\n          _this.hoverRafId = null;\n        });\n      }\n\n      var canDrop = (dragOverTargetIds || []).some(function (targetId) {\n        return _this.monitor.canDropOnTarget(targetId);\n      });\n\n      if (canDrop) {\n        // Show user-specified drop effect.\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = _this.getCurrentDropEffect();\n        }\n      } else if (_this.isDraggingNativeItem()) {\n        // Don't show a nice cursor but still prevent default\n        // \"drop and blow away the whole document\" action.\n        e.preventDefault();\n      } else {\n        e.preventDefault();\n\n        if (e.dataTransfer) {\n          e.dataTransfer.dropEffect = 'none';\n        }\n      }\n    });\n\n    _defineProperty(this, \"handleTopDragLeaveCapture\", function (e) {\n      if (_this.isDraggingNativeItem()) {\n        e.preventDefault();\n      }\n\n      var isLastLeave = _this.enterLeaveCounter.leave(e.target);\n\n      if (!isLastLeave) {\n        return;\n      }\n\n      if (_this.isDraggingNativeItem()) {\n        setTimeout(function () {\n          return _this.endDragNativeItem();\n        }, 0);\n      }\n    });\n\n    _defineProperty(this, \"handleTopDropCapture\", function (e) {\n      _this.dropTargetIds = [];\n\n      if (_this.isDraggingNativeItem()) {\n        var _this$currentNativeSo;\n\n        e.preventDefault();\n        (_this$currentNativeSo = _this.currentNativeSource) === null || _this$currentNativeSo === void 0 ? void 0 : _this$currentNativeSo.loadDataTransfer(e.dataTransfer);\n      } else if (matchNativeItemType(e.dataTransfer)) {\n        // Dragging some elements, like <a> and <img> may still behave like a native drag event,\n        // even if the current drag event matches a user-defined type.\n        // Stop the default behavior when we're not expecting a native item to be dropped.\n        e.preventDefault();\n      }\n\n      _this.enterLeaveCounter.reset();\n    });\n\n    _defineProperty(this, \"handleTopDrop\", function (e) {\n      var dropTargetIds = _this.dropTargetIds;\n      _this.dropTargetIds = [];\n\n      _this.actions.hover(dropTargetIds, {\n        clientOffset: getEventClientOffset(e)\n      });\n\n      _this.actions.drop({\n        dropEffect: _this.getCurrentDropEffect()\n      });\n\n      if (_this.isDraggingNativeItem()) {\n        _this.endDragNativeItem();\n      } else if (_this.monitor.isDragging()) {\n        _this.actions.endDrag();\n      }\n    });\n\n    _defineProperty(this, \"handleSelectStart\", function (e) {\n      var target = e.target; // Only IE requires us to explicitly say\n      // we want drag drop operation to start\n\n      if (typeof target.dragDrop !== 'function') {\n        return;\n      } // Inputs and textareas should be selectable\n\n\n      if (target.tagName === 'INPUT' || target.tagName === 'SELECT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {\n        return;\n      } // For other targets, ask IE\n      // to enable drag and drop\n\n\n      e.preventDefault();\n      target.dragDrop();\n    });\n\n    this.options = new OptionsReader(globalContext, options);\n    this.actions = manager.getActions();\n    this.monitor = manager.getMonitor();\n    this.registry = manager.getRegistry();\n    this.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument);\n  }\n  /**\n   * Generate profiling statistics for the HTML5Backend.\n   */\n\n\n  _createClass(HTML5BackendImpl, [{\n    key: \"profile\",\n    value: function profile() {\n      var _this$dragStartSource, _this$dragOverTargetI;\n\n      return {\n        sourcePreviewNodes: this.sourcePreviewNodes.size,\n        sourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n        sourceNodeOptions: this.sourceNodeOptions.size,\n        sourceNodes: this.sourceNodes.size,\n        dragStartSourceIds: ((_this$dragStartSource = this.dragStartSourceIds) === null || _this$dragStartSource === void 0 ? void 0 : _this$dragStartSource.length) || 0,\n        dropTargetIds: this.dropTargetIds.length,\n        dragEnterTargetIds: this.dragEnterTargetIds.length,\n        dragOverTargetIds: ((_this$dragOverTargetI = this.dragOverTargetIds) === null || _this$dragOverTargetI === void 0 ? void 0 : _this$dragOverTargetI.length) || 0\n      };\n    } // public for test\n\n  }, {\n    key: \"window\",\n    get: function get() {\n      return this.options.window;\n    }\n  }, {\n    key: \"document\",\n    get: function get() {\n      return this.options.document;\n    }\n    /**\n     * Get the root element to use for event subscriptions\n     */\n\n  }, {\n    key: \"rootElement\",\n    get: function get() {\n      return this.options.rootElement;\n    }\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      if (root.__isReactDndBackendSetUp) {\n        throw new Error('Cannot have two HTML5 backends at the same time.');\n      }\n\n      root.__isReactDndBackendSetUp = true;\n      this.addEventListeners(root);\n    }\n  }, {\n    key: \"teardown\",\n    value: function teardown() {\n      var root = this.rootElement;\n\n      if (root === undefined) {\n        return;\n      }\n\n      root.__isReactDndBackendSetUp = false;\n      this.removeEventListeners(this.rootElement);\n      this.clearCurrentDragSourceNode();\n\n      if (this.asyncEndDragFrameId) {\n        var _this$window;\n\n        (_this$window = this.window) === null || _this$window === void 0 ? void 0 : _this$window.cancelAnimationFrame(this.asyncEndDragFrameId);\n      }\n    }\n  }, {\n    key: \"connectDragPreview\",\n    value: function connectDragPreview(sourceId, node, options) {\n      var _this2 = this;\n\n      this.sourcePreviewNodeOptions.set(sourceId, options);\n      this.sourcePreviewNodes.set(sourceId, node);\n      return function () {\n        _this2.sourcePreviewNodes.delete(sourceId);\n\n        _this2.sourcePreviewNodeOptions.delete(sourceId);\n      };\n    }\n  }, {\n    key: \"connectDragSource\",\n    value: function connectDragSource(sourceId, node, options) {\n      var _this3 = this;\n\n      this.sourceNodes.set(sourceId, node);\n      this.sourceNodeOptions.set(sourceId, options);\n\n      var handleDragStart = function handleDragStart(e) {\n        return _this3.handleDragStart(e, sourceId);\n      };\n\n      var handleSelectStart = function handleSelectStart(e) {\n        return _this3.handleSelectStart(e);\n      };\n\n      node.setAttribute('draggable', 'true');\n      node.addEventListener('dragstart', handleDragStart);\n      node.addEventListener('selectstart', handleSelectStart);\n      return function () {\n        _this3.sourceNodes.delete(sourceId);\n\n        _this3.sourceNodeOptions.delete(sourceId);\n\n        node.removeEventListener('dragstart', handleDragStart);\n        node.removeEventListener('selectstart', handleSelectStart);\n        node.setAttribute('draggable', 'false');\n      };\n    }\n  }, {\n    key: \"connectDropTarget\",\n    value: function connectDropTarget(targetId, node) {\n      var _this4 = this;\n\n      var handleDragEnter = function handleDragEnter(e) {\n        return _this4.handleDragEnter(e, targetId);\n      };\n\n      var handleDragOver = function handleDragOver(e) {\n        return _this4.handleDragOver(e, targetId);\n      };\n\n      var handleDrop = function handleDrop(e) {\n        return _this4.handleDrop(e, targetId);\n      };\n\n      node.addEventListener('dragenter', handleDragEnter);\n      node.addEventListener('dragover', handleDragOver);\n      node.addEventListener('drop', handleDrop);\n      return function () {\n        node.removeEventListener('dragenter', handleDragEnter);\n        node.removeEventListener('dragover', handleDragOver);\n        node.removeEventListener('drop', handleDrop);\n      };\n    }\n  }, {\n    key: \"addEventListeners\",\n    value: function addEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.addEventListener) {\n        return;\n      }\n\n      target.addEventListener('dragstart', this.handleTopDragStart);\n      target.addEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.addEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.addEventListener('dragenter', this.handleTopDragEnter);\n      target.addEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.addEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.addEventListener('dragover', this.handleTopDragOver);\n      target.addEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.addEventListener('drop', this.handleTopDrop);\n      target.addEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"removeEventListeners\",\n    value: function removeEventListeners(target) {\n      // SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n      if (!target.removeEventListener) {\n        return;\n      }\n\n      target.removeEventListener('dragstart', this.handleTopDragStart);\n      target.removeEventListener('dragstart', this.handleTopDragStartCapture, true);\n      target.removeEventListener('dragend', this.handleTopDragEndCapture, true);\n      target.removeEventListener('dragenter', this.handleTopDragEnter);\n      target.removeEventListener('dragenter', this.handleTopDragEnterCapture, true);\n      target.removeEventListener('dragleave', this.handleTopDragLeaveCapture, true);\n      target.removeEventListener('dragover', this.handleTopDragOver);\n      target.removeEventListener('dragover', this.handleTopDragOverCapture, true);\n      target.removeEventListener('drop', this.handleTopDrop);\n      target.removeEventListener('drop', this.handleTopDropCapture, true);\n    }\n  }, {\n    key: \"getCurrentSourceNodeOptions\",\n    value: function getCurrentSourceNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourceNodeOptions = this.sourceNodeOptions.get(sourceId);\n      return _objectSpread({\n        dropEffect: this.altKeyPressed ? 'copy' : 'move'\n      }, sourceNodeOptions || {});\n    }\n  }, {\n    key: \"getCurrentDropEffect\",\n    value: function getCurrentDropEffect() {\n      if (this.isDraggingNativeItem()) {\n        // It makes more sense to default to 'copy' for native resources\n        return 'copy';\n      }\n\n      return this.getCurrentSourceNodeOptions().dropEffect;\n    }\n  }, {\n    key: \"getCurrentSourcePreviewNodeOptions\",\n    value: function getCurrentSourcePreviewNodeOptions() {\n      var sourceId = this.monitor.getSourceId();\n      var sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId);\n      return _objectSpread({\n        anchorX: 0.5,\n        anchorY: 0.5,\n        captureDraggingState: false\n      }, sourcePreviewNodeOptions || {});\n    }\n  }, {\n    key: \"isDraggingNativeItem\",\n    value: function isDraggingNativeItem() {\n      var itemType = this.monitor.getItemType();\n      return Object.keys(NativeTypes).some(function (key) {\n        return NativeTypes[key] === itemType;\n      });\n    }\n  }, {\n    key: \"beginDragNativeItem\",\n    value: function beginDragNativeItem(type, dataTransfer) {\n      this.clearCurrentDragSourceNode();\n      this.currentNativeSource = createNativeDragSource(type, dataTransfer);\n      this.currentNativeHandle = this.registry.addSource(type, this.currentNativeSource);\n      this.actions.beginDrag([this.currentNativeHandle]);\n    }\n  }, {\n    key: \"setCurrentDragSourceNode\",\n    value: function setCurrentDragSourceNode(node) {\n      var _this5 = this;\n\n      this.clearCurrentDragSourceNode();\n      this.currentDragSourceNode = node; // A timeout of > 0 is necessary to resolve Firefox issue referenced\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n\n      var MOUSE_MOVE_TIMEOUT = 1000; // Receiving a mouse event in the middle of a dragging operation\n      // means it has ended and the drag source node disappeared from DOM,\n      // so the browser didn't dispatch the dragend event.\n      //\n      // We need to wait before we start listening for mousemove events.\n      // This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n      // immediately in some browsers.\n      //\n      // See:\n      //   * https://github.com/react-dnd/react-dnd/pull/928\n      //   * https://github.com/react-dnd/react-dnd/issues/869\n      //\n\n      this.mouseMoveTimeoutTimer = setTimeout(function () {\n        var _this5$rootElement;\n\n        return (_this5$rootElement = _this5.rootElement) === null || _this5$rootElement === void 0 ? void 0 : _this5$rootElement.addEventListener('mousemove', _this5.endDragIfSourceWasRemovedFromDOM, true);\n      }, MOUSE_MOVE_TIMEOUT);\n    }\n  }, {\n    key: \"clearCurrentDragSourceNode\",\n    value: function clearCurrentDragSourceNode() {\n      if (this.currentDragSourceNode) {\n        this.currentDragSourceNode = null;\n\n        if (this.rootElement) {\n          var _this$window2;\n\n          (_this$window2 = this.window) === null || _this$window2 === void 0 ? void 0 : _this$window2.clearTimeout(this.mouseMoveTimeoutTimer || undefined);\n          this.rootElement.removeEventListener('mousemove', this.endDragIfSourceWasRemovedFromDOM, true);\n        }\n\n        this.mouseMoveTimeoutTimer = null;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"handleDragStart\",\n    value: function handleDragStart(e, sourceId) {\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (!this.dragStartSourceIds) {\n        this.dragStartSourceIds = [];\n      }\n\n      this.dragStartSourceIds.unshift(sourceId);\n    }\n  }, {\n    key: \"handleDragEnter\",\n    value: function handleDragEnter(e, targetId) {\n      this.dragEnterTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDragOver\",\n    value: function handleDragOver(e, targetId) {\n      if (this.dragOverTargetIds === null) {\n        this.dragOverTargetIds = [];\n      }\n\n      this.dragOverTargetIds.unshift(targetId);\n    }\n  }, {\n    key: \"handleDrop\",\n    value: function handleDrop(e, targetId) {\n      this.dropTargetIds.unshift(targetId);\n    }\n  }]);\n\n  return HTML5BackendImpl;\n}();","var emptyImage;\nexport function getEmptyImage() {\n  if (!emptyImage) {\n    emptyImage = new Image();\n    emptyImage.src = 'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';\n  }\n\n  return emptyImage;\n}","import { HTML5BackendImpl } from './HTML5BackendImpl';\nimport * as NativeTypes from './NativeTypes';\nexport { getEmptyImage } from './getEmptyImage';\nexport { NativeTypes };\nexport var HTML5Backend = function createBackend(manager, context, options) {\n  return new HTML5BackendImpl(manager, context, options);\n};","/**\n * Utils includes\n * - a handful of functional utilities inspired by or taken from the [Ramda library](https://ramdajs.com/);\n * - TypeScript crutches - the [[tup]] function.\n *\n * Use these for your convenience - they are here so that urx is zero-dependency package.\n *\n * @packageDocumentation\n */\n\n/** @internal */\nexport interface Proc {\n  (): any\n}\n\n/**\n * Performs left to right composition of two functions.\n */\nexport function compose<I, A, R>(a: (arg: A) => R, b: (arg: I) => A): (arg: I) => R {\n  return (arg: I) => a(b(arg))\n}\n\n/**\n * Takes a value and applies a function to it.\n */\nexport function thrush<I, K>(arg: I, proc: (arg: I) => K) {\n  return proc(arg)\n}\n\n/**\n * Takes a 2 argument function and partially applies the first argument.\n */\nexport function curry2to1<T, K, R>(proc: (arg1: T, arg2: K) => R, arg1: T): (arg2: K) => R {\n  return arg2 => proc(arg1, arg2)\n}\n\n/**\n * Takes a 1 argument function and returns a function which when called, executes it with the provided argument.\n */\nexport function curry1to0<T, R>(proc: (arg: T) => R, arg: T): () => R {\n  return () => proc(arg)\n}\n\n/**\n * Returns a function which extracts the property from from the passed object.\n */\nexport function prop(property: string) {\n  return (object: any) => object[property]\n}\n\n/**\n * Calls callback with the first argument, and returns it.\n */\nexport function tap<T>(arg: T, proc: (arg: T) => any): T {\n  proc(arg)\n  return arg\n}\n\n/**\n *  Utility function to help typescript figure out that what we pass is a tuple and not a generic array.\n *  Taken from (this StackOverflow tread)[https://stackoverflow.com/questions/49729550/implicitly-create-a-tuple-in-typescript/52445008#52445008]\n */\nexport function tup<T extends Array<any>>(...args: T): T {\n  return args\n}\n\n/**\n * Calls the passed function.\n */\nexport function call(proc: Proc) {\n  proc()\n}\n\n/**\n * returns a function which when called always returns the passed value\n */\nexport function always<T>(value: T) {\n  return () => value\n}\n\n/**\n * returns a function which calls all passed functions in the passed order.\n * joinProc does not pass arguments or collect return values.\n */\nexport function joinProc(...procs: Proc[]) {\n  return () => {\n    procs.map(call)\n  }\n}\n\nexport function noop() {}\n","/**\n * urx Actions operate on streams - `publish` publishes data in a stream, and `subscribe` attaches a subscription to a stream.\n * @packageDocumentation\n */\nimport { PUBLISH, RESET, SUBSCRIBE, VALUE } from './constants'\nimport { curry2to1 } from './utils'\n\n/**\n * A Publisher is the **input end** of a Stream. The [[publish]] action publishes values in publishers.\n * @typeParam T the type of values to be published.\n */\nexport interface Publisher<T> {\n  /** @internal */\n  (action: PUBLISH, value: T): void\n}\n\n/**\n * An Emitter is the **output end** of a Stream. The [[subscribe]] action binds {@link Subscription | subscriptions} to emitters.\n * @typeParam T the type of values that will be emitted.\n */\nexport interface Emitter<T> {\n  /** @internal */\n  (action: SUBSCRIBE, subscription: Subscription<T>): Unsubscribe\n  /** @internal */\n  (action: RESET): void\n}\n\n/**\n * Subscriptions are bound to Emitters with the [[subscribe]] action, and get called with the new values.\n * @typeParam T the Emitter value type.\n */\nexport interface Subscription<T> {\n  (value: T): any\n}\n\n/**\n * Subscribe-like actions return unsubscribe handles of the Unsubscribe type, which, when called, unbind the subscription.\n */\nexport interface Unsubscribe {\n  (): void\n}\n\n/**\n * Streams present both the input and the output ends of a stream.\n * A single stream instance can be both subscribed to and published in.\n */\nexport interface Stream<T> extends Publisher<T>, Emitter<T> {\n  /** @internal */\n  (action: SUBSCRIBE | PUBLISH | RESET): any // fix for bug with pipe + connect\n}\n\n/**\n * Just like {@link Stream | streams}, stateful streams present both input and output ends of a stream.\n * A single stream instance can be both subscribed to and published in.\n * Stateful Streams can also act like depots, preserving the last passed value and immediately publishing it to new subscriptions.\n * [[getValue]] can be used to extract value from stateful streams.\n */\nexport interface StatefulStream<T> extends Publisher<T>, Emitter<T> {\n  /** @internal */\n  (action: SUBSCRIBE | PUBLISH | RESET | VALUE): any // fix for bug with pipe + connect\n  // StatefulStream should extend rather then duplicate the signature, but this somehow causes a bug in TS\n}\n\n/**\n * Subscribes the specified [[Subscription]] to the updates from the Emitter.\n * The emitter calls the subscription with the new data each time new data is published into it.\n *\n * ```ts\n * const foo = stream<number>();\n * subscribe(foo, (value) => console.log(value));\n * ```\n *\n * @returns an [[Unsubscribe]] handle  - calling it will unbind the subscription from the emitter.\n *```ts\n * const foo = stream<number>();\n * const unsub = subscribe(foo, (value) => console.log(value));\n * unsub();\n *```\n */\nexport function subscribe<T>(emitter: Emitter<T>, subscription: Subscription<T>): Unsubscribe {\n  return emitter(SUBSCRIBE, subscription)\n}\n\n/**\n * Publishes the value into the passed [[Publisher]].\n *\n * ```ts\n * const foo = stream<number>();\n * publish(foo, 42);\n * ```\n */\nexport function publish<T>(publisher: Publisher<T>, value: T) {\n  publisher(PUBLISH, value)\n}\n\n/**\n * Clears all subscriptions from the [[Emitter]].\n * ```ts\n * const foo = stream<number>();\n * subscribe(foo, (value) => console.log(value));\n * reset(foo);\n * publish(foo, 42);\n * ```\n */\nexport function reset(emitter: Emitter<any>) {\n  emitter(RESET)\n}\n\n/**\n * Extracts the current value from a stateful stream. Use it only as an escape hatch, as it violates the concept of reactive programming.\n * ```ts\n * const foo = statefulStream(42);\n * console.log(getValue(foo));\n * ```\n */\nexport function getValue<T>(depot: StatefulStream<T>): T {\n  return depot(VALUE)\n}\n\n/**\n * Connects two streams - any value emitted from the emitter will be published in the publisher.\n * ```ts\n * const foo = stream<number>();\n * const bar = stream<number>();\n * subscribe(bar, (value) => console.log(`Bar emitted ${value}`));\n *\n * connect(foo, bar);\n * publish(foo);\n * ```\n * @returns an [[Unsubscribe]] handle which will disconnect the two streams.\n */\nexport function connect<T>(emitter: Emitter<T>, publisher: Publisher<T>) {\n  return subscribe(emitter, curry2to1(publisher, PUBLISH))\n}\n\n/**\n * Executes the passed subscription at most once, for the next emit from the emitter.\n * ```ts\n * const foo = stream<number>()\n * handleNext(foo, value => console.log(value)) // called once, with 42\n * publish(foo, 42)\n * publish(foo, 43)\n * ```\n * @returns an [[Unsubscribe]] handle to unbind the subscription if necessary.\n */\nexport function handleNext<T>(emitter: Emitter<T>, subscription: Subscription<T>) {\n  const unsub = emitter(SUBSCRIBE, value => {\n    unsub()\n    subscription(value)\n  })\n  return unsub\n}\n","export const PUBLISH = 0 as const\nexport type PUBLISH = typeof PUBLISH\n\nexport const SUBSCRIBE = 1 as const\nexport type SUBSCRIBE = typeof SUBSCRIBE\n\nexport const RESET = 2 as const\nexport type RESET = typeof RESET\n\nexport const VALUE = 4 as const\nexport type VALUE = typeof VALUE\n","/**\n * Streams are the basic building blocks of a reactive system. Think of them as the system permanent \"data tubes\".\n *\n * A stream acts as both an [[Emitter]] and [[Publisher]]. Each stream can have multiple {@link Subscription | Subscriptions}.\n *\n * urx streams are either **stateless** or **stateful**.\n * Stateless streams emit data to existing subscriptions when published, without keeping track of it.\n * Stateful streams remember the last published value and immediately publish it to new subscriptions.\n *\n * ```ts\n * import { stream, statefulStream, publish, subscribe } from \"@virtuoso.dev/urx\";\n *\n * // foo is a stateless stream\n * const foo = stream<number>();\n *\n * publish(foo, 42);\n * // this subsription will not be called...\n * subscribe(foo, (value) => console.log(value));\n * // it will only catch published values after it\n * publish(foo, 43);\n *\n * // stateful streams always start with an initial value\n * const bar = statefulStream(42);\n *\n * // subscribing to a stateful stream\n * // immediately calls the subscription with the current value\n * subscribe(bar, (value) => console.log(value));\n *\n * // subsequent publishing works just like stateless streams\n * publish(bar, 43);\n * ```\n * @packageDocumentation\n */\n\nimport { Emitter, StatefulStream, Stream, Subscription, Unsubscribe, subscribe, connect } from './actions'\nimport { RESET, PUBLISH, SUBSCRIBE, VALUE } from './constants'\nimport { tap, noop } from './utils'\n\n/**\n * Constructs a new stateless stream.\n * ```ts\n * const foo = stream<number>();\n * ```\n * @typeParam T the type of values to publish in the stream.\n * @returns a [[Stream]]\n */\nexport function stream<T>(): Stream<T> {\n  const subscriptions = [] as Subscription<T>[]\n\n  return ((action: PUBLISH | SUBSCRIBE | RESET, arg: any) => {\n    switch (action) {\n      case RESET:\n        subscriptions.splice(0, subscriptions.length)\n        return\n      case SUBSCRIBE:\n        subscriptions.push(arg)\n        return () => {\n          const indexOf = subscriptions.indexOf(arg)\n          if (indexOf > -1) {\n            subscriptions.splice(indexOf, 1)\n          }\n        }\n      case PUBLISH:\n        subscriptions.slice().forEach(subscription => {\n          subscription(arg as T)\n        })\n        return\n      default:\n        throw new Error(`unrecognized action ${action}`)\n    }\n  }) as Stream<T>\n}\n\n/**\n * Constructs a new stateful stream.\n * ```ts\n * const foo = statefulStream(42);\n * ```\n * @param initial the initial value in the stream.\n * @typeParam T the type of values to publish in the stream. If omitted, the function infers it from the initial value.\n * @returns a [[StatefulStream]]\n */\nexport function statefulStream<T>(initial: T): StatefulStream<T> {\n  let value: T = initial\n  const innerSubject = stream<T>()\n\n  return ((action: PUBLISH | SUBSCRIBE | RESET | VALUE, arg: any) => {\n    switch (action) {\n      case SUBSCRIBE:\n        const subscription = arg as Subscription<T>\n        subscription(value)\n        break\n      case PUBLISH:\n        value = arg as T\n        break\n      case VALUE:\n        return value\n    }\n    return innerSubject(action as any, arg)\n  }) as StatefulStream<T>\n}\n\n/**\n * Event handlers are special emitters which can have **at most one active subscription**.\n * Subscribing to an event handler unsubscribes the previous subscription, if present.\n * ```ts\n * const foo = stream<number>();\n * const fooEvent = eventHandler(foo);\n *\n * // will be called once with 42\n * subscribe(fooEvent, (value) => console.log(`Sub 1 ${value}`));\n * publish(foo, 42);\n *\n * // unsubscribes sub 1\n * subscribe(fooEvent, (value) => console.log(`Sub 2 ${value}`));\n * publish(foo, 43);\n * ```\n * @param emitter the source emitter.\n * @returns the single-subscription emitter.\n */\nexport function eventHandler<T>(emitter: Emitter<T>) {\n  let unsub: Unsubscribe | undefined\n  let currentSubscription: any\n  let cleanup = () => unsub && unsub()\n\n  return function(action: SUBSCRIBE | RESET, subscription?: Subscription<T>) {\n    switch (action) {\n      case SUBSCRIBE:\n        if (subscription) {\n          if (currentSubscription === subscription) {\n            return\n          }\n          cleanup()\n          currentSubscription = subscription\n          unsub = subscribe(emitter, subscription!)\n          return unsub\n        } else {\n          cleanup()\n          return noop\n        }\n      case RESET:\n        cleanup()\n        currentSubscription = null\n        return\n      default:\n        throw new Error(`unrecognized action ${action}`)\n    }\n  } as Emitter<T>\n}\n\n/**\n * Creates and connects a \"junction\" stream to the specified emitter. Often used with [[pipe]], to avoid the multiple evaluation of operator sets.\n *\n * ```ts\n * const foo = stream<number>();\n *\n * const fooX2 = pipe(\n *   foo,\n *   map((value) => {\n *     console.log(`multiplying ${value}`);\n *     return value * 2;\n *   })\n * );\n *\n * subscribe(fooX2, (value) => console.log(value));\n * subscribe(fooX2, (value) => console.log(value));\n *\n * publish(foo, 42); // executes the map operator twice for each subscription.\n *\n * const sharedFooX2 = streamFromEmitter(pipe(\n *   foo,\n *   map((value) => {\n *     console.log(`shared multiplying ${value}`);\n *     return value * 2;\n *   })\n * ));\n *\n * subscribe(sharedFooX2, (value) => console.log(value));\n * subscribe(sharedFooX2, (value) => console.log(value));\n *\n * publish(foo, 42);\n *```\n * @returns the resulting stream.\n */\nexport function streamFromEmitter<T>(emitter: Emitter<T>): Stream<T> {\n  return tap(stream<T>(), stream => connect(emitter, stream))\n}\n\n/**\n * Creates and connects a \"junction\" stateful stream to the specified emitter. Often used with [[pipe]], to avoid the multiple evaluation of operator sets.\n *\n * ```ts\n * const foo = stream<number>();\n *\n * const fooX2 = pipe(\n *   foo,\n *   map((value) => {\n *     console.log(`multiplying ${value}`);\n *     return value * 2;\n *   })\n * );\n *\n * subscribe(fooX2, (value) => console.log(value));\n * subscribe(fooX2, (value) => console.log(value));\n *\n * publish(foo, 42); // executes the map operator twice for each subscription.\n *\n * const sharedFooX2 = statefulStreamFromEmitter(pipe(\n *   foo,\n *   map((value) => {\n *     console.log(`shared multiplying ${value}`);\n *     return value * 2;\n *   })\n * ), 42);\n *\n * subscribe(sharedFooX2, (value) => console.log(value));\n * subscribe(sharedFooX2, (value) => console.log(value));\n *\n * publish(foo, 42);\n *```\n * @param initial the initial value in the stream.\n * @returns the resulting stateful stream.\n */\nexport function statefulStreamFromEmitter<T>(emitter: Emitter<T>, initial: T): StatefulStream<T> {\n  return tap(statefulStream(initial), stream => connect(emitter, stream))\n}\n","/**\n *\n * Stream values can be transformed and controlled by {@link pipe | **piping**} through **operators**.\n * urx includes several operators like [[map]], [[filter]], [[scan]], and [[throttleTime]].\n * The [[withLatestFrom]] operator allows the combination of values from other streams.\n *\n * ```ts\n * const foo = stream<number>()\n *\n * // create an emitter that first adds 2 to the passed value, then multiplies it by * 2\n * const bar = pipe(foo, map(value => value + 2), map(value => value * 2))\n * subscribe(bar, value => console.log(value))\n * publish(foo, 2) // outputs 8\n * ```\n *\n * ### Implementing Custom Operators\n * To implement your own operators, implement the [[Operator]] interface.\n * @packageDocumentation\n */\nimport { compose, thrush } from './utils'\nimport { Emitter, subscribe, Subscription, reset } from './actions'\nimport { SUBSCRIBE, RESET } from './constants'\n\n/**\n * Operators can transform and control the flow of values.\n * [[pipe]] is used to transform one Emitter into another by stacking operators to its values.\n * To build your own operator that looks like the built-in ones,\n * create a function which returns an operator.\n * The following custom operator multiplies the passed value:\n *\n * ```ts\n * function multiplyBy(multiplier: number): Operator<number> {\n *  return done => value => done(value * multiplier)\n * }\n *\n * const foo = stream<number>()\n * const multipliedFoo = pipe(foo, multiplyBy(3))\n * subscribe(multipliedFoo, value => console.log(value))\n * publish(foo, 42)\n * ```\n */\nexport interface Operator<Input, Output = Input> {\n  (done: (value: Output) => void): (value: Input) => void\n}\n\n/** @internal */\ntype CombineOperatorsReturnType<I, O> = (subscriber: (value: O) => void) => (value: I) => void\n\n/** @internal */\nfunction combineOperators<I>(...operators: Operator<any, any>[]): CombineOperatorsReturnType<I, any> {\n  return (subscriber: (value: any) => void) => {\n    return operators.reduceRight(thrush, subscriber)\n  }\n}\n\n/** @internal */\ntype O<I, OP> = Operator<I, OP>\n\n/**\n * Creates a new emitter from the passed one by piping its values through one or more operators.\n * Operators can perform various actions like filter values, pull values from other emitters, or compute new values.\n *\n * ```ts\n * const foo = stream<number>()\n *\n * // create an emitter that first adds 2 to the passed value, then multiplies it by * 2\n * const bar = pipe(foo, map(value => value + 2), map(value => value * 2))\n * subscribe(bar, value => console.log(value))\n * publish(foo, 2) // outputs 8\n * ```\n * #### Sharing Subscription Calculations\n *\n * `pipe` acts as a proxy for the source emitter, and re-runs the operators for each subscription to the derived emitter.\n * Use [[streamFromEmitter]] or [[statefulStreamFromEmitter]] to avoid that.\n */\nexport function pipe<T>(s: Emitter<T>): Emitter<T> // prettier-ignore\nexport function pipe<T, O1>(s: Emitter<T>, o1: O<T, O1>): Emitter<O1> // prettier-ignore\nexport function pipe<T, O1, O2>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>]): Emitter<O2> // prettier-ignore\nexport function pipe<T, O1, O2, O3>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>, O<O2, O3>]): Emitter<O3> // prettier-ignore\nexport function pipe<T, O1, O2, O3, O4>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>, O<O2, O3>, O<O3, O4>]): Emitter<O4> // prettier-ignore\nexport function pipe<T, O1, O2, O3, O4, O5>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>, O<O2, O3>, O<O3, O4>, O<O4, O5>]): Emitter<O5> // prettier-ignore\nexport function pipe<T, O1, O2, O3, O4, O5, O6>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>, O<O2, O3>, O<O3, O4>, O<O4, O5>, O<O5, O6>]): Emitter<O6> // prettier-ignore\nexport function pipe<T, O1, O2, O3, O4, O5, O6, O7>(s: Emitter<T>, ...o: [O<T, O1>, O<O1, O2>, O<O2, O3>, O<O3, O4>, O<O4, O5>, O<O5, O6>, O<O6, O7>]): Emitter<O7> // prettier-ignore\nexport function pipe<T>(source: Emitter<T>, ...operators: O<any, any>[]): Emitter<any> {\n  // prettier-ignore\n  const project = combineOperators(...operators)\n  return ((action: SUBSCRIBE | RESET, subscription: Subscription<any>) => {\n    switch (action) {\n      case SUBSCRIBE:\n        return subscribe(source, project(subscription))\n      case RESET:\n        reset(source)\n        return\n      default:\n        throw new Error(`unrecognized action ${action}`)\n    }\n  }) as Emitter<any>\n}\n\n/**\n * A function which determines if two values are equal.\n * Implement custom comparators when [[distinctUntilChanged]] needs to work on non-primitive objects.\n * @returns true if values should be considered equal.\n */\nexport interface Comparator<T> {\n  (previous: T, next: T): boolean\n}\n\n/**\n * The default [[Comparator]] for [[distinctUntilChanged]] and [[duc]].\n */\nexport function defaultComparator<T>(previous: T, next: T) {\n  return previous === next\n}\n\n/**\n * Filters out identical values. Pass an optional [[Comparator]] if you need to filter non-primitive values.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, distinctUntilChanged()),\n *  console.log\n * ) // will be called only once\n *\n * publish(foo, 42)\n * publish(foo, 42)\n * ```\n */\nexport function distinctUntilChanged<T>(comparator: Comparator<T> = defaultComparator): Operator<T> {\n  let current: T\n  return done => next => {\n    if (!comparator(current, next)) {\n      current = next\n      done(next)\n    }\n  }\n}\n\n/**\n * Filters out values for which the predicator does not return `true`-ish.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, filter(value => value % 2 === 0)),\n *  console.log\n * ) // will be called only with even values\n *\n * publish(foo, 2)\n * publish(foo, 3)\n * publish(foo, 4)\n * publish(foo, 5)\n * ```\n */\nexport function filter<T>(predicate: (value: T) => boolean): Operator<T> {\n  return done => value => {\n    predicate(value) && done(value)\n  }\n}\n\n/**\n * Maps values using the provided project function.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, map(value => value * 2)),\n *  console.log\n * ) // 4, 6\n *\n * publish(foo, 2)\n * publish(foo, 3)\n * ```\n */\nexport function map<T, K>(project: (value: T) => K): Operator<T, K> {\n  return done => compose(done, project)\n}\n\n/**\n * Maps values to the hard-coded value.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, mapTo(3)),\n *  console.log\n * ) // 3, 3\n *\n * publish(foo, 1)\n * publish(foo, 2)\n * ```\n */\nexport function mapTo<T>(value: T): Operator<any, T> {\n  return done => () => done(value)\n}\n\n/**\n * Works like Array#reduce.\n * Applies an accumulator function on the emitter, and outputs intermediate result. Starts with the initial value.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, scan((acc, value) => acc + value, 2),\n *  console.log\n * ) // 3, 5\n *\n * publish(foo, 1)\n * publish(foo, 2)\n * ```\n */\nexport function scan<T, K>(scanner: (current: T, value: K) => T, initial: T): Operator<K, T> {\n  return done => value => done((initial = scanner(initial, value)))\n}\n\n/**\n * Skips the specified amount of values from the emitter.\n * ```ts\n * const foo = stream<number>()\n *\n * subscribe(\n *  pipe(foo, skip(2)),\n *  console.log\n * ) // 3, 4\n *\n * publish(foo, 1) // skipped\n * publish(foo, 2) // skipped\n * publish(foo, 3)\n * publish(foo, 4)\n * ```\n */\nexport function skip<T>(times: number): Operator<T> {\n  return done => value => {\n    times > 0 ? times-- : done(value)\n  }\n}\n\n/**\n * Throttles flowing values at the provided interval in milliseconds.\n * [Throttle VS Debounce in SO](https://stackoverflow.com/questions/25991367/difference-between-throttling-and-debouncing-a-function).\n *\n * ```ts\n *  const foo = stream<number>()\n *  publish(foo, 1)\n *\n *  setTimeout(() => publish(foo, 2), 20)\n *  setTimeout(() => publish(foo, 3), 20)\n *\n *  subscribe(pipe(foo, throttleTime(50)), val => {\n *    console.log(value); // 3\n *  })\n * ```\n */\nexport function throttleTime<T>(interval: number): Operator<T> {\n  let currentValue: T | undefined\n  let timeout: any\n\n  return done => value => {\n    currentValue = value\n\n    if (timeout) {\n      return\n    }\n\n    timeout = setTimeout(() => {\n      timeout = undefined\n      done(currentValue!)\n    }, interval)\n  }\n}\n\n/**\n * Debounces flowing values at the provided interval in milliseconds.\n * [Throttle VS Debounce in SO](https://stackoverflow.com/questions/25991367/difference-between-throttling-and-debouncing-a-function).\n *\n * ```ts\n *  const foo = stream<number>()\n *  publish(foo, 1)\n *\n *  setTimeout(() => publish(foo, 2), 20)\n *  setTimeout(() => publish(foo, 3), 20)\n *\n *  subscribe(pipe(foo, debounceTime(50)), val => {\n *    console.log(value); // 3\n *  })\n * ```\n */\nexport function debounceTime<T>(interval: number): Operator<T> {\n  let currentValue: T | undefined\n  let timeout: any\n\n  return done => value => {\n    currentValue = value\n    if (timeout) {\n      clearTimeout(timeout)\n    }\n\n    timeout = setTimeout(() => {\n      done(currentValue!)\n    }, interval)\n  }\n}\n\n/**\n * Combines the source Emitter with the latest values from the specified Emitters into an array. Outputs only when the source Emitter emits.\n * See [[combineLatest]] for a transformer that outputs when any of the emitters emit.\n *\n * ```ts\n *  const foo = stream<number>()\n *  const bar = stream<number>()\n *  subscribe(\n *    pipe(\n *      foo,\n *      withLatestFrom(bar)\n *    ),\n *    (([foo, bar]) => console.log({ foo, bar }))\n *  )\n *\n *  publish(foo, 1) // nothing happens, bar has not emitted yet\n *  publish(bar, 1) // still nothing\n *  publish(foo, 2) // logs { foo: 2, bar: 1 }\n *  publish(bar, 2)\n *  publish(foo, 3) // logs { foo: 3, bar: 2 }\n * ```\n */\nexport function withLatestFrom<T, R1>(...s: [Emitter<R1>]): Operator<T, [T, R1]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2>(...s: [Emitter<R1>, Emitter<R2>]): Operator<T, [T, R1, R2]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2, R3>( ...s: [Emitter<R1>, Emitter<R2>, Emitter<R3>]): Operator<T, [T, R1, R2, R3]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2, R3, R4>( ...s: [Emitter<R1>, Emitter<R2>, Emitter<R3>, Emitter<R4>]): Operator<T, [T, R1, R2, R3, R4]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2, R3, R4, R5>( ...s: [Emitter<R1>, Emitter<R2>, Emitter<R3>, Emitter<R4>, Emitter<R5>]): Operator<T, [T, R1, R2, R3, R4, R5]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2, R3, R4, R5, R6>( ...s: [Emitter<R1>, Emitter<R2>, Emitter<R3>, Emitter<R4>, Emitter<R5>, Emitter<R6>]): Operator<T, [T, R1, R2, R3, R4, R5, R6]> // prettier-ignore\nexport function withLatestFrom<T, R1, R2, R3, R4, R5, R6, R7>( ...s: [Emitter<R1>, Emitter<R2>, Emitter<R3>, Emitter<R4>, Emitter<R5>, Emitter<R6>, Emitter<R7>]): Operator<T, [T, R1, R2, R3, R4, R5, R6, R7]> // prettier-ignore\nexport function withLatestFrom(...sources: Emitter<any>[]): Operator<any, any> {\n  const values = new Array(sources.length)\n  let called = 0\n  let pendingCall: null | (() => void) = null\n  const allCalled = Math.pow(2, sources.length) - 1\n\n  sources.forEach((source, index) => {\n    const bit = Math.pow(2, index)\n    subscribe(source, value => {\n      let prevCalled = called\n      called = called | bit\n      values[index] = value\n      if (prevCalled !== allCalled && called === allCalled && pendingCall) {\n        pendingCall()\n        pendingCall = null\n      }\n    })\n  })\n\n  return done => value => {\n    let call = () => done([value].concat(values))\n    if (called === allCalled) {\n      call()\n    } else {\n      pendingCall = call\n    }\n  }\n}\n","/**\n * Transformers change and combine streams, similar to operators.\n * urx comes with two combinators - [[combineLatest]] and [[merge]], and one convenience filter - [[duc]].\n *\n * @packageDocumentation\n */\nimport { Emitter, publish, reset, subscribe, Subscription } from './actions'\nimport { RESET, SUBSCRIBE } from './constants'\nimport { Comparator, defaultComparator, distinctUntilChanged, pipe } from './pipe'\nimport { stream } from './streams'\nimport { joinProc } from './utils'\n\n/**\n * Merges one or more emitters from the same type into a new Emitter which emits values from any of the source emitters.\n * ```ts\n * const foo = stream<number>()\n * const bar = stream<number>()\n *\n * subscribe(merge(foo, bar), (value) => console.log(value)) // 42, 43\n *\n * publish(foo, 42)\n * publish(bar, 43)\n * ```\n */\nexport function merge<T>(...sources: Emitter<T>[]): Emitter<T> {\n  return function(action: SUBSCRIBE | RESET, subscription?: Subscription<any>) {\n    switch (action) {\n      case SUBSCRIBE:\n        return joinProc(...sources.map(source => subscribe(source, subscription!)))\n      case RESET:\n        // do nothing, we are stateless\n        return\n      default:\n        throw new Error(`unrecognized action ${action}`)\n    }\n  } as Emitter<T>\n}\n\n/**\n * A convenience wrapper that emits only the distinct values from the passed Emitter. Wraps [[pipe]] and [[distinctUntilChanged]].\n *\n * ```ts\n * const foo = stream<number>()\n *\n * // this line...\n * const a = duc(foo)\n *\n * // is equivalent to this\n * const b = pipe(distinctUntilChanged(foo))\n * ```\n *\n * @param source The source emitter.\n * @param comparator optional custom comparison function for the two values.\n *\n * @typeParam T the type of the value emitted by the source.\n *\n * @returns the resulting emitter.\n */\nexport function duc<T>(source: Emitter<T>, comparator: Comparator<T> = defaultComparator): Emitter<T> {\n  return pipe(source, distinctUntilChanged(comparator))\n}\n\n/**\n * Creates an emitter with the latest values from all passed emitters as an array.\n *\n * `combineLatest` acts as a Depot. Using it on stateless streams persists the last emitted value of each [[Emitter]].\n * Provided that all emitters have emitted at least once, subscribing to the resulting emitter will immediately receive their combined latest values.\n *\n * ```ts\n * const foo = stream<number>()\n * const bar = stream<number>()\n *\n * subscribe(combineLatest(foo, bar), ([foo, bar]) => console.log({ foo, bar }))\n *\n * publish(foo, 42)\n * publish(bar, 43) // { foo: 42, bar: 43 }\n * publish(foo, 44) // { foo: 44, bar: 43 }\n * publish(bar, 45) // { foo: 44, bar: 45 }\n * ```\n */\nexport function combineLatest<O1, O2>(...emitters: [Emitter<O1>, Emitter<O2>]): Emitter<[O1, O2]> // prettier-ignore\nexport function combineLatest<O1, O2, O3>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>]): Emitter<[O1, O2, O3]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>]): Emitter<[O1, O2, O3, O4]> // prettier-ignore\nexport function combineLatest<O1, O2, O3>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>]): Emitter<[O1, O2, O3]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>]): Emitter<[O1, O2, O3, O4, O5]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>]): Emitter<[O1, O2, O3, O4, O5, O6]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6, O7>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>, Emitter<O7>]): Emitter<[O1, O2, O3, O4, O5, O6, O7]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6, O7, O8>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>, Emitter<O7>, Emitter<O8>]): Emitter<[O1, O2, O3, O4, O5, O6, O7, O8]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6, O7, O8, O9>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>, Emitter<O7>, Emitter<O8>, Emitter<O9>]): Emitter<[O1, O2, O3, O4, O5, O6, O7, O8, O9]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6, O7, O8, O9, O10>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>, Emitter<O7>, Emitter<O8>, Emitter<O9>, Emitter<O10>]): Emitter<[O1, O2, O3, O4, O5, O6, O7, O8, O9, O10]> // prettier-ignore\nexport function combineLatest<O1, O2, O3, O4, O5, O6, O7, O8, O9, O10, O11>( ...emitters: [Emitter<O1>, Emitter<O2>, Emitter<O3>, Emitter<O4>, Emitter<O5>, Emitter<O6>, Emitter<O7>, Emitter<O8>, Emitter<O9>, Emitter<O10>, Emitter<O11>]): Emitter<[O1, O2, O3, O4, O5, O6, O7, O8, O9, O10, O11]> // prettier-ignore\nexport function combineLatest(...emitters: Emitter<any>[]): Emitter<any> {\n  let innerSubject = stream<any>()\n  const values = new Array(emitters.length)\n  let called = 0\n  const allCalled = Math.pow(2, emitters.length) - 1\n\n  emitters.forEach((source, index) => {\n    const bit = Math.pow(2, index)\n    subscribe(source, value => {\n      values[index] = value\n      called = called | bit\n      if (called === allCalled) {\n        publish(innerSubject, values)\n      }\n    })\n  })\n\n  return function(action: SUBSCRIBE | RESET, subscription?: Subscription<any>) {\n    switch (action) {\n      case SUBSCRIBE:\n        if (called === allCalled) {\n          subscription!(values)\n        }\n        return subscribe(innerSubject, subscription!)\n      case RESET:\n        return reset(innerSubject)\n      default:\n        throw new Error(`unrecognized action ${action}`)\n    }\n  } as Emitter<any>\n}\n","/**\n * ## Thinking in Systems\n * systems are a stateful **data-processing machines** which accept input through **input streams**,\n * init and maintain state in **depots** and, in certain conditions, emit values to subscriptions through **output streams**.\n * Systems can specify other systems as dependencies, and can act as singletons in the resulting dependency tree.\n *\n * ### Depots\n *\n * The first, and probably the most critical part to understand are **the depots**\n * mostly because they are somewhat implicit.\n * Unlike other state management paradigms, the depots are not kept in a single data structure.\n * Insted, depots are defined and maintained as stateful streams, stateful transfomers\n * like [[combineLatest]] or stateful operators like[ []withLatestFrom] or [[scan]].\n *\n * **Depots persist values over time**.\n * If it was not for them, the system had to re-receive its entire input state simultaneously in order to calculate the values for its output stream.\n *\n * Of course, strictly speaking, it is possible to implement a pure, stateless system as a form of a complex map/reduce. urx would not mind that ;).\n *\n * ### Input Streams\n *\n * The system receives updates from the rest of the world through values published in its input streams.\n * The streams used can be either stateless (acting as means to send **signals**) or stateful, where the initial stream state acts as the default value for that system parameter.\n *\n * The effects of the input streams are up to the system data-processing logic. It can change its depots' state, and/or emit values through its output streams.\n *\n * ### Data Processing\n *\n * The actual system behavior is exclusively implemented by **applying transformers and operators** to the input streams, producing the respective output streams.\n * In the final state the system streams are organized in a directed graph, where incoming data is routed through certain edges and nodes.\n * Simple systems like the one in [urx by example](https://urx.virtuoso.dev/docs/urx-by-example) can use a straightforward single-step transformation (in this case, `combineLatest` and `map`),\n * while complex ones can introduce multiple intermediate streams to model their logic.\n *\n * ### Output Streams\n *\n * The system publishes updates to its clients (other systems or an UI bound to it) by publishing data in its output streams.\n * State-reflecting output streams, like `sum` in the [urx by example](https://urx.virtuoso.dev/docs/urx-by-example) should use stateful streams as output streams.\n * Signal-like output should use regular, stateless streams. In general, stateless input streams tend to have a symmetrical stateless streams, and the opposite.\n *\n * @packageDocumentation\n */\nimport { Emitter } from './actions'\n\n/**\n * Systems are a dictionaries of streams. a [[SystemConstructor]] should return a System.\n */\nexport interface System {\n  [key: string]: Emitter<any>\n}\n\n/**\n * a SystemSpec is the result from a [[system]] call. To obtain the [[System]], pass the spec to [[init]].\n */\nexport interface SystemSpec<SS extends SystemSpecs, C extends SystemConstructor<SS>> {\n  id: string\n  constructor: C\n  dependencies: SS\n  singleton: boolean\n}\n\n/** @internal **/\nexport type AnySystemSpec = SystemSpec<any, any>\n\n/** @internal **/\nexport type SystemSpecs = AnySystemSpec[]\n\n/** @internal **/\nexport type SR<E extends AnySystemSpec, R extends System = ReturnType<E['constructor']>> = R\n\n/** @internal **/\nexport type SpecResults<SS extends SystemSpecs, L = SS['length']> = L extends 0\n  ? []\n  : L extends 1\n  ? [SR<SS[0]>]\n  : L extends 2\n  ? [SR<SS[0]>, SR<SS[1]>]\n  : L extends 3\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>]\n  : L extends 4\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>]\n  : L extends 5\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>]\n  : L extends 6\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>]\n  : L extends 7\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>, SR<SS[6]>]\n  : L extends 8\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>, SR<SS[6]>, SR<SS[7]>]\n  : L extends 9\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>, SR<SS[6]>, SR<SS[7]>, SR<SS[8]>]\n  : L extends 10\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>, SR<SS[6]>, SR<SS[7]>, SR<SS[8]>, SR<SS[9]>]\n  : L extends 11\n  ? [SR<SS[0]>, SR<SS[1]>, SR<SS[2]>, SR<SS[3]>, SR<SS[4]>, SR<SS[5]>, SR<SS[6]>, SR<SS[7]>, SR<SS[8]>, SR<SS[9]>, SR<SS[10]>]\n  : never\n\n/**\n * The system constructor is a function which initializes and connects streams and returns them as a [[System]].\n * If the [[system]] call specifies system dependencies, the constructor receives the dependencies as an array argument.\n */\nexport type SystemConstructor<D extends SystemSpecs> = (dependencies: SpecResults<D>) => System\n\n/**\n * `system` defines a specification of a system - its constructor, dependencies and if it should act as a singleton in a system dependency tree.\n * When called, system returns a [[SystemSpec]], which is then initialized along with its dependencies by passing it to [[init]].\n *\n * ```ts\n * @import { subscribe, publish, system, init, tup, connect, map, pipe } from 'urx'\n *\n * // a simple system with two streams\n * const sys1 = system(() => {\n *  const a = stream<number>()\n *  const b = stream<number>()\n *\n *  connect(pipe(a, map(value => value * 2)), b)\n *  return { a, b }\n * })\n *\n * // a second system which depends on the streams from the first one\n * const sys2 = system(([ {a, b} ]) => {\n *  const c = stream<number>()\n *  connect(pipe(b, map(value => value * 2)), c)\n *  // re-export the `a` stream, keep `b` internal\n *  return { a, c }\n * }, tup(sys1))\n *\n * // init will recursively initialize sys2 dependencies, in this case sys1\n * const { a, c } = init(sys2)\n * subscribe(c, c => console.log(`Value multiplied by 4`, c))\n * publish(a, 2)\n * ```\n *\n * #### Singletons in Dependency Tree\n *\n * By default, systems will be initialized only once if encountered multiple times in the dependency tree.\n * In the below dependency system tree, systems `b` and `c` will receive the same stream instances from system `a` when system `d` is initialized.\n * ```txt\n *   a\n *  / \\\n * b   c\n *  \\ /\n *   d\n * ```\n * If `a` gets `{singleton: false}` as a last argument, `init` creates two separate instances - one for `b` and one for `c`.\n *\n * @param constructor the system constructor function. Initialize and connect the streams in its body.\n *\n * @param dependencies the system dependencies, which the constructor will receive as arguments.\n * Use the [[tup]] utility **For TypeScript type inference to work correctly**.\n * ```ts\n * const sys3 = system(() => { ... }, tup(sys2, sys1))\n * ```\n * @param __namedParameters Options\n * @param singleton determines if the system will act as a singleton in a system dependency tree. `true` by default.\n */\nexport function system<F extends SystemConstructor<D>, D extends SystemSpecs>(\n  constructor: F,\n  dependencies: D = ([] as unknown) as D,\n  { singleton }: { singleton: boolean } = { singleton: true }\n): SystemSpec<D, F> {\n  return {\n    id: id(),\n    constructor,\n    dependencies,\n    singleton,\n  }\n}\n\n/** @internal */\nconst id = () => (Symbol() as unknown) as string\n\n/**\n * Initializes a [[SystemSpec]] by recursively initializing its dependencies.\n *\n * ```ts\n * // a simple system with two streams\n * const sys1 = system(() => {\n *  const a = stream<number>()\n *  const b = stream<number>()\n *\n *  connect(pipe(a, map(value => value * 2)), b)\n *  return { a, b }\n * })\n *\n * const { a, b } = init(sys1)\n * subscribe(b, b => console.log(b))\n * publish(a, 2)\n * ```\n *\n * @returns the [[System]] constructed by the spec constructor.\n * @param systemSpec the system spec to initialize.\n */\nexport function init<SS extends AnySystemSpec>(systemSpec: SS): SR<SS> {\n  const singletons = new Map<string, System>()\n  const _init = <SS extends AnySystemSpec>({ id, constructor, dependencies, singleton }: SS) => {\n    if (singleton && singletons.has(id)) {\n      return singletons.get(id)! as SR<SS>\n    }\n    const system = constructor(dependencies.map((e: AnySystemSpec) => _init(e)))\n    if (singleton) {\n      singletons.set(id, system)\n    }\n    return system as any\n  }\n  return _init(systemSpec)\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import * as u from '@virtuoso.dev/urx'\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace globalThis {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace window {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\nexport enum LogLevel {\n  DEBUG,\n  INFO,\n  WARN,\n  ERROR,\n}\nexport interface LogMessage {\n  level: LogLevel\n  message: any\n  label: string\n}\n\nexport type Log = (label: string, message: any, level?: LogLevel) => void\n\nconst CONSOLE_METHOD_MAP = {\n  [LogLevel.DEBUG]: 'debug',\n  [LogLevel.INFO]: 'log',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error',\n} as const\n\nconst getGlobalThis = () => (typeof globalThis === 'undefined' ? window : globalThis)\n\nexport const loggerSystem = u.system(\n  () => {\n    const logLevel = u.statefulStream<LogLevel>(LogLevel.ERROR)\n    const log = u.statefulStream<Log>((label: string, message: any, level: LogLevel = LogLevel.INFO) => {\n      const currentLevel = getGlobalThis()['VIRTUOSO_LOG_LEVEL'] ?? u.getValue(logLevel)\n      if (level >= currentLevel) {\n        // eslint-disable-next-line no-console\n        console[CONSOLE_METHOD_MAP[level]](\n          '%creact-virtuoso: %c%s %o',\n          'color: #0253b3; font-weight: bold',\n          'color: initial',\n          label,\n          message\n        )\n      }\n    })\n\n    return {\n      log,\n      logLevel,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import { useRef } from 'react'\n\nexport type CallbackRefParam = HTMLElement | null\n\nexport function useSizeWithElRef(callback: (e: HTMLElement) => void, enabled = true) {\n  const ref = useRef<CallbackRefParam>(null)\n\n  let callbackRef = (_el: CallbackRefParam) => {\n    void 0\n  }\n\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      const element = entries[0].target as HTMLElement\n      if (element.offsetParent !== null) {\n        callback(element)\n      }\n    })\n\n    callbackRef = (elRef: CallbackRefParam) => {\n      if (elRef && enabled) {\n        observer.observe(elRef)\n        ref.current = elRef\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current)\n        }\n        ref.current = null\n      }\n    }\n  }\n\n  return { ref, callbackRef }\n}\n\nexport default function useSize(callback: (e: HTMLElement) => void, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef\n}\n","import { Log, LogLevel } from '../loggerSystem'\nimport { SizeFunction, SizeRange } from '../sizeSystem'\nimport { useSizeWithElRef } from './useSize'\nimport { ScrollContainerState } from '../interfaces'\nexport default function useChangedListContentsSizes(\n  callback: (ranges: SizeRange[]) => void,\n  itemSize: SizeFunction,\n  enabled: boolean,\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  log: Log,\n  gap?: (gap: number) => void,\n  customScrollParent?: HTMLElement\n) {\n  return useSizeWithElRef((el: HTMLElement) => {\n    const ranges = getChangedChildSizes(el.children, itemSize, 'offsetHeight', log)\n    let scrollableElement = el.parentElement!\n\n    while (!scrollableElement.dataset['virtuosoScroller']) {\n      scrollableElement = scrollableElement.parentElement!\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    const windowScrolling = (scrollableElement.firstElementChild! as HTMLDivElement).dataset['viewportType']! === 'window'\n\n    const scrollTop = customScrollParent\n      ? customScrollParent.scrollTop\n      : windowScrolling\n      ? window.pageYOffset || document.documentElement.scrollTop\n      : scrollableElement.scrollTop\n\n    const scrollHeight = customScrollParent\n      ? customScrollParent.scrollHeight\n      : windowScrolling\n      ? document.documentElement.scrollHeight\n      : scrollableElement.scrollHeight\n\n    const viewportHeight = customScrollParent\n      ? customScrollParent.offsetHeight\n      : windowScrolling\n      ? window.innerHeight\n      : scrollableElement.offsetHeight\n\n    scrollContainerStateCallback({\n      scrollTop: Math.max(scrollTop, 0),\n      scrollHeight,\n      viewportHeight,\n    })\n\n    gap?.(resolveGapValue('row-gap', getComputedStyle(el).rowGap, log))\n\n    if (ranges !== null) {\n      callback(ranges)\n    }\n  }, enabled)\n}\n\nfunction getChangedChildSizes(children: HTMLCollection, itemSize: SizeFunction, field: 'offsetHeight' | 'offsetWidth', log: Log) {\n  const length = children.length\n\n  if (length === 0) {\n    return null\n  }\n\n  const results: SizeRange[] = []\n\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i) as HTMLElement\n\n    if (!child || child.dataset.index === undefined) {\n      continue\n    }\n\n    const index = parseInt(child.dataset.index!)\n    const knownSize = parseFloat(child.dataset.knownSize!)\n    const size = itemSize(child, field)\n\n    if (size === 0) {\n      log('Zero-sized element, this should not happen', { child }, LogLevel.ERROR)\n    }\n\n    if (size === knownSize) {\n      continue\n    }\n\n    const lastResult = results[results.length - 1]\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size })\n    } else {\n      results[results.length - 1].endIndex++\n    }\n  }\n\n  return results\n}\n\nfunction resolveGapValue(property: string, value: string, log: Log) {\n  if (value !== 'normal' && !value.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value, 10)\n}\n","export function correctItemSize(el: HTMLElement, dimension: 'height' | 'width') {\n  return Math.round(el.getBoundingClientRect()[dimension])\n}\n","export function approximatelyEqual(num1: number, num2: number) {\n  return Math.abs(num1 - num2) < 1.01\n}\n","import { useRef, useCallback, useEffect } from 'react'\nimport * as u from '@virtuoso.dev/urx'\nimport { correctItemSize } from '../utils/correctItemSize'\nimport { ScrollContainerState } from '../interfaces'\nimport { flushSync } from 'react-dom'\nimport { approximatelyEqual } from '../utils/approximatelyEqual'\n\nexport type ScrollerRef = Window | HTMLElement | null\n\nexport default function useScrollTop(\n  scrollContainerStateCallback: (state: ScrollContainerState) => void,\n  smoothScrollTargetReached: (yes: true) => void,\n  scrollerElement: any,\n  scrollerRefCallback: (ref: ScrollerRef) => void = u.noop,\n  customScrollParent?: HTMLElement\n) {\n  const scrollerRef = useRef<HTMLElement | null | Window>(null)\n  const scrollTopTarget = useRef<any>(null)\n  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)\n  const shouldFlushSync = useRef(false)\n\n  const handler = useCallback(\n    (ev: Event) => {\n      const el = ev.target as HTMLElement\n      const windowScroll = (el as any) === window || (el as any) === document\n      const scrollTop = windowScroll ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop\n      const scrollHeight = windowScroll ? document.documentElement.scrollHeight : el.scrollHeight\n      const viewportHeight = windowScroll ? window.innerHeight : el.offsetHeight\n\n      const call = () => {\n        scrollContainerStateCallback({\n          scrollTop: Math.max(scrollTop, 0),\n          scrollHeight,\n          viewportHeight,\n        })\n      }\n\n      if (shouldFlushSync.current) {\n        flushSync(call)\n      } else {\n        call()\n      }\n      shouldFlushSync.current = false\n\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === scrollHeight - viewportHeight) {\n          scrollTopTarget.current = null\n          smoothScrollTargetReached(true)\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current)\n            timeoutRef.current = null\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  )\n\n  useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current!\n\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current)\n    handler({ target: localRef } as unknown as Event)\n    localRef.addEventListener('scroll', handler, { passive: true })\n\n    return () => {\n      scrollerRefCallback(null)\n      localRef.removeEventListener('scroll', handler)\n    }\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent])\n\n  function scrollToCallback(location: ScrollToOptions) {\n    const scrollerElement = scrollerRef.current\n    if (!scrollerElement || ('offsetHeight' in scrollerElement && scrollerElement.offsetHeight === 0)) {\n      return\n    }\n\n    const isSmooth = location.behavior === 'smooth'\n\n    let offsetHeight: number\n    let scrollHeight: number\n    let scrollTop: number\n\n    if (scrollerElement === window) {\n      // this is not a mistake\n      scrollHeight = Math.max(correctItemSize(document.documentElement, 'height'), document.documentElement.scrollHeight)\n      offsetHeight = window.innerHeight\n      scrollTop = document.documentElement.scrollTop\n    } else {\n      scrollHeight = (scrollerElement as HTMLElement).scrollHeight\n      offsetHeight = correctItemSize(scrollerElement as HTMLElement, 'height')\n      scrollTop = (scrollerElement as HTMLElement).scrollTop\n    }\n\n    const maxScrollTop = scrollHeight - offsetHeight\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top!), 0))\n\n    // avoid system hanging because the DOM never called back\n    // with the scrollTop\n    // scroller is already at this location\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback({ scrollTop, scrollHeight, viewportHeight: offsetHeight })\n      if (isSmooth) {\n        smoothScrollTargetReached(true)\n      }\n      return\n    }\n\n    if (isSmooth) {\n      scrollTopTarget.current = location.top\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current)\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null\n        scrollTopTarget.current = null\n        smoothScrollTargetReached(true)\n      }, 1000)\n    } else {\n      scrollTopTarget.current = null\n    }\n\n    scrollerElement.scrollTo(location)\n  }\n\n  function scrollByCallback(location: ScrollToOptions) {\n    shouldFlushSync.current = true\n    scrollerRef.current!.scrollBy(location)\n  }\n\n  return { scrollerRef, scrollByCallback, scrollToCallback }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { ScrollContainerState } from './interfaces'\n\nexport const domIOSystem = u.system(\n  () => {\n    const scrollContainerState = u.stream<ScrollContainerState>()\n    const scrollTop = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const smoothScrollTargetReached = u.stream<true>()\n    const statefulScrollTop = u.statefulStream(0)\n    const viewportHeight = u.stream<number>()\n    const scrollHeight = u.stream<number>()\n    const headerHeight = u.statefulStream(0)\n    const fixedHeaderHeight = u.statefulStream(0)\n    const footerHeight = u.statefulStream(0)\n    const scrollTo = u.stream<ScrollToOptions>()\n    const scrollBy = u.stream<ScrollToOptions>()\n    const scrollingInProgress = u.statefulStream(false)\n    // bogus, has no effect\n    const react18ConcurrentRendering = u.statefulStream(false)\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollTop }) => scrollTop)\n      ),\n      scrollTop\n    )\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(({ scrollHeight }) => scrollHeight)\n      ),\n      scrollHeight\n    )\n\n    u.connect(scrollTop, statefulScrollTop)\n\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      fixedHeaderHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n      react18ConcurrentRendering,\n\n      // signals\n      scrollTo,\n      scrollBy,\n\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","interface NilNode {\n  lvl: 0\n}\n\nconst NIL_NODE: NilNode = { lvl: 0 }\n\ninterface NodeData<T> {\n  k: number\n  v: T\n}\n\ninterface NonNilAANode<T> {\n  k: number\n  v: T\n  lvl: number\n  l: NonNilAANode<T> | NilNode\n  r: NonNilAANode<T> | NilNode\n}\n\nexport interface Range<T> {\n  start: number\n  end: number\n  value: T\n}\n\nexport type AANode<T> = NilNode | NonNilAANode<T>\n\nfunction newAANode<T>(k: number, v: T, lvl: number, l: AANode<T> = NIL_NODE, r: AANode<T> = NIL_NODE): NonNilAANode<T> {\n  return { k, v, lvl, l, r }\n}\n\nexport function empty(node: AANode<any>): node is NilNode {\n  return node === NIL_NODE\n}\n\nexport function newTree<T>(): AANode<T> {\n  return NIL_NODE\n}\n\nexport function remove<T>(node: AANode<T>, key: number): AANode<T> {\n  if (empty(node)) return NIL_NODE\n\n  const { k, l, r } = node\n\n  if (key === k) {\n    if (empty(l)) {\n      return r\n    } else if (empty(r)) {\n      return l\n    } else {\n      const [lastKey, lastValue] = last(l)\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }))\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }))\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }))\n  }\n}\n\nexport function find<T>(node: AANode<T>, key: number): T | undefined {\n  if (empty(node)) {\n    return\n  }\n\n  if (key === node.k) {\n    return node.v\n  } else if (key < node.k) {\n    return find(node.l, key)\n  } else {\n    return find(node.r, key)\n  }\n}\n\nexport function findMaxKeyValue<T>(node: AANode<T>, value: number, field: 'k' | 'v' = 'k'): [number, T | undefined] {\n  if (empty(node)) {\n    return [-Infinity, undefined]\n  }\n\n  if (node[field] === value) {\n    return [node.k, node.v]\n  }\n\n  if (node[field] < value) {\n    const r = findMaxKeyValue(node.r, value, field)\n    if (r[0] === -Infinity) {\n      return [node.k, node.v]\n    } else {\n      return r\n    }\n  }\n\n  return findMaxKeyValue(node.l, value, field)\n}\n\nexport function insert<T>(node: AANode<T>, k: number, v: T): NonNilAANode<T> {\n  if (empty(node)) {\n    return newAANode(k, v, 1)\n  }\n  if (k === node.k) {\n    return clone(node, { k, v })\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }))\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }))\n  }\n}\n\nexport function walkWithin<T>(node: AANode<T>, start: number, end: number): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  const { k, v, l, r } = node\n  let result: NodeData<T>[] = []\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end))\n  }\n\n  if (k >= start && k <= end) {\n    result.push({ k, v })\n  }\n\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end))\n  }\n\n  return result\n}\n\nexport function walk<T>(node: AANode<T>): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)]\n}\n\nfunction last<T>(node: NonNilAANode<T>): [number, T] {\n  return empty(node.r) ? [node.k, node.v] : last(node.r)\n}\n\nfunction deleteLast<T>(node: NonNilAANode<T>): AANode<T> {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }))\n}\n\nfunction clone<T>(node: NonNilAANode<T>, args: Partial<NonNilAANode<T>>): NonNilAANode<T> {\n  return newAANode(\n    args.k !== undefined ? args.k : node.k,\n    args.v !== undefined ? args.v : node.v,\n    args.lvl !== undefined ? args.lvl : node.lvl,\n    args.l !== undefined ? args.l : node.l,\n    args.r !== undefined ? args.r : node.r\n  )\n}\n\nfunction isSingle(node: AANode<any>) {\n  return empty(node) || node.lvl > node.r.lvl\n}\n\nfunction rebalance<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  return split(skew(node))\n}\n\nfunction adjust<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l, r, lvl } = node\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1,\n          }),\n          lvl: lvl,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl\n\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1,\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  }\n}\n\nexport function keys(node: AANode<any>): number[] {\n  if (empty(node)) {\n    return []\n  }\n  return [...keys(node.l), node.k, ...keys(node.r)]\n}\n\nexport function ranges<T>(node: AANode<T>): Range<T>[] {\n  return toRanges(walk(node))\n}\n\nexport function rangesWithin<T>(node: AANode<T>, startIndex: number, endIndex: number): Range<T>[] {\n  if (empty(node)) {\n    return []\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0]\n  return toRanges(walkWithin(node, adjustedStart, endIndex))\n}\n\nexport function arrayToRanges<T, V>(\n  items: T[],\n  parser: (item: T) => { index: number; value: V }\n): Array<{ start: number; end: number; value: V }> {\n  const length = items.length\n  if (length === 0) {\n    return []\n  }\n\n  let { index: start, value } = parser(items[0])\n\n  const result = []\n\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i])\n    result.push({ start, end: nextIndex - 1, value })\n\n    start = nextIndex\n    value = nextValue\n  }\n\n  result.push({ start, end: Infinity, value })\n  return result\n}\n\nfunction toRanges<T>(nodes: NodeData<T>[]): Range<T>[] {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }))\n}\n\nfunction split<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { r, lvl } = node\n\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node\n}\n\nfunction skew<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l } = node\n\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node\n}\n","export type Comparator<T> = {\n  (item: T, value: number): -1 | 0 | 1\n}\n\nexport function findIndexOfClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>, start = 0): number {\n  let end = items.length - 1\n\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2)\n    const item = items[index]\n    const match = comparator(item, value)\n    if (match === 0) {\n      return index\n    }\n\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1\n      }\n      end = index - 1\n    } else {\n      if (end === start) {\n        return index\n      }\n      start = index + 1\n    }\n  }\n\n  throw new Error(`Failed binary finding record in array - ${items.join(',')}, searched for ${value}`)\n}\n\nexport function findClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>): T {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)]\n}\n\nexport function findRange<T>(items: T[], startValue: number, endValue: number, comparator: Comparator<T>): T[] {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator)\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex)\n  return items.slice(startIndex, endIndex + 1)\n}\n","import * as u from '@virtuoso.dev/urx'\n\nexport const recalcSystem = u.system(\n  () => {\n    const recalcInProgress = u.statefulStream(false)\n    return { recalcInProgress }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { arrayToRanges, AANode, empty, findMaxKeyValue, insert, newTree, Range, rangesWithin, remove, walk } from './AATree'\nimport * as arrayBinarySearch from './utils/binaryArraySearch'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { loggerSystem, Log, LogLevel } from './loggerSystem'\nimport { recalcSystem } from './recalcSystem'\n\nexport interface SizeRange {\n  startIndex: number\n  endIndex: number\n  size: number\n}\n\nexport type Data = readonly unknown[] | undefined\n\nfunction rangeIncludes(refRange: SizeRange) {\n  const { size, startIndex, endIndex } = refRange\n  return (range: Range<number>) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size\n  }\n}\n\nexport function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[]) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity\n\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range\n    syncStart = Math.min(syncStart, startIndex)\n\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size)\n      continue\n    }\n\n    // extend the range in both directions, so that we can get adjacent neighbours.\n    // if the previous / next ones have the same value as the one we are about to insert,\n    // we 'merge' them.\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1)\n\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue\n    }\n\n    let firstPassDone = false\n    let shouldInsert = false\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      // previous range\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size\n        firstPassDone = true\n      } else {\n        // remove the range if it starts within the new range OR if\n        // it has the same value as it, in order to perform a merge\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart)\n        }\n      }\n\n      // next range\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue)\n        }\n      }\n    }\n\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size)\n    }\n  }\n  return [sizeTree, syncStart] as const\n}\n\nexport interface OffsetPoint {\n  offset: number\n  size: number\n  index: number\n}\n\nexport interface SizeState {\n  sizeTree: AANode<number>\n  offsetTree: Array<OffsetPoint>\n  groupOffsetTree: AANode<number>\n  lastIndex: number\n  lastOffset: number\n  lastSize: number\n  groupIndices: number[]\n}\n\nexport function initialSizeState(): SizeState {\n  return {\n    offsetTree: [],\n    sizeTree: newTree<number>(),\n    groupOffsetTree: newTree<number>(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: [],\n  }\n}\n\nexport function indexComparator({ index: itemIndex }: OffsetPoint, index: number) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1\n}\n\nexport function offsetComparator({ offset: itemOffset }: OffsetPoint, offset: number) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1\n}\n\nfunction offsetPointParser(point: OffsetPoint) {\n  return { index: point.index, value: point }\n}\n\nexport function rangesWithinOffsets(\n  tree: Array<OffsetPoint>,\n  startOffset: number,\n  endOffset: number,\n  minStartIndex = 0\n): Array<{\n  start: number\n  end: number\n  value: {\n    size: number\n    offset: number\n    index: number\n  }\n}> {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, arrayBinarySearch.findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset)\n  }\n\n  return arrayToRanges(arrayBinarySearch.findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser)\n}\n\nfunction createOffsetTree(prevOffsetTree: OffsetPoint[], syncStart: number, sizeTree: AANode<number>, gap: number) {\n  let offsetTree = prevOffsetTree\n  let prevIndex = 0\n  let prevSize = 0\n\n  let prevOffset = 0\n  let startIndex = 0\n\n  if (syncStart !== 0) {\n    startIndex = arrayBinarySearch.findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator)\n    const offsetInfo = offsetTree[startIndex]\n    prevOffset = offsetInfo.offset\n    const kv = findMaxKeyValue(sizeTree, syncStart - 1)\n    prevIndex = kv[0]\n    prevSize = kv[1]!\n\n    if (offsetTree.length && offsetTree[startIndex].size === findMaxKeyValue(sizeTree, syncStart)[1]) {\n      startIndex -= 1\n    }\n\n    offsetTree = offsetTree.slice(0, startIndex + 1)\n  } else {\n    offsetTree = []\n  }\n\n  for (const { start: startIndex, value } of rangesWithin(sizeTree, syncStart, Infinity)) {\n    const indexOffset = startIndex - prevIndex\n    const aOffset = indexOffset * prevSize + prevOffset + indexOffset * gap\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex,\n    })\n    prevIndex = startIndex\n    prevOffset = aOffset\n    prevSize = value\n  }\n\n  return {\n    offsetTree,\n    lastIndex: prevIndex,\n    lastOffset: prevOffset,\n    lastSize: prevSize,\n  }\n}\n\nexport function sizeStateReducer(state: SizeState, [ranges, groupIndices, log, gap]: [SizeRange[], number[], Log, number]) {\n  if (ranges.length > 0) {\n    log('received item sizes', ranges, LogLevel.DEBUG)\n  }\n  const sizeTree = state.sizeTree\n  let newSizeTree: AANode<number> = sizeTree\n  let syncStart = 0\n\n  // We receive probe item results from a group probe,\n  // which should always pass an item and a group\n  // the results contain two ranges, which we consider to mean that groups and items have different size\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size\n    const itemSize = ranges[1].size\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize)\n    }, newSizeTree)\n  } else {\n    ;[newSizeTree, syncStart] = insertRanges(newSizeTree, ranges)\n  }\n\n  if (newSizeTree === sizeTree) {\n    return state\n  }\n\n  const { offsetTree: newOffsetTree, lastIndex, lastSize, lastOffset } = createOffsetTree(state.offsetTree, syncStart, newSizeTree, gap)\n\n  return {\n    sizeTree: newSizeTree,\n    offsetTree: newOffsetTree,\n    lastIndex,\n    lastOffset,\n    lastSize,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, newOffsetTree, gap))\n    }, newTree<number>()),\n    groupIndices,\n  }\n}\n\nexport function offsetOf(index: number, tree: Array<OffsetPoint>, gap: number) {\n  if (tree.length === 0) {\n    return 0\n  }\n\n  const { offset, index: startIndex, size } = arrayBinarySearch.findClosestSmallerOrEqual(tree, index, indexComparator)\n  const itemCount = index - startIndex\n  const top = size * itemCount + (itemCount - 1) * gap + offset\n  return top > 0 ? top + gap : top\n}\n\nexport type FlatOrGroupedLocation = { index: number | 'LAST' } | { groupIndex: number }\n\nexport function isGroupLocation(location: FlatOrGroupedLocation): location is { groupIndex: number } {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  return typeof (location as any).groupIndex !== 'undefined'\n}\n\nexport function originalIndexFromLocation(location: FlatOrGroupedLocation, sizes: SizeState, lastIndex: number) {\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n  if (isGroupLocation(location)) {\n    // return the index of the first item below the index\n    return sizes.groupIndices[location.groupIndex] + 1\n  } else {\n    const numericIndex = location.index === 'LAST' ? lastIndex : location.index\n    let result = originalIndexFromItemIndex(numericIndex, sizes)\n    result = Math.max(0, result, Math.min(lastIndex, result))\n    return result\n  }\n}\n\nexport function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState) {\n  if (!hasGroups(sizes)) {\n    return itemIndex\n  }\n\n  let groupOffset = 0\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++\n  }\n  // we find the real item index, offsetting it by the number of group items before it\n  return itemIndex + groupOffset\n}\n\nexport function hasGroups(sizes: SizeState) {\n  return !empty(sizes.groupOffsetTree)\n}\n\ntype OptionalNumber = number | undefined\n\nconst SIZE_MAP = {\n  offsetHeight: 'height',\n  offsetWidth: 'width',\n} as const\n\n/** Calculates the height of `el`, which will be the `Item` element in the DOM. */\nexport type SizeFunction = (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\nexport const sizeSystem = u.system(\n  ([{ log }, { recalcInProgress }]) => {\n    const sizeRanges = u.stream<SizeRange[]>()\n    const totalCount = u.stream<number>()\n    const statefulTotalCount = u.statefulStreamFromEmitter(totalCount, 0)\n    const unshiftWith = u.stream<number>()\n    const shiftWith = u.stream<number>()\n    const firstItemIndex = u.statefulStream(0)\n    const groupIndices = u.statefulStream([] as number[])\n    const fixedItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const defaultItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const itemSize = u.statefulStream<SizeFunction>((el, field) => correctItemSize(el, SIZE_MAP[field]))\n    const data = u.statefulStream<Data>(undefined)\n    const gap = u.statefulStream(0)\n    const initial = initialSizeState()\n\n    const sizes = u.statefulStreamFromEmitter(\n      u.pipe(sizeRanges, u.withLatestFrom(groupIndices, log, gap), u.scan(sizeStateReducer, initial), u.distinctUntilChanged()),\n      initial\n    )\n\n    u.connect(\n      u.pipe(\n        groupIndices,\n        u.filter((indexes) => indexes.length > 0),\n        u.withLatestFrom(sizes, gap),\n        u.map(([groupIndices, sizes, gap]) => {\n          const groupOffsetTree = groupIndices.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes.offsetTree, gap) || idx)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            groupIndices,\n            groupOffsetTree,\n          }\n        })\n      ),\n      sizes\n    )\n\n    // decreasing the total count should remove any existing entries\n    // beyond the last index - do this by publishing the default size as a range over them.\n    u.connect(\n      u.pipe(\n        totalCount,\n        u.withLatestFrom(sizes),\n        u.filter(([totalCount, { lastIndex }]) => {\n          return totalCount < lastIndex\n        }),\n        u.map(([totalCount, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount,\n              endIndex: lastIndex,\n              size: lastSize,\n            },\n          ] as SizeRange[]\n        })\n      ),\n      sizeRanges\n    )\n\n    u.connect(fixedItemSize, defaultItemSize)\n\n    const trackItemSizes = u.statefulStreamFromEmitter(\n      u.pipe(\n        fixedItemSize,\n        u.map((size) => size === undefined)\n      ),\n      true\n    )\n\n    u.connect(\n      u.pipe(\n        defaultItemSize,\n        u.filter((value) => {\n          return value !== undefined && empty(u.getValue(sizes).sizeTree)\n        }),\n        u.map((size) => [{ startIndex: 0, endIndex: 0, size }] as SizeRange[])\n      ),\n      sizeRanges\n    )\n\n    const listRefresh = u.streamFromEmitter(\n      u.pipe(\n        sizeRanges,\n        u.withLatestFrom(sizes),\n        u.scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes,\n            }\n          },\n          { changed: false, sizes: initial }\n        ),\n        u.map((value) => value.changed)\n      )\n    )\n\n    u.subscribe(\n      u.pipe(\n        firstItemIndex,\n        u.scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next }\n          },\n          { diff: 0, prev: 0 }\n        ),\n        u.map((val) => val.diff)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(recalcInProgress, true)\n          u.publish(unshiftWith, offset)\n        } else if (offset < 0) {\n          u.publish(shiftWith, offset)\n        }\n      }\n    )\n\n    u.subscribe(u.pipe(firstItemIndex, u.withLatestFrom(log)), ([index, log]) => {\n      if (index < 0) {\n        log(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        )\n      }\n    })\n\n    // Capture the current list top item before the sizes get refreshed\n    const beforeUnshiftWith = u.streamFromEmitter(unshiftWith)\n\n    u.connect(\n      u.pipe(\n        unshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([unshiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: prepending items does not work with groups')\n          }\n\n          return walk(sizes.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith,\n                prevSize: size,\n              }\n            },\n            {\n              ranges: [] as SizeRange[],\n              prevIndex: 0,\n              prevSize: sizes.lastSize,\n            }\n          ).ranges\n        })\n      ),\n      sizeRanges\n    )\n\n    const shiftWithOffset = u.streamFromEmitter(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, { offsetTree }, gap]) => {\n          const newFirstItemIndex = -shiftWith\n          return offsetOf(newFirstItemIndex, offsetTree, gap)\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([shiftWith, sizes, gap]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: shifting items does not work with groups')\n          }\n\n          const newSizeTree = walk(sizes.sizeTree).reduce((acc, { k, v }) => {\n            return insert(acc, Math.max(0, k + shiftWith), v)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            sizeTree: newSizeTree,\n            ...createOffsetTree(sizes.offsetTree, 0, newSizeTree, gap),\n          }\n        })\n      ),\n      sizes\n    )\n\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      shiftWith,\n      shiftWithOffset,\n      beforeUnshiftWith,\n      firstItemIndex,\n      gap,\n\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize,\n    }\n  },\n  u.tup(loggerSystem, recalcSystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { IndexLocationWithAlign } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport type IndexLocation = number | IndexLocationWithAlign\n\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== 'undefined' && 'scrollBehavior' in document.documentElement.style\n\nexport function normalizeIndexLocation(location: IndexLocation) {\n  const result: IndexLocationWithAlign = typeof location === 'number' ? { index: location } : location\n\n  if (!result.align) {\n    result.align = 'start'\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = 'auto'\n  }\n  if (!result.offset) {\n    result.offset = 0\n  }\n\n  return result\n}\n\nexport const scrollToIndexSystem = u.system(\n  ([\n    { sizes, totalCount, listRefresh, gap },\n    { scrollingInProgress, viewportHeight, scrollTo, smoothScrollTargetReached, headerHeight, footerHeight },\n    { log },\n  ]) => {\n    const scrollToIndex = u.stream<IndexLocation>()\n    const topListHeight = u.statefulStream(0)\n\n    let unsubscribeNextListRefresh: any = null\n    let cleartTimeoutRef: ReturnType<typeof setTimeout> | null = null\n    let unsubscribeListRefresh: any = null\n\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh()\n        unsubscribeNextListRefresh = null\n      }\n\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh()\n        unsubscribeListRefresh = null\n      }\n\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef)\n        cleartTimeoutRef = null\n      }\n      u.publish(scrollingInProgress, false)\n    }\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        u.withLatestFrom(gap),\n        u.map(([[location, sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log], gap]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          const lastIndex = totalCount - 1\n\n          const index = originalIndexFromLocation(normalLocation, sizes, lastIndex)\n\n          let top = offsetOf(index, sizes.offsetTree, gap) + headerHeight\n          if (align === 'end') {\n            top = top - viewportHeight + findMaxKeyValue(sizes.sizeTree, index)[1]!\n            if (index === lastIndex) {\n              top += footerHeight\n            }\n          } else if (align === 'center') {\n            top = top - viewportHeight / 2 + findMaxKeyValue(sizes.sizeTree, index)[1]! / 2\n          } else {\n            top -= topListHeight\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          const retry = (listChanged: boolean) => {\n            cleanup()\n            if (listChanged) {\n              log('retrying to scroll to', { location }, LogLevel.DEBUG)\n              u.publish(scrollToIndex, location)\n            } else {\n              log('list did not change, scroll successful', {}, LogLevel.DEBUG)\n            }\n          }\n\n          cleanup()\n\n          if (behavior === 'smooth') {\n            let listChanged = false\n            unsubscribeListRefresh = u.subscribe(listRefresh, (changed) => {\n              listChanged = listChanged || changed\n            })\n\n            unsubscribeNextListRefresh = u.handleNext(smoothScrollTargetReached, () => {\n              retry(listChanged)\n            })\n          } else {\n            unsubscribeNextListRefresh = u.handleNext(u.pipe(listRefresh, watchChangesFor(150)), retry)\n          }\n\n          // if the scroll jump is too small, the list won't get rerendered.\n          // clean this listener\n          cleartTimeoutRef = setTimeout(() => {\n            cleanup()\n          }, 1200)\n\n          u.publish(scrollingInProgress, true)\n          log('scrolling from index to', { index, top, behavior }, LogLevel.DEBUG)\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    return {\n      scrollToIndex,\n      topListHeight,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n)\n\nfunction watchChangesFor(limit: number): u.Operator<boolean> {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false)\n    }, limit)\n    return (value) => {\n      if (value) {\n        done(true)\n        clearTimeout(timeoutRef)\n      }\n    }\n  }\n}\n","/* eslint-disable @typescript-eslint/no-unsafe-argument */\nimport * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { approximatelyEqual } from './utils/approximatelyEqual'\n\nexport const UP = 'up' as const\nexport const DOWN = 'down' as const\nexport const NONE = 'none' as const\nexport type ScrollDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport interface ListBottomInfo {\n  bottom: number\n  offsetBottom: number\n}\n\nexport interface AtBottomParams {\n  offsetBottom: number\n  scrollTop: number\n  viewportHeight: number\n  scrollHeight: number\n}\n\nexport type NotAtBottomReason =\n  | 'SIZE_INCREASED'\n  | 'NOT_SHOWING_LAST_ITEM'\n  | 'VIEWPORT_HEIGHT_DECREASING'\n  | 'SCROLLING_UPWARDS'\n  | 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n\nexport type AtBottomReason = 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n\nexport type AtBottomState =\n  | {\n      atBottom: false\n      notAtBottomBecause: NotAtBottomReason\n      state: AtBottomParams\n    }\n  | {\n      atBottom: true\n      state: AtBottomParams\n      atBottomBecause: AtBottomReason\n      scrollTopDelta: number\n    }\n\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: 'NOT_SHOWING_LAST_ITEM',\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0,\n  },\n} as AtBottomState\n\nconst DEFAULT_AT_TOP_THRESHOLD = 0\n\nexport const stateFlagsSystem = u.system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = u.statefulStream(false)\n  const isAtTop = u.statefulStream(true)\n  const atBottomStateChange = u.stream<boolean>()\n  const atTopStateChange = u.stream<boolean>()\n  const atBottomThreshold = u.statefulStream(4)\n  const atTopThreshold = u.statefulStream(DEFAULT_AT_TOP_THRESHOLD)\n\n  // skip 1 to avoid an initial on/off flick\n  const isScrolling = u.statefulStreamFromEmitter(\n    u.pipe(\n      u.merge(u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(true)), u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(false), u.debounceTime(100))),\n      u.distinctUntilChanged()\n    ),\n    false\n  )\n\n  const isScrollingBy = u.statefulStreamFromEmitter(\n    u.pipe(u.merge(u.pipe(scrollBy, u.mapTo(true)), u.pipe(scrollBy, u.mapTo(false), u.debounceTime(200))), u.distinctUntilChanged()),\n    false\n  )\n\n  // u.subscribe(isScrollingBy, (isScrollingBy) => console.log({ isScrollingBy }))\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(u.duc(scrollTop), u.duc(atTopThreshold)),\n      u.map(([top, atTopThreshold]) => top <= atTopThreshold),\n      u.distinctUntilChanged()\n    ),\n    isAtTop\n  )\n\n  u.connect(u.pipe(isAtTop, u.throttleTime(50)), atTopStateChange)\n\n  const atBottomState = u.streamFromEmitter(\n    u.pipe(\n      u.combineLatest(scrollContainerState, u.duc(viewportHeight), u.duc(headerHeight), u.duc(footerHeight), u.duc(atBottomThreshold)),\n      u.scan((current, [{ scrollTop, scrollHeight }, viewportHeight, _headerHeight, _footerHeight, atBottomThreshold]) => {\n        const isAtBottom = scrollTop + viewportHeight - scrollHeight > -atBottomThreshold\n        const state = {\n          viewportHeight,\n          scrollTop,\n          scrollHeight,\n        }\n\n        if (isAtBottom) {\n          let atBottomBecause: 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n          let scrollTopDelta: number\n          if (scrollTop > current.state.scrollTop) {\n            atBottomBecause = 'SCROLLED_DOWN'\n            scrollTopDelta = current.state.scrollTop - scrollTop\n          } else {\n            atBottomBecause = 'SIZE_DECREASED'\n            scrollTopDelta = current.state.scrollTop - scrollTop || (current as { scrollTopDelta: number }).scrollTopDelta\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta,\n          } as AtBottomState\n        }\n\n        let notAtBottomBecause: NotAtBottomReason\n\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = 'SIZE_INCREASED'\n        } else if (viewportHeight < current.state.viewportHeight) {\n          notAtBottomBecause = 'VIEWPORT_HEIGHT_DECREASING'\n        } else if (scrollTop < current.state.scrollTop) {\n          notAtBottomBecause = 'SCROLLING_UPWARDS'\n        } else {\n          notAtBottomBecause = 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n        }\n\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state,\n        } as AtBottomState\n      }, INITIAL_BOTTOM_STATE),\n      u.distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom\n      })\n    )\n  )\n\n  const lastJumpDueToItemResize = u.statefulStreamFromEmitter(\n    u.pipe(\n      scrollContainerState,\n      u.scan(\n        (current, { scrollTop, scrollHeight, viewportHeight }) => {\n          if (!approximatelyEqual(current.scrollHeight, scrollHeight)) {\n            const atBottom = scrollHeight - (scrollTop + viewportHeight) < 1\n\n            if (current.scrollTop !== scrollTop && atBottom) {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: current.scrollTop - scrollTop,\n                changed: true,\n              }\n            } else {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: 0,\n                changed: true,\n              }\n            }\n          } else {\n            return {\n              scrollTop,\n              scrollHeight,\n              jump: 0,\n              changed: false,\n            }\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      u.filter((value) => value.changed),\n      u.map((value) => value.jump)\n    ),\n    0\n  )\n\n  u.connect(\n    u.pipe(\n      atBottomState,\n      u.map((state) => state.atBottom)\n    ),\n    isAtBottom\n  )\n\n  u.connect(u.pipe(isAtBottom, u.throttleTime(50)), atBottomStateChange)\n\n  const scrollDirection = u.statefulStream<ScrollDirection>(DOWN)\n\n  u.connect(\n    u.pipe(\n      scrollContainerState,\n      u.map(({ scrollTop }) => scrollTop),\n      u.distinctUntilChanged(),\n      u.scan(\n        (acc, scrollTop) => {\n          // if things change while compensating for items, ignore,\n          // but store the new scrollTop\n          if (u.getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop }\n          }\n\n          return { direction: scrollTop < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop }\n        },\n        { direction: DOWN, prevScrollTop: 0 } as { direction: ScrollDirection; prevScrollTop: number }\n      ),\n      u.map((value) => value.direction)\n    ),\n    scrollDirection\n  )\n\n  // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n  u.connect(u.pipe(scrollContainerState, u.throttleTime(50), u.mapTo(NONE)), scrollDirection)\n\n  const scrollVelocity = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      isScrolling,\n      u.filter((value) => !value),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n      u.mapTo(0)\n    ),\n    scrollVelocity\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTop,\n      u.throttleTime(100),\n      u.withLatestFrom(isScrolling),\n      u.filter(([_, isScrolling]) => !!isScrolling),\n      u.scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      u.map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  )\n\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    atTopThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport const propsReadySystem = u.system(\n  ([{ log }]) => {\n    const propsReady = u.statefulStream(false)\n\n    const didMount = u.streamFromEmitter(\n      u.pipe(\n        propsReady,\n        u.filter((ready) => ready),\n        u.distinctUntilChanged()\n      )\n    )\n    u.subscribe(propsReady, (value) => {\n      value && u.getValue(log)('props updated', {}, LogLevel.DEBUG)\n    })\n\n    return { propsReady, didMount }\n  },\n  u.tup(loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty } from './AATree'\nimport { sizeSystem } from './sizeSystem'\nimport { domIOSystem } from './domIOSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\n\nexport function getInitialTopMostItemIndexNumber(location: number | FlatIndexLocationWithAlign, totalCount: number): number {\n  const lastIndex = totalCount - 1\n  const index = typeof location === 'number' ? location : location.index === 'LAST' ? lastIndex : location.index\n  return index\n}\n\nexport const initialTopMostItemIndexSystem = u.system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = u.statefulStream(true)\n    const initialTopMostItemIndex = u.statefulStream<number | FlatIndexLocationWithAlign>(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialTopMostItemIndex),\n        u.filter(([_, location]) => !!location),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(false)\n      ),\n      scrolledToInitialItem\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(listRefresh, didMount),\n        u.withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize),\n        u.filter(([[, didMount], scrolledToInitialItem, { sizeTree }, defaultItemSize]) => {\n          return didMount && (!empty(sizeTree) || defaultItemSize !== undefined) && !scrolledToInitialItem\n        }),\n        u.withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex]) => {\n        setTimeout(() => {\n          u.handleNext(scrollTop, () => {\n            u.publish(scrolledToInitialItem, true)\n          })\n          u.publish(scrollToIndex, initialTopMostItemIndex)\n        })\n      }\n    )\n\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { FollowOutput, FollowOutputScalarType } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { domIOSystem } from './domIOSystem'\n\nfunction normalizeFollowOutput(follow: FollowOutputScalarType): FollowOutputScalarType {\n  if (!follow) {\n    return false\n  }\n  return follow === 'smooth' ? 'smooth' : 'auto'\n}\n\nconst behaviorFromFollowOutput = (follow: FollowOutput, isAtBottom: boolean) => {\n  if (typeof follow === 'function') {\n    return normalizeFollowOutput(follow(isAtBottom))\n  }\n  return isAtBottom && normalizeFollowOutput(follow)\n}\n\nexport const followOutputSystem = u.system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress },\n  ]) => {\n    const followOutput = u.statefulStream<FollowOutput>(false)\n    const autoscrollToBottom = u.stream<true>()\n    let pendingScrollHandle: any = null\n\n    function scrollToBottom(followOutputBehavior: FollowOutputScalarType) {\n      u.publish(scrollToIndex, {\n        index: 'LAST',\n        align: 'end',\n        behavior: followOutputBehavior,\n      })\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.pipe(u.duc(totalCount), u.skip(1)), didMount),\n        u.withLatestFrom(u.duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        u.map(([[totalCount, didMount], followOutput, isAtBottom, scrolledToInitialItem, scrollingInProgress]) => {\n          let shouldFollow = didMount && scrolledToInitialItem\n          let followOutputBehavior: FollowOutputScalarType = 'auto'\n\n          if (shouldFollow) {\n            // if scrolling to index is in progress,\n            // assume that a previous followOutput response is going\n            followOutputBehavior = behaviorFromFollowOutput(followOutput, isAtBottom || scrollingInProgress)\n            shouldFollow = shouldFollow && !!followOutputBehavior\n          }\n\n          return { totalCount, shouldFollow, followOutputBehavior }\n        }),\n        u.filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle()\n          pendingScrollHandle = null\n        }\n\n        pendingScrollHandle = u.handleNext(listRefresh, () => {\n          u.getValue(log)('following output to ', { totalCount }, LogLevel.DEBUG)\n          scrollToBottom(followOutputBehavior)\n          pendingScrollHandle = null\n        })\n      }\n    )\n\n    function trapNextSizeIncrease(followOutput: boolean) {\n      const cancel = u.handleNext(atBottomState, (state) => {\n        if (followOutput && !state.atBottom && state.notAtBottomBecause === 'SIZE_INCREASED' && !pendingScrollHandle) {\n          u.getValue(log)('scrolling to bottom due to increased size', {}, LogLevel.DEBUG)\n          scrollToBottom('auto')\n        }\n      })\n      setTimeout(cancel, 100)\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.duc(followOutput), totalCount, propsReady),\n        u.filter(([follow, , ready]) => follow && ready),\n        u.scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next }\n          },\n          { refreshed: false, value: 0 }\n        ),\n        u.filter(({ refreshed }) => refreshed),\n        u.withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput]) => {\n        trapNextSizeIncrease(followOutput !== false)\n      }\n    )\n\n    u.subscribe(autoscrollToBottom, () => {\n      trapNextSizeIncrease(u.getValue(followOutput) !== false)\n    })\n\n    u.subscribe(u.combineLatest(u.duc(followOutput), atBottomState), ([followOutput, state]) => {\n      if (followOutput && !state.atBottom && state.notAtBottomBecause === 'VIEWPORT_HEIGHT_DECREASING') {\n        scrollToBottom('auto')\n      }\n    })\n\n    return { followOutput, autoscrollToBottom }\n  },\n  u.tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\n\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { sizeSystem, hasGroups } from './sizeSystem'\nexport interface GroupIndexesAndCount {\n  totalCount: number\n  groupIndices: number[]\n}\n\nexport function groupCountsToIndicesAndCount(counts: number[]) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount)\n      acc.totalCount += groupCount + 1\n      return acc\n    },\n    {\n      totalCount: 0,\n      groupIndices: [],\n    } as GroupIndexesAndCount\n  )\n}\n\nexport const groupedListSystem = u.system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = u.stream<number[]>()\n  const topItemsIndexes = u.stream<[number]>()\n  const groupIndicesAndCount = u.streamFromEmitter(u.pipe(groupCounts, u.map(groupCountsToIndicesAndCount)))\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.totalCount)\n    ),\n    totalCount\n  )\n  u.connect(\n    u.pipe(\n      groupIndicesAndCount,\n      u.map((value) => value.groupIndices)\n    ),\n    groupIndices\n  )\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(scrollTop, sizes, headerHeight),\n      u.filter(([_, sizes]) => hasGroups(sizes)),\n      u.map(([scrollTop, state, headerHeight]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop - headerHeight, 0), 'v')[0]),\n      u.distinctUntilChanged(),\n      u.map((index) => [index])\n    ),\n    topItemsIndexes\n  )\n\n  return { groupCounts, topItemsIndexes }\n}, u.tup(sizeSystem, domIOSystem))\n","import { ListRange } from './interfaces'\n\nexport function tupleComparator<T1, T2>(prev: [T1, T2] | undefined, current: [T1, T2]) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1])\n}\n\nexport function rangeComparator(prev: ListRange | undefined, next: ListRange) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex)\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { UP, DOWN, ScrollDirection } from './stateFlagsSystem'\nimport { tupleComparator } from './comparators'\n\nexport type NumberTuple = [number, number]\nexport type Overscan = number | { main: number; reverse: number }\nexport const TOP = 'top' as const\nexport const BOTTOM = 'bottom' as const\nexport const NONE = 'none' as const\nexport type ListEnd = typeof TOP | typeof BOTTOM\nexport type ViewportIncrease = number | { [k in ListEnd]?: number }\nexport type ChangeDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport function getOverscan(overscan: Overscan, end: ListEnd, direction: ScrollDirection) {\n  if (typeof overscan === 'number') {\n    return (direction === UP && end === TOP) || (direction === DOWN && end === BOTTOM) ? overscan : 0\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse\n    }\n  }\n}\n\nfunction getViewportIncrease(value: ViewportIncrease, end: ListEnd) {\n  return typeof value === 'number' ? value : value[end] || 0\n}\n\nexport const sizeRangeSystem = u.system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight, fixedHeaderHeight }]) => {\n    const listBoundary = u.stream<NumberTuple>()\n    const topListHeight = u.statefulStream(0)\n    const increaseViewportBy = u.statefulStream<ViewportIncrease>(0)\n    const overscan = u.statefulStream<Overscan>(0)\n\n    const visibleRange = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          u.duc(scrollTop),\n          u.duc(viewportHeight),\n          u.duc(headerHeight),\n          u.duc(listBoundary, tupleComparator),\n          u.duc(overscan),\n          u.duc(topListHeight),\n          u.duc(fixedHeaderHeight),\n          u.duc(deviation),\n          u.duc(increaseViewportBy)\n        ),\n        u.map(\n          ([\n            scrollTop,\n            viewportHeight,\n            headerHeight,\n            [listTop, listBottom],\n            overscan,\n            topListHeight,\n            fixedHeaderHeight,\n            deviation,\n            increaseViewportBy,\n          ]) => {\n            const top = scrollTop - deviation\n            const stickyHeaderHeight = topListHeight + fixedHeaderHeight\n            const headerVisible = Math.max(headerHeight - top, 0)\n            let direction: ChangeDirection = NONE\n            const topViewportAddition = getViewportIncrease(increaseViewportBy, TOP)\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy, BOTTOM)\n\n            listTop -= deviation\n            listTop += headerHeight + fixedHeaderHeight\n            listBottom += headerHeight + fixedHeaderHeight\n            listBottom -= deviation\n\n            // console.log({ listTop, scrollTop, stickyHeaderHeight, topViewportAddition })\n            if (listTop > scrollTop + stickyHeaderHeight - topViewportAddition) {\n              direction = UP\n            }\n\n            if (listBottom < scrollTop - headerVisible + viewportHeight + bottomViewportAddition) {\n              direction = DOWN\n            }\n\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight - getOverscan(overscan, TOP, direction) - topViewportAddition, 0),\n                top -\n                  headerVisible -\n                  fixedHeaderHeight +\n                  viewportHeight +\n                  getOverscan(overscan, BOTTOM, direction) +\n                  bottomViewportAddition,\n              ] as NumberTuple\n            }\n\n            return null\n          }\n        ),\n        u.filter((value) => value != null) as u.Operator<NumberTuple | null, NumberTuple>,\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      [0, 0]\n    ) as unknown as u.StatefulStream<NumberTuple>\n\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      increaseViewportBy,\n\n      // output\n      visibleRange,\n    }\n  },\n  u.tup(domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { empty, findMaxKeyValue, Range, rangesWithin } from './AATree'\nimport { groupedListSystem } from './groupedListSystem'\nimport { getInitialTopMostItemIndexNumber, initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { Item, ListItem, ListRange } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { Data, originalIndexFromItemIndex, SizeState, sizeSystem, hasGroups, rangesWithinOffsets } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { recalcSystem } from './recalcSystem'\n\nexport type ListItems = ListItem<unknown>[]\nexport interface TopListState {\n  items: ListItems\n  listHeight: number\n}\n\nexport interface ListState {\n  items: ListItems\n  topItems: ListItems\n  topListHeight: number\n  offsetTop: number\n  offsetBottom: number\n  top: number\n  bottom: number\n  totalCount: number\n  firstItemIndex: number\n}\n\nfunction probeItemSet(index: number, sizes: SizeState, data: Data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes)\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0]\n\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] },\n    ]\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }]\n}\n\nconst EMPTY_LIST_STATE: ListState = {\n  items: [] as ListItems,\n  topItems: [] as ListItems,\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n  firstItemIndex: 0,\n}\n\nfunction transposeItems(items: Item<any>[], sizes: SizeState, firstItemIndex: number): ListItems {\n  if (items.length === 0) {\n    return []\n  }\n\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }))\n  }\n\n  const startIndex = items[0].index\n  const endIndex = items[items.length - 1].index\n\n  const transposedItems = [] as ListItems\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex)\n  let currentRange: Range<number> | undefined = undefined\n  let currentGroupIndex = 0\n\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift()!\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start)\n    }\n\n    let transposedItem: { type: 'group'; index: number } | { index: number; groupIndex: number }\n\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: 'group' as const,\n        index: currentGroupIndex,\n      }\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex,\n      }\n    }\n\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data,\n    })\n  }\n\n  return transposedItems\n}\n\nexport function buildListState(\n  items: Item<any>[],\n  topItems: Item<any>[],\n  totalCount: number,\n  gap: number,\n  sizes: SizeState,\n  firstItemIndex: number\n): ListState {\n  const { lastSize, lastOffset, lastIndex } = sizes\n  let offsetTop = 0\n  let bottom = 0\n\n  if (items.length > 0) {\n    offsetTop = items[0].offset\n    const lastItem = items[items.length - 1]\n    bottom = lastItem.offset + lastItem.size\n  }\n\n  const itemCount = totalCount - lastIndex\n  const total = lastOffset + itemCount * lastSize + (itemCount - 1) * gap\n  const top = offsetTop\n  const offsetBottom = total - bottom\n\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n    firstItemIndex,\n  }\n}\n\nexport const listStateSystem = u.system(\n  ([\n    { sizes, totalCount, data, firstItemIndex, gap },\n    groupedListSystem,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n    { recalcInProgress },\n  ]) => {\n    const topItemsIndexes = u.statefulStream<Array<number>>([])\n    const itemsRendered = u.stream<ListItems>()\n\n    u.connect(groupedListSystem.topItemsIndexes, topItemsIndexes)\n\n    const listState = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          didMount,\n          recalcInProgress,\n          u.duc(visibleRange, tupleComparator),\n          u.duc(totalCount),\n          u.duc(sizes),\n          u.duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          u.duc(topItemsIndexes),\n          u.duc(firstItemIndex),\n          u.duc(gap),\n          data\n        ),\n        u.filter(([mount, recalcInProgress]) => {\n          return mount && !recalcInProgress\n        }),\n        u.map(\n          ([\n            ,\n            ,\n            [startOffset, endOffset],\n            totalCount,\n            sizes,\n            initialTopMostItemIndex,\n            scrolledToInitialItem,\n            topItemsIndexes,\n            firstItemIndex,\n            gap,\n            data,\n          ]) => {\n            const sizesValue = sizes\n            const { sizeTree, offsetTree } = sizesValue\n\n            if (totalCount === 0 || (startOffset === 0 && endOffset === 0)) {\n              return EMPTY_LIST_STATE\n            }\n\n            if (empty(sizeTree)) {\n              return buildListState(\n                probeItemSet(getInitialTopMostItemIndexNumber(initialTopMostItemIndex, totalCount), sizesValue, data),\n                [],\n                totalCount,\n                gap,\n                sizesValue,\n                firstItemIndex\n              )\n            }\n\n            const topItems = [] as Item<any>[]\n\n            if (topItemsIndexes.length > 0) {\n              const startIndex = topItemsIndexes[0]\n              const endIndex = topItemsIndexes[topItemsIndexes.length - 1]\n              let offset = 0\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value\n                const rangeStartIndex = Math.max(range.start, startIndex)\n                const rangeEndIndex = Math.min(range.end, endIndex)\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            }\n\n            // If the list hasn't scrolled to the initial item because the initial item was set,\n            // render empty list.\n            //\n            // This is a condition to be evaluated past the probe check, do not merge\n            // with the totalCount check above\n            if (!scrolledToInitialItem) {\n              return buildListState([], topItems, totalCount, gap, sizesValue, firstItemIndex)\n            }\n\n            const minStartIndex = topItemsIndexes.length > 0 ? topItemsIndexes[topItemsIndexes.length - 1] + 1 : 0\n\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex)\n            if (offsetPointRanges.length === 0) {\n              return null\n            }\n\n            const maxIndex = totalCount - 1\n\n            const items = u.tap([] as Item<any>[], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value\n                let offset = point.offset\n                let rangeStartIndex = range.start\n                const size = point.size\n\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset + gap) / (size + gap))\n                  const itemCount = rangeStartIndex - range.start\n                  offset += itemCount * size + itemCount * gap\n                }\n\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size\n                  rangeStartIndex = minStartIndex\n                }\n\n                const endIndex = Math.min(range.end, maxIndex)\n\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break\n                  }\n\n                  result.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size + gap\n                }\n              }\n            })\n\n            return buildListState(items, topItems, totalCount, gap, sizesValue, firstItemIndex)\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        u.filter((value) => value !== null),\n        u.distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    )\n\n    u.connect(\n      u.pipe(\n        data,\n        u.filter((data) => data !== undefined),\n        u.map((data) => data!.length)\n      ),\n      totalCount\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((value) => value.topListHeight)\n      ),\n      topListHeight\n    )\n    u.connect(topListHeight, rangeTopListHeight)\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => state.items)\n      ),\n      itemsRendered\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount, data),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].originalIndex === totalCount - 1),\n        u.map(([, totalCount, data]) => [totalCount - 1, data] as [number, unknown[]]),\n        u.distinctUntilChanged(tupleComparator),\n        u.map(([count]) => count)\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.throttleTime(200),\n        u.filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length\n        }),\n        u.map(({ items }) => items[0].index),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          let startIndex = 0\n          let endIndex = items.length - 1\n\n          while (items[startIndex].type === 'group' && startIndex < endIndex) {\n            startIndex++\n          }\n\n          while (items[endIndex].type === 'group' && endIndex > startIndex) {\n            endIndex--\n          }\n\n          return {\n            startIndex: items[startIndex].index,\n            endIndex: items[endIndex].index,\n          } as ListRange\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags }\n  },\n  u.tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem,\n    recalcSystem\n  ),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem, buildListState } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialItemCountSystem = u.system(\n  ([{ sizes, firstItemIndex, data, gap }, { listState }, { didMount }]) => {\n    const initialItemCount = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.withLatestFrom(sizes, firstItemIndex, gap, data),\n        u.map(([[, count], sizes, firstItemIndex, gap, data = []]) => {\n          let includedGroupsCount = 0\n          if (sizes.groupIndices.length > 0) {\n            for (const index of sizes.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break\n              }\n              includedGroupsCount++\n            }\n          }\n          const adjustedCount = count + includedGroupsCount\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data[index] }))\n          return buildListState(items, [], adjustedCount, gap, sizes, firstItemIndex)\n        })\n      ),\n      listState\n    )\n\n    return { initialItemCount }\n  },\n  u.tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { ListRange } from './interfaces'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { ScrollSeekConfiguration } from './interfaces'\n\nexport const scrollSeekSystem = u.system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = u.statefulStream(false)\n    const rangeChanged = u.stream<ListRange>()\n    const scrollSeekConfiguration = u.statefulStream<ScrollSeekConfiguration | undefined | false>(false)\n\n    u.connect(\n      u.pipe(\n        scrollVelocity,\n        u.withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        u.filter(([_, config]) => !!config),\n        u.map(([speed, config, isSeeking, range]) => {\n          const { exit, enter } = config as ScrollSeekConfiguration\n          if (isSeeking) {\n            if (exit(speed, range)) {\n              return false\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true\n            }\n          }\n          return isSeeking\n        }),\n        u.distinctUntilChanged()\n      ),\n      isSeeking\n    )\n\n    u.subscribe(\n      u.pipe(u.combineLatest(isSeeking, scrollVelocity, rangeChanged), u.withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking, velocity, range], config]) => isSeeking && config && config.change && config.change(velocity, range)\n    )\n\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged }\n  },\n  u.tup(stateFlagsSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\n\nexport const topItemCountSystem = u.system(([{ topItemsIndexes }]) => {\n  const topItemCount = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      topItemCount,\n      u.filter((length) => length > 0),\n      u.map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  )\n  return { topItemCount }\n}, u.tup(listStateSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const totalListHeightSystem = u.system(\n  ([{ footerHeight, headerHeight, fixedHeaderHeight }, { listState }]) => {\n    const totalListHeightChanged = u.stream<number>()\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(footerHeight, headerHeight, fixedHeaderHeight, listState),\n        u.map(([footerHeight, headerHeight, fixedHeaderHeight, listState]) => {\n          return footerHeight + headerHeight + fixedHeaderHeight + listState.offsetBottom + listState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(u.duc(totalListHeight), totalListHeightChanged)\n\n    return { totalListHeight, totalListHeightChanged }\n  },\n  u.tup(domIOSystem, listStateSystem),\n  { singleton: true }\n)\n","export function simpleMemoize<T extends () => any>(func: T): T {\n  let called = false\n  let result: unknown\n\n  return (() => {\n    if (!called) {\n      called = true\n      result = func()\n    }\n    return result\n  }) as T\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { UP, stateFlagsSystem } from './stateFlagsSystem'\nimport { ListItem } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { simpleMemoize } from './utils/simpleMemoize'\nimport { recalcSystem } from './recalcSystem'\n\nconst isMobileSafari = simpleMemoize(() => {\n  return /iP(ad|hone|od).+Version\\/[\\d.]+.*Safari/i.test(navigator.userAgent)\n})\n\ntype UpwardFixState = [number, ListItem<any>[], number, number]\n/**\n * Fixes upward scrolling by calculating and compensation from changed item heights, using scrollBy.\n */\nexport const upwardScrollFixSystem = u.system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, shiftWithOffset, sizes, gap },\n    { log },\n    { recalcInProgress },\n  ]) => {\n    const deviationOffset = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.withLatestFrom(lastJumpDueToItemResize),\n        u.scan(\n          ([, prevItems, prevTotalCount, prevTotalHeight], [{ items, totalCount, bottom, offsetBottom }, lastJumpDueToItemResize]) => {\n            const totalHeight = bottom + offsetBottom\n\n            let newDev = 0\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const atStart = items[0].originalIndex === 0 && prevItems[0].originalIndex === 0\n                if (!atStart) {\n                  newDev = totalHeight - prevTotalHeight\n                  if (newDev !== 0) {\n                    newDev += lastJumpDueToItemResize\n                  }\n                }\n              }\n            }\n\n            return [newDev, items, totalCount, totalHeight] as UpwardFixState\n          },\n          [0, [], 0, 0] as UpwardFixState\n        ),\n        u.filter(([amount]) => amount !== 0),\n        u.withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, isAtBottom, log),\n        u.filter(([, scrollTop, scrollDirection, scrollingInProgress]) => {\n          return !scrollingInProgress && scrollTop !== 0 && scrollDirection === UP\n        }),\n        u.map(([[amount], , , , , log]) => {\n          log('Upward scrolling compensation', { amount }, LogLevel.DEBUG)\n          return amount\n        })\n      )\n    )\n\n    function scrollByWith(offset: number) {\n      if (offset > 0) {\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n        u.publish(deviation, 0)\n      } else {\n        u.publish(deviation, 0)\n        u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n      }\n    }\n\n    u.subscribe(u.pipe(deviationOffset, u.withLatestFrom(deviation, isScrolling)), ([offset, deviationAmount, isScrolling]) => {\n      if (isScrolling && isMobileSafari()) {\n        u.publish(deviation, deviationAmount - offset)\n      } else {\n        scrollByWith(-offset)\n      }\n    })\n\n    // this hack is only necessary for mobile safari which does not support scrollBy while scrolling is in progress.\n    // when the browser stops scrolling, restore the position and reset the glitching\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.statefulStreamFromEmitter(isScrolling, false), deviation, recalcInProgress),\n        u.filter(([is, deviation, recalc]) => !is && !recalc && deviation !== 0),\n        u.map(([_, deviation]) => deviation),\n        u.throttleTime(1)\n      ),\n      scrollByWith\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWithOffset,\n        u.map((offset) => {\n          return { top: -offset }\n        })\n      ),\n      scrollBy\n    )\n\n    u.subscribe(\n      u.pipe(\n        beforeUnshiftWith,\n        u.withLatestFrom(sizes, gap),\n        u.map(([offset, { lastSize }, gap]) => offset * lastSize + offset * gap)\n      ),\n      (offset) => {\n        u.publish(deviation, offset)\n        requestAnimationFrame(() => {\n          u.publish(scrollBy, { top: offset })\n          requestAnimationFrame(() => {\n            u.publish(deviation, 0)\n            u.publish(recalcInProgress, false)\n          })\n        })\n      }\n    )\n\n    return { deviation }\n  },\n  u.tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem, recalcSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const initialScrollTopSystem = u.system(\n  ([{ totalListHeight }, { didMount }, { scrollTo }]) => {\n    const initialScrollTop = u.statefulStream(0)\n\n    u.subscribe(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialScrollTop),\n        u.filter(([, offset]) => offset !== 0),\n        u.map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        u.handleNext(\n          u.pipe(\n            totalListHeight,\n            u.filter((val) => val !== 0)\n          ),\n          () => {\n            setTimeout(() => {\n              u.publish(scrollTo, location)\n            })\n          }\n        )\n      }\n    )\n\n    return {\n      initialScrollTop,\n    }\n  },\n  u.tup(totalListHeightSystem, propsReadySystem, domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const alignToBottomSystem = u.system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = u.statefulStream(false)\n\n    const paddingTopAddition = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        u.filter(([enabled]) => enabled),\n        u.map(([, viewportHeight, totalListHeight]) => {\n          return Math.max(0, viewportHeight - totalListHeight)\n        }),\n        u.distinctUntilChanged()\n      ),\n      0\n    )\n\n    return { alignToBottom, paddingTopAddition }\n  },\n  u.tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { WindowViewportInfo, ScrollContainerState } from './interfaces'\n\nexport const windowScrollerSystem = u.system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = u.stream<ScrollContainerState>()\n  const windowViewportRect = u.stream<WindowViewportInfo>()\n  const windowScrollTo = u.stream<ScrollToOptions>()\n  const useWindowScroll = u.statefulStream(false)\n  const customScrollParent = u.statefulStream<HTMLElement | undefined>(undefined)\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(windowScrollContainerState, windowViewportRect),\n      u.map(([{ viewportHeight, scrollTop: windowScrollTop, scrollHeight }, { offsetTop }]) => {\n        return {\n          scrollTop: Math.max(0, windowScrollTop - offsetTop),\n          scrollHeight,\n          viewportHeight,\n        }\n      })\n    ),\n    scrollContainerState\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTo,\n      u.withLatestFrom(windowViewportRect),\n      u.map(([scrollTo, { offsetTop }]) => {\n        return {\n          ...scrollTo,\n          top: scrollTo.top! + offsetTop,\n        }\n      })\n    ),\n    windowScrollTo\n  )\n\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n\n    // signals\n    windowScrollTo,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromLocation, sizeSystem } from './sizeSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { ScrollIntoViewLocation } from './interfaces'\n\nexport const scrollIntoViewSystem = u.system(\n  ([{ sizes, totalCount, gap }, { scrollTop, viewportHeight, headerHeight, scrollingInProgress }, { scrollToIndex }]) => {\n    const scrollIntoView = u.stream<ScrollIntoViewLocation>()\n\n    u.connect(\n      u.pipe(\n        scrollIntoView,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap),\n        u.map(([viewLocation, sizes, viewportHeight, totalCount, headerHeight, scrollTop, gap]) => {\n          const { done, behavior, ...rest } = viewLocation\n          let location = null\n          const actualIndex = originalIndexFromLocation(viewLocation, sizes, totalCount - 1)\n\n          const itemTop = offsetOf(actualIndex, sizes.offsetTree, gap) + headerHeight\n          if (itemTop < scrollTop) {\n            location = { ...rest, behavior, align: 'start' }\n          } else {\n            const itemBottom = itemTop + findMaxKeyValue(sizes.sizeTree, actualIndex)[1]!\n\n            if (itemBottom > scrollTop + viewportHeight) {\n              location = { ...rest, behavior, align: 'end' }\n            }\n          }\n\n          if (location) {\n            done &&\n              u.handleNext(\n                u.pipe(\n                  scrollingInProgress,\n                  u.skip(1),\n                  u.filter((value) => value === false)\n                ),\n                done\n              )\n          } else {\n            done && done()\n          }\n\n          return location\n        }),\n        u.filter((value) => value !== null)\n      ),\n      scrollToIndex\n    )\n\n    return {\n      scrollIntoView,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { followOutputSystem } from './followOutputSystem'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialItemCountSystem } from './initialItemCountSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { topItemCountSystem } from './topItemCountSystem'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { upwardScrollFixSystem } from './upwardScrollFixSystem'\nimport { initialScrollTopSystem } from './initialScrollTopSystem'\nimport { alignToBottomSystem } from './alignToBottomSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollIntoViewSystem } from './scrollIntoViewSystem'\n\n// workaround the growing list of systems below\n// fix this with 4.1 recursive conditional types\nconst featureGroup1System = u.system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n    }\n  },\n  u.tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem\n  )\n)\n\nexport const listSystem = u.system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n      gap,\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1,\n    log,\n  ]) => {\n    u.connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged)\n    u.connect(\n      u.pipe(\n        featureGroup1.windowViewportRect,\n        u.map((value) => value.visibleHeight)\n      ),\n      domIO.viewportHeight\n    )\n\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      gap,\n      ...followOutput,\n\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      ...log,\n    }\n  },\n  u.tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System,\n    loggerSystem\n  )\n)\n","import { simpleMemoize } from './simpleMemoize'\n\nconst WEBKIT_STICKY = '-webkit-sticky'\nconst STICKY = 'sticky'\n\nexport const positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === 'undefined') {\n    return STICKY\n  }\n  const node = document.createElement('div')\n  node.style.position = WEBKIT_STICKY\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY\n})\n","import { useEffect, useRef, useCallback } from 'react'\nimport { useSizeWithElRef } from './useSize'\nimport { WindowViewportInfo } from '../interfaces'\n\nexport default function useWindowViewportRectRef(callback: (info: WindowViewportInfo) => void, customScrollParent?: HTMLElement) {\n  const viewportInfo = useRef<WindowViewportInfo | null>(null)\n\n  const calculateInfo = useCallback(\n    (element: HTMLElement | null) => {\n      if (element === null || !element.offsetParent) {\n        return\n      }\n      const rect = element.getBoundingClientRect()\n      const visibleWidth = rect.width\n      let visibleHeight: number, offsetTop: number\n\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect()\n        const deltaTop = rect.top - customScrollParentRect.top\n\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop)\n        offsetTop = deltaTop + customScrollParent.scrollTop\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top)\n        offsetTop = rect.top + window.pageYOffset\n      }\n\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth,\n      }\n\n      callback(viewportInfo.current)\n    },\n    [callback, customScrollParent]\n  )\n\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo)\n\n  const scrollAndResizeEventHandler = useCallback(() => {\n    calculateInfo(ref.current)\n  }, [calculateInfo, ref])\n\n  useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener('scroll', scrollAndResizeEventHandler)\n      const observer = new ResizeObserver(scrollAndResizeEventHandler)\n      observer.observe(customScrollParent)\n      return () => {\n        customScrollParent.removeEventListener('scroll', scrollAndResizeEventHandler)\n        observer.unobserve(customScrollParent)\n      }\n    } else {\n      window.addEventListener('scroll', scrollAndResizeEventHandler)\n      window.addEventListener('resize', scrollAndResizeEventHandler)\n      return () => {\n        window.removeEventListener('scroll', scrollAndResizeEventHandler)\n        window.removeEventListener('resize', scrollAndResizeEventHandler)\n      }\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent])\n\n  return callbackRef\n}\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { ComponentType, createElement, CSSProperties, FC, PropsWithChildren } from 'react'\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport useScrollTop from './hooks/useScrollTop'\nimport useSize from './hooks/useSize'\nimport { Components, ComputeItemKey, GroupContent, GroupItemContent, ItemContent, ListRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { positionStickyCssValue } from './utils/positionStickyCssValue'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { ScrollerProps } from '.'\n\nexport function identity<T>(value: T) {\n  return value\n}\n\nconst listComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, any> | GroupItemContent<any, any>>((index: number) => `Item ${index}`)\n  const context = u.statefulStream<unknown>(null)\n  const groupContent = u.statefulStream<GroupContent>((index: number) => `Group ${index}`)\n  const components = u.statefulStream<Components<any>>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, any>>(identity)\n  const headerFooterTag = u.statefulStream('div')\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof Components<any>>(propName: K, defaultValue: Components<any>[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp('Footer'),\n    HeaderComponent: distinctProp('Header'),\n    TopItemListComponent: distinctProp('TopItemList'),\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    GroupComponent: distinctProp('Group', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nexport function addDeprecatedAlias<T>(prop: u.Stream<T>, message: string) {\n  const alias = u.stream<T>()\n  u.subscribe(alias, () =>\n    console.warn(`react-virtuoso: You are using a deprecated property. ${message}`, 'color: red;', 'color: inherit;', 'color: blue;')\n  )\n  u.connect(alias, prop)\n  return alias\n}\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(propsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    group: addDeprecatedAlias(propsSystem.groupContent, 'Rename the %cgroup%c prop to %cgroupContent.'),\n    topItems: addDeprecatedAlias(listSystem.topItemCount, 'Rename the %ctopItems%c prop to %ctopItemCount.'),\n    itemHeight: addDeprecatedAlias(listSystem.fixedItemHeight, 'Rename the %citemHeight%c prop to %cfixedItemHeight.'),\n    scrollingStateChange: addDeprecatedAlias(listSystem.isScrolling, 'Rename the %cscrollingStateChange%c prop to %cisScrolling.'),\n    adjustForPrependedItems: u.stream<any>(),\n    maxHeightCacheSize: u.stream<any>(),\n    footer: u.stream<any>(),\n    header: u.stream<any>(),\n    HeaderContainer: u.stream<any>(),\n    FooterContainer: u.stream<any>(),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    GroupContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  u.subscribe(deprecatedProps.adjustForPrependedItems, () => {\n    console.warn(\n      `react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.`,\n      'color: red;',\n      'color: inherit;',\n      'color: blue;'\n    )\n  })\n\n  u.subscribe(deprecatedProps.maxHeightCacheSize, () => {\n    console.warn(`react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.`)\n  })\n\n  u.subscribe(deprecatedProps.HeaderContainer, () => {\n    console.warn(\n      `react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.`\n    )\n  })\n\n  u.subscribe(deprecatedProps.FooterContainer, () => {\n    console.warn(\n      `react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.`\n    )\n  })\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(propsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      propsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    u.publish(propsSystem.components, { ...u.getValue(propsSystem.components), ScrollSeekPlaceholder: placeholder })\n    u.publish(listSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.footer, 'Footer', 'footer')\n  deprecateComponentProp(deprecatedProps.header, 'Header', 'header')\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n  deprecateComponentProp(deprecatedProps.emptyComponent, 'EmptyPlaceholder', 'emptyComponent')\n  deprecateComponentProp(deprecatedProps.GroupContainer, 'Group', 'GroupContainer')\n\n  return { ...listSystem, ...propsSystem, ...deprecatedProps }\n}, u.tup(listSystem, listComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => <div style={{ height }}></div>\n\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: 'none' } as const\nconst ITEM_STYLE = { overflowAnchor: 'none' } as const\n\nexport const Items = React.memo(function VirtuosoItems({ showTopList = false }: { showTopList?: boolean }) {\n  const listState = useEmitterValue('listState')\n\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const context = useEmitterValue('context')\n  const groupContent = useEmitterValue('groupContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n  const listGap = usePublisher('gap')\n\n  const { callbackRef } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? u.noop : scrollContainerStateCallback,\n    log,\n    listGap,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      // ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const GroupComponent = useEmitterValue('GroupComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const hasGroups = useEmitterValue('groupIndices').length > 0\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n\n  const containerStyle: CSSProperties = showTopList\n    ? {}\n    : {\n        boxSizing: 'border-box',\n        paddingTop: listState.offsetTop + paddingTopAddition,\n        paddingBottom: listState.offsetBottom,\n        marginTop: deviation,\n      }\n\n  if (!showTopList && listState.totalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  return createElement(\n    ListComponent,\n    {\n      ...contextPropIfNotDomElement(ListComponent, context),\n      ref: callbackRef,\n      style: containerStyle,\n      'data-test-id': showTopList ? 'virtuoso-top-item-list' : 'virtuoso-item-list',\n    },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex!\n      const key = computeItemKey(index + listState.firstItemIndex, item.data, context)\n\n      if (isSeeking) {\n        return createElement(ScrollSeekPlaceholder, {\n          ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || 'item',\n          ...(item.type === 'group' ? {} : { groupIndex: item.groupIndex }),\n        })\n      }\n\n      if (item.type === 'group') {\n        return createElement(\n          GroupComponent,\n          {\n            ...contextPropIfNotDomElement(GroupComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            style: GROUP_STYLE,\n          },\n          groupContent(item.index)\n        )\n      } else {\n        return createElement(\n          ItemComponent,\n          {\n            ...contextPropIfNotDomElement(ItemComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            'data-item-group-index': item.groupIndex,\n            style: ITEM_STYLE,\n          },\n          hasGroups\n            ? (itemContent as GroupItemContent<any, any>)(item.index, item.groupIndex!, item.data, context)\n            : (itemContent as ItemContent<any, any>)(item.index, item.data, context)\n        )\n      }\n    })\n  )\n})\n\nexport const scrollerStyle: CSSProperties = {\n  height: '100%',\n  outline: 'none',\n  overflowY: 'auto',\n  position: 'relative',\n  WebkitOverflowScrolling: 'touch',\n}\n\nexport const viewportStyle: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  top: 0,\n}\n\nconst topItemListStyle: CSSProperties = {\n  width: '100%',\n  position: positionStickyCssValue(),\n  top: 0,\n}\n\nexport function contextPropIfNotDomElement(element: unknown, context: unknown) {\n  if (typeof element === 'string') {\n    return undefined\n  }\n  return { context }\n}\n\nconst Header: FC = React.memo(function VirtuosoHeader() {\n  const Header = useEmitterValue('HeaderComponent')\n  const headerHeight = usePublisher('headerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => headerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Header ? createElement(headerFooterTag, { ref }, createElement(Header, contextPropIfNotDomElement(Header, context))) : null\n})\n\nconst Footer: FC = React.memo(function VirtuosoFooter() {\n  const Footer = useEmitterValue('FooterComponent')\n  const footerHeight = usePublisher('footerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => footerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Footer ? createElement(headerFooterTag, { ref }, createElement(Footer, contextPropIfNotDomElement(Footer, context))) : null\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nexport function buildScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: ComponentType<ScrollerProps> = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('scrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const scrollerRefCallback = useEmitterValue('scrollerRef')\n    const context = useEmitterValue('context')\n\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    )\n\n    useEmitter('scrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef as React.MutableRefObject<HTMLDivElement | null>,\n        style: { ...scrollerStyle, ...style },\n        'data-test-id': 'virtuoso-scroller',\n        'data-virtuoso-scroller': true,\n        tabIndex: 0,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nexport function buildWindowScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('windowScrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const totalListHeight = useEmitterValue('totalListHeight')\n    const deviation = useEmitterValue('deviation')\n    const customScrollParent = useEmitterValue('customScrollParent')\n    const context = useEmitterValue('context')\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      u.noop,\n      customScrollParent\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window\n      return () => {\n        scrollerRef.current = null\n      }\n    }, [scrollerRef, customScrollParent])\n\n    useEmitter('windowScrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        style: { position: 'relative', ...style, ...(totalListHeight !== 0 ? { height: totalListHeight + deviation } : {}) },\n        'data-virtuoso-scroller': true,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TopItemListContainer: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const TopItemList = useEmitterValue('TopItemListComponent')\n  const headerHeight = useEmitterValue('headerHeight')\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` }\n  const context = useEmitterValue('context')\n  return createElement(TopItemList || 'div', { style, context }, children)\n}\n\nconst ListRoot: FC<ListRootProps> = React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const showTopList = useEmitterValue('topItemsIndexes').length > 0\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <Header />\n        <Items />\n        <Footer />\n      </TheViewport>\n      {showTopList && (\n        <TopItemListContainer>\n          <Items showTopList={true} />\n        </TopItemListContainer>\n      )}\n    </TheScroller>\n  )\n})\n\nexport type ListHandle = RefHandle<typeof List>\n\nexport const {\n  Component: List,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      groupContent: 'groupContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      headerFooterTag: 'headerFooterTag',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n\n      // deprecated\n      item: 'item',\n      group: 'group',\n      topItems: 'topItems',\n      itemHeight: 'itemHeight',\n      scrollingStateChange: 'scrollingStateChange',\n      maxHeightCacheSize: 'maxHeightCacheSize',\n      footer: 'footer',\n      header: 'header',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      GroupContainer: 'GroupContainer',\n      emptyComponent: 'emptyComponent',\n      HeaderContainer: 'HeaderContainer',\n      FooterContainer: 'FooterContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      adjustForPrependedItems: 'adjustForPrependedItems',\n      autoscrollToBottom: 'autoscrollToBottom',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  ListRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import * as u from '@virtuoso.dev/urx'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { domIOSystem } from './domIOSystem'\nimport { FlatIndexLocationWithAlign } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { IndexLocation, normalizeIndexLocation } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\n\nexport interface Gap {\n  row: number\n  column: number\n}\n\nexport interface ElementDimensions {\n  width: number\n  height: number\n}\n\nexport interface GridItem {\n  index: number\n}\n\nexport interface GridLayout {\n  top: number\n  bottom: number\n}\n\nexport interface GridState extends GridLayout {\n  items: GridItem[]\n  offsetTop: number\n  offsetBottom: number\n  itemHeight: number\n  itemWidth: number\n}\n\nconst INITIAL_GRID_STATE: GridState = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst PROBE_GRID_STATE: GridState = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst { round, ceil, floor, min, max } = Math\n\nfunction buildItems(startIndex: number, endIndex: number) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => ({ index: i + startIndex } as GridItem))\n}\n\nfunction gapComparator(prev: Gap, next: Gap) {\n  return prev && prev.column === next.column && prev.row === next.row\n}\nexport const gridSystem = u.system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, windowScrollTo, useWindowScroll, customScrollParent, windowScrollContainerState },\n    log,\n  ]) => {\n    const totalCount = u.statefulStream(0)\n    const initialItemCount = u.statefulStream(0)\n    const gridState = u.statefulStream(INITIAL_GRID_STATE)\n    const viewportDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const itemDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const scrollToIndex = u.stream<IndexLocation>()\n    const scrollHeight = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const gap = u.statefulStream<Gap>({ row: 0, column: 0 })\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.map(([, count]) => {\n          return {\n            items: buildItems(0, count - 1),\n            top: 0,\n            bottom: 0,\n            offsetBottom: 0,\n            offsetTop: 0,\n            itemHeight: 0,\n            itemWidth: 0,\n          }\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(\n          u.duc(totalCount),\n          visibleRange,\n          u.duc(gap, gapComparator),\n          u.duc(itemDimensions, (prev, next) => prev && prev.width === next.width && prev.height === next.height)\n        ),\n        u.withLatestFrom(viewportDimensions),\n        u.map(([[totalCount, [startOffset, endOffset], gap, item], viewport]) => {\n          const { row: rowGap, column: columnGap } = gap\n          const { height: itemHeight, width: itemWidth } = item\n          const { width: viewportWidth } = viewport\n\n          if (totalCount === 0 || viewportWidth === 0) {\n            return INITIAL_GRID_STATE\n          }\n\n          if (itemWidth === 0) {\n            return PROBE_GRID_STATE\n          }\n\n          const perRow = itemsPerRow(viewportWidth, itemWidth, columnGap)\n\n          let startIndex = perRow * floor((startOffset + rowGap) / (itemHeight + rowGap))\n          let endIndex = perRow * ceil((endOffset + rowGap) / (itemHeight + rowGap)) - 1\n          endIndex = max(0, min(totalCount - 1, endIndex))\n          startIndex = min(endIndex, max(0, startIndex))\n\n          const items = buildItems(startIndex, endIndex)\n          const { top, bottom } = gridLayout(viewport, gap, item, items)\n          const rowCount = ceil(totalCount / perRow)\n          const totalHeight = rowCount * itemHeight + (rowCount - 1) * rowGap\n          const offsetBottom = totalHeight - bottom\n\n          return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth } as GridState\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        viewportDimensions,\n        u.map(({ height }) => height)\n      ),\n      viewportHeight\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(viewportDimensions, itemDimensions, gridState, gap),\n        u.map(([viewportDimensions, item, { items }, gap]) => {\n          const { top, bottom } = gridLayout(viewportDimensions, gap, item, items)\n\n          return [top, bottom] as [number, number]\n        }),\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].index === totalCount - 1),\n        u.map(([, totalCount]) => totalCount - 1),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0\n        }),\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-argument\n        u.mapTo(0),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          }\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    u.connect(rangeChanged, scrollSeek.scrollSeekRangeChanged)\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(viewportDimensions, itemDimensions, totalCount, gap),\n        u.map(([location, viewport, item, totalCount, gap]) => {\n          const normalLocation = normalizeIndexLocation(location) as FlatIndexLocationWithAlign\n          const { align, behavior, offset } = normalLocation\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = totalCount - 1\n          }\n\n          index = max(0, index, min(totalCount - 1, index))\n\n          let top = itemTop(viewport, gap, item, index)\n\n          if (align === 'end') {\n            top = round(top - viewport.height + item.height)\n          } else if (align === 'center') {\n            top = round(top - viewport.height / 2 + item.height / 2)\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        gridState,\n        u.map((gridState) => {\n          return gridState.offsetBottom + gridState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(\n      u.pipe(\n        windowViewportRect,\n        u.map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    )\n\n    return {\n      // input\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      initialItemCount,\n      gap,\n      ...scrollSeek,\n\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      propsReady,\n      ...log,\n    }\n  },\n  u.tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem, loggerSystem)\n)\n\nfunction gridLayout(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, items: GridItem[]): GridLayout {\n  const { height: itemHeight } = item\n  if (itemHeight === undefined || items.length === 0) {\n    return { top: 0, bottom: 0 }\n  }\n\n  const top = itemTop(viewport, gap, item, items[0].index)\n  const bottom = itemTop(viewport, gap, item, items[items.length - 1].index) + itemHeight\n  return { top, bottom }\n}\n\nfunction itemTop(viewport: ElementDimensions, gap: Gap, item: ElementDimensions, index: number) {\n  const perRow = itemsPerRow(viewport.width, item.width, gap.column)\n  const rowCount = floor(index / perRow)\n  const top = rowCount * item.height + max(0, rowCount - 1) * gap.row\n  return top > 0 ? top + gap.row : top\n}\n\nfunction itemsPerRow(viewportWidth: number, itemWidth: number, gap: number) {\n  return max(1, floor((viewportWidth + gap) / (itemWidth + gap)))\n}\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\n\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren } from 'react'\nimport { gridSystem } from './gridSystem'\nimport useSize from './hooks/useSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { GridComponents, GridComputeItemKey, GridItemContent, GridRootProps } from './interfaces'\nimport { addDeprecatedAlias, buildScroller, buildWindowScroller, contextPropIfNotDomElement, identity, viewportStyle } from './List'\nimport { Log, LogLevel } from './loggerSystem'\n\nconst gridComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<GridItemContent<any>>((index) => `Item ${index}`)\n  const components = u.statefulStream<GridComponents>({})\n  const context = u.statefulStream<unknown>(null)\n  const itemClassName = u.statefulStream('virtuoso-grid-item')\n  const listClassName = u.statefulStream('virtuoso-grid-list')\n  const computeItemKey = u.statefulStream<GridComputeItemKey>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof GridComponents>(propName: K, defaultValue: GridComponents[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    scrollerRef,\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder', 'div'),\n  }\n})\n\nconst combinedSystem = u.system(([gridSystem, gridComponentPropsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(gridComponentPropsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(gridComponentPropsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      gridComponentPropsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    u.publish(gridComponentPropsSystem.components, {\n      ...u.getValue(gridComponentPropsSystem.components),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ScrollSeekPlaceholder: placeholder,\n    })\n    u.publish(gridSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n\n  return { ...gridSystem, ...gridComponentPropsSystem, ...deprecatedProps }\n}, u.tup(gridSystem, gridComponentPropsSystem))\n\nconst GridItems: FC = React.memo(function GridItems() {\n  const gridState = useEmitterValue('gridState')\n  const listClassName = useEmitterValue('listClassName')\n  const itemClassName = useEmitterValue('itemClassName')\n  const itemContent = useEmitterValue('itemContent')\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const scrollHeightCallback = usePublisher('scrollHeight')\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder')!\n  const context = useEmitterValue('context')\n  const itemDimensions = usePublisher('itemDimensions')\n  const gridGap = usePublisher('gap')\n  const log = useEmitterValue('log')\n\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement!.parentElement!.scrollHeight\n    scrollHeightCallback(scrollHeight)\n    const firstItem = el.firstChild as HTMLElement\n    if (firstItem) {\n      itemDimensions(firstItem.getBoundingClientRect())\n    }\n    gridGap({\n      row: resolveGapValue('row-gap', getComputedStyle(el).rowGap, log),\n      column: resolveGapValue('column-gap', getComputedStyle(el).columnGap, log),\n    })\n  })\n\n  return createElement(\n    ListComponent,\n    {\n      ref: listRef,\n      className: listClassName,\n      ...contextPropIfNotDomElement(ListComponent, context),\n      style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom },\n    },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index)\n      return isSeeking\n        ? createElement(ScrollSeekPlaceholder, {\n            key,\n            ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n            index: item.index,\n            height: gridState.itemHeight,\n            width: gridState.itemWidth,\n          })\n        : createElement(\n            ItemComponent,\n            { ...contextPropIfNotDomElement(ItemComponent, context), className: itemClassName, 'data-index': item.index, key },\n            itemContent(item.index, context)\n          )\n    })\n  )\n})\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportDimensions = usePublisher('viewportDimensions')\n\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect())\n  })\n\n  return (\n    <div style={viewportStyle} ref={viewportRef}>\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle}>\n      {children}\n    </div>\n  )\n}\n\nconst GridRoot: FC<GridRootProps> = React.memo(function GridRoot({ ...props }) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <GridItems />\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nconst {\n  Component: Grid,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    optional: {\n      totalCount: 'totalCount',\n      overscan: 'overscan',\n      itemContent: 'itemContent',\n      components: 'components',\n      computeItemKey: 'computeItemKey',\n      initialItemCount: 'initialItemCount',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      listClassName: 'listClassName',\n      itemClassName: 'itemClassName',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n\n      // deprecated\n      item: 'item',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      scrollToIndex: 'scrollToIndex',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n    },\n  },\n  GridRoot\n)\n\nexport type foo<T> = T extends React.ForwardRefExoticComponent<React.RefAttributes<infer Handle>> ? Handle : never\n\nexport type GridHandle = RefHandle<typeof Grid>\nexport { Grid }\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n\nfunction resolveGapValue(property: string, value: string | undefined, log: Log) {\n  if (value !== 'normal' && !value?.endsWith('px')) {\n    log(`${property} was not resolved to pixel value correctly`, value, LogLevel.WARN)\n  }\n  if (value === 'normal') {\n    return 0\n  }\n  return parseInt(value ?? '0', 10)\n}\n","import { systemToComponent } from '@virtuoso.dev/react-urx'\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC, PropsWithChildren } from 'react'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport { ComputeItemKey, ItemContent, FixedHeaderContent, TableComponents, TableRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { identity, buildScroller, buildWindowScroller, viewportStyle, contextPropIfNotDomElement } from './List'\nimport useSize from './hooks/useSize'\nimport { correctItemSize } from './utils/correctItemSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\n\nconst tableComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<ItemContent<any, unknown>>((index: number) => <td>Item ${index}</td>)\n  const context = u.statefulStream<unknown>(null)\n  const fixedHeaderContent = u.statefulStream<FixedHeaderContent>(null)\n  const components = u.statefulStream<TableComponents>({})\n  const computeItemKey = u.statefulStream<ComputeItemKey<any, unknown>>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | Window | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof TableComponents>(\n    propName: K,\n    defaultValue: TableComponents[K] | null | 'thead' | 'table' | 'tbody' | 'tr' | 'div' = null\n  ) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    fixedHeaderContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp('Table', 'table'),\n    TableHeadComponent: distinctProp('TableHead', 'thead'),\n    TableBodyComponent: distinctProp('TableBody', 'tbody'),\n    TableRowComponent: distinctProp('TableRow', 'tr'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n    FillerRow: distinctProp('FillerRow'),\n  }\n})\n\nconst combinedSystem = u.system(([listSystem, propsSystem]) => {\n  return { ...listSystem, ...propsSystem }\n}, u.tup(listSystem, tableComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height }}></td>\n  </tr>\n)\n\nconst DefaultFillerRow = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height: height, padding: 0, border: 0 }}></td>\n  </tr>\n)\n\nexport const Items = React.memo(function VirtuosoItems() {\n  const listState = useEmitterValue('listState')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const { callbackRef, ref } = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    scrollContainerStateCallback,\n    log,\n    undefined,\n    customScrollParent\n  )\n\n  const [deviation, setDeviation] = React.useState(0)\n  useEmitter('deviation', (value) => {\n    if (deviation !== value) {\n      ref.current!.style.marginTop = `${value}px`\n      setDeviation(value)\n    }\n  })\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const FillerRow = useEmitterValue('FillerRow') || DefaultFillerRow\n  const TableBodyComponent = useEmitterValue('TableBodyComponent')!\n  const TableRowComponent = useEmitterValue('TableRowComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n  const context = useEmitterValue('context')\n\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation\n  const paddingBottom = listState.offsetBottom\n\n  const paddingTopEl = paddingTop > 0 ? <FillerRow height={paddingTop} key=\"padding-top\" /> : null\n\n  const paddingBottomEl = paddingBottom > 0 ? <FillerRow height={paddingBottom} key=\"padding-bottom\" /> : null\n\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex!\n    const key = computeItemKey(index + firstItemIndex, item.data, context)\n\n    if (isSeeking) {\n      return createElement(ScrollSeekPlaceholder, {\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || 'item',\n      })\n    }\n    return createElement(\n      TableRowComponent,\n      {\n        ...contextPropIfNotDomElement(TableRowComponent, context),\n        key,\n        'data-index': index,\n        'data-known-size': item.size,\n        'data-item-index': item.index,\n        style: { overflowAnchor: 'none' },\n      },\n      itemContent(item.index, item.data, context)\n    )\n  })\n\n  return createElement(\n    TableBodyComponent,\n    { ref: callbackRef, 'data-test-id': 'virtuoso-item-list', ...contextPropIfNotDomElement(TableBodyComponent, context) },\n    [paddingTopEl, ...items, paddingBottomEl]\n  )\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nconst Viewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(u.compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC<PropsWithChildren<unknown>> = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TableRoot: FC<TableRootProps> = React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const fixedHeaderHeight = usePublisher('fixedHeaderHeight')\n  const fixedHeaderContent = useEmitterValue('fixedHeaderContent')\n  const context = useEmitterValue('context')\n  const theadRef = useSize(u.compose(fixedHeaderHeight, (el) => correctItemSize(el, 'height')))\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  const TheTable = useEmitterValue('TableComponent')\n  const TheTHead = useEmitterValue('TableHeadComponent')\n\n  const theHead = fixedHeaderContent\n    ? React.createElement(\n        TheTHead!,\n        {\n          key: 'TableHead',\n          style: { zIndex: 1, position: 'sticky', top: 0 },\n          ref: theadRef,\n          ...contextPropIfNotDomElement(TheTHead, context),\n        },\n        fixedHeaderContent()\n      )\n    : null\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        {React.createElement(TheTable!, { style: { borderSpacing: 0 }, ...contextPropIfNotDomElement(TheTable, context) }, [\n          theHead,\n          <Items key=\"TableBody\" />,\n        ])}\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nexport const {\n  Component: Table,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      fixedHeaderContent: 'fixedHeaderContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      atTopThreshold: 'atTopThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n      react18ConcurrentRendering: 'react18ConcurrentRendering',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  TableRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { ReactElement, Ref } from 'react'\n\nimport {\n  Components,\n  ComputeItemKey,\n  FollowOutput,\n  GridComponents,\n  GridComputeItemKey,\n  GridItemContent,\n  GroupContent,\n  GroupItemContent,\n  IndexLocationWithAlign,\n  ItemContent,\n  ListItem,\n  ListRange,\n  ScrollSeekConfiguration,\n  TableComponents,\n  FixedHeaderContent,\n  ScrollIntoViewLocation,\n  ListRootProps,\n  GridRootProps,\n  FlatIndexLocationWithAlign,\n  FlatScrollIntoViewLocation,\n} from './interfaces'\nimport { List } from './List'\nimport { Grid } from './Grid'\nimport { Table } from './Table'\n\nexport interface VirtuosoProps<D, C> extends ListRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Additional context available in the custom components and content callbacks\n   */\n  context?: C\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in react-window).\n   *\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   *\n   * *The property accepts pixel values.*\n   *\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   *\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set the amount of items to remain fixed at the top of the list.\n   *\n   * For a header that scrolls away when scrolling, check the `components.Header` property.\n   */\n  topItemCount?: number\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   * Pass in an object to achieve additional effects similar to `scrollToIndex`.\n   */\n  initialTopMostItemIndex?: number | IndexLocationWithAlign\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: Components<C>\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, dimension: 'height' | 'width') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Set to customize the wrapper tag for the header and footer components (default is `div`).\n   */\n  headerFooterTag?: string\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the list won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface GroupedVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'totalCount' | 'itemContent'> {\n  /**\n   * Specifies the amount of items in each group (and, actually, how many groups are there).\n   * For example, passing [20, 30] will display 2 groups with 20 and 30 items each.\n   */\n  groupCounts?: number[]\n\n  /**\n   * Specifies how each each group header gets rendered. The callback receives the zero-based index of the group.\n   */\n  groupContent?: GroupContent\n\n  /**\n   * Specifies how each each item gets rendered.\n   */\n  itemContent?: GroupItemContent<D, C>\n}\n\nexport interface TableVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'components' | 'headerFooterTag' | 'topItemCount'> {\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the table.\n   */\n  components?: TableComponents<C>\n  /**\n   * Set the contents of the table header.\n   */\n  fixedHeaderContent?: FixedHeaderContent\n\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, dimension: 'height' | 'width') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the table won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `0`. Redefine to change how much away from the top the scroller can be before the list is not considered not at top.\n   */\n  atTopThreshold?: number\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n\n  /**\n   * No longer necessary after 2.10.2. component should work out of the box.\n   */\n  react18ConcurrentRendering?: boolean\n}\n\nexport interface VirtuosoGridProps<C = unknown> extends GridRootProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: GridItemContent<C>\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: GridComponents<C>\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: GridComputeItemKey\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | null) => any\n\n  /**\n   * Sets the className for the list DOM element\n   */\n  listClassName?: string\n\n  /**\n   * Sets the grid items' className\n   */\n  itemClassName?: string\n\n  /**\n   * Uses the document scroller rather than wrapping the grid in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the grid won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n}\n\nexport interface VirtuosoHandle {\n  /**\n   * Scrolls the component to the specified item index. See {@link IndexLocationWithAlign} for more options.\n   */\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  /**\n   * Scrolls the item into view if necessary. See [the website example](http://virtuoso.dev/keyboard-navigation/) for an implementation.\n   */\n  scrollIntoView(location: FlatScrollIntoViewLocation): void\n  /**\n   * Scrolls the component to the specified location. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollTo(location: ScrollToOptions): void\n  /**\n   * Scrolls the component with the specified amount. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollBy(location: ScrollToOptions): void\n  /**\n   * Use this with combination with follow output if you have images loading in the list. Listen to the image loading and call the method.\n   */\n  autoscrollToBottom(): void\n}\n\nexport interface GroupedVirtuosoHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollIntoView(location: number | ScrollIntoViewLocation): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n  autoscrollToBottom(): void\n}\n\nexport interface VirtuosoGridHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface TableVirtuosoHandle {\n  scrollIntoView(location: number | FlatScrollIntoViewLocation): void\n  scrollToIndex(location: number | FlatIndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport const Virtuoso = List as <ItemData = any, Context = any>(\n  props: VirtuosoProps<ItemData, Context> & { ref?: Ref<VirtuosoHandle> }\n) => ReactElement\n\nexport const GroupedVirtuoso = List as <ItemData = any, Context = any>(\n  props: GroupedVirtuosoProps<ItemData, Context> & { ref?: Ref<GroupedVirtuosoHandle> }\n) => ReactElement\n\nexport const TableVirtuoso = Table as <ItemData = any, Context = any>(\n  props: TableVirtuosoProps<ItemData, Context> & { ref?: Ref<TableVirtuosoHandle> }\n) => ReactElement\n\nexport const VirtuosoGrid = Grid as <Context = any>(props: VirtuosoGridProps<Context> & { ref?: Ref<VirtuosoGridHandle> }) => ReactElement\n","export var INIT_COORDS = 'dnd-core/INIT_COORDS';\nexport var BEGIN_DRAG = 'dnd-core/BEGIN_DRAG';\nexport var PUBLISH_DRAG_SOURCE = 'dnd-core/PUBLISH_DRAG_SOURCE';\nexport var HOVER = 'dnd-core/HOVER';\nexport var DROP = 'dnd-core/DROP';\nexport var END_DRAG = 'dnd-core/END_DRAG';","import { INIT_COORDS } from '../types';\nexport function setClientOffset(clientOffset, sourceClientOffset) {\n  return {\n    type: INIT_COORDS,\n    payload: {\n      sourceClientOffset: sourceClientOffset || null,\n      clientOffset: clientOffset || null\n    }\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// cheap lodash replacements\n\n/**\n * drop-in replacement for _.get\n * @param obj\n * @param path\n * @param defaultValue\n */\nexport function get(obj, path, defaultValue) {\n  return path.split('.').reduce(function (a, c) {\n    return a && a[c] ? a[c] : defaultValue || null;\n  }, obj);\n}\n/**\n * drop-in replacement for _.without\n */\n\nexport function without(items, item) {\n  return items.filter(function (i) {\n    return i !== item;\n  });\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isString(input) {\n  return typeof input === 'string';\n}\n/**\n * drop-in replacement for _.isString\n * @param input\n */\n\nexport function isObject(input) {\n  return _typeof(input) === 'object';\n}\n/**\n * repalcement for _.xor\n * @param itemsA\n * @param itemsB\n */\n\nexport function xor(itemsA, itemsB) {\n  var map = new Map();\n\n  var insertItem = function insertItem(item) {\n    map.set(item, map.has(item) ? map.get(item) + 1 : 1);\n  };\n\n  itemsA.forEach(insertItem);\n  itemsB.forEach(insertItem);\n  var result = [];\n  map.forEach(function (count, key) {\n    if (count === 1) {\n      result.push(key);\n    }\n  });\n  return result;\n}\n/**\n * replacement for _.intersection\n * @param itemsA\n * @param itemsB\n */\n\nexport function intersection(itemsA, itemsB) {\n  return itemsA.filter(function (t) {\n    return itemsB.indexOf(t) > -1;\n  });\n}","import { invariant } from '@react-dnd/invariant';\nimport { setClientOffset } from './local/setClientOffset';\nimport { isObject } from '../../utils/js_utils';\nimport { BEGIN_DRAG, INIT_COORDS } from './types';\nvar ResetCoordinatesAction = {\n  type: INIT_COORDS,\n  payload: {\n    clientOffset: null,\n    sourceClientOffset: null\n  }\n};\nexport function createBeginDrag(manager) {\n  return function beginDrag() {\n    var sourceIds = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n      publishSource: true\n    };\n    var _options$publishSourc = options.publishSource,\n        publishSource = _options$publishSourc === void 0 ? true : _options$publishSourc,\n        clientOffset = options.clientOffset,\n        getSourceClientOffset = options.getSourceClientOffset;\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry(); // Initialize the coordinates using the client offset\n\n    manager.dispatch(setClientOffset(clientOffset));\n    verifyInvariants(sourceIds, monitor, registry); // Get the draggable source\n\n    var sourceId = getDraggableSource(sourceIds, monitor);\n\n    if (sourceId === null) {\n      manager.dispatch(ResetCoordinatesAction);\n      return;\n    } // Get the source client offset\n\n\n    var sourceClientOffset = null;\n\n    if (clientOffset) {\n      if (!getSourceClientOffset) {\n        throw new Error('getSourceClientOffset must be defined');\n      }\n\n      verifyGetSourceClientOffsetIsFunction(getSourceClientOffset);\n      sourceClientOffset = getSourceClientOffset(sourceId);\n    } // Initialize the full coordinates\n\n\n    manager.dispatch(setClientOffset(clientOffset, sourceClientOffset));\n    var source = registry.getSource(sourceId);\n    var item = source.beginDrag(monitor, sourceId); // If source.beginDrag returns null, this is an indicator to cancel the drag\n\n    if (item == null) {\n      return undefined;\n    }\n\n    verifyItemIsObject(item);\n    registry.pinSource(sourceId);\n    var itemType = registry.getSourceType(sourceId);\n    return {\n      type: BEGIN_DRAG,\n      payload: {\n        itemType: itemType,\n        item: item,\n        sourceId: sourceId,\n        clientOffset: clientOffset || null,\n        sourceClientOffset: sourceClientOffset || null,\n        isSourcePublic: !!publishSource\n      }\n    };\n  };\n}\n\nfunction verifyInvariants(sourceIds, monitor, registry) {\n  invariant(!monitor.isDragging(), 'Cannot call beginDrag while dragging.');\n  sourceIds.forEach(function (sourceId) {\n    invariant(registry.getSource(sourceId), 'Expected sourceIds to be registered.');\n  });\n}\n\nfunction verifyGetSourceClientOffsetIsFunction(getSourceClientOffset) {\n  invariant(typeof getSourceClientOffset === 'function', 'When clientOffset is provided, getSourceClientOffset must be a function.');\n}\n\nfunction verifyItemIsObject(item) {\n  invariant(isObject(item), 'Item must be an object.');\n}\n\nfunction getDraggableSource(sourceIds, monitor) {\n  var sourceId = null;\n\n  for (var i = sourceIds.length - 1; i >= 0; i--) {\n    if (monitor.canDragSource(sourceIds[i])) {\n      sourceId = sourceIds[i];\n      break;\n    }\n  }\n\n  return sourceId;\n}","import { PUBLISH_DRAG_SOURCE } from './types';\nexport function createPublishDragSource(manager) {\n  return function publishDragSource() {\n    var monitor = manager.getMonitor();\n\n    if (monitor.isDragging()) {\n      return {\n        type: PUBLISH_DRAG_SOURCE\n      };\n    }\n  };\n}","export function matchesType(targetType, draggedItemType) {\n  if (draggedItemType === null) {\n    return targetType === null;\n  }\n\n  return Array.isArray(targetType) ? targetType.some(function (t) {\n    return t === draggedItemType;\n  }) : targetType === draggedItemType;\n}","import { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../../utils/matchesType';\nimport { HOVER } from './types';\nexport function createHover(manager) {\n  return function hover(targetIdsArg) {\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n        clientOffset = _ref.clientOffset;\n\n    verifyTargetIdsIsArray(targetIdsArg);\n    var targetIds = targetIdsArg.slice(0);\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    checkInvariants(targetIds, monitor, registry);\n    var draggedItemType = monitor.getItemType();\n    removeNonMatchingTargetIds(targetIds, registry, draggedItemType);\n    hoverAllTargets(targetIds, monitor, registry);\n    return {\n      type: HOVER,\n      payload: {\n        targetIds: targetIds,\n        clientOffset: clientOffset || null\n      }\n    };\n  };\n}\n\nfunction verifyTargetIdsIsArray(targetIdsArg) {\n  invariant(Array.isArray(targetIdsArg), 'Expected targetIds to be an array.');\n}\n\nfunction checkInvariants(targetIds, monitor, registry) {\n  invariant(monitor.isDragging(), 'Cannot call hover while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call hover after drop.');\n\n  for (var i = 0; i < targetIds.length; i++) {\n    var targetId = targetIds[i];\n    invariant(targetIds.lastIndexOf(targetId) === i, 'Expected targetIds to be unique in the passed array.');\n    var target = registry.getTarget(targetId);\n    invariant(target, 'Expected targetIds to be registered.');\n  }\n}\n\nfunction removeNonMatchingTargetIds(targetIds, registry, draggedItemType) {\n  // Remove those targetIds that don't match the targetType.  This\n  // fixes shallow isOver which would only be non-shallow because of\n  // non-matching targets.\n  for (var i = targetIds.length - 1; i >= 0; i--) {\n    var targetId = targetIds[i];\n    var targetType = registry.getTargetType(targetId);\n\n    if (!matchesType(targetType, draggedItemType)) {\n      targetIds.splice(i, 1);\n    }\n  }\n}\n\nfunction hoverAllTargets(targetIds, monitor, registry) {\n  // Finally call hover on all matching targets.\n  targetIds.forEach(function (targetId) {\n    var target = registry.getTarget(targetId);\n    target.hover(monitor, targetId);\n  });\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { DROP } from './types';\nimport { isObject } from '../../utils/js_utils';\nexport function createDrop(manager) {\n  return function drop() {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: DROP,\n        payload: {\n          dropResult: _objectSpread(_objectSpread({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nfunction verifyInvariants(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant(typeof dropResult === 'undefined' || isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","import { invariant } from '@react-dnd/invariant';\nimport { END_DRAG } from './types';\nexport function createEndDrag(manager) {\n  return function endDrag() {\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyIsDragging(monitor);\n    var sourceId = monitor.getSourceId();\n\n    if (sourceId != null) {\n      var source = registry.getSource(sourceId, true);\n      source.endDrag(monitor, sourceId);\n      registry.unpinSource();\n    }\n\n    return {\n      type: END_DRAG\n    };\n  };\n}\n\nfunction verifyIsDragging(monitor) {\n  invariant(monitor.isDragging(), 'Cannot call endDrag while not dragging.');\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createDragDropActions } from '../actions/dragDrop';\nexport var DragDropManagerImpl = /*#__PURE__*/function () {\n  function DragDropManagerImpl(store, monitor) {\n    var _this = this;\n\n    _classCallCheck(this, DragDropManagerImpl);\n\n    _defineProperty(this, \"store\", void 0);\n\n    _defineProperty(this, \"monitor\", void 0);\n\n    _defineProperty(this, \"backend\", void 0);\n\n    _defineProperty(this, \"isSetUp\", false);\n\n    _defineProperty(this, \"handleRefCountChange\", function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    });\n\n    this.store = store;\n    this.monitor = monitor;\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  _createClass(DragDropManagerImpl, [{\n    key: \"receiveBackend\",\n    value: function receiveBackend(backend) {\n      this.backend = backend;\n    }\n  }, {\n    key: \"getMonitor\",\n    value: function getMonitor() {\n      return this.monitor;\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return this.backend;\n    }\n  }, {\n    key: \"getRegistry\",\n    value: function getRegistry() {\n      return this.monitor.registry;\n    }\n  }, {\n    key: \"getActions\",\n    value: function getActions() {\n      /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n      var manager = this;\n      var dispatch = this.store.dispatch;\n\n      function bindActionCreator(actionCreator) {\n        return function () {\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n\n          var action = actionCreator.apply(manager, args);\n\n          if (typeof action !== 'undefined') {\n            dispatch(action);\n          }\n        };\n      }\n\n      var actions = createDragDropActions(this);\n      return Object.keys(actions).reduce(function (boundActions, key) {\n        var action = actions[key];\n        boundActions[key] = bindActionCreator(action);\n        return boundActions;\n      }, {});\n    }\n  }, {\n    key: \"dispatch\",\n    value: function dispatch(action) {\n      this.store.dispatch(action);\n    }\n  }]);\n\n  return DragDropManagerImpl;\n}();","import { createBeginDrag } from './beginDrag';\nimport { createPublishDragSource } from './publishDragSource';\nimport { createHover } from './hover';\nimport { createDrop } from './drop';\nimport { createEndDrag } from './endDrag';\nexport * from './types';\nexport function createDragDropActions(manager) {\n  return {\n    beginDrag: createBeginDrag(manager),\n    publishDragSource: createPublishDragSource(manager),\n    hover: createHover(manager),\n    drop: createDrop(manager),\n    endDrag: createEndDrag(manager)\n  };\n}","import _objectSpread from '@babel/runtime/helpers/esm/objectSpread2';\n\n/**\n * Adapted from React: https://github.com/facebook/react/blob/master/packages/shared/formatProdErrorMessage.js\n *\n * Do not require this module directly! Use normal throw error calls. These messages will be replaced with error codes\n * during build.\n * @param {number} code\n */\nfunction formatProdErrorMessage(code) {\n  return \"Minified Redux error #\" + code + \"; visit https://redux.js.org/Errors?code=\" + code + \" for the full message or \" + 'use the non-minified dev environment for full errors. ';\n}\n\n// Inlined version of the `symbol-observable` polyfill\nvar $$observable = (function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n})();\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar randomString = function randomString() {\n  return Math.random().toString(36).substring(7).split('').join('.');\n};\n\nvar ActionTypes = {\n  INIT: \"@@redux/INIT\" + randomString(),\n  REPLACE: \"@@redux/REPLACE\" + randomString(),\n  PROBE_UNKNOWN_ACTION: function PROBE_UNKNOWN_ACTION() {\n    return \"@@redux/PROBE_UNKNOWN_ACTION\" + randomString();\n  }\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if (typeof obj !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n// Inlined / shortened version of `kindOf` from https://github.com/jonschlinkert/kind-of\nfunction miniKindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n  var type = typeof val;\n\n  switch (type) {\n    case 'boolean':\n    case 'string':\n    case 'number':\n    case 'symbol':\n    case 'function':\n      {\n        return type;\n      }\n  }\n\n  if (Array.isArray(val)) return 'array';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  var constructorName = ctorName(val);\n\n  switch (constructorName) {\n    case 'Symbol':\n    case 'Promise':\n    case 'WeakMap':\n    case 'WeakSet':\n    case 'Map':\n    case 'Set':\n      return constructorName;\n  } // other\n\n\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n}\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isError(val) {\n  return val instanceof Error || typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number';\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function' && typeof val.getDate === 'function' && typeof val.setDate === 'function';\n}\n\nfunction kindOf(val) {\n  var typeOfVal = typeof val;\n\n  if (process.env.NODE_ENV !== 'production') {\n    typeOfVal = miniKindOf(val);\n  }\n\n  return typeOfVal;\n}\n\n/**\n * @deprecated\n *\n * **We recommend using the `configureStore` method\n * of the `@reduxjs/toolkit` package**, which replaces `createStore`.\n *\n * Redux Toolkit is our recommended approach for writing Redux logic today,\n * including store setup, reducers, data fetching, and more.\n *\n * **For more details, please read this Redux docs page:**\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * `configureStore` from Redux Toolkit is an improved version of `createStore` that\n * simplifies setup and helps avoid common bugs.\n *\n * You should not be using the `redux` core package by itself today, except for learning purposes.\n * The `createStore` method from the core `redux` package will not be removed, but we encourage\n * all users to migrate to using Redux Toolkit for all Redux code.\n *\n * If you want to use `createStore` without this visual deprecation warning, use\n * the `legacy_createStore` import instead:\n *\n * `import { legacy_createStore as createStore} from 'redux'`\n *\n */\n\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'function' || typeof enhancer === 'function' && typeof arguments[3] === 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(0) : 'It looks like you are passing several store enhancers to ' + 'createStore(). This is not supported. Instead, compose them ' + 'together to a single function. See https://redux.js.org/tutorials/fundamentals/part-4-store#creating-a-store-with-enhancers for an example.');\n  }\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(1) : \"Expected the enhancer to be a function. Instead, received: '\" + kindOf(enhancer) + \"'\");\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(2) : \"Expected the root reducer to be a function. Instead, received: '\" + kindOf(reducer) + \"'\");\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n  /**\n   * This makes a shallow copy of currentListeners so we can use\n   * nextListeners as a temporary list while dispatching.\n   *\n   * This prevents any bugs around consumers calling\n   * subscribe/unsubscribe in the middle of a dispatch.\n   */\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(3) : 'You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(4) : \"Expected the listener to be a function. Instead, received: '\" + kindOf(listener) + \"'\");\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(5) : 'You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(6) : 'You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api/store#subscribelistener for more details.');\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n      currentListeners = null;\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(7) : \"Actions must be plain objects. Instead, the actual type was: '\" + kindOf(action) + \"'. You may need to add middleware to your store setup to handle dispatching other values, such as 'redux-thunk' to handle dispatching functions. See https://redux.js.org/tutorials/fundamentals/part-4-store#middleware and https://redux.js.org/tutorials/fundamentals/part-6-async-logic#using-the-redux-thunk-middleware for examples.\");\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(8) : 'Actions may not have an undefined \"type\" property. You may have misspelled an action type string constant.');\n    }\n\n    if (isDispatching) {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(9) : 'Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(10) : \"Expected the nextReducer to be a function. Instead, received: '\" + kindOf(nextReducer));\n    }\n\n    currentReducer = nextReducer; // This action has a similiar effect to ActionTypes.INIT.\n    // Any reducers that existed in both the new and old rootReducer\n    // will receive the previous state. This effectively populates\n    // the new state tree with any relevant data from the old one.\n\n    dispatch({\n      type: ActionTypes.REPLACE\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (typeof observer !== 'object' || observer === null) {\n          throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(11) : \"Expected the observer to be an object. Instead, received: '\" + kindOf(observer) + \"'\");\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ActionTypes.INIT\n  });\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n/**\n * Creates a Redux store that holds the state tree.\n *\n * **We recommend using `configureStore` from the\n * `@reduxjs/toolkit` package**, which replaces `createStore`:\n * **https://redux.js.org/introduction/why-rtk-is-redux-today**\n *\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\nvar legacy_createStore = createStore;\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n\n\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return \"The \" + argumentName + \" has unexpected type of \\\"\" + kindOf(inputState) + \"\\\". Expected argument to be an object with the following \" + (\"keys: \\\"\" + reducerKeys.join('\", \"') + \"\\\"\");\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return \"Unexpected \" + (unexpectedKeys.length > 1 ? 'keys' : 'key') + \" \" + (\"\\\"\" + unexpectedKeys.join('\", \"') + \"\\\" found in \" + argumentName + \". \") + \"Expected to find one of the known reducer keys instead: \" + (\"\\\"\" + reducerKeys.join('\", \"') + \"\\\". Unexpected keys will be ignored.\");\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ActionTypes.INIT\n    });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(12) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined during initialization. \" + \"If the state passed to the reducer is undefined, you must \" + \"explicitly return the initial state. The initial state may \" + \"not be undefined. If you don't want to set a value for this reducer, \" + \"you can use null instead of undefined.\");\n    }\n\n    if (typeof reducer(undefined, {\n      type: ActionTypes.PROBE_UNKNOWN_ACTION()\n    }) === 'undefined') {\n      throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(13) : \"The slice reducer for key \\\"\" + key + \"\\\" returned undefined when probed with a random type. \" + (\"Don't try to handle '\" + ActionTypes.INIT + \"' or other actions in \\\"redux/*\\\" \") + \"namespace. They are considered private. Instead, you must return the \" + \"current state for any unknown actions, unless it is undefined, \" + \"in which case you must return the initial state, regardless of the \" + \"action type. The initial state may not be undefined, but can be null.\");\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning(\"No reducer provided for key \\\"\" + key + \"\\\"\");\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers); // This is used to make sure we don't warn about the same\n  // keys multiple times.\n\n  var unexpectedKeyCache;\n\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination(state, action) {\n    if (state === void 0) {\n      state = {};\n    }\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (typeof nextStateForKey === 'undefined') {\n        var actionType = action && action.type;\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(14) : \"When called with an action of type \" + (actionType ? \"\\\"\" + String(actionType) + \"\\\"\" : '(unknown type)') + \", the slice reducer for key \\\"\" + _key + \"\\\" returned undefined. \" + \"To ignore an action, you must explicitly return the previous state. \" + \"If you want this reducer to hold no value, you can return null instead of undefined.\");\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    hasChanged = hasChanged || finalReducerKeys.length !== Object.keys(state).length;\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass an action creator as the first argument,\n * and get a dispatch wrapped function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\n\n\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if (typeof actionCreators !== 'object' || actionCreators === null) {\n    throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(16) : \"bindActionCreators expected an object or a function, but instead received: '\" + kindOf(actionCreators) + \"'. \" + \"Did you write \\\"import ActionCreators from\\\" instead of \\\"import * as ActionCreators from\\\"?\");\n  }\n\n  var boundActionCreators = {};\n\n  for (var key in actionCreators) {\n    var actionCreator = actionCreators[key];\n\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      var store = createStore.apply(void 0, arguments);\n\n      var _dispatch = function dispatch() {\n        throw new Error(process.env.NODE_ENV === \"production\" ? formatProdErrorMessage(15) : 'Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(void 0, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, chain)(store.dispatch);\n      return _objectSpread(_objectSpread({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\n\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning('You are currently using minified code outside of NODE_ENV === \"production\". ' + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or setting mode to production in webpack (https://webpack.js.org/concepts/mode/) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { ActionTypes as __DO_NOT_USE__ActionTypes, applyMiddleware, bindActionCreators, combineReducers, compose, createStore, legacy_createStore };\n","export var strictEquality = function strictEquality(a, b) {\n  return a === b;\n};\n/**\n * Determine if two cartesian coordinate offsets are equal\n * @param offsetA\n * @param offsetB\n */\n\nexport function areCoordsEqual(offsetA, offsetB) {\n  if (!offsetA && !offsetB) {\n    return true;\n  } else if (!offsetA || !offsetB) {\n    return false;\n  } else {\n    return offsetA.x === offsetB.x && offsetA.y === offsetB.y;\n  }\n}\n/**\n * Determines if two arrays of items are equal\n * @param a The first array of items\n * @param b The second array of items\n */\n\nexport function areArraysEqual(a, b) {\n  var isEqual = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : strictEquality;\n\n  if (a.length !== b.length) {\n    return false;\n  }\n\n  for (var i = 0; i < a.length; ++i) {\n    if (!isEqual(a[i], b[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { INIT_COORDS, BEGIN_DRAG, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { areCoordsEqual } from '../utils/equality';\nvar initialState = {\n  initialSourceClientOffset: null,\n  initialClientOffset: null,\n  clientOffset: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case INIT_COORDS:\n    case BEGIN_DRAG:\n      return {\n        initialSourceClientOffset: payload.sourceClientOffset,\n        initialClientOffset: payload.clientOffset,\n        clientOffset: payload.clientOffset\n      };\n\n    case HOVER:\n      if (areCoordsEqual(state.clientOffset, payload.clientOffset)) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        clientOffset: payload.clientOffset\n      });\n\n    case END_DRAG:\n    case DROP:\n      return initialState;\n\n    default:\n      return state;\n  }\n}","export var ADD_SOURCE = 'dnd-core/ADD_SOURCE';\nexport var ADD_TARGET = 'dnd-core/ADD_TARGET';\nexport var REMOVE_SOURCE = 'dnd-core/REMOVE_SOURCE';\nexport var REMOVE_TARGET = 'dnd-core/REMOVE_TARGET';\nexport function addSource(sourceId) {\n  return {\n    type: ADD_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function addTarget(targetId) {\n  return {\n    type: ADD_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}\nexport function removeSource(sourceId) {\n  return {\n    type: REMOVE_SOURCE,\n    payload: {\n      sourceId: sourceId\n    }\n  };\n}\nexport function removeTarget(targetId) {\n  return {\n    type: REMOVE_TARGET,\n    payload: {\n      targetId: targetId\n    }\n  };\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { REMOVE_TARGET } from '../actions/registry';\nimport { without } from '../utils/js_utils';\nvar initialState = {\n  itemType: null,\n  item: null,\n  sourceId: null,\n  targetIds: [],\n  dropResult: null,\n  didDrop: false,\n  isSourcePublic: null\n};\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var payload = action.payload;\n\n  switch (action.type) {\n    case BEGIN_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: payload.itemType,\n        item: payload.item,\n        sourceId: payload.sourceId,\n        isSourcePublic: payload.isSourcePublic,\n        dropResult: null,\n        didDrop: false\n      });\n\n    case PUBLISH_DRAG_SOURCE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        isSourcePublic: true\n      });\n\n    case HOVER:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: payload.targetIds\n      });\n\n    case REMOVE_TARGET:\n      if (state.targetIds.indexOf(payload.targetId) === -1) {\n        return state;\n      }\n\n      return _objectSpread(_objectSpread({}, state), {}, {\n        targetIds: without(state.targetIds, payload.targetId)\n      });\n\n    case DROP:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        dropResult: payload.dropResult,\n        didDrop: true,\n        targetIds: []\n      });\n\n    case END_DRAG:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        itemType: null,\n        item: null,\n        sourceId: null,\n        dropResult: null,\n        didDrop: false,\n        isSourcePublic: null,\n        targetIds: []\n      });\n\n    default:\n      return state;\n  }\n}","import { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case ADD_SOURCE:\n    case ADD_TARGET:\n      return state + 1;\n\n    case REMOVE_SOURCE:\n    case REMOVE_TARGET:\n      return state - 1;\n\n    default:\n      return state;\n  }\n}","import { intersection } from './js_utils';\nexport var NONE = [];\nexport var ALL = [];\nNONE.__IS_NONE__ = true;\nALL.__IS_ALL__ = true;\n/**\n * Determines if the given handler IDs are dirty or not.\n *\n * @param dirtyIds The set of dirty handler ids\n * @param handlerIds The set of handler ids to check\n */\n\nexport function areDirty(dirtyIds, handlerIds) {\n  if (dirtyIds === NONE) {\n    return false;\n  }\n\n  if (dirtyIds === ALL || typeof handlerIds === 'undefined') {\n    return true;\n  }\n\n  var commonIds = intersection(handlerIds, dirtyIds);\n  return commonIds.length > 0;\n}","import { BEGIN_DRAG, PUBLISH_DRAG_SOURCE, HOVER, END_DRAG, DROP } from '../actions/dragDrop';\nimport { ADD_SOURCE, ADD_TARGET, REMOVE_SOURCE, REMOVE_TARGET } from '../actions/registry';\nimport { areArraysEqual } from '../utils/equality';\nimport { NONE, ALL } from '../utils/dirtiness';\nimport { xor } from '../utils/js_utils';\nexport function reduce() {\n  var _state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NONE;\n\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case HOVER:\n      break;\n\n    case ADD_SOURCE:\n    case ADD_TARGET:\n    case REMOVE_TARGET:\n    case REMOVE_SOURCE:\n      return NONE;\n\n    case BEGIN_DRAG:\n    case PUBLISH_DRAG_SOURCE:\n    case END_DRAG:\n    case DROP:\n    default:\n      return ALL;\n  }\n\n  var _action$payload = action.payload,\n      _action$payload$targe = _action$payload.targetIds,\n      targetIds = _action$payload$targe === void 0 ? [] : _action$payload$targe,\n      _action$payload$prevT = _action$payload.prevTargetIds,\n      prevTargetIds = _action$payload$prevT === void 0 ? [] : _action$payload$prevT;\n  var result = xor(targetIds, prevTargetIds);\n  var didChange = result.length > 0 || !areArraysEqual(targetIds, prevTargetIds);\n\n  if (!didChange) {\n    return NONE;\n  } // Check the target ids at the innermost position. If they are valid, add them\n  // to the result\n\n\n  var prevInnermostTargetId = prevTargetIds[prevTargetIds.length - 1];\n  var innermostTargetId = targetIds[targetIds.length - 1];\n\n  if (prevInnermostTargetId !== innermostTargetId) {\n    if (prevInnermostTargetId) {\n      result.push(prevInnermostTargetId);\n    }\n\n    if (innermostTargetId) {\n      result.push(innermostTargetId);\n    }\n  }\n\n  return result;\n}","export function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  return state + 1;\n}","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { reduce as dragOffset } from './dragOffset';\nimport { reduce as dragOperation } from './dragOperation';\nimport { reduce as refCount } from './refCount';\nimport { reduce as dirtyHandlerIds } from './dirtyHandlerIds';\nimport { reduce as stateId } from './stateId';\nimport { get } from '../utils/js_utils';\nexport function reduce() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    dirtyHandlerIds: dirtyHandlerIds(state.dirtyHandlerIds, {\n      type: action.type,\n      payload: _objectSpread(_objectSpread({}, action.payload), {}, {\n        prevTargetIds: get(state, 'dragOperation.targetIds', [])\n      })\n    }),\n    dragOffset: dragOffset(state.dragOffset, action),\n    refCount: refCount(state.refCount, action),\n    dragOperation: dragOperation(state.dragOperation, action),\n    stateId: stateId(state.stateId)\n  };\n}","/**\n * Coordinate addition\n * @param a The first coordinate\n * @param b The second coordinate\n */\nexport function add(a, b) {\n  return {\n    x: a.x + b.x,\n    y: a.y + b.y\n  };\n}\n/**\n * Coordinate subtraction\n * @param a The first coordinate\n * @param b The second coordinate\n */\n\nexport function subtract(a, b) {\n  return {\n    x: a.x - b.x,\n    y: a.y - b.y\n  };\n}\n/**\n * Returns the cartesian distance of the drag source component's position, based on its position\n * at the time when the current drag operation has started, and the movement difference.\n *\n * Returns null if no item is being dragged.\n *\n * @param state The offset state to compute from\n */\n\nexport function getSourceClientOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset,\n      initialSourceClientOffset = state.initialSourceClientOffset;\n\n  if (!clientOffset || !initialClientOffset || !initialSourceClientOffset) {\n    return null;\n  }\n\n  return subtract(add(clientOffset, initialSourceClientOffset), initialClientOffset);\n}\n/**\n * Determines the x,y offset between the client offset and the initial client offset\n *\n * @param state The offset state to compute from\n */\n\nexport function getDifferenceFromInitialOffset(state) {\n  var clientOffset = state.clientOffset,\n      initialClientOffset = state.initialClientOffset;\n\n  if (!clientOffset || !initialClientOffset) {\n    return null;\n  }\n\n  return subtract(clientOffset, initialClientOffset);\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { matchesType } from '../utils/matchesType';\nimport { getSourceClientOffset as _getSourceClientOffset, getDifferenceFromInitialOffset as _getDifferenceFromInitialOffset } from '../utils/coords';\nimport { areDirty } from '../utils/dirtiness';\nexport var DragDropMonitorImpl = /*#__PURE__*/function () {\n  function DragDropMonitorImpl(store, registry) {\n    _classCallCheck(this, DragDropMonitorImpl);\n\n    _defineProperty(this, \"store\", void 0);\n\n    _defineProperty(this, \"registry\", void 0);\n\n    this.store = store;\n    this.registry = registry;\n  }\n\n  _createClass(DragDropMonitorImpl, [{\n    key: \"subscribeToStateChange\",\n    value: function subscribeToStateChange(listener) {\n      var _this = this;\n\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        handlerIds: undefined\n      };\n      var handlerIds = options.handlerIds;\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      invariant(typeof handlerIds === 'undefined' || Array.isArray(handlerIds), 'handlerIds, when specified, must be an array of strings.');\n      var prevStateId = this.store.getState().stateId;\n\n      var handleChange = function handleChange() {\n        var state = _this.store.getState();\n\n        var currentStateId = state.stateId;\n\n        try {\n          var canSkipListener = currentStateId === prevStateId || currentStateId === prevStateId + 1 && !areDirty(state.dirtyHandlerIds, handlerIds);\n\n          if (!canSkipListener) {\n            listener();\n          }\n        } finally {\n          prevStateId = currentStateId;\n        }\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"subscribeToOffsetChange\",\n    value: function subscribeToOffsetChange(listener) {\n      var _this2 = this;\n\n      invariant(typeof listener === 'function', 'listener must be a function.');\n      var previousState = this.store.getState().dragOffset;\n\n      var handleChange = function handleChange() {\n        var nextState = _this2.store.getState().dragOffset;\n\n        if (nextState === previousState) {\n          return;\n        }\n\n        previousState = nextState;\n        listener();\n      };\n\n      return this.store.subscribe(handleChange);\n    }\n  }, {\n    key: \"canDragSource\",\n    value: function canDragSource(sourceId) {\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (this.isDragging()) {\n        return false;\n      }\n\n      return source.canDrag(this, sourceId);\n    }\n  }, {\n    key: \"canDropOnTarget\",\n    value: function canDropOnTarget(targetId) {\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var target = this.registry.getTarget(targetId);\n      invariant(target, \"Expected to find a valid target. targetId=\".concat(targetId));\n\n      if (!this.isDragging() || this.didDrop()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n      return matchesType(targetType, draggedItemType) && target.canDrop(this, targetId);\n    }\n  }, {\n    key: \"isDragging\",\n    value: function isDragging() {\n      return Boolean(this.getItemType());\n    }\n  }, {\n    key: \"isDraggingSource\",\n    value: function isDraggingSource(sourceId) {\n      // undefined on initial render\n      if (!sourceId) {\n        return false;\n      }\n\n      var source = this.registry.getSource(sourceId, true);\n      invariant(source, \"Expected to find a valid source. sourceId=\".concat(sourceId));\n\n      if (!this.isDragging() || !this.isSourcePublic()) {\n        return false;\n      }\n\n      var sourceType = this.registry.getSourceType(sourceId);\n      var draggedItemType = this.getItemType();\n\n      if (sourceType !== draggedItemType) {\n        return false;\n      }\n\n      return source.isDragging(this, sourceId);\n    }\n  }, {\n    key: \"isOverTarget\",\n    value: function isOverTarget(targetId) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        shallow: false\n      };\n\n      // undefined on initial render\n      if (!targetId) {\n        return false;\n      }\n\n      var shallow = options.shallow;\n\n      if (!this.isDragging()) {\n        return false;\n      }\n\n      var targetType = this.registry.getTargetType(targetId);\n      var draggedItemType = this.getItemType();\n\n      if (draggedItemType && !matchesType(targetType, draggedItemType)) {\n        return false;\n      }\n\n      var targetIds = this.getTargetIds();\n\n      if (!targetIds.length) {\n        return false;\n      }\n\n      var index = targetIds.indexOf(targetId);\n\n      if (shallow) {\n        return index === targetIds.length - 1;\n      } else {\n        return index > -1;\n      }\n    }\n  }, {\n    key: \"getItemType\",\n    value: function getItemType() {\n      return this.store.getState().dragOperation.itemType;\n    }\n  }, {\n    key: \"getItem\",\n    value: function getItem() {\n      return this.store.getState().dragOperation.item;\n    }\n  }, {\n    key: \"getSourceId\",\n    value: function getSourceId() {\n      return this.store.getState().dragOperation.sourceId;\n    }\n  }, {\n    key: \"getTargetIds\",\n    value: function getTargetIds() {\n      return this.store.getState().dragOperation.targetIds;\n    }\n  }, {\n    key: \"getDropResult\",\n    value: function getDropResult() {\n      return this.store.getState().dragOperation.dropResult;\n    }\n  }, {\n    key: \"didDrop\",\n    value: function didDrop() {\n      return this.store.getState().dragOperation.didDrop;\n    }\n  }, {\n    key: \"isSourcePublic\",\n    value: function isSourcePublic() {\n      return Boolean(this.store.getState().dragOperation.isSourcePublic);\n    }\n  }, {\n    key: \"getInitialClientOffset\",\n    value: function getInitialClientOffset() {\n      return this.store.getState().dragOffset.initialClientOffset;\n    }\n  }, {\n    key: \"getInitialSourceClientOffset\",\n    value: function getInitialSourceClientOffset() {\n      return this.store.getState().dragOffset.initialSourceClientOffset;\n    }\n  }, {\n    key: \"getClientOffset\",\n    value: function getClientOffset() {\n      return this.store.getState().dragOffset.clientOffset;\n    }\n  }, {\n    key: \"getSourceClientOffset\",\n    value: function getSourceClientOffset() {\n      return _getSourceClientOffset(this.store.getState().dragOffset);\n    }\n  }, {\n    key: \"getDifferenceFromInitialOffset\",\n    value: function getDifferenceFromInitialOffset() {\n      return _getDifferenceFromInitialOffset(this.store.getState().dragOffset);\n    }\n  }]);\n\n  return DragDropMonitorImpl;\n}();","export var HandlerRole;\n\n(function (HandlerRole) {\n  HandlerRole[\"SOURCE\"] = \"SOURCE\";\n  HandlerRole[\"TARGET\"] = \"TARGET\";\n})(HandlerRole || (HandlerRole = {}));","var nextUniqueId = 0;\nexport function getNextUniqueId() {\n  return nextUniqueId++;\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nimport { invariant } from '@react-dnd/invariant';\nexport function validateSourceContract(source) {\n  invariant(typeof source.canDrag === 'function', 'Expected canDrag to be a function.');\n  invariant(typeof source.beginDrag === 'function', 'Expected beginDrag to be a function.');\n  invariant(typeof source.endDrag === 'function', 'Expected endDrag to be a function.');\n}\nexport function validateTargetContract(target) {\n  invariant(typeof target.canDrop === 'function', 'Expected canDrop to be a function.');\n  invariant(typeof target.hover === 'function', 'Expected hover to be a function.');\n  invariant(typeof target.drop === 'function', 'Expected beginDrag to be a function.');\n}\nexport function validateType(type, allowArray) {\n  if (allowArray && Array.isArray(type)) {\n    type.forEach(function (t) {\n      return validateType(t, false);\n    });\n    return;\n  }\n\n  invariant(typeof type === 'string' || _typeof(type) === 'symbol', allowArray ? 'Type can only be a string, a symbol, or an array of either.' : 'Type can only be a string or a symbol.');\n}","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from '../actions/registry';\nimport { getNextUniqueId } from '../utils/getNextUniqueId';\nimport { HandlerRole } from '../interfaces';\nimport { validateSourceContract, validateTargetContract, validateType } from '../contracts';\nimport { asap } from '@react-dnd/asap';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      invariant(false, \"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    _defineProperty(this, \"types\", new Map());\n\n    _defineProperty(this, \"dragSources\", new Map());\n\n    _defineProperty(this, \"dropTargets\", new Map());\n\n    _defineProperty(this, \"pinnedSourceId\", null);\n\n    _defineProperty(this, \"pinnedSource\", null);\n\n    _defineProperty(this, \"store\", void 0);\n\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();","import { DragDropManagerImpl } from './classes/DragDropManagerImpl';\nimport { createStore } from 'redux';\nimport { reduce } from './reducers';\nimport { DragDropMonitorImpl } from './classes/DragDropMonitorImpl';\nimport { HandlerRegistryImpl } from './classes/HandlerRegistryImpl';\nexport function createDragDropManager(backendFactory) {\n  var globalContext = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : undefined;\n  var backendOptions = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var debugMode = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  var store = makeStoreInstance(debugMode);\n  var monitor = new DragDropMonitorImpl(store, new HandlerRegistryImpl(store));\n  var manager = new DragDropManagerImpl(store, monitor);\n  var backend = backendFactory(manager, globalContext, backendOptions);\n  manager.receiveBackend(backend);\n  return manager;\n}\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return createStore(reduce, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}"],"sourceRoot":""}