(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[75],{137:function(e,t,n){"use strict";n.r(t);var a=n(6),l=n(9),i=n(0),r=n(20),o=n(68),c=n(10),s=n(103),u=n(507),d=n(182),m=(n(81),n(133),n(69)),f=n(31),b=n(7),j=n.n(b),v=n(62),p=n.n(v),h=n(181),O=n(509),x=n.n(O),g=n(511),y=n(73),_=n(72),N=n(107),E=n(16),S=n(2);x()(p.a);t.default=function(e){var t,n,b,v,p=e.show,O=e.setShow,x=e.detailPage,k=Object(i.useState)([]),D=Object(l.a)(k,2),C=(D[0],D[1],Object(i.useState)([])),U=Object(l.a)(C,2),L=U[0],V=U[1],A=Object(i.useState)(null),B=Object(l.a)(A,2),T=B[0],q=B[1],w=Object(i.useState)([]),F=Object(l.a)(w,2),P=F[0],J=F[1],H=Object(i.useState)(!1),X=Object(l.a)(H,2),I=(X[0],X[1]),M=Object(s.a)().t,Q=Object(r.g)().id,R=Object(E.b)(),W=Object(E.c)((function(e){return e.users})),Y=Object(E.c)((function(e){return e.units})),z=Object(E.c)((function(e){return e.roles})),G=Object(i.useContext)(m.a).colors,K=Object(i.useState)(W.selectedUser),Z=Object(l.a)(K,2),$=Z[0],ee=Z[1],te=Object(g.e)({defaultValues:{username:null===$||void 0===$?void 0:$.username,name:null===$||void 0===$?void 0:$.name,phone:null!==(t=null===$||void 0===$?void 0:$.phone)&&void 0!==t?t:""}}),ne=te.reset,ae=te.control,le=te.setError,ie=te.handleSubmit,re=te.formState.errors,oe=function(){return Object(S.jsxs)(i.Fragment,{children:[Object(S.jsx)(d.a,{}),Object(S.jsxs)(c.q,{className:"mb-0 mt-1 text-white",children:[M("Please Wait"),"..."]})]})};return Object(i.useEffect)((function(){ee(W.selectedUser),0!==Y.data.length||Y.isLoading||(R(Object(_.getUnits)()),ee(W.selectedUser)),0!==(null===z||void 0===z?void 0:z.data.length)||z.isLoading||R(Object(N.getData)()),0!==(null===W||void 0===W?void 0:W.data_employee.length)||W.isLoading_employee||(R(Object(y.getDataEmployee)({length:200})),W.data_employee&&null!==$&&void 0!==$&&$.id_employee&&J(W.data_employee.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))),q(null===$||void 0===$?void 0:$.id_role)}),[]),Object(S.jsx)(c.E,{isOpen:p,toggle:function(){return O(!p)},className:"modal-dialog-centered modal-lg",children:Object(S.jsxs)(u.a,{blocking:(W.isLoadingAddEdit||W.isLoadingDetail)&&!W.selectedUser,loader:Object(S.jsx)(oe,{}),children:[Object(S.jsx)(c.H,{className:"bg-transparent",toggle:function(){return O(!p)}}),Object(S.jsxs)(c.F,{className:"px-sm-5 pt-50 pb-5",children:[Object(S.jsxs)("div",{className:"text-center mb-2",children:[Object(S.jsxs)("h1",{className:"mb-1",children:[M("Edit")," ",M("User Information")]}),Object(S.jsx)("p",{children:M("Updating user details will receive a privacy audit.")})]}),Object(S.jsx)(c.x,{onSubmit:ie((function(e){if(function(e){var t,n=null!==$.member_of?null===$||void 0===$?void 0:$.member_of.map((function(e){return{value:e.id,label:e.name}})):[],a=$.name!==e.name||$.username!==e.username||(null!==(t=$.phone)&&void 0!==t?t:"")!==e.phone||JSON.stringify(n)!==JSON.stringify(L)||T!==$.id_role;return I(!0),a}(e))if(Object.values(e).every((function(e){return e.length>0||""===e})))""===e.phone&&delete e.phone,e.id=null!==Q&&void 0!==Q?Q:$.id,e.id_role=T,e.id_employee=null===P||void 0===P?void 0:P.id,e.member_of=L,R(Object(y.updateUser)(e)).then((function(e){"fulfilled"===e.meta.requestStatus?(O(!p),o.b.success("".concat(M("Successfully Updated Data")),{style:{padding:"16px",color:G.success.main,border:"1px solid ".concat(G.success.main)},iconTheme:{primary:G.success.main}}),x&&R(Object(y.getUser)(Q))):"rejected"===e.meta.requestStatus&&o.b.error(JSON.stringify(e.payload),{style:{padding:"16px",color:G.danger.main,border:"1px solid ".concat(G.danger.main)},iconTheme:{primary:G.danger.main}})}));else for(var t in e){var n;0===(null===(n=e[t])||void 0===n?void 0:n.length)&&le(t,{type:"manual"})}else Object(o.b)("".concat(M("You haven't changed anything")),{icon:"\ud83d\udc4f"})})),children:Object(S.jsxs)(c.Q,{className:"gy-1 pt-75",children:[Object(S.jsxs)(c.s,{md:12,xs:12,children:[Object(S.jsx)(c.D,{className:"form-label",for:"name",children:M("Full Name")}),Object(S.jsx)(g.a,{defaultValue:"",control:ae,id:"name",name:"name",render:function(e){var t=e.field;return Object(S.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{id:"name",placeholder:"John",invalid:re.name&&!0}))}})]}),Object(S.jsxs)(c.s,{md:6,xs:12,children:[Object(S.jsxs)(c.D,{className:"form-label",for:"username",children:[M("Username"),":"]}),Object(S.jsx)(g.a,{defaultValue:"",control:ae,id:"username",name:"username",render:function(e){var t=e.field;return Object(S.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{id:"username",placeholder:"john.doe.007",invalid:re.username&&!0}))}})]}),Object(S.jsxs)(c.s,{md:6,xs:12,children:[Object(S.jsxs)(c.D,{className:"form-label",for:"email",children:[M("Email"),":"]}),Object(S.jsx)(c.A,{type:"email",id:"email",disabled:!0,defaultValue:null===$||void 0===$?void 0:$.email,placeholder:"example@domain.com"})]}),Object(S.jsxs)(c.s,{md:6,xs:12,children:[Object(S.jsx)(c.D,{className:"form-label",for:"phone",children:M("Contact")}),Object(S.jsx)(g.a,{defaultValue:"",control:ae,id:"phone",name:"phone",render:function(e){var t=e.field;return Object(S.jsx)(c.A,Object(a.a)(Object(a.a)({},t),{},{value:(null===$||void 0===$?void 0:$.phone)||"",id:"phone",placeholder:"+62 813 940 10XX X"}))}})]}),Object(S.jsxs)(c.s,{md:6,xs:12,children:[Object(S.jsx)(c.D,{className:"form-label",for:"id_role",children:M("Role")}),Object(S.jsx)(h.a,{id:"id_role",theme:f.q,defaultValue:z.data.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_role)})).map((function(e){return{value:e.id,label:e.name}})),onChange:function(e){q(e.value)},options:z.data.map((function(e){return{value:e.id,label:e.name}})),className:j()("react-select",{"is-invalid":null===T}),classNamePrefix:"select"})]}),Object(S.jsxs)(c.s,{md:12,xs:12,children:[Object(S.jsx)(c.D,{className:"form-label",for:"id_employee",children:M("Employee")}),Object(S.jsx)(h.a,{id:"id_employee",isClearable:!0,isLoading:W.isLoading_employee,theme:f.q,defaultValue:null!==(n=W.data_employee.filter((function(e){return e.id===(null===$||void 0===$?void 0:$.id_employee)})).map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})))&&void 0!==n?n:"",onChange:function(e){var t;t=e,J(Array.isArray(t)?t.map((function(e){return e.value})):[])},options:W.data_employee.map((function(e){var t;return{value:e.id,label:"".concat(e.FirstName," ").concat(null!==(t=null===e||void 0===e?void 0:e.LastName)&&void 0!==t?t:"")}})),className:"react-select",classNamePrefix:"select"})]}),Object(S.jsxs)(c.s,{md:12,xs:12,children:[Object(S.jsx)(c.D,{className:"form-label",for:"member_of",children:M("Unit")}),Object(S.jsx)(h.a,{id:"member_of",isClearable:!1,theme:f.q,closeMenuOnSelect:!1,defaultValue:null!==(b=W.selectedUser)&&void 0!==b&&b.member_of?null===(v=W.selectedUser)||void 0===v?void 0:v.member_of.map((function(e){return{value:e.id,label:e.name}})):[],onChange:function(e){var t;t=e,V(Array.isArray(t)?t.map((function(e){return e.value})):[])},isMulti:!0,options:Y.data.map((function(e){return{value:e.id,label:e.name}})).filter((function(e){return""!==e.value})),className:"react-select",classNamePrefix:"select"})]}),Object(S.jsxs)(c.s,{xs:12,className:"text-center mt-2 pt-50",children:[Object(S.jsx)(c.i,{type:"submit",className:"me-1",color:"primary",children:M("Submit")}),Object(S.jsx)(c.i,{type:"reset",color:"secondary",outline:!0,onClick:function(){ne({username:null===$||void 0===$?void 0:$.username,name:null===$||void 0===$?void 0:$.name}),O(!1)},children:M("Cancel")})]})]})})]})]})})}},509:function(e,t,n){var a=n(131).default,l=n(132).default,i=n(324).default,r=n(155).default,o=n(320).default,c=n(321).default,s=n(184).default;e.exports=function(e,t){"use strict";function n(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var u=n(e),d=n(t),m=[{key:"title",getter:function(e){return e.getTitle()}},{key:"html",getter:function(e){return e.getHtmlContainer()}},{key:"confirmButtonText",getter:function(e){return e.getConfirmButton()}},{key:"denyButtonText",getter:function(e){return e.getDenyButton()}},{key:"cancelButtonText",getter:function(e){return e.getCancelButton()}},{key:"footer",getter:function(e){return e.getFooter()}},{key:"closeButtonHtml",getter:function(e){return e.getCloseButton()}},{key:"iconHtml",getter:function(e){return e.getIcon().querySelector(".swal2-icon-content")}},{key:"loaderHtml",getter:function(e){return e.getLoader()}}],f=function(){};function b(e){function t(e){var t={},n={},a=m.map((function(e){return e.key}));return Object.entries(e).forEach((function(e){var l=s(e,2),i=l[0],r=l[1];a.includes(i)&&u.default.isValidElement(r)?(t[i]=r,n[i]=" "):n[i]=r})),[t,n]}function n(t,n){Object.entries(n).forEach((function(n){var a=s(n,2),l=a[0],i=a[1],r=m.find((function(e){return e.key===l})).getter(e);d.default.render(i,r),t.__mountedDomElements.push(r)}))}function b(e){e.__mountedDomElements.forEach((function(e){d.default.unmountComponentAtNode(e)})),e.__mountedDomElements=[]}return function(d){o(j,d);var m=c(j);function j(){return a(this,j),m.apply(this,arguments)}return l(j,[{key:"_main",value:function(e,a){var l=this;this.__mountedDomElements=[],this.__params=Object.assign({},a,e);var o=t(this.__params),c=s(o,2),u=c[0],d=c[1],m=d.didOpen||f,v=d.didDestroy||f;return i(r(j.prototype),"_main",this).call(this,Object.assign({},d,{didOpen:function(e){n(l,u),m(e)},didDestroy:function(e){v(e),b(l)}}))}},{key:"update",value:function(e){Object.assign(this.__params,e),b(this);var a=t(this.__params),l=s(a,2),o=l[0],c=l[1];i(r(j.prototype),"update",this).call(this,c),n(this,o)}}],[{key:"argsToParams",value:function(t){if(u.default.isValidElement(t[0])||u.default.isValidElement(t[1])){var n={};return["title","html","icon"].forEach((function(e,a){void 0!==t[a]&&(n[e]=t[a])})),n}return e.argsToParams(t)}}]),j}(e)}return b}(n(0),n(36))}}]);
//# sourceMappingURL=75.4da54a4a.chunk.js.map